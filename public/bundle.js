var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let o,s;function l(t,e){return o||(o=document.createElement("a")),o.href=e,t===o.href}function c(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function v(){return m("")}function y(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function w(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}class M{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)h(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(d)}}function S(t){s=t}function T(t){(function(){if(!s)throw new Error("Function called outside component initialization");return s})().$$.on_mount.push(t)}const E=[],A=[],L=[],C=[],R=Promise.resolve();let P=!1;function D(t){L.push(t)}function I(t){C.push(t)}const N=new Set;let k=0;function O(){const t=s;do{for(;k<E.length;){const t=E[k];k++,S(t),z(t.$$)}for(S(null),E.length=0,k=0;A.length;)A.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];N.has(e)||(N.add(e),e())}L.length=0}while(E.length);for(;C.length;)C.pop()();P=!1,N.clear(),S(t)}function z(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const F=new Set;let U;function B(){U={r:0,c:[],p:U}}function H(){U.r||i(U.c),U=U.p}function V(t,e){t&&t.i&&(F.delete(t),t.i(e))}function G(t,e,n,i){if(t&&t.o){if(F.has(t))return;F.add(t),U.c.push((()=>{F.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function W(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function j(t){t&&t.c()}function $(t,n,a,o){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,a),o||D((()=>{const n=l.map(e).filter(r);c?c.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(D)}function q(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(E.push(t),P||(P=!0,R.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,r,a,o,l,c,u,h=[-1]){const p=s;S(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=a?a(e,r.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),m&&X(e,t)),n})):[],f.update(),m=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();r.intro&&V(e.$$.fragment),$(e,r.target,r.anchor,r.customElement),O()}S(p)}class J{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Z=[{key:"eng",name:"English",mobile:"en"},{key:"por",name:"Português",mobile:"pt"},{key:"ara",name:"عَرَبي",mobile:"عَرَ"}],K="State-Based Disinformation Campaigns During Times of Crises",Q="https://ndi.org",tt="info@charitableanalytics.org",et=[[{key:"contains_disinfo",value:"yes"},{key:"harms_women",value:"yes"}]];function nt(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(t){return console.log("Error in isMobile"),!1}}function it(t,e,n){const i=t.slice();return i[3]=e[n],i}function rt(t,e,n){const i=t.slice();return i[3]=e[n],i}function at(t){let e,n,i,r=Z,a=[];for(let e=0;e<r.length;e+=1)a[e]=st(it(t,r,e));return{c(){e=f("p"),e.textContent=`${K}`,n=g(),i=f("li");for(let t=0;t<a.length;t+=1)a[t].c();x(e,"id","title"),x(e,"class","svelte-99jpo8"),x(i,"id","languages"),x(i,"class","svelte-99jpo8")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r);for(let t=0;t<a.length;t+=1)a[t].m(i,null)},p(t,e){if(0&e){let n;for(r=Z,n=0;n<r.length;n+=1){const o=it(t,r,n);a[n]?a[n].p(o,e):(a[n]=st(o),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},d(t){t&&d(e),t&&d(n),t&&d(i),p(a,t)}}}function ot(t){let e,n=Z,i=[];for(let e=0;e<n.length;e+=1)i[e]=lt(rt(t,n,e));return{c(){e=f("li");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"id","languages"),x(e,"class","svelte-99jpo8")},m(t,n){h(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,r){if(0&r){let a;for(n=Z,a=0;a<n.length;a+=1){const o=rt(t,n,a);i[a]?i[a].p(o,r):(i[a]=lt(o),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(t){t&&d(e),p(i,t)}}}function st(e){let n,i,r,a=e[3].name+"";return{c(){n=f("a"),i=m(a),x(n,"href",r=ut(e[3].key)),x(n,"class","svelte-99jpo8")},m(t,e){h(t,n,e),u(n,i)},p:t,d(t){t&&d(n)}}}function lt(e){let n,i,r,a=e[3].mobile+"";return{c(){n=f("a"),i=m(a),x(n,"href",r=ut(e[3].key)),x(n,"class","svelte-99jpo8")},m(t,e){h(t,n,e),u(n,i)},p:t,d(t){t&&d(n)}}}function ct(e){let n,i,r,a,o,s,c;function p(t,e){return t[0]?ot:at}let m=p(e),v=m(e);return{c(){n=f("nav"),i=f("div"),r=f("img"),o=g(),v.c(),x(r,"alt","logo"),l(r.src,a="/assets/ndi-logo.svg")||x(r,"src","/assets/ndi-logo.svg"),x(r,"class","svelte-99jpo8"),x(i,"id","logo"),x(i,"class","svelte-99jpo8"),x(n,"class","svelte-99jpo8")},m(t,a){h(t,n,a),u(n,i),u(i,r),u(n,o),v.m(n,null),s||(c=y(i,"click",e[2]),s=!0)},p(t,[e]){m===(m=p(t))&&v?v.p(t,e):(v.d(1),v=m(t),v&&(v.c(),v.m(n,null)))},i:t,o:t,d(t){t&&d(n),v.d(),s=!1,c()}}}function ut(t){const e=window.location.href;return e.includes("lang=")?`${e.split("?")[0]}?lang=${t}`:`${e}?lang=${t}`}function ht(t,e,n){let{lang:i}=e,{isMobile:r}=e;return t.$$set=t=>{"lang"in t&&n(1,i=t.lang),"isMobile"in t&&n(0,r=t.isMobile)},[r,i,()=>window.open(Q,"_blank")]}class dt extends J{constructor(t){super(),Y(this,t,ht,ct,a,{lang:1,isMobile:0})}}var pt={eng:"Examining State-Based Disinformation Campaigns During Times of Crises",por:"Examinando Campanhas de Desinformação Associadas ao Estado em Tempos de Crise",ara:"دراسة حملات التضليل القائمة على الدولة في أوقات الأزمات"},ft={eng:"Case Studies : Lebanon & Brazil",por:"Estudos de Caso: Líbano e Brasil",ara:""},mt={title:{eng:"Introduction",por:"Introdução",ara:"مقدّمة"},paragraphs:{1:{eng:"In the wake of shocks, people want answers but facts have yet to emerge. As a result, deliberate and spontaneous falsehoods can proliferate with incredible velocity. Forums, digital and non-digital, are plagued with opportunistic and perverse ideologies. In charge of managing the response to the shock, the State and institutions can take steps to inform and guide a concerned public. Opportunistic leaders can leverage their position for power consolidation. They overlook, condone, or amplify false information to undermine the integrity of the information space for their own political advantage. In effect, they employ propaganda to manipulate public opinion. To achieve their goal, they must somehow disguise the deceit in an appealing, disarming veneer that will encourage its intended audience to accept it uncritically. Familiar ideas and widely-held beliefs, including established cultural norms, can provide such “packaging”.",por:"Diante de eventos perturbadores, as pessoas exigem respostas, mesmo que os fatos ainda estejam por vir. O resultado é a rápida proliferação de mentiras, deliberadas e espontâneas. Fóruns, digitais ou não, estão impregnados de ideologias perversas que surfam na onda do momento. Responsáveis pela resposta ao choque, o Estado e as instituições podem agir para informar e orientar um público alarmado. Mas líderes oportunistas podem se utilizar do cargo para tentar se consolidar no poder, negligenciando, tolerando e ecoando informações falsas com o objetivo de minar a integridade do espaço informacional para o próprio proveito político. Em circunstâncias extremas, promovem campanhas para manipular a opinião pública. Para obterem sucesso, buscam maneiras de encobrir a farsa com uma roupagem cativante e sedutora para que ela seja aceita acriticamente pelo público que desejam atingir. Ideias batidas e crenças disseminadas, incluindo normas culturais estabelecidas, podem servir como “verniz”.",ara:"في أعقاب الصدمات، يبحث الناس عادةً عن إجابات لكنّ الحقائق لا تكون قد ظهرت بعد. لذا، يمكن أن تنتشر الأكاذيب الملفّقة عمداً أو عن غير عمد بسرعة الضوء. فلا يخفى على أحد أنّ المنتديات، الرقمية منها وغير الرقمية، مرتع للأيديولوجيات الانتهازية والمنحرفة. في هذا الإطار، تتّخذ الدولة والمؤسسات، المسؤولة عن إدارة آلية الاستجابة للصدمة، خطوات غرضها تزويد الجمهور القلق بالمعلومات وتوجيهه نحوها. لكنّ القادة الانتهازيين قد يستغلون مناصبهم لتكريس سلطتهم. فيتجاهلون المعلومات الخاطئة، أو يتغاضون عنها، أو يضخّمونها بغية تقويض سلامة فضاء المعلومات، واستغلاله لمكاسبهم السياسية الخاصة. فتراهم يستخدمون أساليب البروباغاندا للتلاعب بالرأي العام. لكن سعياً إلى تحقيق هدفهم هذا، يجدون أنفسهم مضطرين إلى إخفاء خداعهم وراء هالةٍ جذابة، ومربكة، لتشجيع جمهورهم المنشود على قبولهم بلا تردد. ويمكن للأفكار المألوفة والمعتقدات الواسعة الانتشار، بما فيها المعايير الثقافية الراسخة، أن تؤمّن لهم مثل هذه “الرزمة المتكاملة“."},2:{eng:"In societies in which there are entrenched perceptions and stereotypes around gender, claims around gender can be used as the delivery mechanism for disinformation. This is the focus of this current study. While much work has been done on disinformation, very little is known about the ways in which gendered norms, perceptions, and stereotypes are deliberately leveraged to enhance the uptake of disinformation, particularly during society-scale shocks during which populations can be the most vulnerable to the spread of such falsehoods. We term this particular brand of deception “gendered disinformation” - and when it is employed intentionally by a particular group (e.g., a political party or civil society organization), we refer to it as “gendered disinformation campaigns.”",por:"Em sociedades imersas em concepções e estereótipos enraizados sobre gênero, declarações com viés de gênero podem ser utilizadas como meio para a desinformação. Esse é o foco deste trabalho. Por mais que a “desinformação” seja um tema recorrente, se sabe muito pouco sobre as formas como normas, concepções e estereótipos relativos a gênero são deliberadamente utilizados para ampliar o consumo de desinformação, particularmente durante choques de dimensão coletiva, que tendem a deixar determinadas populações mais vulneráveis à proliferação de mentiras. Chamamos essa forma particular de farsa de “desinformação de gênero” – e, quando empregada intencionalmente por algum grupo (por exemplo, por um partido político ou uma organização da sociedade civil), caracterizamos como “campanhas de desinformação de gênero”.",ara:"في المجتمعات التي تنتشر فيها التصورات الراسخة والأفكار النمطية المتعلقة بالجندر، يمكن استغلال المزاعم ذات الصلة بالجندر لنشر معلومات مضللة. هذا هو المحور الذي تركّز عليه هذه الدراسة. فرغم إجراء الكثير من الأبحاث حول المعلومات المضللة، لا يُعرف الكثير عن طرق استغلال المعايير والتصورات والأفكار النمطية الجندرية، عمداً، لغرض تعزيز نشر المعلومات المضللة، خاصةً خلال الصدمات التي تنتشر على نطاق المجتمع بأكمله، أي عندما يكون السكان أكثر عرضةً لانتشار هذه الأكاذيب. نطلق على هذا النوع المحدد من الخداع اسم “التضليل الجندري“. وعندما تلجأ إليه مجموعة معيّنة عمداً (مثلاً حزب سياسي أو منظمة مجتمع مدني)، يُعرف باسم “حملات التضليل الجندري“. "},3:{eng:"In this study, undertaken in partnership with the National Democratic Institute (NDI), we, Charitable Analytics International (CAI) seek to establish the prevalence and nature of gendered disinformation campaigns during periods of society-scale shock. To do this, we conduct parallel investigations in two different countries: Brazil and Lebanon. The studies are methodologically identical - which enables us to make comparisons between the two country contexts. Further, our choice of Brazil and Lebanon provides the opportunity to examine disinformation in quite different societies - permitting this first study to provide a broad characterization of disinformation campaigns as they may exist.",por:"Neste estudo, realizado em parceria com o National Democratic Institute (NDI), examinamos a prevalência e a natureza de campanhas de desinformação de gênero durante choques de dimensão coletiva. Para tal, foram realizadas pesquisas paralelas em dois países distintos: Brasil e Líbano. As pesquisas são metodologicamente idênticas, tornando possível comparações entre os dois contextos nacionais. A opção por Brasil e Líbano também se deve à possibilidade de se analisar o fenômeno da desinformação em sociedades bem díspares, permitindo, neste primeiro estudo, uma caracterização abrangente das campanhas de desinformação na prática.",ara:"في هذه الدراسة المنفّذة بالشراكة مع المعهد الديمقراطي الوطني، نسعى إلى تبيّن مدى انتشار حملات التضليل الجندري وطبيعتها، في فترات الصدمات على نطاق المجتمع بأسره. للقيام بذلك، قمنا بإجراء تحقيقين متوازيين في بلدين مختلفين، هما البرازيل ولبنان. تُعتبر الدراستان متطابقتين من حيث المنهجية المعتمدة، مما مكّننا من المقارنة بين بيئتي البلدين. فضلاً عن ذلك، من خلال اختيارنا للبرازيل ولبنان، تمكّنا من تحليل المعلومات المضللة في مجتمعين مختلفين كل الاختلاف- مما أتاح لهذه الدراسة الأولى أن تحدّد المواصفات العامة لحملات التضليل الموجودة."},4:{eng:"The purpose of this focus is to enhance the understanding of what measures are needed to ensure that women are empowered to participate in leadership and decision making in the response to and recovery from shocks, such as pandemics, natural disasters, and conflict/violence. Our hope is that these findings will inform democratic governance program guidance and interventions aimed at countering the impact of these tactics.",por:"O propósito desta análise é contribuir para a formulação das medidas necessárias destinadas a garantir o empoderamento das mulheres para que estas ocupem posições de liderança e comando no enfrentamento e na superação de choques, como pandemias, desastres naturais e situações de conflito/violência. Nossa esperança é que os resultados da pesquisa sejam um alicerce para diretrizes e intervenções de programas de governança democrática dedicados a combater os impactos dessas táticas.",ara:"يهدف محور التركيز هذه الدراسة إلى تحسين فهم الإجراءات المطلوبة لتمكين المرأة وحملها على المشاركة في المناصب القيادية وعمليات صنع القرار في سياق الاستجابة للصدمات والتعافي منها، على غرار الأوبئة، والكوارث الطبيعية، والنزاعات/ العنف. وأملنا أن تساهم هذه النتائج في تحسين برامج الحوكمة الديمقراطية وتدخلاتها، الهادفة إلى مكافحة تأثير هذه التكتيكات. "},5:{eng:"We looked for disinformation campaigns in the places where they are often most widespread and easiest to find: social media. More specifically, we looked at 4 social media platforms – Telegram, Youtube, Facebook and Twitter. In both country contexts, we expected substantial evidence of gendered disinformation. Surprisingly, we discovered that, within the studied time frame, virtually no evidence of gendered disinformation campaigns appeared. Although harmful gendered narratives published by political insiders were discovered, prevalence, and characteristic display of coordination was not. Moreover the use of gendered frames to propagate disinformation was rare.",por:"As campanhas de desinformação foram pesquisadas no local onde são mais disseminadas e fáceis de encontrar: nas redes sociais, particularmente em quatro plataformas - Telegram, Youtube, Facebook e Twitter. A expectativa, em ambos os contextos nacionais, era encontrar diversas evidências de práticas de desinformação de gênero. Surpreendentemente, durante o período de realização da pesquisa, não foi detectada praticamente nenhuma evidência de campanhas de desinformação de gênero. Apesar da identificação de narrativas pejorativas sobre gênero publicadas por integrantes do círculo político, não houve prevalência nem padrões característicos de coesão. Além disso, se mostrou rara a utilização de enquadramentos de gênero na propagação de desinformação.",ara:"بحثنا عن حملات التضليل في الأماكن حيث يكثر انتشارها ويسهل إيجادها بشكل غالب، أي: وسائل التواصل الاجتماعي. على وجه التحديد، درسنا 4 منصات لوسائل التواصل الاجتماعي هي: تيليغرام، يوتيوب، فايسبوك وتويتر. في كلتا بيئتي البلدين، توقّعنا إيجاد أدلة كثيرة جداً على التضليل الجندري. لكننا اكتشفنا، وهنا العجب، أنه خلال فترة الدراسة، لم نعثر على أي دليل البتة على مثل هذه الحملات. ورغم اكتشافنا خطابات مؤذية جندرياً نشرتها دوائر سياسية مطلعة، إلا أننا لم نلحظ أي تفشٍ أو تنسيق مميّز لهذه المنشورات. فضلاً عن ذلك، كان استخدام الأطر الجندرية لنشر المعلومات المضللة نادراً. "},6:{eng:"In the following sections, we provide a detailed account and assessment of this study. First we will discuss the methods we used to conduct the investigation in each study. Then we will discuss results from each country. Finally, we will discuss our findings around gendered disinformation campaigns in each country - as well as what we can learn about these campaigns by comparing and contrasting our observations and findings between the two cultural contexts.",por:"Nas próximas seções, apresentamos, em detalhes, o desenho e o balanço da pesquisa, começando pelos métodos utilizados na realização de cada um dos trabalhos investigativos. Em seguida, discutimos os resultados encontrados em cada estudo de caso. Por fim, analisamos as evidências das campanhas de desinformação de gênero verificadas em cada país, além de extrairmos lições sobre campanhas dessa natureza ao comparar e contrastar as observações e as evidências referentes aos dois contextos culturais.",ara:"في الأقسام التالية، نقدّم سرداً مفصّلاً وتقييماً لهذه الدراسة. سنناقش أولاً الطرق التي استخدمناها لإدارة التحقيق في كلّ دراسة. بعد ذلك، سنناقش النتائج من كل دولة. أخيراً، سنتمعن في النتائج التي توصّلنا إليها بالنسبة إلى حملات التضليل الجندري في كل دولة، فضلاً عن الدروس المستخلصة من هذه الحملات، من خلال إيجاد أوجه الشبه والاختلاف في ملاحظاتنا ونتائجنا بين كلتا البيئتين الثقافيتين."}}},gt={title:{eng:"Gendered Disinformation",por:"Gênero",ara:"المعلومات المضللة جندرياً"},subtitle:{eng:"State-Based Gendered Disinformation",por:"Desinformação de Gênero Associada ao Estado",ara:"التضليل الجندري القائم على الدولة"},paragraphs_1:{1:{eng:"The online space is increasingly crucial for politics. It encourages digital citizenship and democratizes voices, giving women and other marginalized communities a platform. It is cheaper to mount an online campaign, and it maintains physical safety. Unfortunately, that democratization of voices also results in new types of threats against political women. These attacks fall under the umbrella of online violence against women in politics (VAW-P), which <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>encompasses the wide variety of attacks women experience when participating in democratic discourse on the internet.</a>",por:"O espaço virtual é cada vez mais importante na política. Ele incentiva a cidadania digital e democratiza vozes, oferecendo uma plataforma a mulheres e outras comunidades marginalizadas. Promover uma campanha na internet é mais barato, e garante a segurança física. Infelizmente, a democratização de vozes também resulta em novos tipos de ameaça contra mulheres politicamente ativas. Esses ataques estão no âmbito dos atos considerados de violência virtual contra mulheres na política (VAW-P, na sigla em inglês), que <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>engloba a ampla variedade de agressões sofridas por mulheres que participam do debate democrático na internet</a>.",ara:"لا يخفى على أحد أنّ الفضاء الإلكتروني يكتسي أهميةً بالغةً ومتزايدةً في عالم السياسة. فهو يشجع على المواطنة الرقمية وديمقراطية الأصوات، ويمنح النساء وبقية الجماعات المهمّشة منصّةً للتعبير عن أنفسهم. زد على ذلك أنّ تنظيم حملة إلكترونية أرخص ثمناً ويحافظ على السلامة الجسدية. لكنّ دمقرطة الأصوات تؤدي أيضاً، للأسف، إلى ظهور أنواع جديدة من التهديدات ضد النساء العاملات في السياسة. تندرج هذه الهجمات ضمن إطار العنف الإلكتروني الممارس ضد النساء في السياسة، وهو يشمل المجموعة المتنوعة من الهجمات التي تتعرض لها المرأة لدى المشاركة في الخطاب الديمقراطي على الإنترنت."},2:{eng:"The focus of this report is gendered disinformation. Gendered disinformation is a form of online violence against women in politics (VAW-P) that aims to sway political outcomes by discrediting and demeaning women in politics. Gendered disinformation tends to fall into three categories: to scare women into withdrawing from politics; to pull popular support away from politically active women, and to leverage gender norms to modify political outcomes.",por:"Este relatório tem como foco a desinformação de gênero, um tipo de violência virtual contra mulheres na política cujo objetivo é influenciar a cena política por meio da difamação e da depreciação de mulheres na política. A desinformação de gênero tende a se manifestar por meio de três formas: intimidação com o objetivo de forçar a deserção de mulheres da política; cerceamento ao apoio popular de mulheres politicamente ativas; e alavancagem de normas de gênero com a intenção de influenciar o cenário político.",ara:"يركّز هذا التقرير على التضليل الجندري. التضليل الجندري هو شكل من أشكال العنف على الإنترنت ضد المرأة في السياسة، هدفه التأثير على النتائج السياسية من خلال تشويه سمعة النساء في السياسة وتحقيرهن. تندرج هذه المعلومات المضللة إجمالاً ضمن ثلاث فئات: تخويف المرأة لحملها على الانسحاب من السياسة؛ سحب الدعم الشعبي بعيداً عن النساء الناشطات سياسياً، واستغلال المعايير الجندرية لتغيير النتائج السياسية."},3:{eng:"When using scare tactics, online attackers use fake images and stories, often with sexualized components, to demean politically active women and manipulate or stop their political participation. An attack on one woman can often have a ripple effect: when other women, especially young women, see how they are treated online, they may self-censor in case they receive the same treatment. According to a recent report by Plan International, misinformation and disinformation negatively <a target='_blank' href='https://plan-international.org/publications/truth-gap'>affect girl’s online political participation</a>.",por:"Nas táticas de intimidação, os agressores se utilizam de imagens e histórias falsas, geralmente providas de conteúdo sexual, para depreciar mulheres politicamente ativas e manipular ou impedir sua participação política. As ofensas a uma mulher tendem a se propagar em onda: quando outra mulher, geralmente jovem, se depara com esse tipo de tratamento na internet, é possível que ela se autocensure para não sofrer o mesmo tratamento. Segundo um relatório recente da Plan International, informações infundadas e práticas de desinformação <a target='_blank' href='https://plan-international.org/publications/truth-gap'>afetam negativamente a participação política de mulheres na internet</a>.",ara:"عند اختيار تكتيكات التخويف، يستخدم المهاجمون الإلكترونيون صوراً وأخباراً كاذبة، تتضمّن عناصر جنسية في الغالب، بغية تحقير النساء الناشطات سياسياً والتلاعب بمشاركتهنّ السياسية أو إيقافها. فلا يخفى على أحد أنّ التهجم على امرأة واحدة يمكن أن يخلّف تداعيات مضاعفة: فعندما ترى نساء أخريات، خاصة الشابات منهن، كيف تتمّ معاملتهنّ على الشبكة الإلكترونية، قد يلجأن إلى ممارسة الرقابة الذاتية خوفاً من تلقي المعاملة نفسها. وفقاً لتقرير حديث صادر عن منظمة “الخطة الدولية“، تؤثّر المعلومات الخاطئة والمضللة سلباً على مشاركة الفتيات السياسية على الإنترنت."},4:{eng:"Online attackers also use entrenched gender norms to shift support away from political women or the issues they are promoting. These campaigns often focus on a country’s traditional definition of ‘femininity’ and gender roles, sometimes including a religious component, to discredit and undermine women in politics.",por:"Os agressores também fazem uso de normas de gênero enraizadas para tolher o apoio a mulheres politicamente ativas ou às causas defendidas por elas. Essas campanhas geralmente focam no que cada país define tradicionalmente como “feminilidade” e “papéis de gênero”, às vezes com um complemento religioso, para difamar e prejudicar mulheres do campo político.",ara:"بالإضافة إلى ذلك، يستخدم المهاجمون الإلكترونيون المعايير الجندرية الراسخة لسجب الدعم الشعبي بعيداً عن النساء السياسيات أو القضايا التي يروّجن لها. تركّز هذه الحملات غالباً على التعريف التقليدي “للأنوثة“ في بلد ما، والأدوار الجندرية، مضيفةً عنصراً دينياً في بعض الأحيان، بغية تشويه سمعة النساء في السياسة والاستخفاف بهنّ."},5:{eng:"Finally, attackers use gendered disinformation to change political outcomes. This type of campaign targets both women and men, weakening the information space and creating a significantly less democratic space for all participants. The attacks leverage gender norms to influence the public's perceptions of issues and policies that would negatively impact the power of the political elites without this intervention.",por:"Por fim, os agressores utilizam a desinformação de gênero para alterar o cenário político. Esse tipo de campanha é direcionado tanto a mulheres quanto homens, debilitando o espaço informacional e criando um ambiente consideravelmente menos democrático para todos os participantes. Os ataques se apoiam em normas de gênero com o objetivo de influenciar a percepção do público sobre assuntos e políticas que afetariam negativamente o poder das elites políticas.",ara:"أخيراً، يستخدم المهاجمون التضليل الجندري لتغيير النتائج السياسية. يستهدف هذا النوع من الحملات كلاً من النساء والرجال، فيضعف حيّز المعلومات، ويضيّق بدرجة كبيرة جداً المساحة الديمقراطية المتوفرة لجميع المشاركين. تستغل الهجمات المعايير الجندرية للتأثير على تصوّرات الجمهور تجاه القضايا والسياسات التي يمكن أن تؤثّر سلباً على سلطة النخب السياسية إن لم يكن من هذا التدخل."}},paragraphs_2:{6:{eng:"Though gendered disinformation is rampant across all corners of the online space, it reaches a much larger audience when it comes from a state-based source. These include political institutions and organizations, networks of connected organizations, and individual influencers in the political environment. Their attacks are amplified because of their position and they make online spaces much more dangerous for women by combining personal attacks and political motivations. These attacks allow state-based actors to undermine the freedom of the political information space. This ultimately threatens the democratic space and gets amplified beyond the political world. According to NDI’s report on addressing gender and disinformation, “reflecting the permeability of our media environments, this gendered disinformation can, in turn, be used either by non-state-based actors to pursue Online VAW-P to their own ends or be unintentionally amplified by media professionals and citizens who are not able to discern its lack of integrity.” It is also crucial to highlight that state-based gendered disinformation campaigns are not limited to authoritarian states. Countries with strong women’s rights policies and a history of democracy are also susceptible to these types of attacks.",por:"Embora a desinformação de gênero esteja invadindo todos os rincões da internet, a audiência é muito maior quando é uma fonte ligada ao Estado, o que inclui instituições e organizações políticas, redes de organizações interconectadas e influenciadores individuais que participam da cena política. As agressões são amplificadas por causa da posição que esses atores exercem, tornando a redoma digital muito mais perigosa para mulheres ao combinar ofensas pessoais e motivações políticas. Por meio dessas agressões, atores ligados ao Estado acabam comprometendo a liberdade do espaço político informacional, o que, em última instância, ameaça o espaço democrático e reverbera para além do mundo político. De acordo com o relatório do NDI sobre gênero e desinformação, “refletindo a permeabilidade da esfera midiática, a desinformação de gênero pode, por sua vez, ser utilizada para fins particulares por agentes de fora do Estado que queiram praticar atos de violência virtual contra mulheres na política, ou pode ser ecoada involuntariamente por profissionais da mídia e cidadãos incapazes de discernir sobre a falta de integridade do conteúdo”. Também é importante salientar que campanhas de desinformação de gênero associadas ao Estado não se restringem a nações autoritárias. Países com políticas incisivas de defesa da mulher e com um histórico democrático também estão sujeitos a esse tipo de agressão.",ara:"رغم استشراء التضليل الجندري في مختلف أنحاء الفضاء الإلكتروني، إلا أنه يبلغ مسامع جمهور أوسع بكثير عندما يكون صادراً عن جهات تابعة للدولة. ومن جملتها المؤسسات والمنظمات السياسية، وشبكات المنظمات المترابطة، والمؤثّرون الأفراد في البيئة السياسية. وتكون هجماتهم مضخّمة بفضل مراكزهم، فيجعلون المساحات الإلكترونية مكاناً أكثر خطورة بالنسبة إلى النساء، من خلال الجمع بين الهجمات الشخصية والدوافع السياسية. تتيح هذه الهجمات للجهات التابعة للدولة تقويض حرية فضاء المعلومات السياسية. فيهدّد هذا الأمر في نهاية المطاف المساحة الديمقراطية، لا بل يتوسّع حتى يتخطى حدود العالم السياسي. في الواقع، وفقاً لتقرير المعهد الديمقراطي الوطني الذي يعالج مسألة الجندر والمعلومات المضللة، “قد يُستخدم التضليل الجندري، شأنه شأن بيئاتنا الإعلامية الهشة، إما من قبل جهات غير تابعة للدولة لممارسة العنف على الإنترنت ضد المرأة في السياسة، سعياً إلى تحقيق مآربها الخاصة، أو غير غير قصد، من قبل عاملين في المجال الإعلامي ومواطنين غير قادرين على تمييز نقص هذه المعلومات، فيتضخّم أثر التضليل نتيجة لذلك.“ من بالغ الأهمية أيضاً تسليط الضوء على أنّ حملات التضليل الجندري التي تقوم بها الدول لا تقتصر فقط على الدول الاستبدادية. فحتى تلك التي تعتمد سياسات متينة لحقوق المرأة وتاريخاً عريقاً في الديمقراطية معرّضة أيضاً لهذه الأنواع من الهجمات.  "}}},vt={1:{eng:"<p>The objective of this study was to identify and characterize gendered disinformation campaigns on social media that happened around society-scale shocks. Each investigation was carried out in three phases:</p>",por:"<p>O objetivo deste trabalho foi identificar e caracterizar campanhas de desinformação de gênero em redes sociais ocorridas durante choques de dimensão coletiva. Cada braço da pesquisa foi conduzido em três fases:</p>",ara:"<p>هدفت هذه الدراسة إلى تحديد ووصف حملات التضليل الجندري التي تنتشر على وسائل التواصل الاجتماعي خلال فترات الصدمات الممتدة على نطاق المجتمع. أُجري كل تحقيق على ثلاث مراحل:</p>"},2:{eng:"<ol><li>Select a country-specific shock. This would provide the time and context for the content we would collect.</li><li>Collect social media content containing gendered disinformation campaigns pertaining to the shock identified.</li><li>Analyze the social media content to compile a body of evidence and then assess its convergence and impact.</li><ol>",por:"<ol><li>Seleção de uma crise específica de cada país. A partir disso, seria possível determinar o intervalo de tempo e o contexto do conteúdo a ser coletado.</li><li>Coleta de conteúdo das redes sociais contendo campanhas de desinformação de gênero relativas à crise identificada.</li><li>Análise do conteúdo das redes sociais para a compilação de um conjunto de evidências e a posterior avaliação de pontos de convergência e impactos.</li></ol>",ara:"<ol><li>اختيار صدمة خاصة ببلد محدّد. من شأن هذا أن يحدّد الزمن والسياق المتعلقين بالمحتوى الذي سنقوم بجمعه. <i><li>جمع محتوى وسائل التواصل الاجتماعي الذي يتضمّن حملات تضليل جندري ذات صلة بالصدمة التي تمّ تحديدها. <i><li>تحليل محتوى وسائل التواصل الاجتماعي لصياغة مجموعة من الأدلة ثم تقييم مدى تقاربها وتأثيرها.</li></ol>"},3:{eng:"<p>Here we explain the methods employed in these different phases of the project.</p>",por:"<p>Em seguida, apresentamos os métodos empregados nas diferentes fases do projeto.</p>",ara:"<p>نشرح في ما يلي الطرق المستخدمة في مختلف مراحل المشروع.</p>"},4:{eng:"<p>Working with in-country participants, we identified candidate society-scale shocks that had happened within the past year. Our definition of “society-scale shock” was inclusive - we asked participants to identify events that had created prolonged disruption of normal life. From this list, we then collectively identified 1-2 shocks as the focus for the investigation.</p>",por:"<p>Em colaboração com participantes locais, identificamos choques de dimensão coletiva ocorridos no ano anterior à pesquisa, sendo “dimensão coletiva” definido de forma abrangente – pedimos para que os participantes indicassem eventos que afetaram de forma duradoura a vida cotidiana. A partir dessa lista, todos os participantes selecionaram um ou dois eventos como foco da pesquisa.</p>",ara:"<p>لدى العمل مع مشاركين من الدولتين المعنيتين، قمنا بتحديد مجموعة من الصدمات التي حدثت خلال العام الماضي والتي خلّفت تأثيرها على المجتمع برمّته. فاعتمدنا تعريفاً شمولياً “للصدمة على نطاق المجتمع“، وطلبنا من المشاركين تحديد أحداث تسبّبت باختلال مطوّل في مسار الحياة الطبيعية. انطلاقاً من هذه القائمة، حدّدنا، بصورة مشتركة، صدمةً أو اثنتين لتكونا محور التحقيق. </p>"},5:{eng:"<p>The year timeframe was informed by the fact that it can often be difficult to collect social media content further back than a year.</p>",por:"<p>O intervalo de um ano se deve ao fato de ser geralmente difícil coletar conteúdos postados há mais de um ano em redes sociais.</p>",ara:"<p>حصرنا الفترة الزمنية للتحقيق بسنة واحدة، خاصةً وأنه قد يكون من الصعب في معظم الأحيان جمع مواد وسائل التواصل الاجتماعي لفترة تفوق السنة.</p>"},6:{eng:"<p>In this phase, we had to solve a challenging data collection problem. Specifically, we needed a way to find the specific social media accounts and posts that had been weaponized within a vast sea of social media content.</p>",por:"<p>Nessa fase, tivemos que superar um sério obstáculo da coleta de dados. Precisávamos encontrar uma maneira de identificar as contas e as postagens individuais que foram transformadas em instrumentos de guerra em meio à vastidão de conteúdo das redes sociais.</p>",ara:"<p>في هذه المرحلة، كان علينا أن نحلّ مشكلةً عسيرةً تتعلق بجمع البيانات. تحديداً، كان علينا أن نجد طريقةً لإيجاد الحسابات والتدوينات التي تمّ تجنيدها على وسائل التواصل الاجتماعي، في خضمّ بحر شائع من مواد التواصل الاجتماعي.</p>"},7:{eng:"<p>While the rise of AI-powered systems might suggest this a promising avenue for detecting this kind of content at scale, the reality is that automated methods - whether standard keyword-based natural language processing techniques or cutting edge intelligent systems - are presently unable to perform this task. Disinformation identification is an intensely culturally-grounded and nuanced activity: the facts are that, to find, engage with, and understand it, we depend on people who have a deep working knowledge of the culture. The approach we use here involves combining their knowledge and efforts with computational methods. We designed this study with this guiding principle in mind.</p>",por:"<p>Por mais que o desenvolvimento de sistemas alimentados por IA se apresente como uma via promissora para a detecção em larga escala desse tipo de conteúdo, a verdade é que os atuais métodos automatizados – sejam técnicas básicas de processamento de linguagem natural baseadas em palavras-chave ou sistemas inteligentes de ponta – são incapazes de realizar essas tarefas. Identificar conteúdos desinformativos é uma atividade altamente alicerçada na cultura e cheia de sutilezas: o fato é que, para detectar, compreender e interagir com o conteúdo, dependemos de pessoas que tenham um profundo conhecimento sobre a cultura local. Nossa abordagem envolveu a combinação entre o conhecimento e o esforço dos participantes e métodos computacionais. Esse é o fio condutor da pesquisa.</p>",ara:"<p>صحيحٌ أنّ تطور الأنظمة العاملة بالذكاء الاصطناعي قد يكون طريقةً واعدةً للتعرف على هذا النوع من المحتوى على نطاق واسع، لكن يتعذّر على الطرق المؤتمتة القيام بهذه المهمة اليوم، أكانت تقنيات معالجة اللغات الطبيعية القياسية القائمة على الكلمات الرئيسية أم أنظمة ذكية حديثة أخرى. فلا يخفى على أحد أنّ تحديد المعلومات المضللة نشاط دقيق يرتكز، بشكل مكثف، على أسس ثقافية عميقة: بعبارة أخرى، لإيجادها، والتفاعل معها، وفهمها، نعتمد على الأشخاص الذين يتمتعون بإلمام عملي عميق بالثقافة. لذا، تشمل المقاربة التي نستخدمها هنا الجمع بين معارفهم من جهة والاستفادة من آليات الكمبيوتر من جهة أخرى. من هذا المنطلق، صمّمنا هذه الدراسة مع مراعاة هذا المبدأ التوجيهي. </p>"},8:{eng:"<p>The remainder of this subsection is focused on explaining the approach we took to gather a dataset of social media data that provided a representative picture of disinformation campaigns within a particular national-cultural context. At a high-level, this approach involved highly-interactive work with dedicated groups of in-country participants in each of our case-study countries. Data collection consisted of the following steps:</p>",por:"<p>Ao longo desta subseção, tratamos em mais detalhes sobre a abordagem utilizada para que fosse reunida uma quantidade de dados das redes sociais suficientemente representativa das campanhas de desinformação dentro de cada contexto nacional. No geral, essa abordagem envolveu muito trabalho interativo junto a grupos dedicados de participantes locais em cada um dos países selecionados como estudo de caso. A coleta de dados abarcou as seguintes etapas:</p>",ara:"<p>يركّز الجزء المتبقي من هذا القسم الفرعي على شرح المقاربة التي اتّخذناها لتركيب مجموعة من بيانات وسائل التواصل الاجتماعي، وبالتحديد تلك التي تقدّم لمحةً تمثيليةً عن حملات التضليل في بيئة ثقافية وطنية محدّدة. شملت هذه المقاربة، على مستوى عال، نشاطاً على قدر كبير من التفاعلية مع مجموعات مخصّصة من المشاركين المحليين في كلّ من الدولتين اللتين شكلتا محور الدراسة. فشملت عمليات جمع البيانات الخطوات التالية:</p>"},9:{eng:"<ol><li>Orientation workshop: we developed a shared understanding of gendered disinformation, particularly as the participants experienced and observed it in their own media ecosystem.</li><li>Shock timeline workshop: participants dissected the society-scale shock into a series of upsetting events that triggered counter information campaigns by political groups.</li><li>Political network mapping workshop: participants identified social media actors and personalities with political influence. Attention was given to accounts and channels that were known to share disinformation.</li><li>Lexicon building workshop: participants built a list of words that were strongly related to (1) the shock selected for the study, (2) the narratives identified in step #1.</li><li>Automated data collection: using the accounts from step #3 and the lexicon from step #4, we collected social media data that was enriched for gendered disinformation campaign content.</li><li>Data annotation: participants reviewed each post obtained in step #5 and manually coded its disinformation properties - this included flagging those posts which, in fact, were not disinformation.</li></ol>",por:"<ol><li>Workshop de orientação: desenvolvemos uma compreensão partilhada do significado de desinformação de gênero, especialmente conforme os participantes vivenciavam e observavam exemplos na própria redoma midiática.<i><li>Workshop de elaboração de uma cronologia do choque: os participantes dissecaram o choque de dimensão coletiva em uma série de eventos que desencadearam campanhas de contrainformação promovidas por grupos políticos.<i><li>Workshop de mapeamento da rede política: os participantes identificaram atores e personalidades politicamente influentes. Foi dado enfoque às contas e aos canais conhecidos por propagar desinformação.<i><li>Workshop de construção de um léxico: os participantes criaram uma lista de vocábulos intimamente ligados: (1) ao choque selecionado para a pesquisa; (2) às narrativas identificadas na etapa #1.<i><li>Coleta automatizada de dados: a partir das contas da etapa #3 e do léxico da etapa #4, foram coletados dados das redes sociais enriquecidos para conteúdo de campanhas de desinformação de gênero.<i><li>Rotulagem dos dados: os participantes revisaram cada postagem obtida na etapa #5 e codificaram manualmente as propriedades de desinformação contidas – o que incluía a sinalização das postagens que não se enquadravam como desinformação.</li></ol>",ara:"<ol><li>ورشة عمل توجيهية: قمنا بتطوير فهم مشترك للتضليل الجندري، خاصةً في ظل اختبار المشاركين لهذه العملية وملاحظتهم لها في بيئتهم الإعلامية الخاصة. </li><li>ورشة عمل حول التسلسل الزمني للصدمة: في هذه الورشة، فكّك المشاركون الصدمات المنتشرة على نطاق المجتمع إلى سلسلة من الأحداث المزعجة التي حفّزت المجموعات السياسية على شنّ الحملات الإعلامية المضادة. </li><li>ورشة عمل لمسح الشبكات السياسية: حدّد المشاركون الجهات الفاعلة في وسائل التواصل الاجتماعي والشخصيات ذات النفوذ السياسي. وقد اهتمّت هذه الورشة بالحسابات والقنوات التي يُعرف عنها نشر المعلومات المضللة. </li><li>ورشة عمل لإعداد المعجم: أعدّ المشاركون قائمة بالكلمات الوثيقة الصلة (1) بالصدمة محور الدراسة، (2) والسرديات التي تمّ تحديدها في الخطوة 1. </li><li>جمع البيانات بطريقة مؤتمتة: استناداً إلى الحسابات التي تمّ تحديدها في الخطوة 3، والمعجم في الخطوة 4، قمنا بجمع بيانات وسائل التواصل الاجتماعي، بعد مرحلة إثرائها، لغرض تحديد محتوى حملات التضليل الجندري. </li><li>إعداد البيانات وإضافة التعليقات التوضيحية عليها: راجع المشاركون كل تدوينة تمّ تحديدها في الخطوة 5، ثم حدّدوا خصائص التضليل المنوطة بها ورمّزوها يدوياً. شمل ذلك وضع علامة على التدوينات التي لم تتضمّن معلومات مضللة.</li></ol>"},10:{eng:"<p>By the end of step #6, we had produced an annotated dataset of social media posts in which specific features had been identified for each post, allowing analysis in phase 3. Before discussing phase 3, we provide below details about several of the steps above.</p>",por:"<p>Ao final da etapa #6, havíamos constituído uma base de dados rotulados com as postagens das redes sociais, com elementos específicos indicados para cada postagem, o que possibilitou a análise posterior na fase 3. Antes de tratar sobre a fase 3, vamos descrever mais detalhadamente as etapas citadas acima.</p>",ara:"<p>بنهاية الخطوة 6، أصبحت لدينا مجموعة من البيانات المزوّدة بتعليقات توضيحية عن تدوينات وسائل التواصل الاجتماعي، مع تحديد الخاصيات المتعلقة بكل تدوينة، مما أتاح إجراء التحليل في المرحلة 3. لكن قبل مناقشة هذه المرحلة، لا بدّ من التوسّع في بعض الخطوات الواردة أعلاه.</p>"},11:{eng:"<p>Information comes in different flavours. Participants were asked to go on social media and find examples for each type – ref. Throughout the exercise, we provided guidance on how to effectively use the search tool of each social media platform. During this workshop, we collectively identified narratives (both positive and negative) that are established within the culture.</p>",por:"<p>A informação se manifesta de diferentes maneiras. Os participantes foram instruídos a acessar as redes sociais e pesquisar exemplos para cada tipo de informação [missing ref]. Ao longo do exercício, eles receberam treinamento para aprender a usar, de forma efetiva, as ferramentas de busca de cada plataforma. Durante o workshop, foram identificadas, coletivamente, narrativas (positivas e negativas) culturalmente enraizadas.</p>",ara:"<p>تتوفّر المعلومات بأشكال مختلفة. لذلك، طُلب من المشاركين زيارة وسائل التواصل الاجتماعي وإيجاد أمثلة عن كل نوع. خلال هذا التمرين، وجّهنا المشاركين إلى كيفية استخدام أداة البحث بشكل فعال على كلٍّ من منصات وسائل التواصل الاجتماعي. أثناء ورشة العمل، حدّدنا، بشكل جماعي، السرديات المتشابهة (الإيجابية منها والسلبية) الراسخة ضمن الثقافة.</p>"},12:{eng:"<p>Moments of shocks are transient states following an upsetting event – health pandemic, conflict & violence, natural disaster. They shape or instigate new narratives, some of which are disinformative. Participants were tasked with laying out the arborescence of the shock down to the events known to have triggered a counter media response from political groups.</p>",por:"<p>Períodos de choque são estados transitórios decorrentes de eventos perturbadores – pandemias, situações de conflito/violência, desastres naturais. Eles moldam ou fomentam novas narrativas, algumas desinformativas. Os participantes receberam a tarefa de traçar a arborescência do choque até os eventos notabilizados por desencadear postagens contrárias propagadas por grupos políticos.</p>",ara:"<p>لحظات الصدمات هي حالات عابرة تلي حدثاً مزعجاً، كجائحة صحية، أو نزاع وعنف، أو كارثة طبيعية. فتحفّز على قيام سرديات جديدة أو تؤثّر عليها، لكن من هذه السرديات ما يحتوي على معلومات مضللة. في هذا الإطار طُلب من المشاركين رسم شجرة الصدمة للتوسّع، بالتفصيل، في الأحداث المعروف أنها حفّزت بعض المجموعات السياسية على إطلاق آلية إعلامية مضادة.</p>"},13:{eng:"<p>Participants were instructed to go on social media and identify political Twitter accounts, Youtube channels, Telegram, and Facebook public pages – with a focus on accounts probable of disseminating mis-, dis-, strongly opinionated information. As was flagged in earlier sections, many accounts and individuals have political impact without being explicitly political. For example, musicians can advocate for political positions - making them political actors. To this end, we instructed participants to consider three kinds accounts:</p>",por:"<p>Os participantes foram instruídos a acessar as redes sociais e a identificar contas do Twitter, canais do Youtube e perfis públicos do Telegram e do Facebook ligados à política – com ênfase em contas propensas à disseminação de informações infundadas, práticas de desinformação e postagens de forte teor opinativo. Como sinalizado em outras seções, muitas contas e muitos indivíduos causam impacto político sem que sejam explicitamente políticos. Por exemplo, músicos podem defender determinadas posições políticas, se transformando em atores políticos. Com isso em mente, os participantes foram orientados a considerar três tipos de contas</p>",ara:"<p>طُلب من المشاركين زيارة صفحات وسائل التواصل الاجتماعي، فتحديد حسابات سياسية على تويتر، ويوتيوب، وتيليغرام، والصفحات العامة على فايسبوك، مع التركيز على الحسابات المرجّح أن تنشر معلومات خاطئة أو مضللة أو تعكس تعنّتاً شديداً. كما أشير إليه في أقسام سابقة، قد يكون للكثير من الحسابات والأشخاص تأثير سياسي من دون أن يكونوا متمرّسين في السياسة بشكل صريح. على سبيل المثال، يمكن للموسيقيين أن يدافعوا عن مواقف سياسية، مما يجعلهم لاعبين سياسيين. لذا، طلبنا من المشاركين مراعاة ثلاثة أنواع من الحسابات:</p>"},14:{eng:"<p>When identifying accounts, participants included additional information such as political affiliation and level of partisanship.</p>",por:"<p>Durante a identificação das contas, os participantes adicionaram informações extras, como filiação política e grau de partidarismo.</p>",ara:"<p>عند تحديد الحسابات، أدرج المشاركون معلومات إضافية مثل الانتماء السياسي ومستوى التحزّب.</p>"},15:{eng:"<p>The lexicon was built with two parts. The first part contained a list of popular idioms, keywords or expressions that characterized the events shortlisted during step #2. The second part contained a list of words strongly associated with each narrative identified during the step #1 of this phase, particularly terms linked to cultural norms about gender. During the construction of this second component, participants were encouraged to include any and all derogatory language.</p>",por:"<p>O léxico foi subdividido em duas partes: uma lista contendo idiomatismos, palavras-chave ou expressões de amplo conhecimento que caracterizassem os eventos pré-selecionados durante a etapa # 2; e uma segunda lista com palavras intimamente ligadas a cada narrativa identificada durante a etapa #1, particularmente termos associados a normas culturais relativas a gênero. Durante a elaboração desta última, os participantes foram encorajados a inserir toda e qualquer linguagem depreciativa.</p>",ara:"<p>تمّ إعداد معجم بجزءين. تضمّن الجزء الأول قائمةً بالتعابير والكلمات الرئيسية الرائجة التي ميّزت الأحداث المندرجة على القائمة القصيرة في الخطوة 2. أما الجزء الثاني، فتضمّن قائمةً بالكلمات المقترنة اقتراناً شديداً بكل سردية تمّ تحديدها في الخطوة 1 من هذه المرحلة، خاصةً المصطلحات المتعلقة بالمعايير الثقافية عن الجندر. خلال بناء هذا المكوّن الثاني، تمّ تشجيع المشاركين على إدراج أي وكل نوع من الكلمات التحقيرية التي يجدونها.</p>"},16:{eng:"<p>To collect social media posts, we used the official interface provided by each platform and a custom browser-based scraper to go beyond the imposed limits on the number of requests.</p>",por:"<p>Para coletar as postagens das redes sociais, utilizamos a interface oficial fornecida por cada plataforma e uma ferramenta para raspagem de dados baseada em navegador adaptada para que o número máximo de solicitações imposto pudesse ser excedido.</p>",ara:"<p>لجمع تدوينات وسائل التواصل الاجتماعي، استندنا إلى الواجهة الرسمية لكل منصة، فضلاً عن مكشطة مرتكزة على المتصفح لتجاوز الحدود المفروضة على عدد الطلبات. </p>"},17:{eng:"<p>Hundreds of thousands of social media posts were expected to be collected and it takes on average 15 seconds for a human to review a post. We needed to bring this number down to a maximum of 18 hours or 4,320 posts.</p>",por:"<p>A expectativa era coletar centenas de milhares de postagens das redes sociais, e cada postagem leva, em média, 15 segundos para ser revisada por um humano. Foi necessário limitar o montante em 18 horas, ou 4.320 postagens.</p>",ara:"<p>كان من المتوقع جمع مئات آلاف التدوينات على وسائل التواصل الاجتماعي، مع العلم أنّ الإنسان يحتاج إلى 15 ثانية تقريباً لمراجعة تدوينة واحدة. فكان علينا أن نخفّض هذا الرقم إلى 18 ساعة كحدّ أقصى أو 4320 تدوينة.</p>"},18:{eng:"<p>Here are the heuristics used to sift the dataset for posts of interest:</p>",por:"<p>Esta foi a base heurística utilizada na filtragem das postagens de interesse no banco de dados:</p>",ara:"<p>في ما يلي آليات الاستدلال المستخدمة لغربلة مجموعة البيانات من أجل الوصول إلى التدوينات المهمّة بالنسبة إلى هذه الدراسة.</p>"},19:{eng:"<ol><li>Temporal: We only retained documents that were posted within the 3 weeks following each upsetting event identified during step #2.</li><li>Lexical: We only retained documents that contained at least one word from the lexicon developed during step #4.</li><li>Engagement: Low engagement is a proxy for low influence. Posts that received low engagement were ignored.</li></ol>",por:"<ol><li>Escopo temporal: Foram mantidos apenas os documentos postados até três semanas após cada evento perturbador identificado na etapa #2.<li>Escopo lexical: Foram mantidos apenas os documentos que continham, no mínimo, um vocábulo presente no léxico desenvolvido na etapa #4.<li>Engajamento: Baixo engajamento é um indicador de influência limitada. Postagens com baixo engajamento foram ignoradas.</li></ol>",ara:"<ol><li>المقياس الزمني: لم نحتفظ إلا بالوثائق التي نُشرت خلال الأسابيع الثلاثة التي تلت الأحداث المزعجة التي تمّ تحديدها في الخطوة 2. <li>المقياس العجمي: لم نحتفظ إلا بالوثائق التي تضمّنت كلمةً واحدةً على الأقل من المعجم التي تمّ إعداده في الخطوة 4. <li>التفاعل: التفاعل المتدني مرادف للنفوذ المتدني. لذا تمّ تجاهل التدوينات التي لم يتمّ التفاعل معها كثيراً.</li></ol>"},20:{eng:"<p>Annotation of the social media posts was done through a web app and was conducted in chunks. A sample of the posts would be sent to our participants and based on their response, the filters were adjusted to increase their precision. Here are the tuning techniques that were employed.</p>",por:"<p>A rotulagem das postagens das redes sociais foi realizada por meio de um web app e conduzida em blocos. Uma amostra das postagens era enviada aos participantes, e, com base nas observações de cada participante, os filtros eram ajustados para que a precisão fosse ampliada. Estas foram as técnicas de tuning empregadas:</p>",ara:"<p>تمّت إضافة التعليقات التوضيحية على تدوينات وسائل التواصل الاجتماعي من خلال تطبيق على الويب، وتمّ القيام بذلك مجموعةً تلو الأخرى. فكنا نرسل نموذجاً عن التدوينات إلى مشاركينا، وبناءً على إجاباتهم، يتمّ تعديل أدوات التصفية لزيادة مستوى الدقة. في ما يلي تقنيات الضبط والتنقيح التي تمّ استخدامها: </p>"},21:{eng:"<ol><li>Lexicon Pruning: Words that were rarely found in posts of interest and often found in benign posts were removed.</li><li>Lexicon Expansion: TF-IDF applied to posts of interest against benign posts was used to discover important words. Our participants would then decide if they should be added to our lexicon.</li><li>Events: If most or all posts published around an event turned out to be benign, the date window would be adjusted or the event would be removed. If an event generated a lot of posts of interest, we looked at when they spiked and adjusted the date window accordingly.</li><li>Artificial Intelligence: To uncover posts that deserved to be reviewed but did not satisfy our temporal or lexical filters, we used a language classification model. However, it needed to be trained on a sizable collection of posts of interest. Once enough had been gathered, we obtained the best results with a DistilBERT multi-lingual model</li></ol>",por:"<ol><li>Poda Lexical: Palavras raramente encontradas em postagens de interesse e regularmente presentes em postagens favoráveis foram removidas.</li><li>Ampliação Lexical: Aplicação do TF-IDF em postagens de interesse em comparação a postagens favoráveis para detectar palavras importantes, que eram posteriormente incluídas no léxico caso fossem aprovadas pelos participantes da pesquisa.</li><li>Eventos: Se a maioria das ou todas as postagens relativas a um evento se revelassem favoráveis, o intervalo de tempo era ajustado ou o evento era removido. Se um evento gerasse muitas postagens de interesse, identificávamos o pico e ajustávamos o intervalo de tempo de acordo.</li><li>Inteligência Artificial: Para detectar postagens que deveriam ser revisadas, mas que não satisfaziam os filtros temporal e lexical, utilizamos um modelo de classificação linguística, que, não obstante, precisava ser treinado a partir de uma quantidade significativa de postagens de interesse. Uma vez reunido o número suficiente de postagens, obtivemos os resultados mais satisfatórios utilizando um modelo multilíngue DistilBERT.</li></ol>",ara:"<ol><li>تقليم المعجم: تمّ التخلص من الكلمات التي نادراً ما وردت في التدوينات ذات الاهتمام، لكنها تكرّرت كثيراً في التدوينات الحميدة. </li><li>توسيع المعجم: تمّ تطبيق معامل “تي إف- آي دي إف“ على التدوينات ذات الاهتمام ومقارنتها بالتدوينات الحميدة لاكتشاف الكلمات المهمّة. بعد ذلك، تركنا لمشاركينا تقرير إذا ما كان ينبغي إضافة هذه الكلمات إلى معجمنا. </li><li>الأحداث: إذا تبيّن أنّ معظم أو كل التدوينات التي نُشرت بشأن حدث ما هي حميدة، يُعدَّل هامش التاريخ أو يتمّ الاستغناء عن الحدث برمّته. فإذا ولّد حدث ما الكثير من التدوينات ذات الاهتمام، نتحقّق من التاريخ الذي شهدت فيه التدوينات ارتفاعاً حاداً ونعدّل هامش التاريخ بناءً على ذلك. </li><li>الذكاء الاصطناعي: لتحديد التدوينات التي تستحق أن تُراجع لكن التي لا تستوفي شروط مصفاة المقياس الزمني أو المعجمي، استخدمنا نموذجاً لتصنيف اللغة. لكن كان لا بدّ من تدريبه على التعامل مع هذه المجموعة الكبيرة من التدوينات ذات الاهتمام. ما إن تمّ جمع ما يكفي من البيانات، حصلنا على أفضل النتائج من خلال نموذج “DistilBERT“ المتعدد اللغات. </li></ol>"},22:{eng:"<p>We repeated chunk by chunk until the participants reviewed all the posts.</p>",por:"<p>Repetimos a operação bloco por bloco até que todas as postagens fossem revisadas pelos participantes.</p>",ara:"<p>كرّرنا هذه العملية مجموعةً تلو الأخرى إلى أن تمكّن المشاركون من مراجعة التدوينات كافة.</p>"},23:{eng:"<p>Once all the social media posts had been reviewed by the participants, we conducted analysis on 4 fronts.</p>",por:"<p>Após os participantes terem revisado todas as postagens das redes sociais, conduzimos quatro frentes analíticas.</p>",ara:"<p>بعد أن راجع المشاركون كافة تدوينات وسائل التواصل الاجتماعي، أجرينا التحليل على أربعة أصعدة.</p>"},24:{eng:"<ol><li>Belligerents: We looked at who were behind the accounts that published disinformation – their political affiliation, their partisanship.</li><li>Salient narratives: The participants reviewed all the posts that had been flagged as containing gendered disinformation and categorized them by narrative.</li><li>Engagement: Disaggregated by social media platforms, we looked at which posts received the highest engagement.</li><li>Coordination: Here we investigated the extent to which different accounts demonstrated a propensity for each of the narratives. To do so, we assessed whether two accounts published a message about the same topic within a 15 day interval.</li></ol>",por:"<ol><li>Beligerantes: Identificamos quem estava por trás das contas que publicaram desinformação – suas filiações e inclinações políticas.</li><li>Narrativas relevantes: Os participantes revisaram todas as postagens sinalizadas por conter desinformação de gênero e classificaram as postagens por narrativa.</li><li>Engajamento: Desagregando por plataforma, identificamos quais postagens despertaram mais engajamento.</li><li>Coesão: Investigamos em que medida contas distintas demonstraram inclinação para cada uma das narrativas. Para tal, avaliamos se duas contas publicaram mensagens sobre um mesmo tópico dentro de um intervalo de quinze dias.</li></ol>",ara:"<ol><li>الخصوم: تمعنّا في أصحاب الحسابات التي نشرت المعلومات المضللة، وتحديداً في انتمائهم السياسي، والجهة التي يتحزّبون لها. </li><li>السرديات البارزة: راجع المشاركون كافة التدوينات التي تمّ وضع علامة عليها كونها تتضمّن معلومات مضللة جندرياً، ثم صنّفوها وفقاً للسردية. </li><li>التفاعل: تمعنّا في التدوينات التي لقيت القدر الأكبر من التفاعل، بعد تصنيفها وفقاً لمنصات وسائل التواصل الاجتماعي.</li><li>التنسيق: درسنا هنا إلى أي مدى أظهرت الحسابات المختلفة ميلاً إلى كل من السرديات. للقيام بذلك، قمنا بتقييم ما إذا كان حسابان قد نشرا رسالةً عن الموضوع نفسه خلال فترة 15 يوماً.</li></ol>"},title:{eng:"Methods",por:"Metodologia",ara:"الطرق"},subtitle_1:{eng:"Phase 1: Selecting a country-specific shock",por:"Fase 1: Seleção de uma crise específica de cada país",ara:"المرحلة 1: اختيار صدمة خاصة ببلد محدّد"},subtitle_2:{eng:"Phase 2: Collecting social media content",por:"Fase 2: Coleta de conteúdo das redes sociais",ara:"المرحلة 2: جمع محتوى وسائل التواصل الاجتماعي"},subsubtitle_1:{eng:"Step #1 - Orientation",por:"Etapa #1 – Orientação",ara:"الخطوة 1- التوجيه"},subsubtitle_2:{eng:"Step #2 - Timeline",por:"Etapa #2 - Cronologia",ara:"الخطوة 2- التسلسل الزمني"},subsubtitle_3:{eng:"​​Step #3 - Political network mapping",por:"Etapa #3 – Mapeamento da rede política",ara:"الخطوة 3- مسح الشبكات السياسية"},subsubtitle_4:{eng:"Step #4 - Lexicon building",por:"Etapa #4 – Construção de um Léxico",ara:"الخطوة 4- إعداد معجم"},subsubtitle_5:{eng:"Step #5 - Data Collection",por:"Etapa #5 – Coleta de Dados",ara:"الخطوة 5- جمع البيانات"},subsubtitle_6:{eng:"Step #6 - Content Annotation",por:"Etapa #6 – Rotulagem do Conteúdo",ara:"الخطوة 6- إضافة التعليقات التوضيحية على المحتوى"},subtitle_3:{eng:"Phase 3: Analyzing social media content",por:"Fase 3: Análise do conteúdo das redes sociais",ara:"المرحلة 3: تحليل محتوى وسائل التواصل الاجتماعي"}},yt={brazil:{title:{eng:"Brazil",por:"Brasil",ara:"البرازيل"},partners:{eng:"<p>For this case study, we partnered with the <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a>. We seek to establish the prevalence and nature of disinformation campaigns throughout the COVID pandemic.</p>",por:"<p>Nosso parceiro local é o <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a>, um centro independente de pesquisa dedicado ao fomento do debate acadêmico em temas relacionados ao direito e à tecnologia, sobretudo às políticas no campo da internet.</p>",ara:"<p>شريكنا في البرازيل هو <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a> مركز أبحاث مستقل يهدف إلى تعزيز النقاش الأكاديمي حول قضايا متعلقة بالقانون والتكنولوجيا، خاصةً سياسة الإنترنت. </p>"}},lebanon:{title:{eng:"Lebanon",por:"Líbano",ara:"لبنان"},partners:{eng:"<p>For this case study, we partnered with the <a target='_blank' href='https://www.skeyesmedia.org/en/Home'>Skeyes Center for Media and Cultural Freedom</a> and <a target='_blank' href='https://www.abaadmena.org'>ABAAD - Resource Centre for Gender Equality</a>. We seek to establish the prevalence and nature of disinformation campaigns throughout the economic and political crisis.</p>",por:"<p>Trabalhamos com diversas organizações locais, dentre as quais o <a target='_blank' href='https://www.skeyesmedia.org/en/Home'>Skeyes Center for Media and Cultural Freedom</a>, o <a target='_blank' href='https://www.abaadmena.org'>ABAAD - Resource Centre for Gender Equality</a> e o National Democratic Institute.</p>",ara:"<p>عملنا مع عدة منظمات محلية مثل مركز سمير قصير للحريات الإعلامية والثقافية (سكايز)، ومركز الموارد للمساواة بين الجنسين- أبعاد، والمعهد الديمقراطي الوطني.</p>"}},searchbar_1:{eng:"<p>This search bar allows you to find social media posts based on space-separated keywords (click for full results). Some keywords have been removed if they either had low or high occurrence.</p>",por:"<p>Utilizando a barra de pesquisa abaixo, é possível encontrar postagens de redes sociais com base em palavras-chave separadas por espaços (clique para obter todos os resultados). Algumas palavras-chave com poucas ou muitas ocorrências foram descartadas.</p>",ara:"<p>يتيح شريط البحث هذا إيجاد تدوينات وسائل التواصل الاجتماعي بناءً على الكلمات الرئيسية المفصولة بمسافات (انقر للاطلاع على النتائج كاملة). تمّ حذف بعض الكلمات الرئيسية إذا كانت قليلة أو كثيرة الاستعمال.</p>"},searchbar_2:{eng:"<p style='font-style: italic;'>Some posts might have been taken down by the author or the platform since this data collection activity.</p>",por:"<p style='font-style: italic;'>É possível que algumas postagens tenham sido removidas desde o início da coleta de dados.</p>",ara:"<p style='font-style: italic;'>من المحتمل أن تكون بعض التدوينات قد حُذفت منذ أن تمّ جمع هذه البيانات.</p>"},engagement_1:{eng:"<p>Post that did not meet the minimum engagement thresholds were dismissed.</p>",por:"<p>A postagem que não atendeu aos limites mínimos de engajamento foi dispensada.</p>",ara:"<p>تم رفض المشاركة التي لا تلبي الحد الأدنى من المشاركة.</p>"},engagement_2:{eng:"<p>Each post is represented as a square. The color intensity is proportional to the level of engagement.</p>",por:"<p>Cada postagem está representada por um quadrado. A intensidade da cor reflete o nível de engajamento.</p>",ara:"<p>كانت كل تدوينة ممثّلةً على شكل مربّع. وقد عكست كثافة ألوان المربّعات مستوى التفاعل الذي حظيت به كل تدوينة.</p>"},coordination:{eng:"<p>Let's now look at coordination for each of these categories. To do so, we will look at our social media posts using a graph representation.</p>",por:"<p>Agora vamos ver as conexões em cada uma das categorias, ilustradas por meio de uma representação esquemática das postagens coletadas das redes sociais.</p>",ara:"<p>فلنتمعن الآن في مستوى التنسيق بالنسبة إلى كل من هذه الفئات. للقيام بذلك، سندرس تدوينات وسائل التواصل الاجتماعي التي اخترناها استناداً إلى مخططات بيانية.</p>"},subtitle_1:{eng:"Political Network",por:"Rede Política",ara:"الشبكة السياسية"},subtitle_2:{eng:"Dataset",por:"Base de Dados",ara:"مجموعة البيانات"},subtitle_3:{eng:"Filtering",por:"Filtrando",ara:"الفلتره"},subsubtitle_1:{eng:"Lexicon",por:"Léxico",ara:"المعجم"},subsubtitle_2:{eng:"Events",por:"Eventos",ara:"الأحداث"},subsubtitle_3:{eng:"Engagement",por:"Engajamento",ara:"التفاعل"},subtitle_4:{eng:"Results",por:"Resultados",ara:"النتائج"},subsubtitle_4:{eng:"Belligerents",por:"Beligerantes",ara:"الخصوم"},subsubtitle_5:{eng:"Salient Narratives",por:"Narrativas Relevantes",ara:"السرديات البارزة"},subsubtitle_6:{eng:"Engagement",por:"Engajamento",ara:"التفاعل"},subsubtitle_7:{eng:"Coordination",por:"Coesão",ara:"التنسيق"}},xt={title:{eng:"Discussion",por:"Debate",ara:"مناقشة"},paragraphs_1:{1:{eng:"In this study, we investigated the presence of state-based gendered disinformation during periods of societal shock. Lebanon and Brazil were selected as our two case studies. We partnered with in-country civil society organizations and provided training on how to identify disinformation and gendered narratives. Hundreds of thousands of posts were collected from the social media pages of political insiders. Textual, temporal and engagement filtering broached some thousands of posts to be further analyzed. These were distributed to in-country participants for final review. Ultimately, only a few dozen posts were found to support our thesis.",por:"O mote desta pesquisa foi examinar a presença de práticas de desinformação de gênero associadas ao Estado durante choques de dimensão coletiva. O Líbano e o Brasil foram os dois países escolhidos como estudos de caso. Firmamos parcerias com organizações da sociedade civil locais e orientamos como identificar narrativas relativas a gênero e desinformação. Centenas de milhares de postagens de integrantes do círculo político foram coletadas nas redes sociais, e milhares de postagens foram selecionadas com base em linguagem, data de publicação e nível de engajamento e posteriormente distribuídas aos participantes locais para análise. Ao fim, somente algumas poucas dezenas de postagens confirmaram nossas expectativas.",ara:"تحقّقنا في إطار هذه الدراسة في مدى انتشار المعلومات المضللة جندرياً التي تنشرها جهات تابعة للدولة في فترات الصدمات المجتمعية. وقد اخترنا لبنان والبرازيل كدراستي حالة. نسجنا شراكةً مع منظمات مجتمع مدني محلية، ودرّبناها على كيفية تحديد المعلومات المضللة والسرديات الجندرية. تمّ جمع مئات الآلاف من التدوينات من صفحات مواقع التواصل الاجتماعي لدوائر سياسية مطّلعة، ثم تطبيق أدوات نصية، زمنية، وأخرى لقياس مستوى التفاعل بغية غربلة آلاف التدوينات فإخضاعها لمزيد من التحليل. بعد ذلك، تمّ توزيع المجموعة النهائية من التدوينات على المشاركين المحليين لمراجعتها بشكل نهائي. في نهاية الأمر، تبيّن أنّ بضع عشرات من التدوينات فقط تدعم فرضيتنا."},2:{eng:"At the highest level, there are two possible explanations for our findings. One explanation is that active state-based gendered disinformation did occur and the methodology or its implementation failed to detect it. The alternative explanation is that, given the definitions and parameters of the study, the phenomenon did not occur.",por:"No geral, existem duas possíveis explicações para os resultados obtidos. Uma é que a disseminação sistemática de desinformação de gênero associada ao Estado, embora tenha de fato ocorrido, não foi detectada por razões metodológicas ou de implementação. A outra explicação é que, tendo em vista os conceitos e os parâmetros utilizados na pesquisa, o fenômeno não ocorreu.",ara:"على مستوى أعلى، يمكن إيجاد تفسيرين محتملين للنتائج التي توصّلنا إليها. أحدهما هو أنّ الجهات التابعة للدولة أطلقت فعلاً معلومات مضللة جندرياً، لكنّ المنهجية أو طريقة تطبيقها فشلت في كشفها. أما التفسير الآخر، فهي أنه استناداً إلى التعريفات والأنماط التي اعتمدتها الدراسة، فإنّ هذه الظاهرة لم تقع فعلاً."},3:{eng:"Our analysis and experience suggests that of the two options, the second is the most plausible. To substantiate our proposition, here are some precautions that were taken.",por:"Com base na nossa análise e experiência, das duas opções, a mais plausível é a segunda. Para sustentar nossa premissa, seguem algumas precauções que foram tomadas:",ara:"تفترض تحاليلنا وخبراتنا أنّ الخيار الثاني هو الأكثر منطقية. للتثبت من اقتراحنا، اتّخذنا عدة إجراءات وقائية. "}},enumerations:{1:{eng:"Implementation was designed to require the involvement of the in-situ team at each step",por:"A fase de implementação da pesquisa foi concebida visando o envolvimento das equipes locais em cada uma das etapas.",ara:"قصدنا أن يشارك الفريق المحلي في عملية التطبيق عند كل خطوة."},2:{eng:"All tools were designed to be exploratory (high false positive rate) and be narrowed later. The lexicon initially included generic invectives, the shock timeline incorporated minor events, and the political network was expensively mapped.",por:"Todas as ferramentas foram concebidas em caráter exploratório (alta taxa de falso positivo) e posteriormente refinadas. Originalmente, foram incluídos insultos genéricos no léxico, eventos de menor importância foram incorporados à cronologia dos choques e o mapeamento da rede política foi realizado de forma incremental.",ara:"صُمّمت كل الأدوات لتكون استكشافية (أي تسفر عن معدّلات إيجابية خاطئة عالية)، على أن يتمّ تضييق نطاق النتائج لاحقاً. في بادئ الأمر، تضمّن المعجم شتائم عامة، والتسلسل الزمني للصدمة شمل أحداثاً بسيطة، كما أنّ الشبكة السياسية التي رُسمت كانت واسعة جداً."},3:{eng:"We collected and assessed all content generated by the accounts identified in the political mapping exercise during the time period of interest. Recall that these were identified by in-country participants as the most likely public accounts to produce gendered disinformation.",por:"Na fase de mapeamento da rede política, os participantes locais foram instruídos a focar nas contas públicas mais propensas à disseminação de desinformação de gênero.",ara:"قمنا بجمع وتقييم كل المحتويات المنشورة عبر الحسابات التي تمّ تحديدها في تمرين المسح السياسي خلال الفترة ذات الاهتمام. نذكّر بأنّ هذه الحسابات حدّدها المشاركون المحليون باعتبارها الحسابات العامة الأكثر ميلاً إلى نشر معلومات مضللة جندرياً."},4:{eng:"Annotation of the social media posts was sliced into many small increments. Results would be reviewed and tools would be tuned after each completed chunk. Keywords would be added to the lexicon, events to the timeline, and political insiders to the network map.",por:"As observações sobre as postagens das redes sociais foram segmentadas em diversos pequenos adendos. Os resultados foram revisados e as ferramentas otimizadas após a conclusão de cada bloco. O léxico era alimentado com palavras-chave, a cronologia com eventos e o mapa da rede política com integrantes do círculo político.",ara:"عند إضافة التعليقات التوضيحية إلى تدوينات وسائل التواصل الاجتماعي، تمّ تجزيئها إلى عدة أجزاء صغيرة. بعد الانتهاء من كل جزء، تمّت مراجعة النتائج وتعديل الأدوات. كما أضيفت كلمات رئيسية إلى المعجم، وأحداث إلى التسلسل الزمني، ودوائر سياسية مطلعة إلى خريطة الشبكات."},5:{eng:"Flagging a social media post as containing disinformation is a judgement call. To curb subjectivity, a fraction of the posts were sent to multiple independent participants. If they returned different answers, the post would be reviewed by the in-country project managers.",por:"Sinalizar postagens de redes sociais contendo desinformação é uma tarefa interpretativa. Para limitar o aspecto subjetivo, uma fração das postagens era enviada a vários participantes independentes. Se as respostas se mostrassem divergentes, as postagens eram revisadas pelos supervisores de cada equipe local.",ara:"لا يخفى على أحد أنّ إضافة علامة على تدوينة منشورة عبر وسائل التواصل الاجتماعي أمر يعود إلى تقدير المراجع الشخصي. لذا، بهدف التخفيف من التحيّز الذاتي، أُرسلت بضع تدوينات إلى عدة مشاركين مستقلين. فإذا اختلفت إجاباتهم، يتولى مراجعة التدوينة مدراء المشاريع المحليون."},6:{eng:"Posts flagged as containing gendered disinformation were meticulously reviewed by all project stakeholders to distill overarching themes.",por:"As postagens sinalizadas por conterem desinformação de gênero eram meticulosamente revisadas por todos os envolvidos no projeto para que temas genéricos fossem depurados.",ara:"بالنسبة إلى التدوينات التي وُضعت علامة عليها، كونها تتضمّن معلومات مضللة جندرياً، فقد تمّت مراجعتها بدقة من قبل جميع أصحاب المصلحة في المشروع لغربلة المواضيع المحورية. "},7:{eng:"Findings were examined through a qualitative and quantitative lens.",por:"As evidências foram analisadas de uma perspectiva qualitativa e quantitativa.",ara:"تمّ فحص النتائج من زاوية نوعية وكمية."}},paragraphs_2:{4:{eng:"Of equal importance, there are  factors that can explain the absence of gendered disinformation campaigns. Workshops with in-country participants and the data collected surfaced a number of important insights around the information ecosystems of Brazil and Lebanon.",por:"Igualmente importante, alguns fatores podem explicar a inexistência de campanhas de desinformação de gênero. Os workshops realizados com os participantes locais e os dados coletados trouxeram à tona inúmeros insights importantes sobre o ecossistema informacional no Brasil e no Líbano.",ara:"على نفس الدرجة من الأهمية، هناك عوامل أخرى يمكن أن تفسّر عدم وجود حملات للتضليل الجندري. فقد كشفت ورش العمل التي نُظّمت مع المشاركين المحليين، والبيانات التي تمّ جمعها، عن عدد من الأفكار النيّرة المهمة المتعلقة ببيئة المعلومات في البرازيل ولبنان. "},5:{eng:"Strong gendered beliefs are mainstream and are regularly part of the public discourse. However, political elites are careful with the content they post to avoid a public record of overtly gendered attacks.",por:"Crenças enraizadas sobre gênero são hegemônicas e fazem parte constante do debate público. Apesar disso, elites políticas tomam cuidado com o que postam para evitar que tenham o nome manchado por ataques de gênero explícitos.",ara:"لا يخفى على أحد أنّ المعتقدات الجندرية الراسخة معمّمة، وأنها تشكّل جزءاً منتظماً من الخطاب العام. لكنّ النخب السياسية تتعامل بحذر مع المحتوى الذي تنشره لتجنب سجل عام من الهجمات الجندرية الفاضحة."},6:{eng:"Posts had to be disinformative, gendered, from political insiders, generated high engagement, and published no later than a few weeks following each upsetting event. The intersection of all these constraints leads to a narrow research window. The lack of findings can be attributed, in part, to this design.",por:"O conteúdo das postagens precisava ser desinformativo e com viés de gênero, partir do círculo político e gerar engajamento, tudo isso dentro de um intervalo de poucas semanas a partir de cada evento decisivo. A conjunção de todas essas condicionantes limitou o raio da pesquisa, o que pode ter contribuído, em partes, para explicar a falta de evidências.",ara:"كان على التدوينات المأخوذة في الاعتبار أن تتضمّن معلومات مضللة، وأن تكون مرتكزة على الجندر، وصادرة عن جهات سياسية مطّلعة، وأن تحظى بتفاعل عال، وتكون منشورة بعد بضعة أسابيع لا أكثر من كل حدث مزعج. يؤدي تقاطع كل هذه القيود إلى تضييق هامش البحث. في هذا الإطار، يمكن عزو انعدام النتائج، جزئياً، إلى هذا النوع من التصميم."},7:{eng:"Negative gender tropes could also be so deep-seated that they are implied without being textualized. The annotation process could have missed posts due to the lack of explicit gendered language. However, selecting annotators from the studied community should have mitigated this issue.",por:"No Brasil de Bolsonaro e numa sociedade sectária como a libanesa, informações publicadas pela rede política são concebidas como instrumentos de guerra. A população já está habituada e anestesiada. Atores maliciosos podem não escolher qual tipo de farsa utilizar para transmitir a mensagem, quando já não serão mais contidos pelo emprego de propaganda ou mentiras descaradas.",ara:"بالإضافة إلى ذلك، تُعتبر الاستعارات الجندرية السلبية راسخةً جداً لدرجة أنها تكون متضمّنة دونما حاجة بالضرورة إلى ورودها في نصّ. لذا، من المحتمل أن تكون عملية إضافة التعليقات التوضيحية قد أغفلت عن بعض التدوينات بسبب عدم احتوائها على مصطلحات جندرية واضحة. مع ذلك، قد يكون بعض المشاركين الذين شاركوا في هذا التمرين التوضيحي قد خفّفوا من أهمية هذه التدوينات أيضاً. "}}},_t={title:{eng:"Conclusion",por:"Conclusão",ara:"الخاتمة"},paragraphs:{1:{eng:"The results and our confidence in the methodology leads us to conclude that it is unlikely that state-based gendered disinformation campaigns occurred within the studied time frame in both Lebanon and Brazil. Nonetheless, the absence of gendered disinformation campaigns in the two contexts considered here doesn’t discount the possibility that there are disinformation campaigns underway around other narratives, or other gendered disinformation campaigns in other societies.",por:"Os resultados e a nossa confiança na metodologia nos levam a crer que não ocorreram campanhas de desinformação de gênero associadas ao Estado dentro do período considerado tanto no Líbano quanto no Brasil. Apesar da falta de evidências de campanhas de desinformação de gênero em ambos os estudos de caso, não se pode desconsiderar a possibilidade de que campanhas de desinformação envolvendo outras narrativas ou campanhas de desinformação de gênero em outras sociedades estejam em curso.",ara:"أفضت بنا النتائج، وثقتنا بالمنهجية المعتمدة، إلى الاستنتاج أنه من غير المرجح أن تكون حملات التضليل الجندري التي تطلقها جهات تابعة للدولة قد حدثت خلال وقت الدراسة في كل من لبنان والبرازيل. مع ذلك، إنّ غياب هذه الحملات في كلتا البيئتين، ضمن إطار هذه الدراسة، لا ينفي إمكانية شنّ حملات تضليل حول سرديات أخرى، أو حملات تضليل جندري في مجتمعات أخرى."},2:{eng:"We believe the methodology layed out in this report is applicable in other contexts with other themes, account networks, timeframes, languages, and geographies. Its implementation in two dissimilar societies is indicative of its adaptability. We expect our partners in Brazil and Lebanon to build upon it and use it in future work involving the examination of social media.",por:"A metodologia baseada em pesquisa nas redes sociais delineada neste relatório é aplicável a diferentes contextos com outros temas, redes de afinidade, intervalos de tempo, linguagens e geografias. O fato de ter sido implementada em duas sociedades discrepantes é um indicativo de adaptabilidade. Esperamos que ela sirva de base para futuros trabalhos dos nossos parceiros no Brasil e no Líbano envolvendo a análise das plataformas Telegram, Youtube, Facebook e Twitter.",ara:"نعتقد أنه يمكن تطبيق المنهجية المعتمدة في هذا التقرير في بيئات أخرى، وعلى أنواع مختلفة من المواضيع، وشبكات الحسابات، والمهل الزمنية، واللغات، والأماكن الجغرافية. فتطبيقها في مجتمعين مختلفين لدليل على إمكانية تكييفها بحسب السياق. في هذا الإطار، نتوقع من شركائنا في البرازيل ولبنان أن يرتكزوا على هذه المنهجية ويستخدموها في أنشطتهم المقبلة التي تتطلّب دراسة صفحات وسائل التواصل الاجتماعي."}}},bt=[{src:"satire.png",title:{eng:"Satire or Parody",por:"Sátira ou Paródia",ara:""},description:{eng:"The use of humor, irony, exaggeration, or ridicule to expose and criticize. Has the potential to fool.",por:"Uso de humor, ironia, hipérbole ou escárnio para expor e criticar. Tem o potencial de confundir.",ara:""}},{src:"misleading_content.png",title:{eng:"Misleading Content",por:"Conteúdo Enganoso",ara:""},description:{eng:"Misleading use of information to frame an issue or individual",por:"Informações enganosas utilizadas para enquadrar um tema ou um indivíduo.",ara:""}},{src:"imposter_content.png",title:{eng:"Imposter Content",por:"Conteúdo Impostor",ara:""},description:{eng:"When genuine sources are impersonated",por:"Fontes genuínas simuladas por terceiros.",ara:""}},{src:"fabricated_content.png",title:{eng:"Fabricated Content",por:"Conteúdo Fabricado",ara:""},description:{eng:"New content is 100% false, designed to deceive and do harm",por:"Conteúdo publicado que é 100% inventado.",ara:""}},{src:"false_connection.png",title:{eng:"False Connection",por:"Falsa Conexão",ara:""},description:{eng:"When headlines, visuals or captions don't support the content",por:"Quando manchetes, imagens ou legendas não possuem relação com o conteúdo.",ara:""}},{src:"false_context.png",title:{eng:"False Context",por:"Falso Contexto",ara:""},description:{eng:"When genuine content is shared with false contextual information",por:"Conteúdo verdadeiro disseminado em meio a informações contextualizadas falsa.",ara:""}},{src:"manipulated_content.png",title:{eng:"Manipulated Content",por:"Conteúdo Manipulado",ara:""},description:{eng:"When genuine information or imagery is manipulated to deceive",por:"Informações ou imagens genuínas que foram manipuladas para enganar o púbico.",ara:""}}],wt=[{src:"institutions.png",title:{eng:"Institutions",por:"Instituições",ara:""},description:{eng:["Bureaucrats/Technocrats","State Affiliated Financial Actors","Business Leaders (private sector)"],por:["Burocratas/Tecnocratas","Atores Financeiros Ligados ao Estado","Líderes Empresariais (setor privado)"],ara:[]}},{src:"politics.png",title:{eng:"Politics",por:"Política",ara:""},description:{eng:["Elected Officials","Staff of Elected Officials","Political Operatives"],por:["Representantes Eleitos","Assessores de Representantes Eleitos","Operadores Políticos"],ara:[]}},{src:"society.png",title:{eng:"Society",por:"Sociedade",ara:""},description:{eng:["Political Families","Traditional and Religious Leaders","Cultural Leaders"],por:["Famílias Ligadas à Política","Líderes Tradicionais e Religiosos","Líderes Culturais"],ara:[]}}],Mt={eng:"Error",por:"Error",ara:"Error"},St={title:pt,subtitle:ft,introduction:mt,gendereddisinfo:gt,methods:vt,casestudies:yt,discussion:xt,conclusion:_t,information_disorders:bt,political_networks:wt,error:Mt},Tt=Object.freeze({__proto__:null,title:pt,subtitle:ft,introduction:mt,gendereddisinfo:gt,methods:vt,casestudies:yt,discussion:xt,conclusion:_t,information_disorders:bt,political_networks:wt,error:Mt,default:St});function Et(t,e){return function(t){return null!=t&&"string"==typeof t&&""!==t&&Z.map((t=>t.key)).includes(t)}(t)?void 0===Tt[e]?(console.error(`'${e}' does not exist in strings`),"error"):void 0===Tt[e][t]?(console.error(`'${e}' in the '${t}' language does not exist in strings`),"error"):Tt[e][t]:(console.error(`the '${t}' language is not supported`),"error")}function At(e){let n,i,r,a,o,s,l,c,p;return{c(){n=f("div"),i=f("p"),r=m("For inquiries contact us at "),a=f("a"),o=m(tt),s=g(),l=f("p"),c=f("a"),p=m("PGP Public Key"),x(a,"href","mailto:"+tt),x(i,"class","italic svelte-1vi9upr"),w(i,"margin-top","8px"),w(i,"margin-bottom","8px"),x(c,"href","/assets/files/pgp.pub.txt"),x(c,"target","_blank"),w(l,"padding-bottom","8px"),x(l,"class","svelte-1vi9upr"),x(n,"class","svelte-1vi9upr")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(i,a),u(a,o),u(n,s),u(n,l),u(l,c),u(c,p)},p:t,i:t,o:t,d(t){t&&d(n)}}}function Lt(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class Ct extends J{constructor(t){super(),Y(this,t,Lt,At,a,{lang:0})}}
/**
     * @license
     * Copyright 2010-2021 Three.js Authors
     * SPDX-License-Identifier: MIT
     */const Rt=100,Pt=301,Dt=302,It=306,Nt=1e3,kt=1001,Ot=1002,zt=1003,Ft=1006,Ut=1008,Bt=1009,Ht=1012,Vt=1014,Gt=1015,Wt=1016,jt=1020,$t=1022,qt=1023,Xt=1026,Yt=1027,Jt=2300,Zt=2301,Kt=2302,Qt=2400,te=2401,ee=2402,ne=2500,ie=3e3,re=3001,ae=3007,oe=3002,se=7680,le=35044,ce=35048,ue="300 es";class he{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}let de=1234567;const pe=Math.PI/180,fe=180/Math.PI,me=[];for(let t=0;t<256;t++)me[t]=(t<16?"0":"")+t.toString(16);const ge="undefined"!=typeof crypto&&"randomUUID"in crypto;function ve(){if(ge)return crypto.randomUUID().toUpperCase();const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(me[255&t]+me[t>>8&255]+me[t>>16&255]+me[t>>24&255]+"-"+me[255&e]+me[e>>8&255]+"-"+me[e>>16&15|64]+me[e>>24&255]+"-"+me[63&n|128]+me[n>>8&255]+"-"+me[n>>16&255]+me[n>>24&255]+me[255&i]+me[i>>8&255]+me[i>>16&255]+me[i>>24&255]).toUpperCase()}function ye(t,e,n){return Math.max(e,Math.min(n,t))}function xe(t,e){return(t%e+e)%e}function _e(t,e,n){return(1-n)*t+n*e}function be(t){return 0==(t&t-1)&&0!==t}function we(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Me=Object.freeze({__proto__:null,DEG2RAD:pe,RAD2DEG:fe,generateUUID:ve,clamp:ye,euclideanModulo:xe,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:_e,damp:function(t,e,n,i){return _e(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(xe(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(de=t%2147483647),de=16807*de%2147483647,(de-1)/2147483646},degToRad:function(t){return t*pe},radToDeg:function(t){return t*fe},isPowerOfTwo:be,ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:we,setQuaternionFromProperEuler:function(t,e,n,i,r){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((e+i)/2),u=o((e+i)/2),h=a((e-i)/2),d=o((e-i)/2),p=a((i-e)/2),f=o((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*d,s*c);break;case"YZY":t.set(l*d,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*d,s*u,s*c);break;case"XZX":t.set(s*u,l*f,l*p,s*c);break;case"YXY":t.set(l*p,s*u,l*f,s*c);break;case"ZYZ":t.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class Se{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Se.prototype.isVector2=!0;class Te{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,a,o,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],_=i[2],b=i[5],w=i[8];return r[0]=a*f+o*v+s*_,r[3]=a*m+o*y+s*b,r[6]=a*g+o*x+s*w,r[1]=l*f+c*v+u*_,r[4]=l*m+c*y+u*b,r[7]=l*g+c*x+u*w,r[2]=h*f+d*v+p*_,r[5]=h*m+d*y+p*b,r[8]=h*g+d*x+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8];return e*a*c-e*o*l-n*r*c+n*o*s+i*r*l-i*a*s}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=c*a-o*l,h=o*s-c*r,d=l*r-a*s,p=e*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(i*l-c*n)*f,t[2]=(o*n-i*a)*f,t[3]=h*f,t[4]=(c*e-i*s)*f,t[5]=(i*r-o*e)*f,t[6]=d*f,t[7]=(n*s-l*e)*f,t[8]=(a*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,a,o){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*l,i[6]=e*o+n*c,i[1]=-n*r+e*s,i[4]=-n*a+e*l,i[7]=-n*o+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Ee(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function Ae(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Le(t,e=0){let n=3735928559^e,i=1103547991^e;for(let e,r=0;r<t.length;r++)e=t.charCodeAt(r),n=Math.imul(n^e,2654435761),i=Math.imul(i^e,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}let Ce;Te.prototype.isMatrix3=!0;class Re{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ce&&(Ce=Ae("canvas")),Ce.width=t.width,Ce.height=t.height;const n=Ce.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ce}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let Pe=0;class De extends he{constructor(t=De.DEFAULT_IMAGE,e=De.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,o=1023,s=1009,l=1,c=3e3){super(),Object.defineProperty(this,"id",{value:Pe++}),this.uuid=ve(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Te,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=ve()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Ie(i[t].image)):e.push(Ie(i[t]))}else e=Ie(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Nt:t.x=t.x-Math.floor(t.x);break;case kt:t.x=t.x<0?0:1;break;case Ot:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Nt:t.y=t.y-Math.floor(t.y);break;case kt:t.y=t.y<0?0:1;break;case Ot:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function Ie(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Re.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}De.DEFAULT_IMAGE=void 0,De.DEFAULT_MAPPING=300,De.prototype.isTexture=!0;class Ne{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const a=.01,o=.1,s=t.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,x=(u+f)/4,_=(p+m)/4;return t>s&&t>v?t<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=y/n,r=x/n):s>v?s<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=y/i,r=_/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=x/r,i=_/r),this.set(n,i,r,e),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ne.prototype.isVector4=!0;class ke extends he{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Ne(0,0,t,e),this.scissorTest=!1,this.viewport=new Ne(0,0,t,e),this.texture=new De(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ft,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ke.prototype.isWebGLRenderTarget=!0;(class extends ke{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=i.clone()}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Oe extends ke{constructor(t,e,n){super(t,e,n),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}Oe.prototype.isWebGLMultisampleRenderTarget=!0;class ze{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,a,o){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(0===o)return t[e+0]=s,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===o)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(u!==f||s!==h||l!==d||c!==p){let t=1-o;const e=s*h+l*d+c*p+u*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,e*n);t=Math.sin(t*a)/r,o=Math.sin(o*a)/r}const r=o*n;if(s=s*t+h*r,l=l*t+d*r,c=c*t+p*r,u=u*t+f*r,t===1-o){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,a){const o=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[a],h=r[a+1],d=r[a+2],p=r[a+3];return t[e]=o*p+c*u+s*d-l*h,t[e+1]=s*p+c*h+l*u-o*d,t[e+2]=l*p+c*d+o*h-s*u,t[e+3]=c*p-o*u-s*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,a=t._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],o=e[5],s=e[9],l=e[2],c=e[6],u=e[10],h=n+o+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(a-i)*t}else if(n>o&&n>u){const t=2*Math.sqrt(1+n-o-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(r+l)/t}else if(o>u){const t=2*Math.sqrt(1+o-n-u);this._w=(r-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-o);this._w=(a-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ye(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+a*o+i*l-r*s,this._y=i*c+a*s+r*o-n*l,this._z=r*c+a*l+n*s-i*o,this._w=a*c-n*o-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,a=this._w;let o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const s=1-o*o;if(s<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}ze.prototype.isQuaternion=!0;class Fe{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Be.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Be.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,c=s*n+o*e-r*i,u=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=l*s+h*-r+c*-o-u*-a,this.y=c*s+h*-a+u*-r-l*-o,this.z=u*s+h*-o+l*-a-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Ue.copy(this).projectOnVector(t),this.sub(Ue)}reflect(t){return this.sub(Ue.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(ye(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Fe.prototype.isVector3=!0;const Ue=new Fe,Be=new ze;class He{constructor(t=new Fe(1/0,1/0,1/0),e=new Fe(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],c=t[s+1],u=t[s+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,a,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),c=t.getY(s),u=t.getZ(s);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,a,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ge.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),We.copy(e.boundingBox),We.applyMatrix4(t.matrixWorld),this.union(We));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ge),Ge.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ze),Ke.subVectors(this.max,Ze),je.subVectors(t.a,Ze),$e.subVectors(t.b,Ze),qe.subVectors(t.c,Ze),Xe.subVectors($e,je),Ye.subVectors(qe,$e),Je.subVectors(je,qe);let e=[0,-Xe.z,Xe.y,0,-Ye.z,Ye.y,0,-Je.z,Je.y,Xe.z,0,-Xe.x,Ye.z,0,-Ye.x,Je.z,0,-Je.x,-Xe.y,Xe.x,0,-Ye.y,Ye.x,0,-Je.y,Je.x,0];return!!en(e,je,$e,qe,Ke)&&(e=[1,0,0,0,1,0,0,0,1],!!en(e,je,$e,qe,Ke)&&(Qe.crossVectors(Xe,Ye),e=[Qe.x,Qe.y,Qe.z],en(e,je,$e,qe,Ke)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ge.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Ge).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ve[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ve[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ve[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ve[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ve[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ve[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ve[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ve[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ve)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}He.prototype.isBox3=!0;const Ve=[new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe],Ge=new Fe,We=new He,je=new Fe,$e=new Fe,qe=new Fe,Xe=new Fe,Ye=new Fe,Je=new Fe,Ze=new Fe,Ke=new Fe,Qe=new Fe,tn=new Fe;function en(t,e,n,i,r){for(let a=0,o=t.length-3;a<=o;a+=3){tn.fromArray(t,a);const o=r.x*Math.abs(tn.x)+r.y*Math.abs(tn.y)+r.z*Math.abs(tn.z),s=e.dot(tn),l=n.dot(tn),c=i.dot(tn);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const nn=new He,rn=new Fe,an=new Fe,on=new Fe;class sn{constructor(t=new Fe,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):nn.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){on.subVectors(t,this.center);const e=on.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(on.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return an.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(rn.copy(t.center).add(an)),this.expandByPoint(rn.copy(t.center).sub(an)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ln=new Fe,cn=new Fe,un=new Fe,hn=new Fe,dn=new Fe,pn=new Fe,fn=new Fe;class mn{constructor(t=new Fe,e=new Fe(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ln)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ln.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ln.copy(this.direction).multiplyScalar(e).add(this.origin),ln.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){cn.copy(t).add(e).multiplyScalar(.5),un.copy(e).sub(t).normalize(),hn.copy(this.origin).sub(cn);const r=.5*t.distanceTo(e),a=-this.direction.dot(un),o=hn.dot(this.direction),s=-hn.dot(un),l=hn.lengthSq(),c=Math.abs(1-a*a);let u,h,d,p;if(c>0)if(u=a*s-o,h=a*o-s,p=r*c,u>=0)if(h>=-p)if(h<=p){const t=1/c;u*=t,h*=t,d=u*(u+a*h+2*o)+h*(a*u+h+2*s)+l}else h=r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-a*r+o)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(a*r+o)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=a>0?-r:r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(un).multiplyScalar(h).add(cn),d}intersectSphere(t,e){ln.subVectors(t.center,this.origin);const n=ln.dot(this.direction),i=ln.dot(ln)-n*n,r=t.radius*t.radius;if(i>r)return null;const a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,a=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,a=(t.min.y-h.y)*c),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(o=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(o=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,ln)}intersectTriangle(t,e,n,i,r){dn.subVectors(e,t),pn.subVectors(n,t),fn.crossVectors(dn,pn);let a,o=this.direction.dot(fn);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}hn.subVectors(this.origin,t);const s=a*this.direction.dot(pn.crossVectors(hn,pn));if(s<0)return null;const l=a*this.direction.dot(dn.cross(hn));if(l<0)return null;if(s+l>o)return null;const c=-a*hn.dot(fn);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class gn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,a,o,s,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gn).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/vn.setFromMatrixColumn(t,0).length(),r=1/vn.setFromMatrixColumn(t,1).length(),a=1/vn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=a*c,n=a*u,i=o*c,r=o*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=a*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*o,e[4]=i*o-n,e[8]=a*l,e[1]=a*u,e[5]=a*c,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=a*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*o,e[4]=-a*u,e[8]=i+n*o,e[1]=n+i*o,e[5]=a*c,e[9]=r-t*o,e[2]=-a*l,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){const t=a*c,n=a*u,i=o*c,r=o*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){const t=a*s,n=a*l,i=o*s,r=o*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=a*c,e[9]=-o*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=a*s,n=a*l,i=o*s,r=o*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=a*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=o*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(xn,t,_n)}lookAt(t,e,n){const i=this.elements;return Mn.subVectors(t,e),0===Mn.lengthSq()&&(Mn.z=1),Mn.normalize(),bn.crossVectors(n,Mn),0===bn.lengthSq()&&(1===Math.abs(n.z)?Mn.x+=1e-4:Mn.z+=1e-4,Mn.normalize(),bn.crossVectors(n,Mn)),bn.normalize(),wn.crossVectors(Mn,bn),i[0]=bn.x,i[4]=wn.x,i[8]=Mn.x,i[1]=bn.y,i[5]=wn.y,i[9]=Mn.y,i[2]=bn.z,i[6]=wn.z,i[10]=Mn.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],_=n[15],b=i[0],w=i[4],M=i[8],S=i[12],T=i[1],E=i[5],A=i[9],L=i[13],C=i[2],R=i[6],P=i[10],D=i[14],I=i[3],N=i[7],k=i[11],O=i[15];return r[0]=a*b+o*T+s*C+l*I,r[4]=a*w+o*E+s*R+l*N,r[8]=a*M+o*A+s*P+l*k,r[12]=a*S+o*L+s*D+l*O,r[1]=c*b+u*T+h*C+d*I,r[5]=c*w+u*E+h*R+d*N,r[9]=c*M+u*A+h*P+d*k,r[13]=c*S+u*L+h*D+d*O,r[2]=p*b+f*T+m*C+g*I,r[6]=p*w+f*E+m*R+g*N,r[10]=p*M+f*A+m*P+g*k,r[14]=p*S+f*L+m*D+g*O,r[3]=v*b+y*T+x*C+_*I,r[7]=v*w+y*E+x*R+_*N,r[11]=v*M+y*A+x*P+_*k,r[15]=v*S+y*L+x*D+_*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*s*u-i*l*u-r*o*h+n*l*h+i*o*d-n*s*d)+t[7]*(+e*s*d-e*l*h+r*a*h-i*a*d+i*l*c-r*s*c)+t[11]*(+e*l*u-e*o*d-r*a*u+n*a*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*s*u+e*o*h+i*a*u-n*a*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*l-f*h*l+f*s*d-o*m*d-u*s*g+o*h*g,y=p*h*l-c*m*l-p*s*d+a*m*d+c*s*g-a*h*g,x=c*f*l-p*u*l+p*o*d-a*f*d-c*o*g+a*u*g,_=p*u*s-c*f*s-p*o*h+a*f*h+c*o*m-a*u*m,b=e*v+n*y+i*x+r*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=v*w,t[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*w,t[2]=(o*m*r-f*s*r+f*i*l-n*m*l-o*i*g+n*s*g)*w,t[3]=(u*s*r-o*h*r-u*i*l+n*h*l+o*i*d-n*s*d)*w,t[4]=y*w,t[5]=(c*m*r-p*h*r+p*i*d-e*m*d-c*i*g+e*h*g)*w,t[6]=(p*s*r-a*m*r-p*i*l+e*m*l+a*i*g-e*s*g)*w,t[7]=(a*h*r-c*s*r+c*i*l-e*h*l-a*i*d+e*s*d)*w,t[8]=x*w,t[9]=(p*u*r-c*f*r-p*n*d+e*f*d+c*n*g-e*u*g)*w,t[10]=(a*f*r-p*o*r+p*n*l-e*f*l-a*n*g+e*o*g)*w,t[11]=(c*o*r-a*u*r-c*n*l+e*u*l+a*n*d-e*o*d)*w,t[12]=_*w,t[13]=(c*f*i-p*u*i+p*n*h-e*f*h-c*n*m+e*u*m)*w,t[14]=(p*o*i-a*f*i-p*n*s+e*f*s+a*n*m-e*o*m)*w,t[15]=(a*u*i-c*o*i+c*n*s-e*u*s-a*n*h+e*o*h)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,c=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,c*o+n,c*s-i*a,0,l*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,c=a+a,u=o+o,h=r*l,d=r*c,p=r*u,f=a*c,m=a*u,g=o*u,v=s*l,y=s*c,x=s*u,_=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*_,i[1]=(d+x)*_,i[2]=(p-y)*_,i[3]=0,i[4]=(d-x)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=vn.set(i[0],i[1],i[2]).length();const a=vn.set(i[4],i[5],i[6]).length(),o=vn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],yn.copy(this);const s=1/r,l=1/a,c=1/o;return yn.elements[0]*=s,yn.elements[1]*=s,yn.elements[2]*=s,yn.elements[4]*=l,yn.elements[5]*=l,yn.elements[6]*=l,yn.elements[8]*=c,yn.elements[9]*=c,yn.elements[10]*=c,e.setFromRotationMatrix(yn),n.x=r,n.y=a,n.z=o,this}makePerspective(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,a){const o=this.elements,s=1/(e-t),l=1/(n-i),c=1/(a-r),u=(e+t)*s,h=(n+i)*l,d=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}gn.prototype.isMatrix4=!0;const vn=new Fe,yn=new gn,xn=new Fe(0,0,0),_n=new Fe(1,1,1),bn=new Fe,wn=new Fe,Mn=new Fe,Sn=new gn,Tn=new ze;class En{constructor(t=0,e=0,n=0,i=En.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(ye(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ye(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(ye(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-ye(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(ye(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-ye(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Sn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Sn,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Tn.setFromEuler(this),this.setFromQuaternion(Tn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Fe(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}En.prototype.isEuler=!0,En.DefaultOrder="XYZ",En.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class An{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Ln=0;const Cn=new Fe,Rn=new ze,Pn=new gn,Dn=new Fe,In=new Fe,Nn=new Fe,kn=new ze,On=new Fe(1,0,0),zn=new Fe(0,1,0),Fn=new Fe(0,0,1),Un={type:"added"},Bn={type:"removed"};class Hn extends he{constructor(){super(),Object.defineProperty(this,"id",{value:Ln++}),this.uuid=ve(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DefaultUp.clone();const t=new Fe,e=new En,n=new ze,i=new Fe(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new gn},normalMatrix:{value:new Te}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=Hn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new An,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Rn.setFromAxisAngle(t,e),this.quaternion.multiply(Rn),this}rotateOnWorldAxis(t,e){return Rn.setFromAxisAngle(t,e),this.quaternion.premultiply(Rn),this}rotateX(t){return this.rotateOnAxis(On,t)}rotateY(t){return this.rotateOnAxis(zn,t)}rotateZ(t){return this.rotateOnAxis(Fn,t)}translateOnAxis(t,e){return Cn.copy(t).applyQuaternion(this.quaternion),this.position.add(Cn.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(On,t)}translateY(t){return this.translateOnAxis(zn,t)}translateZ(t){return this.translateOnAxis(Fn,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Pn.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Dn.copy(t):Dn.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),In.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pn.lookAt(In,Dn,this.up):Pn.lookAt(Dn,In,this.up),this.quaternion.setFromRotationMatrix(Pn),i&&(Pn.extractRotation(i.matrixWorld),Rn.setFromRotationMatrix(Pn),this.quaternion.premultiply(Rn.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Un)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Bn)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Bn)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Pn.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Pn.multiply(t.parent.matrixWorld)),t.applyMatrix4(Pn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(In,t,Nn),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(In,kn,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=a(t.geometries),i=a(t.materials),r=a(t.textures),o=a(t.images),s=a(t.shapes),l=a(t.skeletons),c=a(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=i,n;function a(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Hn.DefaultUp=new Fe(0,1,0),Hn.DefaultMatrixAutoUpdate=!0,Hn.prototype.isObject3D=!0;const Vn=new Fe,Gn=new Fe,Wn=new Fe,jn=new Fe,$n=new Fe,qn=new Fe,Xn=new Fe,Yn=new Fe,Jn=new Fe,Zn=new Fe;class Kn{constructor(t=new Fe,e=new Fe,n=new Fe){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Vn.subVectors(t,e),i.cross(Vn);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Vn.subVectors(i,e),Gn.subVectors(n,e),Wn.subVectors(t,e);const a=Vn.dot(Vn),o=Vn.dot(Gn),s=Vn.dot(Wn),l=Gn.dot(Gn),c=Gn.dot(Wn),u=a*l-o*o;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*s-o*c)*h,p=(a*c-o*s)*h;return r.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,jn),jn.x>=0&&jn.y>=0&&jn.x+jn.y<=1}static getUV(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,jn),s.set(0,0),s.addScaledVector(r,jn.x),s.addScaledVector(a,jn.y),s.addScaledVector(o,jn.z),s}static isFrontFacing(t,e,n,i){return Vn.subVectors(n,e),Gn.subVectors(t,e),Vn.cross(Gn).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Vn.subVectors(this.c,this.b),Gn.subVectors(this.a,this.b),.5*Vn.cross(Gn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Kn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Kn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Kn.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Kn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Kn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let a,o;$n.subVectors(i,n),qn.subVectors(r,n),Yn.subVectors(t,n);const s=$n.dot(Yn),l=qn.dot(Yn);if(s<=0&&l<=0)return e.copy(n);Jn.subVectors(t,i);const c=$n.dot(Jn),u=qn.dot(Jn);if(c>=0&&u<=c)return e.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return a=s/(s-c),e.copy(n).addScaledVector($n,a);Zn.subVectors(t,r);const d=$n.dot(Zn),p=qn.dot(Zn);if(p>=0&&d<=p)return e.copy(r);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),e.copy(n).addScaledVector(qn,o);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return Xn.subVectors(r,i),o=(u-c)/(u-c+(d-p)),e.copy(i).addScaledVector(Xn,o);const g=1/(m+f+h);return a=f*g,o=h*g,e.copy(n).addScaledVector($n,a).addScaledVector(qn,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Qn=0;class ti extends he{constructor(){super(),Object.defineProperty(this,"id",{value:Qn++}),this.uuid=ve(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=qt,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Rt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=se,this.stencilZFail=se,this.stencilZPass=se,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==qt&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}ti.prototype.isMaterial=!0;const ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ni={h:0,s:0,l:0},ii={h:0,s:0,l:0};function ri(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function ai(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function oi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class si{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=xe(t,1),e=ye(e,0,1),n=ye(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=ri(r,i,t+1/3),this.g=ri(r,i,t),this.b=ri(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=ei[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=ai(t.r),this.g=ai(t.g),this.b=ai(t.b),this}copyLinearToSRGB(t){return this.r=oi(t.r),this.g=oi(t.g),this.b=oi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),a=Math.min(e,n,i);let o,s;const l=(a+r)/2;if(a===r)o=0,s=0;else{const t=r-a;switch(s=l<=.5?t/(r+a):t/(2-r-a),r){case e:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-e)/t+2;break;case i:o=(e-n)/t+4}o/=6}return t.h=o,t.s=s,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(ni),ni.h+=t,ni.s+=e,ni.l+=n,this.setHSL(ni.h,ni.s,ni.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ni),t.getHSL(ii);const n=_e(ni.h,ii.h,e),i=_e(ni.s,ii.s,e),r=_e(ni.l,ii.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}si.NAMES=ei,si.prototype.isColor=!0,si.prototype.r=1,si.prototype.g=1,si.prototype.b=1;class li extends ti{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}li.prototype.isMeshBasicMaterial=!0;const ci=new Fe,ui=new Se;class hi{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=le,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new si),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Se),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Fe),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Ne),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)ui.fromBufferAttribute(this,e),ui.applyMatrix3(t),this.setXY(e,ui.x,ui.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ci.fromBufferAttribute(this,e),ci.applyMatrix3(t),this.setXYZ(e,ci.x,ci.y,ci.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ci.x=this.getX(e),ci.y=this.getY(e),ci.z=this.getZ(e),ci.applyMatrix4(t),this.setXYZ(e,ci.x,ci.y,ci.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ci.x=this.getX(e),ci.y=this.getY(e),ci.z=this.getZ(e),ci.applyNormalMatrix(t),this.setXYZ(e,ci.x,ci.y,ci.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ci.x=this.getX(e),ci.y=this.getY(e),ci.z=this.getZ(e),ci.transformDirection(t),this.setXYZ(e,ci.x,ci.y,ci.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==le&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}hi.prototype.isBufferAttribute=!0;class di extends hi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class pi extends hi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends hi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class fi extends hi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let mi=0;const gi=new gn,vi=new Hn,yi=new Fe,xi=new He,_i=new He,bi=new Fe;class wi extends he{constructor(){super(),Object.defineProperty(this,"id",{value:mi++}),this.uuid=ve(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ee(t)>65535?pi:di)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Te).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return gi.makeRotationFromQuaternion(t),this.applyMatrix4(gi),this}rotateX(t){return gi.makeRotationX(t),this.applyMatrix4(gi),this}rotateY(t){return gi.makeRotationY(t),this.applyMatrix4(gi),this}rotateZ(t){return gi.makeRotationZ(t),this.applyMatrix4(gi),this}translate(t,e,n){return gi.makeTranslation(t,e,n),this.applyMatrix4(gi),this}scale(t,e,n){return gi.makeScale(t,e,n),this.applyMatrix4(gi),this}lookAt(t){return vi.lookAt(t),vi.updateMatrix(),this.applyMatrix4(vi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yi).negate(),this.translate(yi.x,yi.y,yi.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new fi(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new He);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Fe(-1/0,-1/0,-1/0),new Fe(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];xi.setFromBufferAttribute(n),this.morphTargetsRelative?(bi.addVectors(this.boundingBox.min,xi.min),this.boundingBox.expandByPoint(bi),bi.addVectors(this.boundingBox.max,xi.max),this.boundingBox.expandByPoint(bi)):(this.boundingBox.expandByPoint(xi.min),this.boundingBox.expandByPoint(xi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new sn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Fe,1/0);if(t){const n=this.boundingSphere.center;if(xi.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];_i.setFromBufferAttribute(n),this.morphTargetsRelative?(bi.addVectors(xi.min,_i.min),xi.expandByPoint(bi),bi.addVectors(xi.max,_i.max),xi.expandByPoint(bi)):(xi.expandByPoint(_i.min),xi.expandByPoint(_i.max))}xi.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)bi.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(bi));if(e)for(let r=0,a=e.length;r<a;r++){const a=e[r],o=this.morphTargetsRelative;for(let e=0,r=a.count;e<r;e++)bi.fromBufferAttribute(a,e),o&&(yi.fromBufferAttribute(t,e),bi.add(yi)),i=Math.max(i,n.distanceToSquared(bi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,a=e.uv.array,o=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new hi(new Float32Array(4*o),4));const s=e.tangent.array,l=[],c=[];for(let t=0;t<o;t++)l[t]=new Fe,c[t]=new Fe;const u=new Fe,h=new Fe,d=new Fe,p=new Se,f=new Se,m=new Se,g=new Fe,v=new Fe;function y(t,e,n){u.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),p.fromArray(a,2*t),f.fromArray(a,2*e),m.fromArray(a,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(v),c[e].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let t=0,e=x.length;t<e;++t){const e=x[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)y(n[t+0],n[t+1],n[t+2])}const _=new Fe,b=new Fe,w=new Fe,M=new Fe;function S(t){w.fromArray(r,3*t),M.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),b.crossVectors(M,e);const n=b.dot(c[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let t=0,e=x.length;t<e;++t){const e=x[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)S(n[t+0]),S(n[t+1]),S(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new hi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Fe,r=new Fe,a=new Fe,o=new Fe,s=new Fe,l=new Fe,c=new Fe,u=new Fe;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),a.fromBufferAttribute(e,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),o.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),s.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,o=e.count;t<o;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,l=Math.min(o.length,r.length-s);for(let t=0,e=s;t<l;t++,e++)r[e]=o[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)bi.fromBufferAttribute(t,e),bi.normalize(),t.setXYZ(e,bi.x,bi.y,bi.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i);let o=0,s=0;for(let r=0,l=e.length;r<l;r++){o=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)a[s++]=n[o++]}return new hi(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new wi,n=this.index.array,i=this.attributes;for(const r in i){const a=t(i[r],n);e.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],o=r[i];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);a.push(i)}e.morphAttributes[i]=a}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],a=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];a.push(i.toJSON(t.data))}a.length>0&&(i[e]=a,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let t=0,e=a.length;t<e;t++){const e=a[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}wi.prototype.isBufferGeometry=!0;const Mi=new gn,Si=new mn,Ti=new sn,Ei=new Fe,Ai=new Fe,Li=new Fe,Ci=new Fe,Ri=new Fe,Pi=new Fe,Di=new Fe,Ii=new Fe,Ni=new Fe,ki=new Se,Oi=new Se,zi=new Se,Fi=new Fe,Ui=new Fe;class Bi extends Hn{constructor(t=new wi,e=new li){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ti.copy(n.boundingSphere),Ti.applyMatrix4(r),!1===t.ray.intersectsSphere(Ti))return;if(Mi.copy(r).invert(),Si.copy(t.ray).applyMatrix4(Mi),null!==n.boundingBox&&!1===Si.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(r.count,Math.min(p.start+p.count,d.start+d.count));n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);a=Hi(this,f,t,Si,o,s,l,c,u,i,h,d),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=p.materialIndex,e.push(a))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),p=r.getX(n+2);a=Hi(this,i,t,Si,o,s,l,c,u,h,d,p),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],p=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));n<i;n+=3){a=Hi(this,p,t,Si,o,s,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=r.materialIndex,e.push(a))}}else{for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3){a=Hi(this,i,t,Si,o,s,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),e.push(a))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Hi(t,e,n,i,r,a,o,s,l,c,u,h){Ei.fromBufferAttribute(r,c),Ai.fromBufferAttribute(r,u),Li.fromBufferAttribute(r,h);const d=t.morphTargetInfluences;if(a&&d){Di.set(0,0,0),Ii.set(0,0,0),Ni.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=d[t],n=a[t];0!==e&&(Ci.fromBufferAttribute(n,c),Ri.fromBufferAttribute(n,u),Pi.fromBufferAttribute(n,h),o?(Di.addScaledVector(Ci,e),Ii.addScaledVector(Ri,e),Ni.addScaledVector(Pi,e)):(Di.addScaledVector(Ci.sub(Ei),e),Ii.addScaledVector(Ri.sub(Ai),e),Ni.addScaledVector(Pi.sub(Li),e)))}Ei.add(Di),Ai.add(Ii),Li.add(Ni)}t.isSkinnedMesh&&(t.boneTransform(c,Ei),t.boneTransform(u,Ai),t.boneTransform(h,Li));const p=function(t,e,n,i,r,a,o,s){let l;if(l=1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s),null===l)return null;Ui.copy(s),Ui.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Ui);return c<n.near||c>n.far?null:{distance:c,point:Ui.clone(),object:t}}(t,e,n,i,Ei,Ai,Li,Fi);if(p){s&&(ki.fromBufferAttribute(s,c),Oi.fromBufferAttribute(s,u),zi.fromBufferAttribute(s,h),p.uv=Kn.getUV(Fi,Ei,Ai,Li,ki,Oi,zi,new Se)),l&&(ki.fromBufferAttribute(l,c),Oi.fromBufferAttribute(l,u),zi.fromBufferAttribute(l,h),p.uv2=Kn.getUV(Fi,Ei,Ai,Li,ki,Oi,zi,new Se));const t={a:c,b:u,c:h,normal:new Fe,materialIndex:0};Kn.getNormal(Ei,Ai,Li,t.normal),p.face=t}return p}Bi.prototype.isMesh=!0;class Vi extends wi{constructor(t=1,e=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const o=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(t,e,n,i,r,a,p,f,m,g,v){const y=a/m,x=p/g,_=a/2,b=p/2,w=f/2,M=m+1,S=g+1;let T=0,E=0;const A=new Fe;for(let a=0;a<S;a++){const o=a*x-b;for(let s=0;s<M;s++){const h=s*y-_;A[t]=h*i,A[e]=o*r,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(s/m),u.push(1-a/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+M*t,i=h+e+M*(t+1),r=h+(e+1)+M*(t+1),a=h+(e+1)+M*t;s.push(n,i,a),s.push(i,r,a),E+=6}o.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,e,t,a,r,0),p("z","y","x",1,-1,n,e,-t,a,r,1),p("x","z","y",1,1,t,n,e,i,a,2),p("x","z","y",1,-1,t,n,-e,i,a,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(c,3)),this.setAttribute("uv",new fi(u,2))}static fromJSON(t){return new Vi(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Gi(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Wi(t){const e={};for(let n=0;n<t.length;n++){const i=Gi(t[n]);for(const t in i)e[t]=i[t]}return e}const ji={clone:Gi,merge:Wi};class $i extends ti{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Gi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}$i.prototype.isShaderMaterial=!0;class qi extends Hn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}qi.prototype.isCamera=!0;class Xi extends qi{constructor(t=50,e=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*fe*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*pe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*fe*Math.atan(Math.tan(.5*pe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*pe*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,o=a.fullHeight;r+=a.offsetX*i/t,e-=a.offsetY*n/o,i*=a.width/t,n*=a.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Xi.prototype.isPerspectiveCamera=!0;const Yi=90;class Ji extends Hn{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Xi(Yi,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Fe(1,0,0)),this.add(i);const r=new Xi(Yi,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Fe(-1,0,0)),this.add(r);const a=new Xi(Yi,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Fe(0,1,0)),this.add(a);const o=new Xi(Yi,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Fe(0,-1,0)),this.add(o);const s=new Xi(Yi,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Fe(0,0,1)),this.add(s);const l=new Xi(Yi,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Fe(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,a,o,s,l]=this.children,c=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.xr.enabled=c}}class Zi extends De{constructor(t,e,n,i,r,a,o,s,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:Pt,n,i,r,a,o,s,l,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Zi.prototype.isCubeTexture=!0;class Ki extends ke{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new Zi(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Ft,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=qt,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Vi(5,5,5),r=new $i({name:"CubemapFromEquirect",uniforms:Gi(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=e;const a=new Bi(i,r),o=e.minFilter;e.minFilter===Ut&&(e.minFilter=Ft);return new Ji(1,10,this).update(t,a),e.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}Ki.prototype.isWebGLCubeRenderTarget=!0;const Qi=new Fe,tr=new Fe,er=new Te;class nr{constructor(t=new Fe(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Qi.subVectors(n,e).cross(tr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Qi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||er.getNormalMatrix(t),i=this.coplanarPoint(Qi).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}nr.prototype.isPlane=!0;const ir=new sn,rr=new Fe;class ar{constructor(t=new nr,e=new nr,n=new nr,i=new nr,r=new nr,a=new nr){this.planes=[t,e,n,i,r,a]}set(t,e,n,i,r,a){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,u-s,f-h,y-m).normalize(),e[1].setComponents(o+i,u+s,f+h,y+m).normalize(),e[2].setComponents(o+r,u+l,f+d,y+g).normalize(),e[3].setComponents(o-r,u-l,f-d,y-g).normalize(),e[4].setComponents(o-a,u-c,f-p,y-v).normalize(),e[5].setComponents(o+a,u+c,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),ir.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ir)}intersectsSprite(t){return ir.center.set(0,0,0),ir.radius=.7071067811865476,ir.applyMatrix4(t.matrixWorld),this.intersectsSphere(ir)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(rr.x=i.normal.x>0?t.max.x:t.min.x,rr.y=i.normal.y>0?t.max.y:t.min.y,rr.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(rr)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function or(){let t=null,e=!1,n=null,i=null;function r(e,a){n(e,a),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function sr(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=i.get(e);void 0===a?i.set(e,function(e,i){const r=e.array,a=e.usage,o=t.createBuffer();t.bindBuffer(i,o),t.bufferData(i,r,a),e.onUploadCallback();let s=5126;return r instanceof Float32Array?s=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:r instanceof Int16Array?s=5122:r instanceof Uint32Array?s=5125:r instanceof Int32Array?s=5124:r instanceof Int8Array?s=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):a.version<e.version&&(!function(e,i,r){const a=i.array,o=i.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,a):(n?t.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):t.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,e,r),a.version=e.version)}}}class lr extends wi{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,a=e/2,o=Math.floor(n),s=Math.floor(i),l=o+1,c=s+1,u=t/o,h=e/s,d=[],p=[],f=[],m=[];for(let t=0;t<c;t++){const e=t*h-a;for(let n=0;n<l;n++){const i=n*u-r;p.push(i,-e,0),f.push(0,0,1),m.push(n/o),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<o;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),a=e+1+l*t;d.push(n,i,a),d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new fi(p,3)),this.setAttribute("normal",new fi(f,3)),this.setAttribute("uv",new fi(m,2))}static fromJSON(t){return new lr(t.width,t.height,t.widthSegments,t.heightSegments)}}const cr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ur={common:{diffuse:{value:new si(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Te},uv2Transform:{value:new Te},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Te}},sprite:{diffuse:{value:new si(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Te}}},hr={basic:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.fog,ur.lights,{emissive:{value:new si(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,ur.lights,{emissive:{value:new si(0)},specular:{value:new si(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:Wi([ur.common,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.roughnessmap,ur.metalnessmap,ur.fog,ur.lights,{emissive:{value:new si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},toon:{uniforms:Wi([ur.common,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.gradientmap,ur.fog,ur.lights,{emissive:{value:new si(0)}}]),vertexShader:cr.meshtoon_vert,fragmentShader:cr.meshtoon_frag},matcap:{uniforms:Wi([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:Wi([ur.points,ur.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:Wi([ur.common,ur.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:Wi([ur.common,ur.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:Wi([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,{opacity:{value:1}}]),vertexShader:cr.meshnormal_vert,fragmentShader:cr.meshnormal_frag},sprite:{uniforms:Wi([ur.sprite,ur.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new Te},t2D:{value:null}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},cube:{uniforms:Wi([ur.envmap,{opacity:{value:1}}]),vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:Wi([ur.common,ur.displacementmap,{referencePosition:{value:new Fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:Wi([ur.lights,ur.fog,{color:{value:new si(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};function dr(t,e,n,i,r){const a=new si(0);let o,s,l=0,c=null,u=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),l=e,d(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,d(a,l)},render:function(n,r){let p=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=e.get(f));const m=t.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?d(a,l):f&&f.isColor&&(d(f,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||f.mapping===It)?(void 0===s&&(s=new Bi(new Vi(1,1,1),new $i({name:"BackgroundCubeMaterial",uniforms:Gi(hr.cube.uniforms),vertexShader:hr.cube.vertexShader,fragmentShader:hr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&u===f.version&&h===t.toneMapping||(s.material.needsUpdate=!0,c=f,u=f.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Bi(new lr(2,2),new $i({name:"BackgroundMaterial",uniforms:Gi(hr.background.uniforms),vertexShader:hr.background.vertexShader,fragmentShader:hr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&u===f.version&&h===t.toneMapping||(o.material.needsUpdate=!0,c=f,u=f.version,h=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function pr(t,e,n,i){const r=t.getParameter(34921),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=d(null);let c=l;function u(e){return i.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function h(e){return i.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function p(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){const a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;if(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function g(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function v(e,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,a,o,s):t.vertexAttribIPointer(e,n,r,o,s)}function y(){x(),c!==l&&(c=l,u(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,x){let _=!1;if(o){const e=function(e,n,r){const o=!0===r.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];void 0===u&&(u=d(i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),c[o]=u);return u}(y,h,l);c!==e&&(c=e,u(c.object)),_=function(t,e){const n=c.attributes,i=t.attributes;let r=0;for(const t in i){const e=n[t],a=i[t];if(void 0===e)return!0;if(e.attribute!==a)return!0;if(e.data!==a.data)return!0;r++}return c.attributesNum!==r||c.index!==e}(y,x),_&&function(t,e){const n={},i=t.attributes;let r=0;for(const t in i){const e=i[t],a={};a.attribute=e,e.data&&(a.data=e.data),n[t]=a,r++}c.attributes=n,c.attributesNum=r,c.index=e}(y,x)}else{const t=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===t||(c.geometry=y.id,c.program=h.id,c.wireframe=t,_=!0)}!0===r.isInstancedMesh&&(_=!0),null!==x&&n.update(x,34963),_&&(!function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(const e in c){const i=c[e];if(i.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const e=a.normalized,o=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,d=a.offset;if(n&&n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)m(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)v(i.location+t,o/i.locationSize,u,e,l*h,(d+o/i.locationSize*t)*h)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)m(i.location+t,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<i.locationSize;t++)f(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)v(i.location+t,o/i.locationSize,u,e,o*h,o/i.locationSize*t*h)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}g()}(r,l,h,y),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)h(i[t].object),delete i[t];delete n[t.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function fr(t,e,n,i){const r=i.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,i){t.drawArrays(a,e,i),n.update(i,a,1)},this.renderInstances=function(i,o,s){if(0===s)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,i,o,s),n.update(o,a,s)}}function mr(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=a||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),y=h>0,x=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?t.getParameter(36183):0}}function gr(t){const e=this;let n=null,i=0,r=!1,a=!1;const o=new nr,s=new Te,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){const a=null!==t?t.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const e=i+4*a,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=i;e!==a;++e,n+=4)o.copy(t[e]).applyMatrix4(r,s),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){const o=0!==t.length||e||0!==i||r;return r=e,n=u(t,a,0),i=t.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(e,o,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!r||null===h||0===h.length||a&&!p)a?u(null):c();else{const t=a?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=u(h,o,e,s);for(let t=0;t!==e;++t)r[t]=n[t];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function vr(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=Pt:304===e&&(t.mapping=Dt),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(303===a||304===a){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=t.getRenderTarget(),s=new Ki(a.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),t.setRenderTarget(o),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}hr.physical={uniforms:Wi([hr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Se(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new si(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new si(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new si(1,1,1)},specularColorMap:{value:null}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag};class yr extends qi{constructor(t=-1,e=1,n=1,i=-1,r=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,a=r+t*this.view.width,o-=e*this.view.offsetY,s=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}yr.prototype.isOrthographicCamera=!0;class xr extends $i{constructor(t){super(t),this.type="RawShaderMaterial"}}xr.prototype.isRawShaderMaterial=!0;const _r=Math.pow(2,8),br=[.125,.215,.35,.446,.526,.582],wr=5+br.length,Mr=20,Sr={[ie]:0,[re]:1,[oe]:2,3004:3,3005:4,3006:5,[ae]:6},Tr=new yr,{_lodPlanes:Er,_sizeLods:Ar,_sigmas:Lr}=Or(),Cr=new si;let Rr=null;const Pr=(1+Math.sqrt(5))/2,Dr=1/Pr,Ir=[new Fe(1,1,1),new Fe(-1,1,1),new Fe(1,1,-1),new Fe(-1,1,-1),new Fe(0,Pr,Dr),new Fe(0,Pr,-Dr),new Fe(Dr,0,Pr),new Fe(-Dr,0,Pr),new Fe(Pr,Dr,0),new Fe(-Pr,Dr,0)];class Nr{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Fe(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Vr()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}(Mr),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){Rr=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Br(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Ur(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Er.length;t++)Er[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Rr),t.scissorTest=!1,Fr(t,0,0,t.width,t.height)}_fromTexture(t){Rr=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:zt,minFilter:zt,generateMipmaps:!1,type:Bt,format:1023,encoding:kr(t)?t.encoding:oe,depthBuffer:!1},n=zr(e);return n.depthBuffer=!t,this._pingPongRenderTarget=zr(e),n}_compileMaterial(t){const e=new Bi(Er[0],t);this._renderer.compile(e,Tr)}_sceneToCubeUV(t,e,n,i){const r=new Xi(90,1,e,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.outputEncoding,u=s.toneMapping;s.getClearColor(Cr),s.toneMapping=0,s.outputEncoding=ie,s.autoClear=!1;const h=new li({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Bi(new Vi,h);let p=!1;const f=t.background;f?f.isColor&&(h.color.copy(f),t.background=null,p=!0):(h.color.copy(Cr),p=!0);for(let e=0;e<6;e++){const n=e%3;0==n?(r.up.set(0,a[e],0),r.lookAt(o[e],0,0)):1==n?(r.up.set(0,0,a[e]),r.lookAt(0,o[e],0)):(r.up.set(0,a[e],0),r.lookAt(0,0,o[e])),Fr(i,n*_r,e>2?_r:0,_r,_r),s.setRenderTarget(i),p&&s.render(d,r),s.render(t,r)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.outputEncoding=c,s.autoClear=l,t.background=f}_setEncoding(t,e){!0===this._renderer.capabilities.isWebGL2&&e.format===qt&&e.type===Bt&&e.encoding===re?t.value=Sr[3e3]:t.value=Sr[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===Pt||t.mapping===Dt;i?null==this._cubemapShader&&(this._cubemapShader=Br()):null==this._equirectShader&&(this._equirectShader=Ur());const r=i?this._cubemapShader:this._equirectShader,a=new Bi(Er[0],r),o=r.uniforms;o.envMap.value=t,i||o.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(o.inputEncoding,t),this._setEncoding(o.outputEncoding,e.texture),Fr(e,0,0,3*_r,2*_r),n.setRenderTarget(e),n.render(a,Tr)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<wr;e++){const n=Math.sqrt(Lr[e]*Lr[e]-Lr[e-1]*Lr[e-1]),i=Ir[(e-1)%Ir.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Bi(Er[i],l),u=l.uniforms,h=Ar[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):Mr;f>Mr&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<Mr;++t){const e=t/p,n=Math.exp(-e*e/2);m.push(n),0==t?g+=n:t<f&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o),u.dTheta.value=d,u.mipInt.value=8-n,this._setEncoding(u.inputEncoding,t.texture),this._setEncoding(u.outputEncoding,t.texture);const v=Ar[i];Fr(e,3*Math.max(0,_r-2*v),(0===i?0:2*_r)+2*v*(i>4?i-8+4:0),3*v,2*v),s.setRenderTarget(e),s.render(c,Tr)}}function kr(t){return void 0!==t&&t.type===Bt&&(t.encoding===ie||t.encoding===re||t.encoding===ae)}function Or(){const t=[],e=[],n=[];let i=8;for(let r=0;r<wr;r++){const a=Math.pow(2,i);e.push(a);let o=1/a;r>4?o=br[r-8+4-1]:0==r&&(o=0),n.push(o);const s=1/(a-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,p*d*t),v.set(u,f*d*t);const r=[t,t,t,t,t,t];y.set(r,m*d*t)}const x=new wi;x.setAttribute("position",new hi(g,p)),x.setAttribute("uv",new hi(v,f)),x.setAttribute("faceIndex",new hi(y,m)),t.push(x),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function zr(t){const e=new ke(3*_r,3*_r,t);return e.texture.mapping=It,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Fr(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Ur(){const t=new Se(1,1);return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Vr()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Br(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Vr()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Hr(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Vr(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Gr(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping,o=303===a||304===a,s=a===Pt||a===Dt;if(o||s){if(e.has(r))return e.get(r).texture;{const a=r.image;if(o&&a&&a.height>0||s&&a&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(a)){const a=t.getRenderTarget();null===n&&(n=new Nr(t));const s=o?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,s),t.setRenderTarget(a),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Wr(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function jr(t,e,n,i){const r={},a=new WeakMap;function o(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);s.removeEventListener("dispose",o),delete r[s.id];const l=a.get(s);l&&(e.remove(l),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],a=t[e+2];n.push(i,r,r,a,a,i)}}else{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const s=new(Ee(n)>65535?pi:di)(n,1);s.version=o;const l=a.get(t);l&&e.remove(l),a.set(t,s)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return a.get(t)}}}function $r(t,e,n,i){const r=i.isWebGL2;let a,o,s;this.setMode=function(t){a=t},this.setIndex=function(t){o=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(a,i,o,e*s),n.update(i,a,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,o,i*s,c),n.update(l,a,c)}}function qr(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class Xr extends De{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=zt,this.minFilter=zt,this.wrapR=kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Yr(t,e){return t[0]-e[0]}function Jr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Zr(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function Kr(t,e,n){const i={},r=new Float32Array(8),a=new WeakMap,o=new Fe,s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=c.morphAttributes.position.length;let r=a.get(c);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const t=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,s=c.morphAttributes.normal||[],l=!0===t?2:1;let u=c.attributes.position.count*l,h=1;u>e.maxTextureSize&&(h=Math.ceil(u/e.maxTextureSize),u=e.maxTextureSize);const d=new Float32Array(u*h*4*i),p=new Xr(d,u,h,i);p.format=qt,p.type=Gt;const f=4*l;for(let e=0;e<i;e++){const i=n[e],r=s[e],a=u*h*4*e;for(let e=0;e<i.count;e++){o.fromBufferAttribute(i,e),!0===i.normalized&&Zr(o,i);const n=e*f;d[a+n+0]=o.x,d[a+n+1]=o.y,d[a+n+2]=o.z,d[a+n+3]=0,!0===t&&(o.fromBufferAttribute(r,e),!0===r.normalized&&Zr(o,r),d[a+n+4]=o.x,d[a+n+5]=o.y,d[a+n+6]=o.z,d[a+n+7]=0)}}r={count:i,texture:p,size:new Se(u,h)},a.set(c,r)}let s=0;for(let t=0;t<d.length;t++)s+=d[t];const l=c.morphTargetsRelative?1:1-s;h.getUniforms().setValue(t,"morphTargetBaseInfluence",l),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{const e=void 0===d?0:d.length;let n=i[c.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[c.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=d[t]}n.sort(Jr);for(let t=0;t<8;t++)t<e&&n[t][1]?(s[t][0]=n[t][0],s[t][1]=n[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(Yr);const a=c.morphAttributes.position,o=c.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=s[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(a&&c.getAttribute("morphTarget"+t)!==a[n]&&c.setAttribute("morphTarget"+t,a[n]),o&&c.getAttribute("morphNormal"+t)!==o[n]&&c.setAttribute("morphNormal"+t,o[n]),r[t]=i,l+=i):(a&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),o&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),r[t]=0)}const u=c.morphTargetsRelative?1:1-l;h.getUniforms().setValue(t,"morphTargetBaseInfluence",u),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Qr(t,e,n,i){let r=new WeakMap;function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const o=i.render.frame,s=t.geometry,l=e.get(t,s);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}Xr.prototype.isDataTexture2DArray=!0;class ta extends De{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=zt,this.minFilter=zt,this.wrapR=kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ta.prototype.isDataTexture3D=!0;const ea=new De,na=new Xr,ia=new ta,ra=new Zi,aa=[],oa=[],sa=new Float32Array(16),la=new Float32Array(9),ca=new Float32Array(4);function ua(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=aa[r];if(void 0===a&&(a=new Float32Array(r),aa[r]=a),0!==e){i.toArray(a,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r)}return a}function ha(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function da(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function pa(t,e){let n=oa[e];void 0===n&&(n=new Int32Array(e),oa[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function fa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ma(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ha(n,e))return;t.uniform2fv(this.addr,e),da(n,e)}}function ga(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ha(n,e))return;t.uniform3fv(this.addr,e),da(n,e)}}function va(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ha(n,e))return;t.uniform4fv(this.addr,e),da(n,e)}}function ya(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ha(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),da(n,e)}else{if(ha(n,i))return;ca.set(i),t.uniformMatrix2fv(this.addr,!1,ca),da(n,i)}}function xa(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ha(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),da(n,e)}else{if(ha(n,i))return;la.set(i),t.uniformMatrix3fv(this.addr,!1,la),da(n,i)}}function _a(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(ha(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),da(n,e)}else{if(ha(n,i))return;sa.set(i),t.uniformMatrix4fv(this.addr,!1,sa),da(n,i)}}function ba(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function wa(t,e){const n=this.cache;ha(n,e)||(t.uniform2iv(this.addr,e),da(n,e))}function Ma(t,e){const n=this.cache;ha(n,e)||(t.uniform3iv(this.addr,e),da(n,e))}function Sa(t,e){const n=this.cache;ha(n,e)||(t.uniform4iv(this.addr,e),da(n,e))}function Ta(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ea(t,e){const n=this.cache;ha(n,e)||(t.uniform2uiv(this.addr,e),da(n,e))}function Aa(t,e){const n=this.cache;ha(n,e)||(t.uniform3uiv(this.addr,e),da(n,e))}function La(t,e){const n=this.cache;ha(n,e)||(t.uniform4uiv(this.addr,e),da(n,e))}function Ca(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||ea,r)}function Ra(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ia,r)}function Pa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||ra,r)}function Da(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||na,r)}function Ia(t,e){t.uniform1fv(this.addr,e)}function Na(t,e){const n=ua(e,this.size,2);t.uniform2fv(this.addr,n)}function ka(t,e){const n=ua(e,this.size,3);t.uniform3fv(this.addr,n)}function Oa(t,e){const n=ua(e,this.size,4);t.uniform4fv(this.addr,n)}function za(t,e){const n=ua(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Fa(t,e){const n=ua(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ua(t,e){const n=ua(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ba(t,e){t.uniform1iv(this.addr,e)}function Ha(t,e){t.uniform2iv(this.addr,e)}function Va(t,e){t.uniform3iv(this.addr,e)}function Ga(t,e){t.uniform4iv(this.addr,e)}function Wa(t,e){t.uniform1uiv(this.addr,e)}function ja(t,e){t.uniform2uiv(this.addr,e)}function $a(t,e){t.uniform3uiv(this.addr,e)}function qa(t,e){t.uniform4uiv(this.addr,e)}function Xa(t,e,n){const i=e.length,r=pa(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTexture2D(e[t]||ea,r[t])}function Ya(t,e,n){const i=e.length,r=pa(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTextureCube(e[t]||ra,r[t])}function Ja(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return fa;case 35664:return ma;case 35665:return ga;case 35666:return va;case 35674:return ya;case 35675:return xa;case 35676:return _a;case 5124:case 35670:return ba;case 35667:case 35671:return wa;case 35668:case 35672:return Ma;case 35669:case 35673:return Sa;case 5125:return Ta;case 36294:return Ea;case 36295:return Aa;case 36296:return La;case 35678:case 36198:case 36298:case 36306:case 35682:return Ca;case 35679:case 36299:case 36307:return Ra;case 35680:case 36300:case 36308:case 36293:return Pa;case 36289:case 36303:case 36311:case 36292:return Da}}(e.type)}function Za(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ia;case 35664:return Na;case 35665:return ka;case 35666:return Oa;case 35674:return za;case 35675:return Fa;case 35676:return Ua;case 5124:case 35670:return Ba;case 35667:case 35671:return Ha;case 35668:case 35672:return Va;case 35669:case 35673:return Ga;case 5125:return Wa;case 36294:return ja;case 36295:return $a;case 36296:return qa;case 35678:case 36198:case 36298:case 36306:case 35682:return Xa;case 35680:case 36300:case 36308:case 36293:return Ya}}(e.type)}function Ka(t){this.id=t,this.seq=[],this.map={}}Za.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),da(e,t)},Ka.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(t,e[a.id],n)}};const Qa=/(\w+)(\])?(\[|\.)?/g;function to(t,e){t.seq.push(e),t.map[e.id]=e}function eo(t,e,n){const i=t.name,r=i.length;for(Qa.lastIndex=0;;){const a=Qa.exec(i),o=Qa.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===r){to(n,void 0===c?new Ja(s,t,e):new Za(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Ka(s),to(n,t)),n=t}}}function no(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);eo(n,t.getUniformLocation(e,n.name),this)}}function io(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}no.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},no.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},no.upload=function(t,e,n,i){for(let r=0,a=e.length;r!==a;++r){const a=e[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(t,o.value,i)}},no.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let ro=0;function ao(t){switch(t){case ie:return["Linear","( value )"];case re:return["sRGB","( value )"];case oe:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case ae:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function oo(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function so(t,e){const n=ao(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function lo(t,e){const n=ao(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function co(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function uo(t){return""!==t}function ho(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function po(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fo=/^[ \t]*#include +<([\w\d./]+)>/gm;function mo(t){return t.replace(fo,go)}function go(t,e){const n=cr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return mo(n)}const vo=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,yo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xo(t){return t.replace(yo,bo).replace(vo,_o)}function _o(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),bo(t,e,n,i)}function bo(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function wo(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Mo(t,e,n,i){const r=t.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Pt:case Dt:e="ENVMAP_TYPE_CUBE";break;case It:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Dt:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),d=t.gammaFactor>0?t.gammaFactor:1,p=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uo).join("\n")}(n),f=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(a),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(uo).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(uo).join("\n"),v.length>0&&(v+="\n")):(g=[wo(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(uo).join("\n"),v=[p,wo(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?cr.tonemapping_pars_fragment:"",0!==n.toneMapping?co("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===$t?"#define OPAQUE":"",cr.encodings_pars_fragment,n.map?so("mapTexelToLinear",n.mapEncoding):"",n.matcap?so("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?so("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?so("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?so("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?so("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?so("lightMapTexelToLinear",n.lightMapEncoding):"",lo("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(uo).join("\n")),o=mo(o),o=ho(o,n),o=po(o,n),s=mo(s),s=ho(s,n),s=po(s,n),o=xo(o),s=xo(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===ue?"":"out highp vec4 pc_fragColor;",n.glslVersion===ue?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+s,_=io(r,35633,y+g+o),b=io(r,35632,x);if(r.attachShader(m,_),r.attachShader(m,b),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(m).trim(),e=r.getShaderInfoLog(_).trim(),n=r.getShaderInfoLog(b).trim();let i=!0,a=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const e=oo(r,_,"vertex"),n=oo(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(a=!1);a&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,M;return r.deleteShader(_),r.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new no(r,m)),w},this.getAttributes=function(){return void 0===M&&(M=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),a=i.name;let o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[a]={type:i.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}(r,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=ro++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}function So(t,e,n,i,r,a,o){const s=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,h=r.maxVertexUniforms,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=ie,l&&t&&t.isTexture&&t.format===qt&&t.type===Bt&&t.encoding===re&&(e=ie),e}return{getParameters:function(a,s,m,v,y){const x=v.fog,_=a.isMeshStandardMaterial?v.environment:null,b=(a.isMeshStandardMaterial?n:e).get(a.envMap||_),w=f[a.type],M=y.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(u)return 1024;{const t=h,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(y):0;let S,T;if(null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead.")),w){const t=hr[w];S=t.vertexShader,T=t.fragmentShader}else S=a.vertexShader,T=a.fragmentShader;const E=t.getRenderTarget(),A=a.alphaTest>0,L=a.clearcoat>0;return{isWebGL2:l,shaderID:w,shaderName:a.type,vertexShader:S,fragmentShader:T,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:d,outputEncoding:null!==E?g(E.texture):t.outputEncoding,map:!!a.map,mapEncoding:g(a.map),matcap:!!a.matcap,matcapEncoding:g(a.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:g(b),envMapCubeUV:!!b&&(b.mapping===It||307===b.mapping),lightMap:!!a.lightMap,lightMapEncoding:g(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:g(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,clearcoat:L,clearcoatMap:L&&!!a.clearcoatMap,clearcoatRoughnessMap:L&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:g(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:A,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:g(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||!!a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!x,useFog:a.fog,fogExp2:x&&x.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===y.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:u,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&m.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(Le(e.fragmentShader)),n.push(Le(e.vertexShader))),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<m.length;t++)n.push(e[m[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=hr[e];n=ji.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=s.length;t<e;t++){const e=s[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Mo(t,n,e,a),s.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=s.indexOf(t);s[e]=s[s.length-1],s.pop(),t.destroy()}},programs:s}}function To(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Eo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ao(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Lo(t){const e=[];let n=0;const i=[],r=[],a=[],o={id:-1};function s(i,r,a,s,l,c){let u=e[n];const h=t.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:i.renderOrder,z:l,group:c},e[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transmissive:r,transparent:a,init:function(){n=0,i.length=0,r.length=0,a.length=0},push:function(t,e,n,o,l,c){const u=s(t,e,n,o,l,c);n.transmission>0?r.push(u):!0===n.transparent?a.push(u):i.push(u)},unshift:function(t,e,n,o,l,c){const u=s(t,e,n,o,l,c);n.transmission>0?r.unshift(u):!0===n.transparent?a.unshift(u):i.unshift(u)},finish:function(){for(let t=n,i=e.length;t<i;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){i.length>1&&i.sort(t||Eo),r.length>1&&r.sort(e||Ao),a.length>1&&a.sort(e||Ao)}}}function Co(t){let e=new WeakMap;return{get:function(n,i){let r;return!1===e.has(n)?(r=new Lo(t),e.set(n,[r])):i>=e.get(n).length?(r=new Lo(t),e.get(n).push(r)):r=e.get(n)[i],r},dispose:function(){e=new WeakMap}}}function Ro(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Fe,color:new si};break;case"SpotLight":n={position:new Fe,direction:new Fe,color:new si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fe,color:new si,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fe,skyColor:new si,groundColor:new si};break;case"RectAreaLight":n={color:new si,position:new Fe,halfWidth:new Fe,halfHeight:new Fe}}return t[e.id]=n,n}}}let Po=0;function Do(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Io(t,e){const n=new Ro,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new Fe);const a=new Fe,o=new gn,s=new gn;return{setup:function(a,o){let s=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;a.sort(Do);const y=!0!==o?Math.PI:1;for(let t=0,e=a.length;t<e;t++){const e=a[t],o=e.color,x=e.intensity,_=e.distance,b=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=o.r*x*y,l+=o.g*x*y,c+=o.b*x*y;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],x);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=b,r.directionalShadowMatrix[u]=e.shadow.matrix,m++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(o).multiplyScalar(x*y),t.distance=_,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[d]=n,r.spotShadowMap[d]=b,r.spotShadowMatrix[d]=e.shadow.matrix,v++}r.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(o).multiplyScalar(x),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=b,r.pointShadowMatrix[h]=e.shadow.matrix,g++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(x*y),t.groundColor.copy(e.groundColor).multiplyScalar(x*y),r.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=ur.LTC_FLOAT_1,r.rectAreaLTC2=ur.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ur.LTC_HALF_1,r.rectAreaLTC2=ur.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=c;const x=r.hash;x.directionalLength===u&&x.pointLength===h&&x.spotLength===d&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v||(r.directional.length=u,r.spot.length=d,r.rectArea.length=p,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=v,x.directionalLength=u,x.pointLength=h,x.spotLength=d,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,r.version=Po++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),n++}else if(d.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),s.identity(),o.copy(d.matrixWorld),o.premultiply(h),s.extractRotation(o),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(d.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),i++}else if(d.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(h),t.direction.normalize(),u++}}},state:r}}function No(t,e){const n=new Io(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function ko(t,e){let n=new WeakMap;return{get:function(i,r=0){let a;return!1===n.has(i)?(a=new No(t,e),n.set(i,[a])):r>=n.get(i).length?(a=new No(t,e),n.get(i).push(a)):a=n.get(i)[r],a},dispose:function(){n=new WeakMap}}}class Oo extends ti{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Oo.prototype.isMeshDepthMaterial=!0;class zo extends ti{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Fe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}zo.prototype.isMeshDistanceMaterial=!0;function Fo(t,e,n){let i=new ar;const r=new Se,a=new Se,o=new Ne,s=new Oo({depthPacking:3201}),l=new zo,c={},u=n.maxTextureSize,h={0:1,1:0,2:2},d=new $i({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new wi;f.setAttribute("position",new hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Bi(f,d),g=this;function v(n,i){const r=e.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,p,m,null)}function y(e,n,i,r,a,o,u){let d=null;const p=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(d=void 0!==p?p:!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=d.uuid,e=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let r=n[e];void 0===r&&(r=d.clone(),n[e]=r),d=r}return d.visible=i.visible,d.wireframe=i.wireframe,d.side=3===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:h[i.side],d.alphaMap=i.alphaMap,d.alphaTest=i.alphaTest,d.clipShadows=i.clipShadows,d.clippingPlanes=i.clippingPlanes,d.clipIntersection=i.clipIntersection,d.displacementMap=i.displacementMap,d.displacementScale=i.displacementScale,d.displacementBias=i.displacementBias,d.wireframeLinewidth=i.wireframeLinewidth,d.linewidth=i.linewidth,!0===r.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(r.matrixWorld),d.nearDistance=a,d.farDistance=o),d}function x(n,r,a,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=y(n,0,u,o,a.near,a.far,s);t.renderBufferDirect(a,null,i,e,n,c)}}}else if(r.visible){const e=y(n,0,r,o,a.near,a.far,s);t.renderBufferDirect(a,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)x(l[t],r,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=e.length;l<c;l++){const c=e[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),a.copy(h.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/p.x),r.x=a.x*p.x,h.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/p.y),r.y=a.y*p.y,h.mapSize.y=a.y)),null===h.map&&!h.isPointLightShadow&&3===this.type){const t={minFilter:Ft,magFilter:Ft,format:qt};h.map=new ke(r.x,r.y,t),h.map.texture.name=c.name+".shadowMap",h.mapPass=new ke(r.x,r.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:zt,magFilter:zt,format:qt};h.map=new ke(r.x,r.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const f=h.getViewportCount();for(let t=0;t<f;t++){const e=h.getViewport(t);o.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),d.viewport(o),h.updateMatrices(c,t),i=h.getFrustum(),x(n,s,h.camera,c,this.type)}h.isPointLightShadow||3!==this.type||v(h,s),h.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function Uo(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new Ne;let i=null;const r=new Ne(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?z(2929):F(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){let e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?z(2960):F(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&l===i||(t.stencilOp(e,n,i),o=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null}}};let s={},l=null,c={},u=null,h=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,_=null,b=null,w=null,M=null,S=null;const T=t.getParameter(35661);let E=!1,A=0;const L=t.getParameter(7938);-1!==L.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(L)[1]),E=A>=1):-1!==L.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),E=A>=2);let C=null,R={};const P=t.getParameter(3088),D=t.getParameter(2978),I=(new Ne).fromArray(P),N=(new Ne).fromArray(D);function k(e,n,i){const r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return a}const O={};function z(e){!0!==s[e]&&(t.enable(e),s[e]=!0)}function F(e){!1!==s[e]&&(t.disable(e),s[e]=!1)}O[3553]=k(3553,3553,1),O[34067]=k(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),z(2929),a.setFunc(3),V(!1),G(1),z(2884),H(0);const U={[Rt]:32774,101:32778,102:32779};if(i)U[103]=32775,U[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(U[103]=t.MIN_EXT,U[104]=t.MAX_EXT)}const B={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function H(e,n,i,r,a,o,s,l){if(0!==e){if(!1===h&&(z(3042),h=!0),5===e)a=a||n,o=o||i,s=s||r,n===p&&a===g||(t.blendEquationSeparate(U[n],U[a]),p=n,g=a),i===f&&r===m&&o===v&&s===y||(t.blendFuncSeparate(B[i],B[r],B[o],B[s]),f=i,m=r,v=o,y=s),d=e,x=null;else if(e!==d||l!==x){if(p===Rt&&g===Rt||(t.blendEquation(32774),p=Rt,g=Rt),l)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,v=null,y=null,d=e,x=l}}else!0===h&&(F(3042),h=!1)}function V(e){_!==e&&(e?t.frontFace(2304):t.frontFace(2305),_=e)}function G(e){0!==e?(z(2884),e!==b&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):F(2884),b=e}function W(e,n,i){e?(z(32823),M===n&&S===i||(t.polygonOffset(n,i),M=n,S=i)):F(32823)}function j(e){void 0===e&&(e=33984+T-1),C!==e&&(t.activeTexture(e),C=e)}return{buffers:{color:r,depth:a,stencil:o},enable:z,disable:F,bindFramebuffer:function(e,n){return null===n&&null!==l&&(n=l),c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,i&&(36009===e&&(c[36160]=n),36160===e&&(c[36009]=n)),!0)},bindXRFramebuffer:function(e){e!==l&&(t.bindFramebuffer(36160,e),l=e)},useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:H,setMaterial:function(t,e){2===t.side?F(2884):z(2884);let n=1===t.side;e&&(n=!n),V(n),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;o.setTest(i),i&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),W(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(32926):F(32926)},setFlipSided:V,setCullFace:G,setLineWidth:function(e){e!==w&&(E&&t.lineWidth(e),w=e)},setPolygonOffset:W,setScissorTest:function(t){t?z(3089):F(3089)},activeTexture:j,bindTexture:function(e,n){null===C&&j();let i=R[C];void 0===i&&(i={type:void 0,texture:void 0},R[C]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||O[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=R[C];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===I.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),I.copy(e))},viewport:function(e){!1===N.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),N.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),s={},C=null,R={},l=null,c={},u=null,h=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,_=null,b=null,w=null,M=null,S=null,I.set(0,0,t.canvas.width,t.canvas.height),N.set(0,0,t.canvas.width,t.canvas.height),r.reset(),a.reset(),o.reset()}}}function Bo(t,e,n,i,r,a,o){const s=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return f?new OffscreenCanvas(t,e):Ae("canvas")}function g(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?we:Math.floor,a=i(r*t.width),o=i(r*t.height);void 0===p&&(p=m(a,o));const s=n?m(a,o):p;s.width=a,s.height=o;return s.getContext("2d").drawImage(t,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+o+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return be(t.width)&&be(t.height)}function y(t,e){return t.generateMipmaps&&e&&t.minFilter!==zt&&t.minFilter!==Ft}function x(e,n,r,a,o=1){t.generateMipmap(e);i.get(n).__maxMipLevel=Math.log2(Math.max(r,a,o))}function _(n,i,r,a){if(!1===s)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=a===re?35907:32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function b(t){return t===zt||1004===t||1005===t?9728:9729}function w(e){const n=e.target;n.removeEventListener("dispose",w),function(e){const n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&d.delete(n),o.memory.textures--}function M(e){const n=e.target;n.removeEventListener("dispose",M),function(e){const n=e.texture,r=i.get(e),a=i.get(n);if(!e)return;void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),o.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),o.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}let S=0;function T(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=o.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function E(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;R(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const o=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=o||l?l?i.image[t].image:i.image[t]:g(i.image[t],!1,!0,c);const h=u[0],d=v(h)||s,p=a.convert(i.format),f=a.convert(i.type),m=_(i.internalFormat,p,f,i.encoding);let b;if(C(34067,i,d),o){for(let t=0;t<6;t++){b=u[t].mipmaps;for(let e=0;e<b.length;e++){const r=b[e];i.format!==qt&&i.format!==$t?null!==p?n.compressedTexImage2D(34069+t,e,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,r.width,r.height,0,p,f,r.data)}}e.__maxMipLevel=b.length-1}else{b=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,p,f,u[t].data);for(let e=0;e<b.length;e++){const i=b[e].image[t].image;n.texImage2D(34069+t,e+1,m,i.width,i.height,0,p,f,i.data)}}else{n.texImage2D(34069+t,0,m,p,f,u[t]);for(let e=0;e<b.length;e++){const i=b[e];n.texImage2D(34069+t,e+1,m,p,f,i.image[t])}}e.__maxMipLevel=b.length}y(i,d)&&x(34067,i,h.width,h.height);e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(o,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))}const A={[Nt]:10497,[kt]:33071,[Ot]:33648},L={[zt]:9728,1004:9984,1005:9986,[Ft]:9729,1007:9985,[Ut]:9987};function C(n,a,o){if(o?(t.texParameteri(n,10242,A[a.wrapS]),t.texParameteri(n,10243,A[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[a.wrapR]),t.texParameteri(n,10240,L[a.magFilter]),t.texParameteri(n,10241,L[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===kt&&a.wrapT===kt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,b(a.magFilter)),t.texParameteri(n,10241,b(a.minFilter)),a.minFilter!==zt&&a.minFilter!==Ft&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const o=e.get("EXT_texture_filter_anisotropic");if(a.type===Gt&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&a.type===Wt&&!1===e.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function R(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),o.memory.textures++)}function P(e,i,r){let o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),R(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const l=function(t){return!s&&(t.wrapS!==kt||t.wrapT!==kt||t.minFilter!==zt&&t.minFilter!==Ft)}(i)&&!1===v(i.image),c=g(i.image,l,!1,u),h=v(c)||s,d=a.convert(i.format);let p,f=a.convert(i.type),m=_(i.internalFormat,d,f,i.encoding);C(o,i,h);const b=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===Gt?36012:i.type===Vt?33190:i.type===jt?35056:33189:i.type===Gt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Xt&&6402===m&&i.type!==Ht&&i.type!==Vt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ht,f=a.convert(i.type)),i.format===Yt&&6402===m&&(m=34041,i.type!==jt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=jt,f=a.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(i.isDataTexture)if(b.length>0&&h){for(let t=0,e=b.length;t<e;t++)p=b[t],n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(let t=0,e=b.length;t<e;t++)p=b[t],i.format!==qt&&i.format!==$t?null!==d?n.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);e.__maxMipLevel=b.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),e.__maxMipLevel=0;else if(b.length>0&&h){for(let t=0,e=b.length;t<e;t++)p=b[t],n.texImage2D(3553,t,m,d,f,p);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,d,f,c),e.__maxMipLevel=0;y(i,h)&&x(o,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(e,r,o,s,l){const c=a.convert(o.format),u=a.convert(o.type),h=_(o.internalFormat,c,u,o.encoding);32879===l||35866===l?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,h,r.width,r.height,0,c,u,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Gt?r=36012:e.type===Vt&&(r=33190));const i=k(n);t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const e=k(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=a.convert(e.format),o=a.convert(e.type),s=_(e.internalFormat,r,o,e.encoding);if(i){const e=k(n);t.renderbufferStorageMultisample(36161,e,s,n.width,n.height)}else t.renderbufferStorage(36161,s,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(e){const r=i.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Xt)t.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Yt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,e)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),I(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),I(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function k(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let O=!1,z=!1;this.allocateTextureUnit=function(){const t=S;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?P(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?P(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),u=i.get(l);e.addEventListener("dispose",M),!0!==e.isWebGLMultipleRenderTargets&&(u.__webglTexture=t.createTexture(),u.__version=l.version,o.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=!0===e.isWebGLMultisampleRenderTarget,f=l.isDataTexture3D||l.isDataTexture2DArray,m=v(e)||s;if(!s||l.format!==$t||l.type!==Gt&&l.type!==Wt||(l.format=qt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else if(c.__webglFramebuffer=t.createFramebuffer(),d)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(s){c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const i=a.convert(l.format),r=a.convert(l.type),o=_(l.internalFormat,i,r,l.encoding),s=k(e);t.renderbufferStorageMultisample(36161,s,o,e.width,e.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),I(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,u.__webglTexture),C(34067,l,m);for(let t=0;t<6;t++)D(c.__webglFramebuffer[t],e,l,36064,34069+t);y(l,m)&&x(34067,l,e.width,e.height),n.unbindTexture()}else if(d){const t=e.texture;for(let r=0,a=t.length;r<a;r++){const a=t[r],o=i.get(a);n.bindTexture(3553,o.__webglTexture),C(3553,a,m),D(c.__webglFramebuffer,e,a,36064+r,3553),y(a,m)&&x(3553,a,e.width,e.height)}n.unbindTexture()}else{let t=3553;if(f)if(s){t=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,u.__webglTexture),C(t,l,m),D(c.__webglFramebuffer,e,l,36064,t),y(l,m)&&x(t,l,e.width,e.height,e.depth),n.unbindTexture()}e.depthBuffer&&N(e)},this.updateRenderTargetMipmap=function(t){const e=v(t)||s,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,o=r.length;a<o;a++){const o=r[a];if(y(o,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(o).__webglTexture;n.bindTexture(e,r),x(e,o,t.width,t.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(s){const r=e.width,a=e.height;let o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024);const s=i.get(e);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),t=t.texture),E(t,e)}}function Ho(t,e,n){const i=n.isWebGL2;return{convert:function(t){let n;if(t===Bt)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(t===Ht)return 5123;if(1013===t)return 5124;if(t===Vt)return 5125;if(t===Gt)return 5126;if(t===Wt)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===t)return 6406;if(t===$t)return 6407;if(t===qt)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===Xt)return 6402;if(t===Yt)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):36492===t?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===jt?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Vo extends Xi{constructor(t=[]){super(),this.cameras=t}}Vo.prototype.isArrayCamera=!0;class Go extends Hn{constructor(){super(),this.type="Group"}}Go.prototype.isGroup=!0;const Wo={type:"move"};class jo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fe),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Wo))),l&&t.hand){a=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const t=new Go;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[i.jointName]=t,l.add(t)}const r=l.joints[i.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}}class $o extends he{constructor(t,e){super();const n=this,i=t.state;let r=null,a=1,o=null,s="local-floor",l=null,c=null,u=null,h=null,d=null,p=!1,f=null,m=null,g=null,v=null,y=null,x=null;const _=[],b=new Map,w=new Xi;w.layers.enable(1),w.viewport=new Ne;const M=new Xi;M.layers.enable(2),M.viewport=new Ne;const S=[w,M],T=new Vo;T.layers.enable(1),T.layers.enable(2);let E=null,A=null;function L(t){const e=b.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function C(){b.forEach((function(t,e){t.disconnect(e)})),b.clear(),E=null,A=null,i.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),u&&e.deleteFramebuffer(u),f&&e.deleteFramebuffer(f),m&&e.deleteRenderbuffer(m),g&&e.deleteRenderbuffer(g),u=null,f=null,m=null,g=null,d=null,h=null,c=null,r=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function R(t){const e=r.inputSources;for(let t=0;t<_.length;t++)b.set(e[t],_[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=b.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),b.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],i=b.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=_[t];return void 0===e&&(e=new jo,_[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=_[t];return void 0===e&&(e=new jo,_[t]=e),e.getGripSpace()},this.getHand=function(t){let e=_[t];return void 0===e&&(e=new jo,_[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(t){if(r=t,null!==r){r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",C),r.addEventListener("inputsourceschange",R);const t=e.getContextAttributes();if(!0!==t.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers){const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:d})}else if(e instanceof WebGLRenderingContext){const n={antialias:!0,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(r,e,n),r.updateRenderState({layers:[d]})}else{p=t.antialias;let n=null;t.depth&&(x=256,t.stencil&&(x|=1024),y=t.stencil?33306:36096,n=t.stencil?35056:33190);const o={colorFormat:t.alpha?32856:32849,depthFormat:n,scaleFactor:a};c=new XRWebGLBinding(r,e),h=c.createProjectionLayer(o),u=e.createFramebuffer(),r.updateRenderState({layers:[h]}),p&&(f=e.createFramebuffer(),m=e.createRenderbuffer(),e.bindRenderbuffer(36161,m),e.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),i.bindFramebuffer(36160,f),e.framebufferRenderbuffer(36160,36064,36161,m),e.bindRenderbuffer(36161,null),null!==n&&(g=e.createRenderbuffer(),e.bindRenderbuffer(36161,g),e.renderbufferStorageMultisample(36161,4,n,h.textureWidth,h.textureHeight),e.framebufferRenderbuffer(36160,y,36161,g),e.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}o=await r.requestReferenceSpace(s),k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new Fe,D=new Fe;function I(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;T.near=M.near=w.near=t.near,T.far=M.far=w.far=t.far,E===T.near&&A===T.far||(r.updateRenderState({depthNear:T.near,depthFar:T.far}),E=T.near,A=T.far);const e=t.parent,n=T.cameras;I(T,e);for(let t=0;t<n.length;t++)I(n[t],e);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),t.position.copy(T.position),t.quaternion.copy(T.quaternion),t.scale.copy(T.scale),t.matrix.copy(T.matrix),t.matrixWorld.copy(T.matrixWorld);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){P.setFromMatrixPosition(e.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const i=P.distanceTo(D),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*u,p=o*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=o+f,v=s+f,y=d-m,x=p+(i-m),_=l*s/v*g,b=c*s/v*g;t.projectionMatrix.makePerspective(y,x,_,b,g,v)}(T,w,M):T.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(t){null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)};let N=null;const k=new or;k.setAnimationLoop((function(t,n){if(l=n.getViewerPose(o),v=n,null!==l){const t=l.views;null!==d&&i.bindXRFramebuffer(d.framebuffer);let n=!1;t.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const a=t[r];let o=null;if(null!==d)o=d.getViewport(a);else{const t=c.getViewSubImage(h,a);i.bindXRFramebuffer(u),void 0!==t.depthStencilTexture&&e.framebufferTexture2D(36160,y,3553,t.depthStencilTexture,0),e.framebufferTexture2D(36160,36064,3553,t.colorTexture,0),o=t.viewport}const s=S[r];s.matrix.fromArray(a.transform.matrix),s.projectionMatrix.fromArray(a.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&T.matrix.copy(s.matrix),!0===n&&T.cameras.push(s)}p&&(i.bindXRFramebuffer(f),null!==x&&e.clear(x))}const a=r.inputSources;for(let t=0;t<_.length;t++){const e=_[t],i=a[t];e.update(i,n,o)}if(N&&N(t,n),p){const t=h.textureWidth,n=h.textureHeight;i.bindFramebuffer(36008,f),i.bindFramebuffer(36009,u),e.invalidateFramebuffer(36008,[y]),e.invalidateFramebuffer(36009,[y]),e.blitFramebuffer(0,0,t,n,0,0,t,n,16384,9728),e.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,f)}v=null})),this.setAnimationLoop=function(t){N=t},this.dispose=function(){}}}function qo(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const i=t.get(n).envMap;if(i){e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio;const r=t.get(i).__maxMipLevel;void 0!==r&&(e.maxMipLevel.value=r)}let r,a;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,a,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,o):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,a):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Xo(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=Ae("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ie,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,_=-1,b=null;const w=new Ne,M=new Ne;let S=null,T=e.width,E=e.height,A=1,L=null,C=null;const R=new Ne(0,0,T,E),P=new Ne(0,0,T,E);let D=!1;const I=[],N=new ar;let k=!1,O=!1,z=null;const F=new gn,U=new Fe,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===x?A:1}let V,G,W,j,$,q,X,Y,J,Z,K,Q,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,ht=n;function dt(t,n){for(let i=0;i<t.length;i++){const r=t[i],a=e.getContext(r,n);if(null!==a)return a}return null}try{const t={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",mt,!1),e.addEventListener("webglcontextrestored",gt,!1),null===ht){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),ht=dt(e,t),null===ht)throw dt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ht.getShaderPrecisionFormat&&(ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function pt(){V=new Wr(ht),G=new mr(ht,V,t),V.init(G),ct=new Ho(ht,V,G),W=new Uo(ht,V,G),I[0]=1029,j=new qr(ht),$=new To,q=new Bo(ht,V,W,$,G,ct,j),X=new vr(m),Y=new Gr(m),J=new sr(ht,G),ut=new pr(ht,V,J,G),Z=new jr(ht,J,j,ut),K=new Qr(ht,Z,J,j),ot=new Kr(ht,G,q),it=new gr($),Q=new So(m,X,Y,V,G,ut,it),tt=new qo($),et=new Co($),nt=new ko(V,G),at=new dr(m,X,W,K,s),rt=new Fo(m,K,G),st=new fr(ht,V,j,G),lt=new $r(ht,V,j,G),j.programs=Q.programs,m.capabilities=G,m.extensions=V,m.properties=$,m.renderLists=et,m.shadowMap=rt,m.state=W,m.info=j}pt();const ft=new $o(m,ht);function mt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function gt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=j.autoReset,e=rt.enabled,n=rt.autoUpdate,i=rt.needsUpdate,r=rt.type;pt(),j.autoReset=t,rt.enabled=e,rt.autoUpdate=n,rt.needsUpdate=i,rt.type=r}function vt(t){const e=t.target;e.removeEventListener("dispose",vt),function(t){(function(t){const e=$.get(t).programs;void 0!==e&&e.forEach((function(t){Q.releaseProgram(t)}))})(t),$.remove(t)}(e)}this.xr=ft,this.getContext=function(){return ht},this.getContextAttributes=function(){return ht.getContextAttributes()},this.forceContextLoss=function(){const t=V.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=V.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(t){void 0!==t&&(A=t,this.setSize(T,E,!1))},this.getSize=function(t){return t.set(T,E)},this.setSize=function(t,n,i){ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,E=n,e.width=Math.floor(t*A),e.height=Math.floor(n*A),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(T*A,E*A).floor()},this.setDrawingBufferSize=function(t,n,i){T=t,E=n,A=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(R)},this.setViewport=function(t,e,n,i){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,i),W.viewport(w.copy(R).multiplyScalar(A).floor())},this.getScissor=function(t){return t.copy(P)},this.setScissor=function(t,e,n,i){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,i),W.scissor(M.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(t){W.setScissorTest(D=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){C=t},this.getClearColor=function(t){return t.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ht.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",mt,!1),e.removeEventListener("webglcontextrestored",gt,!1),et.dispose(),nt.dispose(),$.dispose(),X.dispose(),Y.dispose(),K.dispose(),ut.dispose(),ft.dispose(),ft.removeEventListener("sessionstart",xt),ft.removeEventListener("sessionend",_t),z&&(z.dispose(),z=null),bt.stop()},this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=B);const o=r.isMesh&&r.matrixWorld.determinant()<0,s=function(t,e,n,i,r){!0!==e.isScene&&(e=B);q.resetTextureUnits();const a=e.fog,o=i.isMeshStandardMaterial?e.environment:null,s=null===x?m.outputEncoding:x.texture.encoding,l=(i.isMeshStandardMaterial?Y:X).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,g=$.get(i),v=d.state.lights;if(!0===k&&(!0===O||t!==b)){const e=t===b&&i.id===_;it.setState(i,t,e)}let y=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==v.state.version||g.outputEncoding!==s||r.isInstancedMesh&&!1===g.instancing?y=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?y=!0:r.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||i.fog&&g.fog!==a?y=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===it.numPlanes&&g.numIntersection===it.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==h||g.morphNormals!==p||!0===G.isWebGL2&&g.morphTargetsCount!==f)&&(y=!0):y=!0:y=!0:y=!0:(y=!0,g.__version=i.version);let w=g.currentProgram;!0===y&&(w=Et(i,e,r));let M=!1,S=!1,T=!1;const L=w.getUniforms(),C=g.uniforms;W.useProgram(w.program)&&(M=!0,S=!0,T=!0);i.id!==_&&(_=i.id,S=!0);if(M||b!==t){if(L.setValue(ht,"projectionMatrix",t.projectionMatrix),G.logarithmicDepthBuffer&&L.setValue(ht,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,S=!0,T=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=L.map.cameraPosition;void 0!==e&&e.setValue(ht,U.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&L.setValue(ht,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(ht,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(ht,r,"bindMatrix"),L.setOptional(ht,r,"bindMatrixInverse");const t=r.skeleton;t&&(G.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(ht,"boneTexture",t.boneTexture,q),L.setValue(ht,"boneTextureSize",t.boneTextureSize)):L.setOptional(ht,t,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ot.update(r,n,i,w);(S||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,L.setValue(ht,"receiveShadow",r.receiveShadow));S&&(L.setValue(ht,"toneMappingExposure",m.toneMappingExposure),g.needsLights&&(P=T,(R=C).ambientLightColor.needsUpdate=P,R.lightProbe.needsUpdate=P,R.directionalLights.needsUpdate=P,R.directionalLightShadows.needsUpdate=P,R.pointLights.needsUpdate=P,R.pointLightShadows.needsUpdate=P,R.spotLights.needsUpdate=P,R.spotLightShadows.needsUpdate=P,R.rectAreaLights.needsUpdate=P,R.hemisphereLights.needsUpdate=P),a&&i.fog&&tt.refreshFogUniforms(C,a),tt.refreshMaterialUniforms(C,i,A,E,z),no.upload(ht,g.uniformsList,C,q));var R,P;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(no.upload(ht,g.uniformsList,C,q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&L.setValue(ht,"center",r.center);return L.setValue(ht,"modelViewMatrix",r.modelViewMatrix),L.setValue(ht,"normalMatrix",r.normalMatrix),L.setValue(ht,"modelMatrix",r.matrixWorld),w}(t,e,n,i,r);W.setMaterial(i,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=Z.getWireframeAttribute(n),h=2),ut.setup(r,i,s,n,l);let p=st;null!==l&&(u=J.get(l),p=lt,p.setIndex(u));const f=null!==l?l.count:c.count,g=n.drawRange.start*h,v=n.drawRange.count*h,y=null!==a?a.start*h:0,w=null!==a?a.count*h:1/0,M=Math.max(g,y),S=Math.min(f,g+v,y+w)-1,T=Math.max(0,S-M+1);if(0!==T){if(r.isMesh)!0===i.wireframe?(W.setLineWidth(i.wireframeLinewidth*H()),p.setMode(1)):p.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),W.setLineWidth(t*H()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);if(r.isInstancedMesh)p.renderInstances(M,T,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(M,T,t)}else p.render(M,T)}},this.compile=function(t,e){d=nt.get(t),d.init(),f.push(d),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){Et(n[i],t,e)}else Et(n,t,e)})),f.pop(),d=null};let yt=null;function xt(){bt.stop()}function _t(){bt.start()}const bt=new or;function wt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||N.intersectsSprite(t)){i&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=K.update(t),r=t.material;r.visible&&h.push(t,e,r,n,U.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||N.intersectsObject(t))){i&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=K.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r[o.materialIndex];s&&s.visible&&h.push(t,e,s,n,U.z,o)}}else r.visible&&h.push(t,e,r,n,U.z,null)}const r=t.children;for(let t=0,a=r.length;t<a;t++)wt(r[t],e,n,i)}function Mt(t,e,n,i){const r=t.opaque,a=t.transmissive,s=t.transparent;d.setupLightsView(n),a.length>0&&function(t,e,n){if(null===z){const t=!0===o&&!0===G.isWebGL2;z=new(t?Oe:ke)(1024,1024,{generateMipmaps:!0,type:null!==ct.convert(Wt)?Wt:Bt,minFilter:Ut,magFilter:zt,wrapS:kt,wrapT:kt})}const i=m.getRenderTarget();m.setRenderTarget(z),m.clear();const r=m.toneMapping;m.toneMapping=0,St(t,e,n),m.toneMapping=r,q.updateMultisampleRenderTarget(z),q.updateRenderTargetMipmap(z),m.setRenderTarget(i)}(r,e,n),i&&W.viewport(w.copy(i)),r.length>0&&St(r,e,n),a.length>0&&St(a,e,n),s.length>0&&St(s,e,n)}function St(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,a=t.length;r<a;r++){const a=t[r],o=a.object,s=a.geometry,l=null===i?a.material:i,c=a.group;o.layers.test(n.layers)&&Tt(o,e,n,s,l,c)}}function Tt(t,e,n,i,r,a){t.onBeforeRender(m,e,n,i,r,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(m,e,n,i,t,a),!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,a),r.side=0,r.needsUpdate=!0,m.renderBufferDirect(n,e,i,r,t,a),r.side=2):m.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(m,e,n,i,r,a)}function Et(t,e,n){!0!==e.isScene&&(e=B);const i=$.get(t),r=d.state.lights,a=d.state.shadowsArray,o=r.state.version,s=Q.getParameters(t,r.state,a,e,n),l=Q.getProgramCacheKey(s);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?Y:X).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",vt),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===o)return At(t,s),u}else s.uniforms=Q.getUniforms(t),t.onBuild(n,s,m),t.onBeforeCompile(s,m),u=Q.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=it.uniform),At(t,s),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=u.getUniforms(),f=no.seqWithValue(p.seq,h);return i.currentProgram=u,i.uniformsList=f,u}function At(t,e){const n=$.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents}bt.setAnimationLoop((function(t){yt&&yt(t)})),"undefined"!=typeof window&&bt.setContext(window),this.setAnimationLoop=function(t){yt=t,ft.setAnimationLoop(t),null===t?bt.stop():bt.start()},ft.addEventListener("sessionstart",xt),ft.addEventListener("sessionend",_t),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ft.enabled&&!0===ft.isPresenting&&(!0===ft.cameraAutoUpdate&&ft.updateCamera(e),e=ft.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,x),d=nt.get(t,f.length),d.init(),f.push(d),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(F),O=this.localClippingEnabled,k=it.init(this.clippingPlanes,O,e),h=et.get(t,p.length),h.init(),p.push(h),wt(t,e,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(L,C),!0===k&&it.beginShadows();const n=d.state.shadowsArray;if(rt.render(n,t,e),!0===k&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),at.render(h,t),d.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Mt(h,t,i,i.viewport)}}else Mt(h,t,e);null!==x&&(q.updateMultisampleRenderTarget(x),q.updateRenderTargetMipmap(x)),!0===t.isScene&&t.onAfterRender(m,t,e),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),ut.resetDefaultState(),_=-1,b=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTarget=function(t,e=0,n=0){x=t,v=e,y=n,t&&void 0===$.get(t).__webglFramebuffer&&q.setupRenderTarget(t);let i=null,r=!1,a=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const o=$.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=o[e],r=!0):i=t.isWebGLMultisampleRenderTarget?$.get(t).__webglMultisampledFramebuffer:o,w.copy(t.viewport),M.copy(t.scissor),S=t.scissorTest}else w.copy(R).multiplyScalar(A).floor(),M.copy(P).multiplyScalar(A).floor(),S=D;if(W.bindFramebuffer(36160,i)&&G.drawBuffers){let e=!1;if(t)if(t.isWebGLMultipleRenderTargets){const n=t.texture;if(I.length!==n.length||36064!==I[0]){for(let t=0,e=n.length;t<e;t++)I[t]=36064+t;I.length=n.length,e=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,e=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,e=!0);e&&(G.isWebGL2?ht.drawBuffers(I):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(W.viewport(w),W.scissor(M),W.setScissorTest(S),r){const i=$.get(t.texture);ht.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(a){const i=$.get(t.texture),r=e||0;ht.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}_=-1},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=$.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){W.bindFramebuffer(36160,s);try{const o=t.texture,s=o.format,l=o.type;if(s!==qt&&ct.convert(s)!==ht.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Wt&&(V.has("EXT_color_buffer_half_float")||G.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(l===Bt||ct.convert(l)===ht.getParameter(35738)||l===Gt&&(G.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ht.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ht.readPixels(e,n,i,r,ct.convert(s),ct.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==x?$.get(x).__webglFramebuffer:null;W.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i);let o=ct.convert(e.format);G.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(e,0),ht.copyTexImage2D(3553,n,o,t.x,t.y,r,a,0),W.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,a=e.image.height,o=ct.convert(n.format),s=ct.convert(n.type);q.setTexture2D(n,0),ht.pixelStorei(37440,n.flipY),ht.pixelStorei(37441,n.premultiplyAlpha),ht.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ht.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?ht.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ht.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&ht.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=ct.convert(i.format),c=ct.convert(i.type);let u;if(i.isDataTexture3D)q.setTexture3D(i,0),u=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),u=35866}ht.pixelStorei(37440,i.flipY),ht.pixelStorei(37441,i.premultiplyAlpha),ht.pixelStorei(3317,i.unpackAlignment);const h=ht.getParameter(3314),d=ht.getParameter(32878),p=ht.getParameter(3316),f=ht.getParameter(3315),g=ht.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;ht.pixelStorei(3314,v.width),ht.pixelStorei(32878,v.height),ht.pixelStorei(3316,t.min.x),ht.pixelStorei(3315,t.min.y),ht.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?ht.texSubImage3D(u,r,e.x,e.y,e.z,a,o,s,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ht.compressedTexSubImage3D(u,r,e.x,e.y,e.z,a,o,s,l,v.data)):ht.texSubImage3D(u,r,e.x,e.y,e.z,a,o,s,l,c,v),ht.pixelStorei(3314,h),ht.pixelStorei(32878,d),ht.pixelStorei(3316,p),ht.pixelStorei(3315,f),ht.pixelStorei(32877,g),0===r&&i.generateMipmaps&&ht.generateMipmap(u),W.unbindTexture()},this.initTexture=function(t){q.setTexture2D(t,0),W.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,W.reset(),ut.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Xo.prototype.isWebGLRenderer=!0;(class extends Xo{}).prototype.isWebGL1Renderer=!0;class Yo extends Hn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}Yo.prototype.isScene=!0;class Jo{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=le,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ve()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ve()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ve()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Jo.prototype.isInterleavedBuffer=!0;const Zo=new Fe;class Ko{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Zo.x=this.getX(e),Zo.y=this.getY(e),Zo.z=this.getZ(e),Zo.applyMatrix4(t),this.setXYZ(e,Zo.x,Zo.y,Zo.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Zo.x=this.getX(e),Zo.y=this.getY(e),Zo.z=this.getZ(e),Zo.applyNormalMatrix(t),this.setXYZ(e,Zo.x,Zo.y,Zo.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Zo.x=this.getX(e),Zo.y=this.getY(e),Zo.z=this.getZ(e),Zo.transformDirection(t),this.setXYZ(e,Zo.x,Zo.y,Zo.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new hi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ko(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ko.prototype.isInterleavedBufferAttribute=!0;class Qo extends ti{constructor(t){super(),this.type="SpriteMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let ts;Qo.prototype.isSpriteMaterial=!0;const es=new Fe,ns=new Fe,is=new Fe,rs=new Se,as=new Se,os=new gn,ss=new Fe,ls=new Fe,cs=new Fe,us=new Se,hs=new Se,ds=new Se;function ps(t,e,n,i,r,a){rs.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(as.x=a*rs.x-r*rs.y,as.y=r*rs.x+a*rs.y):as.copy(rs),t.copy(e),t.x+=as.x,t.y+=as.y,t.applyMatrix4(os)}(class extends Hn{constructor(t){if(super(),this.type="Sprite",void 0===ts){ts=new wi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Jo(t,5);ts.setIndex([0,1,2,0,2,3]),ts.setAttribute("position",new Ko(e,3,0,!1)),ts.setAttribute("uv",new Ko(e,2,3,!1))}this.geometry=ts,this.material=void 0!==t?t:new Qo,this.center=new Se(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ns.setFromMatrixScale(this.matrixWorld),os.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),is.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ns.multiplyScalar(-is.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;ps(ss.set(-.5,-.5,0),is,a,ns,i,r),ps(ls.set(.5,-.5,0),is,a,ns,i,r),ps(cs.set(.5,.5,0),is,a,ns,i,r),us.set(0,0),hs.set(1,0),ds.set(1,1);let o=t.ray.intersectTriangle(ss,ls,cs,!1,es);if(null===o&&(ps(ls.set(-.5,.5,0),is,a,ns,i,r),hs.set(0,1),o=t.ray.intersectTriangle(ss,cs,ls,!1,es),null===o))return;const s=t.ray.origin.distanceTo(es);s<t.near||s>t.far||e.push({distance:s,point:es.clone(),uv:Kn.getUV(es,ss,ls,cs,us,hs,ds,new Se),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}).prototype.isSprite=!0;const fs=new Fe,ms=new Ne,gs=new Ne,vs=new Fe,ys=new gn;class xs extends Bi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gn,this.bindMatrixInverse=new gn}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ne,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;ms.fromBufferAttribute(i.attributes.skinIndex,t),gs.fromBufferAttribute(i.attributes.skinWeight,t),fs.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=gs.getComponent(t);if(0!==i){const r=ms.getComponent(t);ys.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(vs.copy(fs).applyMatrix4(ys),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}xs.prototype.isSkinnedMesh=!0;(class extends Hn{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends De{constructor(t=null,e=1,n=1,i,r,a,o,s,l=1003,c=1003,u,h){super(null,a,o,s,l,c,i,r,u,h),this.image={data:t,width:e,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class _s extends hi{constructor(t,e,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}_s.prototype.isInstancedBufferAttribute=!0;const bs=new gn,ws=new gn,Ms=[],Ss=new Bi;(class extends Bi{constructor(t,e,n){super(t,e),this.instanceMatrix=new _s(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Ss.geometry=this.geometry,Ss.material=this.material,void 0!==Ss.material)for(let r=0;r<i;r++){this.getMatrixAt(r,bs),ws.multiplyMatrices(n,bs),Ss.matrixWorld=ws,Ss.raycast(t,Ms);for(let t=0,n=Ms.length;t<n;t++){const n=Ms[t];n.instanceId=r,n.object=this,e.push(n)}Ms.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new _s(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Ts extends ti{constructor(t){super(),this.type="LineBasicMaterial",this.color=new si(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Ts.prototype.isLineBasicMaterial=!0;const Es=new Fe,As=new Fe,Ls=new gn,Cs=new mn,Rs=new sn;class Ps extends Hn{constructor(t=new wi,e=new Ts){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)Es.fromBufferAttribute(e,t-1),As.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Es.distanceTo(As);t.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rs.copy(n.boundingSphere),Rs.applyMatrix4(i),Rs.radius+=r,!1===t.ray.intersectsSphere(Rs))return;Ls.copy(i).invert(),Cs.copy(t.ray).applyMatrix4(Ls);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Fe,c=new Fe,u=new Fe,h=new Fe,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,a.start),o=Math.min(i.count,a.start+a.count)-1;n<o;n+=d){const a=i.getX(n),o=i.getX(n+1);l.fromBufferAttribute(r,a),c.fromBufferAttribute(r,o);if(Cs.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(h);d<t.near||d>t.far||e.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),i=Math.min(r.count,a.start+a.count)-1;n<i;n+=d){l.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(Cs.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(h);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ps.prototype.isLine=!0;const Ds=new Fe,Is=new Fe;class Ns extends Ps{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Ds.fromBufferAttribute(e,t),Is.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Ds.distanceTo(Is);t.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ns.prototype.isLineSegments=!0;(class extends Ps{constructor(t,e){super(t,e),this.type="LineLoop"}}).prototype.isLineLoop=!0;class ks extends ti{constructor(t){super(),this.type="PointsMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}ks.prototype.isPointsMaterial=!0;const Os=new gn,zs=new mn,Fs=new sn,Us=new Fe;function Bs(t,e,n,i,r,a,o){const s=zs.distanceSqToPoint(t);if(s<n){const n=new Fe;zs.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:o})}}(class extends Hn{constructor(t=new wi,e=new ks){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fs.copy(n.boundingSphere),Fs.applyMatrix4(i),Fs.radius+=r,!1===t.ray.intersectsSphere(Fs))return;Os.copy(i).invert(),zs.copy(t.ray).applyMatrix4(Os);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){for(let n=Math.max(0,a.start),l=Math.min(r.count,a.start+a.count);n<l;n++){const a=r.getX(n);Us.fromBufferAttribute(o,a),Bs(Us,a,s,i,t,e,this)}}else{for(let n=Math.max(0,a.start),r=Math.min(o.count,a.start+a.count);n<r;n++)Us.fromBufferAttribute(o,n),Bs(Us,n,s,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0;(class extends De{constructor(t,e,n,i,r,a,o,s,l){super(t,e,n,i,r,a,o,s,l),this.format=void 0!==o?o:$t,this.minFilter=void 0!==a?a:Ft,this.magFilter=void 0!==r?r:Ft,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;(class extends De{constructor(t,e,n,i,r,a,o,s,l,c,u,h){super(null,a,o,s,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;(class extends De{constructor(t,e,n,i,r,a,o,s,l){super(t,e,n,i,r,a,o,s,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends De{constructor(t,e,n,i,r,a,o,s,l,c){if((c=void 0!==c?c:Xt)!==Xt&&c!==Yt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Xt&&(n=Ht),void 0===n&&c===Yt&&(n=jt),super(null,i,r,a,o,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:zt,this.minFilter=void 0!==s?s:zt,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0,new Fe,new Fe,new Fe,new Kn;class Hs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let a;a=e||t*n[r-1];let o,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),o=n[i]-a,o<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i];return(i+(a-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),o=this.getPoint(r),s=e||(a.isVector2?new Se:new Fe);return s.copy(o).sub(a).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Fe,i=[],r=[],a=[],o=new Fe,s=new gn;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new Fe)}r[0]=new Fe,a[0]=new Fe;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),a[e]=a[e-1].clone(),o.crossVectors(i[e-1],i[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(ye(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(s.makeRotationAxis(o,t))}a[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(ye(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],e*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Vs extends Hs{constructor(t=0,e=0,n=1,i=1,r=0,a=2*Math.PI,o=!1,s=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(t,e){const n=e||new Se,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const o=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(s,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Vs.prototype.isEllipseCurve=!0;class Gs extends Vs{constructor(t,e,n,i,r,a){super(t,e,n,n,i,r,a),this.type="ArcCurve"}}function Ws(){let t=0,e=0,n=0,i=0;function r(r,a,o,s){t=r,e=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,o,s){let l=(e-t)/a-(n-t)/(a+o)+(n-e)/o,c=(n-e)/o-(i-e)/(o+s)+(i-n)/s;l*=o,c*=o,r(e,n,l,c)},calc:function(r){const a=r*r;return t+e*r+n*a+i*(a*r)}}}Gs.prototype.isArcCurve=!0;const js=new Fe,$s=new Ws,qs=new Ws,Xs=new Ws;class Ys extends Hs{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new Fe){const n=e,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t;let o,s,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?o=i[(l-1)%r]:(js.subVectors(i[0],i[1]).add(i[0]),o=js);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?s=i[(l+2)%r]:(js.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=js),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),$s.initNonuniformCatmullRom(o.x,u.x,h.x,s.x,e,n,i),qs.initNonuniformCatmullRom(o.y,u.y,h.y,s.y,e,n,i),Xs.initNonuniformCatmullRom(o.z,u.z,h.z,s.z,e,n,i)}else"catmullrom"===this.curveType&&($s.initCatmullRom(o.x,u.x,h.x,s.x,this.tension),qs.initCatmullRom(o.y,u.y,h.y,s.y,this.tension),Xs.initCatmullRom(o.z,u.z,h.z,s.z,this.tension));return n.set($s.calc(c),qs.calc(c),Xs.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Fe).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Js(t,e,n,i,r){const a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function Zs(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Ks(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}Ys.prototype.isCatmullRomCurve3=!0;class Qs extends Hs{constructor(t=new Se,e=new Se,n=new Se,i=new Se){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Se){const n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ks(t,i.x,r.x,a.x,o.x),Ks(t,i.y,r.y,a.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Qs.prototype.isCubicBezierCurve=!0;class tl extends Hs{constructor(t=new Fe,e=new Fe,n=new Fe,i=new Fe){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Fe){const n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ks(t,i.x,r.x,a.x,o.x),Ks(t,i.y,r.y,a.y,o.y),Ks(t,i.z,r.z,a.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}tl.prototype.isCubicBezierCurve3=!0;class el extends Hs{constructor(t=new Se,e=new Se){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Se){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Se;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}el.prototype.isLineCurve=!0;class nl extends Hs{constructor(t=new Se,e=new Se,n=new Se){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Se){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(Zs(t,i.x,r.x,a.x),Zs(t,i.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}nl.prototype.isQuadraticBezierCurve=!0;class il extends Hs{constructor(t=new Fe,e=new Fe,n=new Fe){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Fe){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(Zs(t,i.x,r.x,a.x),Zs(t,i.y,r.y,a.y),Zs(t,i.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}il.prototype.isQuadraticBezierCurve3=!0;class rl extends Hs{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Se){const n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Js(o,s.x,l.x,c.x,u.x),Js(o,s.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Se).fromArray(n))}return this}}rl.prototype.isSplineCurve=!0;var al=Object.freeze({__proto__:null,ArcCurve:Gs,CatmullRomCurve3:Ys,CubicBezierCurve:Qs,CubicBezierCurve3:tl,EllipseCurve:Vs,LineCurve:el,LineCurve3:class extends Hs{constructor(t=new Fe,e=new Fe){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Fe){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:nl,QuadraticBezierCurve3:il,SplineCurve:rl});class ol extends Hs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new el(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,a=this.curves[r],o=a.getLength(),s=0===o?0:1-t/o;return a.getPointAt(s,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o);for(let t=0;t<s.length;t++){const i=s[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new al[n.type]).fromJSON(n))}return this}}class sl extends ol{constructor(t){super(),this.type="Path",this.currentPoint=new Se,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new el(this.currentPoint.clone(),new Se(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new nl(this.currentPoint.clone(),new Se(t,e),new Se(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,a){const o=new Qs(this.currentPoint.clone(),new Se(t,e),new Se(n,i),new Se(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new rl(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this}absarc(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this}ellipse(t,e,n,i,r,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,a,o,s),this}absellipse(t,e,n,i,r,a,o,s){const l=new Vs(t,e,n,i,r,a,o,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ll extends sl{constructor(t){super(t),this.uuid=ve(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new sl).fromJSON(n))}return this}}const cl=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=ul(t,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c,u,h,d,p;if(i&&(a=function(t,e,n,i){const r=[];let a,o,s,l,c;for(a=0,o=e.length;a<o;a++)s=e[a]*i,l=a<o-1?e[a+1]*i:t.length,c=ul(t,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(bl(c));for(r.sort(vl),a=0;a<r.length;a++)yl(r[a],n),n=hl(n,n.next);return n}(t,e,a,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-s,u-l),p=0!==p?1/p:0}return dl(a,o,n,s,l,p),o};function ul(t,e,n,i,r){let a,o;if(r===function(t,e,n,i){let r=0;for(let a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)o=Pl(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=Pl(a,t[a],t[a+1],o);return o&&Tl(o,o.next)&&(Dl(o),o=o.next),o}function hl(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Tl(i,i.next)&&0!==Sl(i.prev,i,i.next))i=i.next;else{if(Dl(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function dl(t,e,n,i,r,a,o){if(!t)return;!o&&a&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=_l(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,a,o,s,l,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ,i);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(t,i,r,a);let s,l,c=t;for(;t.prev!==t.next;)if(s=t.prev,l=t.next,a?fl(t,i,r,a):pl(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Dl(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?dl(t=ml(hl(t),e,n),e,n,i,r,a,2):2===o&&gl(t,e,n,i,r,a):dl(hl(t),e,n,i,r,a,1);break}}function pl(t){const e=t.prev,n=t,i=t.next;if(Sl(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(wl(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Sl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fl(t,e,n,i){const r=t.prev,a=t,o=t.next;if(Sl(r,a,o)>=0)return!1;const s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=_l(s,l,e,n,i),d=_l(c,u,e,n,i);let p=t.prevZ,f=t.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&wl(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Sl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&wl(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Sl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&wl(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Sl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&wl(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Sl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ml(t,e,n){let i=t;do{const r=i.prev,a=i.next.next;!Tl(r,a)&&El(r,i,i.next,a)&&Cl(r,a)&&Cl(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),Dl(i),Dl(i.next),i=t=a),i=i.next}while(i!==t);return hl(i)}function gl(t,e,n,i,r,a){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&Ml(o,t)){let s=Rl(o,t);return o=hl(o,o.next),s=hl(s,s.next),dl(o,e,n,i,r,a),void dl(s,e,n,i,r,a)}t=t.next}o=o.next}while(o!==t)}function vl(t,e){return t.x-e.x}function yl(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let a,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>o){if(o=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(i===o)return a;const s=a,l=a.x,c=a.y;let u,h=1/0;n=a;do{i>=n.x&&n.x>=l&&i!==n.x&&wl(r<c?i:o,r,l,c,r<c?o:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),Cl(n,t)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&xl(a,n)))&&(a=n,h=u)),n=n.next}while(n!==s);return a}(t,e),e){const n=Rl(e,t);hl(e,e.next),hl(n,n.next)}}function xl(t,e){return Sl(t.prev,t,e.prev)<0&&Sl(e.next,t,t.next)<0}function _l(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function bl(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function wl(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Ml(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&El(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Cl(t,e)&&Cl(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Sl(t.prev,t,e.prev)||Sl(t,e.prev,e))||Tl(t,e)&&Sl(t.prev,t,t.next)>0&&Sl(e.prev,e,e.next)>0)}function Sl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Tl(t,e){return t.x===e.x&&t.y===e.y}function El(t,e,n,i){const r=Ll(Sl(t,e,n)),a=Ll(Sl(t,e,i)),o=Ll(Sl(n,i,t)),s=Ll(Sl(n,i,e));return r!==a&&o!==s||(!(0!==r||!Al(t,n,e))||(!(0!==a||!Al(t,i,e))||(!(0!==o||!Al(n,t,i))||!(0!==s||!Al(n,e,i)))))}function Al(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ll(t){return t>0?1:t<0?-1:0}function Cl(t,e){return Sl(t.prev,t,t.next)<0?Sl(t,e,t.next)>=0&&Sl(t,t.prev,e)>=0:Sl(t,e,t.prev)<0||Sl(t,t.next,e)<0}function Rl(t,e){const n=new Il(t.i,t.x,t.y),i=new Il(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Pl(t,e,n,i){const r=new Il(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Dl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Il(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Nl{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return Nl.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];kl(t),Ol(n,t);let a=t.length;e.forEach(kl);for(let t=0;t<e.length;t++)i.push(a),a+=e[t].length,Ol(n,e[t]);const o=cl(n,i);for(let t=0;t<o.length;t+=3)r.push(o.slice(t,t+3));return r}}function kl(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ol(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class zl extends wi{constructor(t=new ll([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let e=0,n=t.length;e<n;e++){a(t[e])}function a(t){const a=[],o=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Fl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,v,y,x,_,b=!1;f&&(g=f.getSpacedPoints(s),b=!0,c=!1,v=f.computeFrenetFrames(s,!1),y=new Fe,x=new Fe,_=new Fe),c||(p=0,u=0,h=0,d=0);const w=t.extractPoints(o);let M=w.shape;const S=w.holes;if(!Nl.isClockWise(M)){M=M.reverse();for(let t=0,e=S.length;t<e;t++){const e=S[t];Nl.isClockWise(e)&&(S[t]=e.reverse())}}const T=Nl.triangulateShape(M,S),E=M;for(let t=0,e=S.length;t<e;t++){const e=S[t];M=M.concat(e)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=M.length,C=T.length;function R(t,e,n){let i,r,a;const o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=o*o+s*s,h=o*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=e.x-s/h,f=e.y+o/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-s*l);i=p+o*m-t.x,r=f+s*m-t.y;const g=i*i+r*r;if(g<=2)return new Se(i,r);a=Math.sqrt(g/2)}else{let t=!1;o>Number.EPSILON?l>Number.EPSILON&&(t=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Se(i/a,r/a)}const P=[];for(let t=0,e=E.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),P[t]=R(E[t],E[n],E[i]);const D=[];let I,N=P.concat();for(let t=0,e=S.length;t<e;t++){const e=S[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=R(e[t],e[i],e[r]);D.push(I),N=N.concat(I)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],P[t],i);z(e.x,e.y,-n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];I=D[t];for(let t=0,r=e.length;t<r;t++){const r=A(e[t],I[t],i);z(r.x,r.y,-n)}}}const k=h+d;for(let t=0;t<L;t++){const e=c?A(M[t],N[t],k):M[t];b?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(x).add(y),z(_.x,_.y,_.z)):z(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<L;e++){const n=c?A(M[e],N[e],k):M[e];b?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(x).add(y),z(_.x,_.y,_.z)):z(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=A(E[t],P[t],i);z(e.x,e.y,l+n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];I=D[t];for(let t=0,r=e.length;t<r;t++){const r=A(e[t],I[t],i);b?z(r.x,r.y+g[s-1].y,g[s-1].x+n):z(r.x,r.y,l+n)}}}function O(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=L*t,a=L*(t+1);U(e+i+n,e+r+n,e+r+a,e+i+a)}}}function z(t,e,n){a.push(t),a.push(e),a.push(n)}function F(t,e,r){B(t),B(e),B(r);const a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function U(t,e,r,a){B(t),B(e),B(a),B(e),B(r),B(a);const o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function B(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function H(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=L*t;for(let t=0;t<C;t++){const n=T[t];F(n[2]+e,n[1]+e,n[0]+e)}t=s+2*p,e=L*t;for(let t=0;t<C;t++){const n=T[t];F(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<C;t++){const e=T[t];F(e[2],e[1],e[0])}for(let t=0;t<C;t++){const e=T[t];F(e[0]+L*s,e[1]+L*s,e[2]+L*s)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;O(E,e),e+=E.length;for(let t=0,n=S.length;t<n;t++){const n=S[t];O(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new fi(i,3)),this.setAttribute("uv",new fi(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new al[i.type]).fromJSON(i)),new zl(n,t.options)}}const Fl={generateTopUV:function(t,e,n,i,r){const a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new Se(a,o),new Se(s,l),new Se(c,u)]},generateSideWallUV:function(t,e,n,i,r,a){const o=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new Se(o,1-l),new Se(c,1-h),new Se(d,1-f),new Se(m,1-v)]:[new Se(s,1-l),new Se(u,1-h),new Se(p,1-f),new Se(g,1-v)]}};class Ul extends wi{constructor(t=new ll([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],a=[];let o=0,s=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(o,s,e),o+=s,s=0;function l(t){const o=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===Nl.isClockWise(c)&&(c=c.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===Nl.isClockWise(e)&&(u[t]=e.reverse())}const h=Nl.triangulateShape(c,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],i=e[0]+o,r=e[1]+o,a=e[2]+o;n.push(i,r,a),s+=3}}this.setIndex(n),this.setAttribute("position",new fi(i,3)),this.setAttribute("normal",new fi(r,3)),this.setAttribute("uv",new fi(a,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new Ul(n,t.curveSegments)}}class Bl extends wi{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const c=[],u=new Fe,h=new Fe,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==a?y=.5/e:d==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(i+s*r)*Math.sin(a+v*o),u.y=t*Math.cos(a+v*o),u.z=t*Math.sin(i+s*r)*Math.sin(a+v*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(l++)}c.push(g)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=c[t][i+1],r=c[t][i],o=c[t+1][i],l=c[t+1][i+1];(0!==t||a>0)&&d.push(e,r,l),(t!==n-1||s<Math.PI)&&d.push(r,o,l)}this.setIndex(d),this.setAttribute("position",new fi(p,3)),this.setAttribute("normal",new fi(f,3)),this.setAttribute("uv",new fi(m,2))}static fromJSON(t){return new Bl(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}(class extends ti{constructor(t){super(),this.type="ShadowMaterial",this.color=new si(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}).prototype.isShadowMaterial=!0;class Hl extends ti{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Hl.prototype.isMeshStandardMaterial=!0;(class extends Hl{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ye(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new si(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class extends ti{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new si(16777215),this.specular=new si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends ti{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends ti{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends ti{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends ti{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends Ts{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Vl={arraySlice:function(t,e,n){return Vl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,o=0;o!==i;++a){const i=n[a]*e;for(let n=0;n!==e;++n)r[o++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,a=t[0];for(;void 0!==a&&void 0===a[i];)a=t[r++];if(void 0===a)return;let o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)},subclip:function(t,e,n,i,r=30){const a=t.clone();a.name=e;const o=[];for(let t=0;t<a.tracks.length;++t){const e=a.tracks[t],s=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const a=e.times[t]*r;if(!(a<n||a>=i)){l.push(e.times[t]);for(let n=0;n<s;++n)c.push(e.values[t*s+n])}}0!==l.length&&(e.times=Vl.convertArray(l,e.times.constructor),e.values=Vl.convertArray(c,e.values.constructor),o.push(e))}a.tracks=o;let s=1/0;for(let t=0;t<a.tracks.length;++t)s>a.tracks[t].times[0]&&(s=a.tracks[t].times[0]);for(let t=0;t<a.tracks.length;++t)a.tracks[t].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===o)continue;let s=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=i.times.length-1;let d;if(a<=i.times[0]){const t=s,e=l-s;d=Vl.arraySlice(i.values,t,e)}else if(a>=i.times[h]){const t=h*l+s,e=t+l-s;d=Vl.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=s,n=l-s;t.evaluate(a),d=Vl.arraySlice(t.resultBuffer,e,n)}if("quaternion"===r){(new ze).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let t=0;t<p;++t){const e=t*u+c;if("quaternion"===r)ze.multiplyQuaternionsFlat(o.values,e,d,0,o.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)o.values[e+n]-=d[n]}}}return t.blendMode=2501,t}};class Gl{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<i)){for(let a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}if(t>=r)break t;{const o=e[1];t<o&&(n=2,r=o);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}}for(;n<a;){const i=n+a>>>1;t<e[i]?a=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Gl.prototype.beforeStart_=Gl.prototype.copySampleValue_,Gl.prototype.afterEnd_=Gl.prototype.copySampleValue_;class Wl extends Gl{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qt,endingEnd:Qt}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case te:r=t,o=2*e-n;break;case ee:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case te:a=t,s=2*n-e;break;case ee:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let t=0;t!==o;++t)r[t]=g*a[c+t]+v*a[l+t]+y*a[s+t]+x*a[u+t];return r}}class jl extends Gl{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=(n-e)/(i-e),u=1-c;for(let t=0;t!==o;++t)r[t]=a[l+t]*u+a[s+t]*c;return r}}class $l extends Gl{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class ql{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Vl.convertArray(e,this.TimeBufferType),this.values=Vl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Vl.convertArray(t.times,Array),values:Vl.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new $l(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new jl(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Wl(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Jt:e=this.InterpolantFactoryMethodDiscrete;break;case Zt:e=this.InterpolantFactoryMethodLinear;break;case Kt:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jt;case this.InterpolantFactoryMethodLinear:return Zt;case this.InterpolantFactoryMethodSmooth:return Kt}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const t=this.getValueSize();this.times=Vl.arraySlice(n,r,a),this.values=Vl.arraySlice(this.values,r*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,a),t=!1;break}a=i}if(void 0!==i&&Vl.isTypedArray(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Vl.arraySlice(this.times),e=Vl.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Kt,r=t.length-1;let a=1;for(let o=1;o<r;++o){let r=!1;const s=t[o];if(s!==t[o+1]&&(1!==o||s!==t[0]))if(i)r=!0;else{const t=o*n,i=t-n,a=t+n;for(let o=0;o!==n;++o){const n=e[t+o];if(n!==e[i+o]||n!==e[a+o]){r=!0;break}}}if(r){if(o!==a){t[a]=t[o];const i=o*n,r=a*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++a}}if(r>0){t[a]=t[r];for(let t=r*n,i=a*n,o=0;o!==n;++o)e[i+o]=e[t+o];++a}return a!==t.length?(this.times=Vl.arraySlice(t,0,a),this.values=Vl.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this}clone(){const t=Vl.arraySlice(this.times,0),e=Vl.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}ql.prototype.TimeBufferType=Float32Array,ql.prototype.ValueBufferType=Float32Array,ql.prototype.DefaultInterpolation=Zt;class Xl extends ql{}Xl.prototype.ValueTypeName="bool",Xl.prototype.ValueBufferType=Array,Xl.prototype.DefaultInterpolation=Jt,Xl.prototype.InterpolantFactoryMethodLinear=void 0,Xl.prototype.InterpolantFactoryMethodSmooth=void 0;class Yl extends ql{}Yl.prototype.ValueTypeName="color";class Jl extends ql{}Jl.prototype.ValueTypeName="number";class Zl extends Gl{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(i-e);let l=t*o;for(let t=l+o;l!==t;l+=4)ze.slerpFlat(r,0,a,l-o,a,l,s);return r}}class Kl extends ql{InterpolantFactoryMethodLinear(t){return new Zl(this.times,this.values,this.getValueSize(),t)}}Kl.prototype.ValueTypeName="quaternion",Kl.prototype.DefaultInterpolation=Zt,Kl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ql extends ql{}Ql.prototype.ValueTypeName="string",Ql.prototype.ValueBufferType=Array,Ql.prototype.DefaultInterpolation=Jt,Ql.prototype.InterpolantFactoryMethodLinear=void 0,Ql.prototype.InterpolantFactoryMethodSmooth=void 0;class tc extends ql{}tc.prototype.ValueTypeName="vector";class ec{constructor(t,e=-1,n,i=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=ve(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(nc(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(ql.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,a=[];for(let t=0;t<r;t++){let o=[],s=[];o.push((t+r-1)%r,t,(t+1)%r),s.push(0,1,0);const l=Vl.getKeyframeOrder(o);o=Vl.sortedArray(o,1,l),s=Vl.sortedArray(s,1,l),i||0!==o[0]||(o.push(r),s.push(s[0])),a.push(new Jl(".morphTargetInfluences["+e[t].name+"]",o,s).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],a=n.name.match(r);if(a&&a.length>1){const t=a[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const a=[];for(const t in i)a.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const a=[],o=[];Vl.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.fps||30,o=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],a=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new Jl(".morphTargetInfluence["+n+"]",t,a))}s=t.length*(a||1)}else{const a=".bones["+e[t].name+"]";n(tc,a+".position",r,"pos",i),n(Kl,a+".quaternion",r,"rot",i),n(tc,a+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,s,i,o)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jl;case"vector":case"vector2":case"vector3":case"vector4":return tc;case"color":return Yl;case"quaternion":return Kl;case"bool":case"boolean":return Xl;case"string":return Ql}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Vl.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const ic={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};const rc=new class{constructor(t,e,n){const i=this;let r,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===a&&void 0!==i.onStart&&i.onStart(t,o,s),a=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}};class ac{constructor(t){this.manager=void 0!==t?t:rc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const oc={};class sc extends ac{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=ic.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==oc[t])return void oc[t].push({onLoad:e,onProgress:n,onError:i});oc[t]=[],oc[t].push({onLoad:e,onProgress:n,onError:i});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(a).then((e=>{if(200===e.status||0===e.status){0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=oc[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),a=r?parseInt(r):0,o=0!==a;let s=0;return new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{s+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}))}()}})}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)})).then((t=>{const e=new Response(t);switch(this.responseType){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((t=>(new DOMParser).parseFromString(t,this.mimeType)));case"json":return e.json();default:return e.text()}})).then((e=>{ic.add(t,e);const n=oc[t];delete oc[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}this.manager.itemEnd(t)})).catch((e=>{const n=oc[t];delete oc[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t),this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class lc extends ac{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=ic.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;const o=Ae("img");function s(){c(),ic.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}class cc extends ac{constructor(t){super(t)}load(t,e,n,i){const r=new Zi,a=new lc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(t[n],(function(t){r.images[n]=t,o++,6===o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)s(e);return r}}class uc extends ac{constructor(t){super(t)}load(t,e,n,i){const r=new De,a=new lc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class hc extends Hn{constructor(t,e=1){super(),this.type="Light",this.color=new si(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}hc.prototype.isLight=!0;(class extends hc{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.groundColor=new si(e)}copy(t){return hc.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}).prototype.isHemisphereLight=!0;const dc=new gn,pc=new Fe,fc=new Fe;class mc{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ar,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new Ne(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;pc.setFromMatrixPosition(t.matrixWorld),e.position.copy(pc),fc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(fc),e.updateMatrixWorld(),dc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class gc extends mc{constructor(){super(new Xi(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*fe*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}gc.prototype.isSpotLightShadow=!0;(class extends hc{constructor(t,e,n=0,i=Math.PI/3,r=0,a=1){super(t,e),this.type="SpotLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.shadow=new gc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}).prototype.isSpotLight=!0;const vc=new gn,yc=new Fe,xc=new Fe;class _c extends mc{constructor(){super(new Xi(90,1,.5,500)),this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new Ne(2,1,1,1),new Ne(0,1,1,1),new Ne(3,1,1,1),new Ne(1,1,1,1),new Ne(3,0,1,1),new Ne(1,0,1,1)],this._cubeDirections=[new Fe(1,0,0),new Fe(-1,0,0),new Fe(0,0,1),new Fe(0,0,-1),new Fe(0,1,0),new Fe(0,-1,0)],this._cubeUps=[new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,0,1),new Fe(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),yc.setFromMatrixPosition(t.matrixWorld),n.position.copy(yc),xc.copy(n.position),xc.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(xc),n.updateMatrixWorld(),i.makeTranslation(-yc.x,-yc.y,-yc.z),vc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vc)}}_c.prototype.isPointLightShadow=!0;(class extends hc{constructor(t,e,n=0,i=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new _c}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}).prototype.isPointLight=!0;class bc extends mc{constructor(){super(new yr(-5,5,5,-5,.5,500))}}bc.prototype.isDirectionalLightShadow=!0;(class extends hc{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.shadow=new bc}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends hc{constructor(t,e){super(t,e),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends hc{constructor(t,e,n=10,i=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}).prototype.isRectAreaLight=!0;class wc{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Fe)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*i*1.092548),e.addScaledVector(a[5],i*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],n*r*1.092548),e.addScaledVector(a[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}wc.prototype.isSphericalHarmonics3=!0;class Mc extends hc{constructor(t=new wc,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Mc.prototype.isLightProbe=!0;(class extends wi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}).prototype.isInstancedBufferGeometry=!0;let Sc;(class extends ac{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=ic.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){ic.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}).prototype.isImageBitmapLoader=!0;const Tc=function(){return void 0===Sc&&(Sc=new(window.AudioContext||window.webkitAudioContext)),Sc};class Ec extends ac{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new sc(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{const t=n.slice(0);Tc().decodeAudioData(t,(function(t){e(t)}))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}}(class extends Mc{constructor(t,e,n=1){super(void 0,n);const i=(new si).set(t),r=(new si).set(e),a=new Fe(i.r,i.g,i.b),o=new Fe(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends Mc{constructor(t,e=1){super(void 0,e);const n=(new si).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Ac{constructor(t,e,n){let i,r,a;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let a=this.cumulativeWeight;if(0===a){for(let t=0;t!==i;++t)n[r+t]=n[t];a=e}else{a+=e;const t=e/a;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){o.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]}_slerp(t,e,n,i){ze.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const a=this._workIndex*r;ze.multiplyQuaternionsFlat(t,a,t,e,t,n),ze.slerpFlat(t,e,t,e,t,a,i)}_lerp(t,e,n,i,r){const a=1-i;for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]*a+t[n+o]*i}}_lerpAdditive(t,e,n,i,r){for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]+t[n+a]*i}}}const Lc="\\[\\]\\.:\\/",Cc=new RegExp("[\\[\\]\\.:\\/]","g"),Rc="[^\\[\\]\\.:\\/]",Pc="[^"+Lc.replace("\\.","")+"]",Dc=/((?:WC+[\/:])*)/.source.replace("WC",Rc),Ic=/(WCOD+)?/.source.replace("WCOD",Pc),Nc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rc),kc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rc),Oc=new RegExp("^"+Dc+Ic+Nc+kc+"$"),zc=["material","materials","bones"];class Fc{constructor(t,e,n){this.path=e,this.parsedPath=n||Fc.parseTrackName(e),this.node=Fc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Fc.Composite(t,e,n):new Fc(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Cc,"")}static parseTrackName(t){const e=Oc.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==zc.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const a=n(r.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Fc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const a=t[i];if(void 0===a){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fc.Composite=class{constructor(t,e,n){const i=n||Fc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Fc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Fc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Fc.prototype.GetterByBindingType=[Fc.prototype._getValue_direct,Fc.prototype._getValue_array,Fc.prototype._getValue_arrayElement,Fc.prototype._getValue_toArray],Fc.prototype.SetterByBindingTypeAndVersioning=[[Fc.prototype._setValue_direct,Fc.prototype._setValue_direct_setNeedsUpdate,Fc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_array,Fc.prototype._setValue_array_setNeedsUpdate,Fc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_arrayElement,Fc.prototype._setValue_arrayElement_setNeedsUpdate,Fc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_fromArray,Fc.prototype._setValue_fromArray_setNeedsUpdate,Fc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Uc{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,a=r.length,o=new Array(a),s={endingStart:Qt,endingEnd:Qt};for(let t=0;t!==a;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,a=n/i;t.warp(1,r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const a=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(a),e[n].accumulateAdditive(o);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(a),e[n].accumulate(i,o)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const a=2202===n;if(0===t)return-1===r?i:a&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===o){const e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=te,i.endingEnd=te):(i.endingStart=t?this.zeroSlopeAtStart?te:Qt:ee,i.endingEnd=e?this.zeroSlopeAtEnd?te:Qt:ee)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}(class extends he{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let u=c[l];if(void 0!==u)a[t]=u;else{if(u=a[t],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;u=new Ac(Fc.create(n,l,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),a[t]=u}o[t].resultBuffer=u.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null;delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[e];void 0===a&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new jl(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let a="string"==typeof t?ec.findByName(i,t):t;const o=null!==a?a.uuid:t,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:ne),void 0!==s){const t=s.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Uc(this,a,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?ec.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let o=0;o!==n;++o){e[o]._update(i,t,r,a)}const o=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)o[t].apply(a);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,a=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,e[r]=a,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);(class extends Jo{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;const Bc=new Fe,Hc=new gn,Vc=new gn;function Gc(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Gc(t.children[n]));return e}const Wc=new Float32Array(1);function jc(e){let n;return{c(){n=f("canvas"),x(n,"id","bg"),x(n,"class","fade-in-long svelte-18dj93x")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}new Int32Array(Wc.buffer),Hs.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Hs.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},sl.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},class extends Ns{constructor(t=10,e=10,n=4473924,i=8947848){n=new si(n),i=new si(i);const r=e/2,a=t/e,o=t/2,s=[],l=[];for(let t=0,c=0,u=-o;t<=e;t++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const e=t===r?n:i;e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3}const c=new wi;c.setAttribute("position",new fi(s,3)),c.setAttribute("color",new fi(l,3));super(c,new Ts({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Ns{constructor(t){const e=Gc(t),n=new wi,i=[],r=[],a=new si(0,0,1),o=new si(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new fi(i,3)),n.setAttribute("color",new fi(r,3));super(n,new Ts({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Vc.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Hc.multiplyMatrices(Vc,r.matrixWorld),Bc.setFromMatrixPosition(Hc),i.setXYZ(n,Bc.x,Bc.y,Bc.z),Hc.multiplyMatrices(Vc,r.parent.matrixWorld),Bc.setFromMatrixPosition(Hc),i.setXYZ(n+1,Bc.x,Bc.y,Bc.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ac.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}.extractUrlBase(t)},ac.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},He.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},He.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},He.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},He.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},He.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},sn.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ar.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Te.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Te.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Te.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Te.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Te.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Te.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},gn.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},gn.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},gn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Fe).setFromMatrixColumn(this,3)},gn.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},gn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},gn.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},gn.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},gn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},gn.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},gn.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},gn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},gn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},gn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},gn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},gn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},gn.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},gn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},gn.prototype.makeFrustum=function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)},gn.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},nr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},ze.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},ze.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},mn.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},mn.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},mn.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Kn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Kn.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Kn.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Kn.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Kn.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Kn.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kn.getBarycoord(t,e,n,i,r)},Kn.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kn.getNormal(t,e,n,i)},ll.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},ll.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new zl(this,t)},ll.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ul(this,t)},Se.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Se.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Fe.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Fe.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Fe.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Fe.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Fe.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Fe.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Fe.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Fe.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Fe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ne.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Hn.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Hn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Hn.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Hn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Hn.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Hn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Bi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Bi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),xs.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Xi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(hc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(hi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ce},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ce)}}}),hi.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?ce:le),this},hi.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},hi.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},wi.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},wi.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new hi(arguments[1],arguments[2])))},wi.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},wi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},wi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},wi.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},wi.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(wi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Jo.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?ce:le),this},Jo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},zl.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},zl.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},zl.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Yo.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(ti.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new si}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties($i.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Xo.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},Xo.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},Xo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Xo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Xo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Xo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Xo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Xo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Xo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Xo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Xo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Xo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Xo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Xo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Xo.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},Xo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Xo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Xo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Xo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Xo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Xo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Xo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Xo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Xo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Xo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Xo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?re:ie}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Fo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ke.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),class extends Hn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Ec).load(t,(function(t){e.setBuffer(t)})),this},Ji.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Ji.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},Re.crossOrigin=void 0,Re.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new uc;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Re.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new cc;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Re.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Re.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"134"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="134");function $c(t,e,n,i,r,a){var o=t-i,s=e-r,l=n-a;return Math.sqrt(o*o+s*s+l*l)}function qc(t){function e(t,e,n,i){const r=new Bl(i,12,12),a=new li({color:0,opacity:.15,transparent:!0}),o=new Bi(r,a);return o.position.set(t,e,n),o}function n(t,e,n,i,r,a){const o=(new wi).setFromPoints([new Fe(t,e,n),new Fe(i,r,a)]),s=new Ts({color:0,opacity:.15,transparent:!0});return new Ps(o,s)}let i=[];for(let t=0;t<500;t++){const[t,n,r]=Array(3).fill().map((()=>Me.randFloatSpread(70))),a=e(t,n,r,.1+.05*Math.random());i.push(a)}let r=[];for(let t=0;t<i.length;t++){let e=[];for(let n=t+1;n<i.length;n++){const[r,a,o]=i[t].position,[s,l,c]=i[n].position,u=$c(r,a,o,s,l,c);e.push([n,u])}e.sort(((t,e)=>t[1]-e[1]));for(let a=0;a<3;a++){if(a>=e.length)continue;const[o,s]=e[a],[l,c,u]=i[t].position,[h,d,p]=i[o].position;if(Math.random()>.5)continue;const f=n(l,c,u,h,d,p);r.push(f)}}return T((()=>{const t=document.querySelector("#bg"),e=new Yo,n=new Xi(50,window.innerWidth/window.innerHeight,.1,1e3),a=new Xo({alpha:!0,canvas:t});function o(){const t=document.querySelector("main").scrollTop;n.position.z=.002*t}a.setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),n.position.x=0,n.position.y=0,n.position.z=0,i.forEach((t=>e.add(t))),r.forEach((t=>e.add(t))),a.render(e,n),function t(){requestAnimationFrame(t),n.rotation.z+=5e-4,a.render(e,n)}(),setTimeout((()=>{document.querySelector("main").addEventListener("scroll",o)}),200)})),[]}class Xc extends J{constructor(t){super(),Y(this,t,qc,jc,a,{})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jc={exports:{}};Jc.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i="swal-button";e.CLASS_NAMES={MODAL:"swal-modal",OVERLAY:"swal-overlay",SHOW_MODAL:"swal-overlay--show-modal",MODAL_TITLE:"swal-title",MODAL_TEXT:"swal-text",ICON:"swal-icon",ICON_CUSTOM:"swal-icon--custom",CONTENT:"swal-content",FOOTER:"swal-footer",BUTTON_CONTAINER:"swal-button-container",BUTTON:i,CONFIRM_BUTTON:i+"--confirm",CANCEL_BUTTON:i+"--cancel",DANGER_BUTTON:i+"--danger",BUTTON_LOADING:i+"--loading",BUTTON_LOADER:i+"__loader"},e.default=e.CLASS_NAMES},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=function(t){var e="."+t;return document.querySelector(e)},e.stringToNode=function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},e.insertAfter=function(t,e){var n=e.nextSibling;e.parentNode.insertBefore(t,n)},e.removeNode=function(t){t.parentElement.removeChild(t)},e.throwErr=function(t){throw"SweetAlert: "+(t=t.replace(/ +(?= )/g,"")).trim()},e.isPlainObject=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype},e.ordinalSuffixOf=function(t){var e=t%10,n=t%100;return 1===e&&11!==n?t+"st":2===e&&12!==n?t+"nd":3===e&&13!==n?t+"rd":t+"th"}},function(t,e,n){function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(25));var r=n(26);e.overlayMarkup=r.default,i(n(27)),i(n(28)),i(n(29));var a=n(0),o=a.default.MODAL_TITLE,s=a.default.MODAL_TEXT,l=a.default.ICON,c=a.default.FOOTER;e.iconMarkup='\n  <div class="'+l+'"></div>',e.titleMarkup='\n  <div class="'+o+'"></div>\n',e.textMarkup='\n  <div class="'+s+'"></div>',e.footerMarkup='\n  <div class="'+c+'"></div>\n'},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.CONFIRM_KEY="confirm",e.CANCEL_KEY="cancel";var r={visible:!0,text:null,value:null,className:"",closeModal:!0},a=Object.assign({},r,{visible:!1,text:"Cancel",value:null}),o=Object.assign({},r,{text:"OK",value:!0});e.defaultButtonList={cancel:a,confirm:o};var s=function(t){switch(t){case e.CONFIRM_KEY:return o;case e.CANCEL_KEY:return a;default:var n=t.charAt(0).toUpperCase()+t.slice(1);return Object.assign({},r,{text:n,value:t})}},l=function(t,e){var n=s(t);return!0===e?Object.assign({},n,{visible:!0}):"string"==typeof e?Object.assign({},n,{visible:!0,text:e}):i.isPlainObject(e)?Object.assign({visible:!0},n,e):Object.assign({},n,{visible:!1})},c=function(t){for(var e={},n=0,i=Object.keys(t);n<i.length;n++){var r=i[n],o=t[r],s=l(r,o);e[r]=s}return e.cancel||(e.cancel=a),e},u=function(t){var n={};switch(t.length){case 1:n[e.CANCEL_KEY]=Object.assign({},a,{visible:!1});break;case 2:n[e.CANCEL_KEY]=l(e.CANCEL_KEY,t[0]),n[e.CONFIRM_KEY]=l(e.CONFIRM_KEY,t[1]);break;default:i.throwErr("Invalid number of 'buttons' in array ("+t.length+").\n      If you want more than 2 buttons, you need to use an object!")}return n};e.getButtonListOpts=function(t){var n=e.defaultButtonList;return"string"==typeof t?n[e.CONFIRM_KEY]=l(e.CONFIRM_KEY,t):Array.isArray(t)?n=u(t):i.isPlainObject(t)?n=c(t):!0===t?n=u([!0,!0]):!1===t?n=u([!1,!1]):void 0===t&&(n=e.defaultButtonList),n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(2),a=n(0),o=a.default.MODAL,s=a.default.OVERLAY,l=n(30),c=n(31),u=n(32),h=n(33);e.injectElIntoModal=function(t){var e=i.getNode(o),n=i.stringToNode(t);return e.appendChild(n),n};var d=function(t){t.className=o,t.textContent=""},p=function(t,e){d(t);var n=e.className;n&&t.classList.add(n)};e.initModalContent=function(t){var e=i.getNode(o);p(e,t),l.default(t.icon),c.initTitle(t.title),c.initText(t.text),h.default(t.content),u.default(t.buttons,t.dangerMode)};var f=function(){var t=i.getNode(s),e=i.stringToNode(r.modalMarkup);t.appendChild(e)};e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r={isOpen:!1,promise:null,actions:{},timer:null},a=Object.assign({},r);e.resetState=function(){a=Object.assign({},r)},e.setActionValue=function(t){if("string"==typeof t)return o(i.CONFIRM_KEY,t);for(var e in t)o(e,t[e])};var o=function(t,e){a.actions[t]||(a.actions[t]={}),Object.assign(a.actions[t],{value:e})};e.setActionOptionsFor=function(t,e){var n=(void 0===e?{}:e).closeModal,i=void 0===n||n;Object.assign(a.actions[t],{closeModal:i})},e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3),a=n(0),o=a.default.OVERLAY,s=a.default.SHOW_MODAL,l=a.default.BUTTON,c=a.default.BUTTON_LOADING,u=n(5);e.openModal=function(){i.getNode(o).classList.add(s),u.default.isOpen=!0};var h=function(){i.getNode(o).classList.remove(s),u.default.isOpen=!1};e.onAction=function(t){void 0===t&&(t=r.CANCEL_KEY);var e=u.default.actions[t],n=e.value;if(!1===e.closeModal){var a=l+"--"+t;i.getNode(a).classList.add(c)}else h();u.default.promise.resolve(n)},e.getState=function(){var t=Object.assign({},u.default);return delete t.promise,delete t.timer,t},e.stopLoading=function(){for(var t=document.querySelectorAll("."+l),e=0;e<t.length;e++)t[e].classList.remove(c)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){t.exports=e.sweetAlert=n(9)}).call(e,n(7))},function(t,e,n){(function(e){t.exports=e.swal=n(10)}).call(e,n(7))},function(t,e,n){"undefined"!=typeof window&&n(11),n(16);var i=n(23).default;t.exports=i},function(t,e,n){var i=n(12);"string"==typeof i&&(i=[[t.i,i,""]]);var r={insertAt:"top",transform:void 0};n(14)(i,r),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(13)(void 0)).push([t.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=i(r);return[n].concat(r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}))).concat([a]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=f[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(u(i.parts[a],e))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(u(i.parts[a],e));f[i.id]={id:i.id,refs:1,parts:o}}}}function r(t,e){for(var n=[],i={},r=0;r<t.length;r++){var a=t[r],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}function a(t,e){var n=g(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=x[x.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),x.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=x.indexOf(t);e>=0&&x.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),a(t,e),e}function l(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),a(t,e),e}function c(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function u(t,e){var n,i,r,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var c=y++;n=v||(v=s(e)),i=h.bind(null,n,c,!1),r=h.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),i=p.bind(null,n,e),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),i=d.bind(null,n),r=function(){o(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function h(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function d(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e,n){var i=n.css,r=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||a)&&(i=_(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var f={},m=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}((function(){return window&&document&&document.all&&!window.atob})),g=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}((function(t){return document.querySelector(t)})),v=null,y=0,x=[],_=n(15);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=m()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=r(t,e);return i(n,e),function(t){for(var a=[],o=0;o<n.length;o++){var s=n[o];(l=f[s.id]).refs--,a.push(l)}for(t&&i(r(t,e),e),o=0;o<a.length;o++){var l;if(0===(l=a[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var r,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?t:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(t,e,n){var i=n(17);"undefined"==typeof window||window.Promise||(window.Promise=i),n(21),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|e,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(n[a],t))return!0;a++}return!1}}),"undefined"!=typeof window&&[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}))},function(t,e,n){(function(e){!function(n){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,i)}else(1===t._state?s:l)(e.promise,t._value)}))):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h(r(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){l(t,e)}}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&a._immediateFn((function(){t._handled||a._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t((function(t){n||(n=!0,s(e,t))}),(function(t){n||(n=!0,l(e,t))}))}catch(t){if(n)return;n=!0,l(e,t)}}var d=setTimeout;a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return o(this,new u(t,e,n)),n},a.all=function(t){var e=Array.prototype.slice.call(t);return new a((function(t,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){i(a,t)}),n)}e[a]=o,0==--r&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var r=e.length,a=0;a<e.length;a++)i(a,e[a])}))},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a((function(e){e(t)}))},a.reject=function(t){return new a((function(e,n){n(t)}))},a.race=function(t){return new a((function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)}))},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){d(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=a:n.Promise||(n.Promise=a)}(this)}).call(e,n(18).setImmediate)},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(19),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[l]=i,s(l),l++}function r(t){delete c[t]}function a(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function o(t){if(u)setTimeout(o,0,t);else{var e=c[t];if(e){u=!0;try{a(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var s,l=1,c={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick((function(){o(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;s=function(e){var n=h.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():s=function(t){setTimeout(o,0,t)},d.setImmediate=i,d.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(7),n(20))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function o(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&s())}function s(){if(!m){var t=r(o);m=!0;for(var e=f.length;e;){for(p=f,f=[];++g<e;)p&&p[g].run();g=-1,e=f.length}p=null,m=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,h,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,f=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new l(t,e)),1!==f.length||m||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){n(22).polyfill()},function(t,e,n){function i(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(n[l]=r[l])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}t.exports={assign:i,polyfill:r}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),r=n(6),a=n(5),o=n(36),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof window){var n=o.getOpts.apply(void 0,t);return new Promise((function(t,e){a.default.promise={resolve:t,reject:e},i.default(n),setTimeout((function(){r.openModal()}))}))}};s.close=r.onAction,s.getState=r.getState,s.setActionValue=a.setActionValue,s.stopLoading=r.stopLoading,s.setDefaults=o.setDefaults,e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(0).default.MODAL,a=n(4),o=n(34),s=n(35),l=n(1);e.init=function(t){i.getNode(r)||(document.body||l.throwErr("You can only use SweetAlert AFTER the DOM has loaded!"),o.default(),a.default()),a.initModalContent(t),s.default(t)},e.default=e.init},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0).default.MODAL;e.modalMarkup='\n  <div class="'+i+'" role="dialog" aria-modal="true"></div>',e.default=e.modalMarkup},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i='<div \n    class="'+n(0).default.OVERLAY+'"\n    tabIndex="-1">\n  </div>';e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0).default.ICON;e.errorIconMarkup=function(){var t=i+"--error",e=t+"__line";return'\n    <div class="'+t+'__x-mark">\n      <span class="'+e+" "+e+'--left"></span>\n      <span class="'+e+" "+e+'--right"></span>\n    </div>\n  '},e.warningIconMarkup=function(){var t=i+"--warning";return'\n    <span class="'+t+'__body">\n      <span class="'+t+'__dot"></span>\n    </span>\n  '},e.successIconMarkup=function(){var t=i+"--success";return'\n    <span class="'+t+"__line "+t+'__line--long"></span>\n    <span class="'+t+"__line "+t+'__line--tip"></span>\n\n    <div class="'+t+'__ring"></div>\n    <div class="'+t+'__hide-corners"></div>\n  '}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0).default.CONTENT;e.contentMarkup='\n  <div class="'+i+'">\n\n  </div>\n'},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=i.default.BUTTON_CONTAINER,a=i.default.BUTTON,o=i.default.BUTTON_LOADER;e.buttonMarkup='\n  <div class="'+r+'">\n\n    <button\n      class="'+a+'"\n    ></button>\n\n    <div class="'+o+'">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n\n  </div>\n'},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(2),a=n(0),o=a.default.ICON,s=a.default.ICON_CUSTOM,l=["error","warning","success","info"],c={error:r.errorIconMarkup(),warning:r.warningIconMarkup(),success:r.successIconMarkup()},u=function(t,e){var n=o+"--"+t;e.classList.add(n);var i=c[t];i&&(e.innerHTML=i)},h=function(t,e){e.classList.add(s);var n=document.createElement("img");n.src=t,e.appendChild(n)},d=function(t){if(t){var e=i.injectElIntoModal(r.iconMarkup);l.includes(t)?u(t,e):h(t,e)}};e.default=d},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4),a=function(t){navigator.userAgent.includes("AppleWebKit")&&(t.style.display="none",t.offsetHeight,t.style.display="")};e.initTitle=function(t){if(t){var e=r.injectElIntoModal(i.titleMarkup);e.textContent=t,a(e)}},e.initText=function(t){if(t){var e=document.createDocumentFragment();t.split("\n").forEach((function(t,n,i){e.appendChild(document.createTextNode(t)),n<i.length-1&&e.appendChild(document.createElement("br"))}));var n=r.injectElIntoModal(i.textMarkup);n.appendChild(e),a(n)}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(4),a=n(0),o=a.default.BUTTON,s=a.default.DANGER_BUTTON,l=n(3),c=n(2),u=n(6),h=n(5),d=function(t,e,n){var r=e.text,a=e.value,d=e.className,p=e.closeModal,f=i.stringToNode(c.buttonMarkup),m=f.querySelector("."+o),g=o+"--"+t;m.classList.add(g),d&&(Array.isArray(d)?d:d.split(" ")).filter((function(t){return t.length>0})).forEach((function(t){m.classList.add(t)})),n&&t===l.CONFIRM_KEY&&m.classList.add(s),m.textContent=r;var v={};return v[t]=a,h.setActionValue(v),h.setActionOptionsFor(t,{closeModal:p}),m.addEventListener("click",(function(){return u.onAction(t)})),f},p=function(t,e){var n=r.injectElIntoModal(c.footerMarkup);for(var i in t){var a=t[i],o=d(i,a,e);a.visible&&n.appendChild(o)}0===n.children.length&&n.remove()};e.default=p},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(4),a=n(2),o=n(5),s=n(6),l=n(0).default.CONTENT,c=function(t){t.addEventListener("input",(function(t){var e=t.target.value;o.setActionValue(e)})),t.addEventListener("keyup",(function(t){if("Enter"===t.key)return s.onAction(i.CONFIRM_KEY)})),setTimeout((function(){t.focus(),o.setActionValue("")}),0)},u=function(t,e,n){var i=document.createElement(e),r=l+"__"+e;for(var a in i.classList.add(r),n){var o=n[a];i[a]=o}"input"===e&&c(i),t.appendChild(i)},h=function(t){if(t){var e=r.injectElIntoModal(a.contentMarkup),n=t.element,i=t.attributes;"string"==typeof n?u(e,n,i):e.appendChild(n)}};e.default=h},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(2),a=function(){var t=i.stringToNode(r.overlayMarkup);document.body.appendChild(t)};e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=n(6),a=n(1),o=n(3),s=n(0),l=s.default.MODAL,c=s.default.BUTTON,u=s.default.OVERLAY,h=function(t){t.preventDefault(),g()},d=function(t){t.preventDefault(),v()},p=function(t){if(i.default.isOpen&&"Escape"===t.key)return r.onAction(o.CANCEL_KEY)},f=function(t){if(i.default.isOpen&&"Tab"===t.key)return h(t)},m=function(t){if(i.default.isOpen)return"Tab"===t.key&&t.shiftKey?d(t):void 0},g=function(){var t=a.getNode(c);t&&(t.tabIndex=0,t.focus())},v=function(){var t=a.getNode(l).querySelectorAll("."+c),e=t[t.length-1];e&&e.focus()},y=function(t){t[t.length-1].addEventListener("keydown",f)},x=function(t){t[0].addEventListener("keydown",m)},_=function(){var t=a.getNode(l).querySelectorAll("."+c);t.length&&(y(t),x(t))},b=function(t){if(a.getNode(u)===t.target)return r.onAction(o.CANCEL_KEY)},w=function(t){var e=a.getNode(u);e.removeEventListener("click",b),t&&e.addEventListener("click",b)},M=function(t){i.default.timer&&clearTimeout(i.default.timer),t&&(i.default.timer=window.setTimeout((function(){return r.onAction(o.CANCEL_KEY)}),t))},S=function(t){t.closeOnEsc?document.addEventListener("keyup",p):document.removeEventListener("keyup",p),t.dangerMode?g():v(),_(),w(t.closeOnClickOutside),M(t.timer)};e.default=S},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3),a=n(37),o=n(38),s={title:null,text:null,icon:null,buttons:r.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},l=Object.assign({},s);e.setDefaults=function(t){l=Object.assign({},s,t)};var c=function(t){var e=t&&t.button,n=t&&t.buttons;return void 0!==e&&void 0!==n&&i.throwErr("Cannot set both 'button' and 'buttons' options!"),void 0!==e?{confirm:e}:n},u=function(t){return i.ordinalSuffixOf(t+1)},h=function(t,e){i.throwErr(u(e)+" argument ('"+t+"') is invalid")},d=function(t,e){var n=t+1,r=e[n];i.isPlainObject(r)||void 0===r||i.throwErr("Expected "+u(n)+" argument ('"+r+"') to be a plain object")},p=function(t,e){var n=t+1,r=e[n];void 0!==r&&i.throwErr("Unexpected "+u(n)+" argument ("+r+")")},f=function(t,e,n,r){var a=e instanceof Element;if("string"==typeof e){if(0===n)return{text:e};if(1===n)return{text:e,title:r[0]};if(2===n)return d(n,r),{icon:e};h(e,n)}else{if(a&&0===n)return d(n,r),{content:e};if(i.isPlainObject(e))return p(n,r),e;h(e,n)}};e.getOpts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};t.forEach((function(e,i){var r=f(0,e,i,t);Object.assign(n,r)}));var i=c(n);n.buttons=r.getButtonListOpts(i),delete n.button,n.content=a.getContentOpts(n.content);var u=Object.assign({},s,l,n);return Object.keys(u).forEach((function(t){o.DEPRECATED_OPTS[t]&&o.logDeprecation(t)})),u}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r={element:"input",attributes:{placeholder:""}};e.getContentOpts=function(t){var e={};return i.isPlainObject(t)?Object.assign(e,t):t instanceof Element?{element:t}:"input"===t?r:null}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.logDeprecation=function(t){var n=e.DEPRECATED_OPTS[t],i=n.onlyRename,r=n.replacement,a=n.subOption,o=n.link,s='SweetAlert warning: "'+t+'" option has been '+(i?"renamed":"deprecated")+".";r&&(s+=" Please use"+(a?' "'+a+'" in ':" ")+'"'+r+'" instead.');var l="https://sweetalert.js.org";s+=o?" More details: "+l+o:" More details: "+l+"/guides/#upgrading-from-1x",console.warn(s)},e.DEPRECATED_OPTS={type:{replacement:"icon",link:"/docs/#icon"},imageUrl:{replacement:"icon",link:"/docs/#icon"},customClass:{replacement:"className",onlyRename:!0,link:"/docs/#classname"},imageSize:{},showCancelButton:{replacement:"buttons",link:"/docs/#buttons"},showConfirmButton:{replacement:"button",link:"/docs/#button"},confirmButtonText:{replacement:"button",link:"/docs/#button"},confirmButtonColor:{},cancelButtonText:{replacement:"buttons",link:"/docs/#buttons"},closeOnConfirm:{replacement:"button",subOption:"closeModal",link:"/docs/#button"},closeOnCancel:{replacement:"buttons",subOption:"closeModal",link:"/docs/#buttons"},showLoaderOnConfirm:{replacement:"buttons"},animation:{},inputType:{replacement:"content",link:"/docs/#content"},inputValue:{replacement:"content",link:"/docs/#content"},inputPlaceholder:{replacement:"content",link:"/docs/#content"},html:{replacement:"content",link:"/docs/#content"},allowEscapeKey:{replacement:"closeOnEsc",onlyRename:!0,link:"/docs/#closeonesc"},allowClickOutside:{replacement:"closeOnClickOutside",onlyRename:!0,link:"/docs/#closeonclickoutside"}}}]);var Zc=Yc(Jc.exports);function Kc(t,e="json"){return new Promise((function(n,i){const r=new XMLHttpRequest;r.onload=function(){let t;r.response&&(t=r.response.message),r.status>=200&&r.status<300?n(r.response):i({status:r.status,statusText:r.statusText,message:t})},r.onerror=function(t){i({status:r.status,statusText:r.statusText})},r.open("GET",t,!0),r.responseType=e,r.timeout=4e4,r.ontimeout=function(t){console.log("ERROR: Internet not working"),i({status:r.status,statusText:r.statusText})},r.send()}))}async function Qc(t,e,n="json"){let i;return await new Promise(((r,a)=>{Kc(t,n).catch((t=>{const{status:n,statusText:i,message:r}=t,a="string"==typeof r?r:i;return Zc({title:`${Et(e,"error")} ${n}`,text:a}),null})).then((t=>{i=t,r()}))})),i}async function tu(t){const e=[];e.push(Kc(`/assets/data/${t}/sources.json`)),e.push(Kc(`/assets/data/${t}/lexicon.json`)),e.push(Kc(`/assets/data/${t}/events.json`));const n=await Promise.all(e);return null!==n&&Array.isArray(n)&&0!==n.length?n:null}async function eu(t){const e=[];e.push(Kc(`/assets/data/${t}/submissions.json`)),e.push(Kc(`/assets/data/${t}/dictionary.json`)),e.push(Kc(`/assets/data/${t}/categories.json`));const n=await Promise.all(e);return null!==n&&Array.isArray(n)&&0!==n.length?n:null}async function nu(t){const e=await Qc(`/assets/data/${t}/posts.json.zip`,"eng","blob");return null===e?null:e}async function iu(t){return await Qc(`/assets/data/${t}/params.json`,"eng")}function ru([t,...e],n=[]){return void 0===t?n:[t,...ru(n,e)]}function au(e){let n,i,r,a,o,s,c,p,v,y,b,M,S,T,E,A,L,C,R,P,D,I,N,k,O,z,F,U=pt[e[0]]+"",B=ft[e[0]]+"";return{c(){n=f("div"),i=f("div"),r=f("img"),o=g(),s=f("p"),s.textContent="by Cara Zwibel & Evan Balgord",c=g(),p=f("div"),v=f("br"),y=g(),b=f("div"),M=f("p"),S=m(U),T=g(),E=f("p"),A=m(B),L=g(),C=f("br"),R=g(),P=f("div"),D=f("p"),D.textContent="by",I=g(),N=f("p"),k=f("a"),O=m("National Democratic Institute"),z=g(),F=f("br"),x(r,"alt","cover photo"),l(r.src,a="/assets/images/cover.jpg")||x(r,"src","/assets/images/cover.jpg"),x(r,"class","svelte-1st7wz6"),x(s,"class","svelte-1st7wz6"),x(i,"id","top-img-container"),x(i,"class","svelte-1st7wz6"),x(M,"class","top-title svelte-1st7wz6"),x(E,"class","top-subtitle svelte-1st7wz6"),w(D,"margin-bottom","0px"),x(k,"href",Q),x(k,"target","_blank"),x(N,"class","authors svelte-1st7wz6"),x(p,"class","top-title-container svelte-1st7wz6"),x(n,"id","cover"),x(n,"class","svelte-1st7wz6")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(i,o),u(i,s),u(n,c),u(n,p),u(p,v),u(p,y),u(p,b),u(b,M),u(M,S),u(b,T),u(b,E),u(E,A),u(p,L),u(p,C),u(p,R),u(p,P),u(P,D),u(P,I),u(P,N),u(N,k),u(k,O),u(p,z),u(p,F)},p(t,[e]){1&e&&U!==(U=pt[t[0]]+"")&&_(S,U),1&e&&B!==(B=ft[t[0]]+"")&&_(A,B)},i:t,o:t,d(t){t&&d(n)}}}function ou(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class su extends J{constructor(t){super(),Y(this,t,ou,au,a,{lang:0})}}function lu(t,e,n){const i=t.slice();return i[1]=e[n],i}function cu(t){let e,n,i,r=mt.paragraphs[t[1]][t[0]]+"";return{c(){e=f("p"),n=new M,i=g(),n.a=i},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=mt.paragraphs[t[1]][t[0]]+"")&&n.p(r)},d(t){t&&d(e)}}}function uu(e){let n,i,r,a,o=mt.title[e[0]]+"",s=Object.keys(mt.paragraphs),l=[];for(let t=0;t<s.length;t+=1)l[t]=cu(lu(e,s,t));return{c(){n=f("section"),i=f("h1"),r=m(o),a=g();for(let t=0;t<l.length;t+=1)l[t].c();x(i,"class","title")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(n,a);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(t,[e]){if(1&e&&o!==(o=mt.title[t[0]]+"")&&_(r,o),1&e){let i;for(s=Object.keys(mt.paragraphs),i=0;i<s.length;i+=1){const r=lu(t,s,i);l[i]?l[i].p(r,e):(l[i]=cu(r),l[i].c(),l[i].m(n,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},i:t,o:t,d(t){t&&d(n),p(l,t)}}}function hu(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class du extends J{constructor(t){super(),Y(this,t,hu,uu,a,{lang:0})}}function pu(t,e,n){const i=t.slice();return i[1]=e[n],i}function fu(t,e,n){const i=t.slice();return i[1]=e[n],i}function mu(t){let e,n=gt.paragraphs_1[t[1]][t[0]]+"";return{c(){e=f("p")},m(t,i){h(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=gt.paragraphs_1[t[1]][t[0]]+"")&&(e.innerHTML=n)},d(t){t&&d(e)}}}function gu(t){let e,n,i,r=gt.paragraphs_2[t[1]][t[0]]+"";return{c(){e=f("p"),n=new M,i=g(),n.a=i},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=gt.paragraphs_2[t[1]][t[0]]+"")&&n.p(r)},d(t){t&&d(e)}}}function vu(e){let n,i,r,a,o,s,c,v,y,b,w,M,S=gt.title[e[0]]+"",T=gt.subtitle[e[0]]+"",E=Object.keys(gt.paragraphs_1),A=[];for(let t=0;t<E.length;t+=1)A[t]=mu(fu(e,E,t));let L=Object.keys(gt.paragraphs_2),C=[];for(let t=0;t<L.length;t+=1)C[t]=gu(pu(e,L,t));return{c(){n=f("section"),i=f("h1"),r=m(S),a=g();for(let t=0;t<A.length;t+=1)A[t].c();o=g(),s=f("div"),c=f("img"),y=g(),b=f("h1"),w=m(T),M=g();for(let t=0;t<C.length;t+=1)C[t].c();x(i,"class","title"),x(c,"alt","information venn diagram"),l(c.src,v="/assets/explanatives/misinformation_girls.png")||x(c,"src","/assets/explanatives/misinformation_girls.png"),x(c,"class","svelte-p84mbu"),x(s,"class","svelte-p84mbu"),x(b,"class","subtitle")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(n,a);for(let t=0;t<A.length;t+=1)A[t].m(n,null);u(n,o),u(n,s),u(s,c),u(n,y),u(n,b),u(b,w),u(n,M);for(let t=0;t<C.length;t+=1)C[t].m(n,null)},p(t,[e]){if(1&e&&S!==(S=gt.title[t[0]]+"")&&_(r,S),1&e){let i;for(E=Object.keys(gt.paragraphs_1),i=0;i<E.length;i+=1){const r=fu(t,E,i);A[i]?A[i].p(r,e):(A[i]=mu(r),A[i].c(),A[i].m(n,o))}for(;i<A.length;i+=1)A[i].d(1);A.length=E.length}if(1&e&&T!==(T=gt.subtitle[t[0]]+"")&&_(w,T),1&e){let i;for(L=Object.keys(gt.paragraphs_2),i=0;i<L.length;i+=1){const r=pu(t,L,i);C[i]?C[i].p(r,e):(C[i]=gu(r),C[i].c(),C[i].m(n,null))}for(;i<C.length;i+=1)C[i].d(1);C.length=L.length}},i:t,o:t,d(t){t&&d(n),p(A,t),p(C,t)}}}function yu(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class xu extends J{constructor(t){super(),Y(this,t,yu,vu,a,{lang:0})}}function _u(t,e,n){const i=t.slice();return i[1]=e[n],i}function bu(t){let e,n,i,r,a,o,s,c,p,v,y,b=t[1].title[t[0]]+"",w=t[1].description[t[0]]+"";return{c(){e=f("div"),n=f("img"),a=g(),o=f("h1"),s=m(b),c=g(),p=f("p"),v=m(w),y=g(),x(n,"alt",i=t[1].src.split(".").pop()),l(n.src,r="/assets/images/"+t[1].src)||x(n,"src",r),x(n,"class","svelte-17ddbqk"),x(o,"class","svelte-17ddbqk"),x(p,"class","svelte-17ddbqk"),x(e,"class","information-disorder svelte-17ddbqk")},m(t,i){h(t,e,i),u(e,n),u(e,a),u(e,o),u(o,s),u(e,c),u(e,p),u(p,v),u(e,y)},p(t,e){1&e&&b!==(b=t[1].title[t[0]]+"")&&_(s,b),1&e&&w!==(w=t[1].description[t[0]]+"")&&_(v,w)},d(t){t&&d(e)}}}function wu(e){let n,i=bt,r=[];for(let t=0;t<i.length;t+=1)r[t]=bu(_u(e,i,t));return{c(){n=f("div");for(let t=0;t<r.length;t+=1)r[t].c();x(n,"id","information-disorder-container"),x(n,"class","container svelte-17ddbqk")},m(t,e){h(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(1&e){let a;for(i=bt,a=0;a<i.length;a+=1){const o=_u(t,i,a);r[a]?r[a].p(o,e):(r[a]=bu(o),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:t,o:t,d(t){t&&d(n),p(r,t)}}}function Mu(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class Su extends J{constructor(t){super(),Y(this,t,Mu,wu,a,{lang:0})}}function Tu(t,e,n){const i=t.slice();return i[1]=e[n],i}function Eu(t,e,n){const i=t.slice();return i[4]=e[n],i}function Au(t){let e,n,i=t[4]+"";return{c(){e=f("p"),n=m(i),x(e,"class","svelte-fvu1ed")},m(t,i){h(t,e,i),u(e,n)},p(t,e){1&e&&i!==(i=t[4]+"")&&_(n,i)},d(t){t&&d(e)}}}function Lu(t){let e,n,i,r,a,o,s,c,v,y=t[1].title[t[0]]+"",b=t[1].description[t[0]],w=[];for(let e=0;e<b.length;e+=1)w[e]=Au(Eu(t,b,e));return{c(){e=f("div"),n=f("img"),a=g(),o=f("h1"),s=m(y),c=g();for(let t=0;t<w.length;t+=1)w[t].c();v=g(),x(n,"alt",i=t[1].src.split(".").pop()),l(n.src,r="/assets/images/"+t[1].src)||x(n,"src",r),x(n,"class","svelte-fvu1ed"),x(o,"class","svelte-fvu1ed"),x(e,"class","political-network svelte-fvu1ed")},m(t,i){h(t,e,i),u(e,n),u(e,a),u(e,o),u(o,s),u(e,c);for(let t=0;t<w.length;t+=1)w[t].m(e,null);u(e,v)},p(t,n){if(1&n&&y!==(y=t[1].title[t[0]]+"")&&_(s,y),1&n){let i;for(b=t[1].description[t[0]],i=0;i<b.length;i+=1){const r=Eu(t,b,i);w[i]?w[i].p(r,n):(w[i]=Au(r),w[i].c(),w[i].m(e,v))}for(;i<w.length;i+=1)w[i].d(1);w.length=b.length}},d(t){t&&d(e),p(w,t)}}}function Cu(e){let n,i=wt,r=[];for(let t=0;t<i.length;t+=1)r[t]=Lu(Tu(e,i,t));return{c(){n=f("div");for(let t=0;t<r.length;t+=1)r[t].c();x(n,"id","political-network-container"),x(n,"class","container svelte-fvu1ed")},m(t,e){h(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(1&e){let a;for(i=wt,a=0;a<i.length;a+=1){const o=Tu(t,i,a);r[a]?r[a].p(o,e):(r[a]=Lu(o),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:t,o:t,d(t){t&&d(n),p(r,t)}}}function Ru(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class Pu extends J{constructor(t){super(),Y(this,t,Ru,Cu,a,{lang:0})}}function Du(e){let n;return{c(){n=f("div"),n.innerHTML='<div id="lexicon-vertical-center" class="svelte-1qlvteu"><div id="lexiconcanvas"></div></div>',x(n,"id","lexicon-container"),x(n,"class","svelte-1qlvteu")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}function Iu(t,e,n){let{posts:i}=e,r=-1;return T((()=>{const t=document.getElementById("lexiconcanvas");!function e(){r=(r+1)%i.length,t.innerHTML=i[r],t.style.lineHeight="1.2em",t.style.fontSize="0.9em",t.className="fade-in",setTimeout((()=>{t.className="fade-out"}),3e3),setTimeout((()=>{e()}),4e3)}()})),t.$$set=t=>{"posts"in t&&n(0,i=t.posts)},[i]}class Nu extends J{constructor(t){super(),Y(this,t,Iu,Du,a,{posts:0})}}function ku(e){let n,i,r,a,o,s,c,p,m,v,y,_,b,M,S,T,E,A,L,C,R,P,D,I,N,k,O;return{c(){n=f("div"),i=f("div"),r=f("div"),a=f("img"),s=g(),c=f("img"),m=g(),v=f("img"),_=g(),b=f("img"),S=g(),T=f("img"),A=g(),L=f("img"),R=g(),P=f("img"),I=g(),N=f("canvas"),k=g(),O=f("canvas"),x(a,"id","post-facebook"),x(a,"alt","facebook"),l(a.src,o="/assets/images/facebook.png")||x(a,"src","/assets/images/facebook.png"),x(c,"id","post-twitter"),x(c,"alt","twitter"),l(c.src,p="/assets/images/twitter.png")||x(c,"src","/assets/images/twitter.png"),x(v,"id","post-telegram"),x(v,"alt","telegram"),l(v.src,y="/assets/images/telegram.png")||x(v,"src","/assets/images/telegram.png"),x(b,"id","post-youtube"),x(b,"alt","youtube"),l(b.src,M="/assets/images/youtube.png")||x(b,"src","/assets/images/youtube.png"),x(T,"id","approve"),x(T,"alt","approve"),l(T.src,E="/assets/images/approve.png")||x(T,"src","/assets/images/approve.png"),x(L,"id","reject"),x(L,"alt","reject"),l(L.src,C="/assets/images/reject.png")||x(L,"src","/assets/images/reject.png"),x(P,"id","annotator"),x(P,"alt","annotator"),l(P.src,D="/assets/images/annotator.png")||x(P,"src","/assets/images/annotator.png"),w(r,"display","none"),w(N,"position","fixed"),x(N,"id","contentannotationcanvas"),x(N,"class","svelte-5hp6ox"),x(O,"id","contentannotationcanvas_check"),x(O,"class","svelte-5hp6ox"),x(i,"id","annotation-vertical-center"),x(i,"class","svelte-5hp6ox"),x(n,"id","annotation-container"),x(n,"class","svelte-5hp6ox")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(r,a),u(r,s),u(r,c),u(r,m),u(r,v),u(r,_),u(r,b),u(r,S),u(r,T),u(r,A),u(r,L),u(r,R),u(r,P),u(i,I),u(i,N),u(i,k),u(i,O)},p:t,i:t,o:t,d(t){t&&d(n)}}}const Ou=400,zu=440,Fu=70;function Uu(t){return Math.floor(Math.random()*t)}function Bu(t){return T((()=>{const t=document.getElementById("contentannotationcanvas"),e=t.getContext("2d"),n=document.getElementById("contentannotationcanvas_check"),i=n.getContext("2d");t.width=Ou,t.height=zu,n.width=Ou,n.height=zu,e.globalAlpha=.9,i.globalAlpha=.9;const r=document.getElementById("post-youtube"),a=document.getElementById("post-facebook"),o=document.getElementById("post-telegram"),s=document.getElementById("post-twitter"),l=document.getElementById("annotator"),c=document.getElementById("approve"),u=document.getElementById("reject"),h=[r,a,o,s];function d(t,e){i.clearRect(0,0,Ou,zu),e?i.drawImage(c,267,p,Fu,Fu):i.drawImage(u,267,p,Fu,Fu),i.globalCompositeOperation="source-in",i.fillStyle=t,i.fillRect(0,0,Ou,zu),i.globalCompositeOperation="source-over"}let p=0,f=0,m=h[Uu(h.length)],g=!1;setInterval((()=>{var t,n;Math.abs(140-(p+Fu+32))<4?(f+=1,f>100?(f=0,p=-100,g=!1,m=h[Uu(h.length)]):f>50&&!g&&(1===Uu(2)?d("#e44e4e",!1):d("#009900",!0),g=!0)):(p+=2,t=m,n=p,e.clearRect(0,0,Ou,zu),i.clearRect(0,0,Ou,zu),e.drawImage(t,165,n,Fu,Fu),e.drawImage(l,50,140),e.globalCompositeOperation="source-in",e.fillStyle="#000",e.fillRect(0,0,Ou,zu),e.globalCompositeOperation="source-over")}),20)})),[]}class Hu extends J{constructor(t){super(),Y(this,t,Bu,ku,a,{})}}function Vu(e){let n,i,r,a,o,s,c,p,m,v,y,_,b,w,M,S;return{c(){n=f("div"),i=f("div"),r=f("img"),o=g(),s=f("div"),c=f("img"),m=g(),v=f("div"),y=f("img"),b=g(),w=f("div"),M=f("img"),x(r,"alt","institutions"),l(r.src,a="/assets/images/twitter.png")||x(r,"src","/assets/images/twitter.png"),x(r,"class","svelte-4awkx0"),x(i,"class","data-collection svelte-4awkx0"),x(c,"alt","politics"),l(c.src,p="/assets/images/facebook.png")||x(c,"src","/assets/images/facebook.png"),x(c,"class","svelte-4awkx0"),x(s,"class","data-collection svelte-4awkx0"),x(y,"alt","society"),l(y.src,_="/assets/images/youtube.png")||x(y,"src","/assets/images/youtube.png"),x(y,"class","svelte-4awkx0"),x(v,"class","data-collection svelte-4awkx0"),x(M,"alt","society"),l(M.src,S="/assets/images/telegram.png")||x(M,"src","/assets/images/telegram.png"),x(M,"class","svelte-4awkx0"),x(w,"class","data-collection svelte-4awkx0"),x(n,"id","data-collection-container"),x(n,"class","container svelte-4awkx0")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(n,o),u(n,s),u(s,c),u(n,m),u(n,v),u(v,y),u(n,b),u(n,w),u(w,M)},p:t,i:t,o:t,d(t){t&&d(n)}}}class Gu extends J{constructor(t){super(),Y(this,t,null,Vu,a,{})}}function Wu(t){let e,n,i,r,a,o,s,l,c,p,v,y,b,w,S,T,E,L,C,R,P,D,N,k,O,z,F,U,B,H,X,Y,J,Z,K,Q,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,ht,dt,pt,ft,mt,gt,yt,xt,_t,bt,wt,Mt,St,Tt,Et,At,Lt,Ct,Rt,Pt,Dt,It,Nt,kt,Ot,zt,Ft,Ut,Bt,Ht,Vt,Gt,Wt,jt,$t,qt,Xt,Yt,Jt,Zt,Kt,Qt,te,ee,ne=vt.title[t[0]]+"",ie=vt[1][t[0]]+"",re=vt[2][t[0]]+"",ae=vt[3][t[0]]+"",oe=vt.subtitle_1[t[0]]+"",se=vt[4][t[0]]+"",le=vt[5][t[0]]+"",ce=vt.subtitle_2[t[0]]+"",ue=vt[6][t[0]]+"",he=vt[7][t[0]]+"",de=vt[8][t[0]]+"",pe=vt[9][t[0]]+"",fe=vt[10][t[0]]+"",me=vt.subsubtitle_1[t[0]]+"",ge=vt[11][t[0]]+"",ve=vt.subsubtitle_2[t[0]]+"",ye=vt[12][t[0]]+"",xe=vt.subsubtitle_3[t[0]]+"",_e=vt[13][t[0]]+"",be=vt[14][t[0]]+"",we=vt.subsubtitle_4[t[0]]+"",Me=vt[15][t[0]]+"",Se=vt.subsubtitle_5[t[0]]+"",Te=vt[16][t[0]]+"",Ee=vt[17][t[0]]+"",Ae=vt[18][t[0]]+"",Le=vt[19][t[0]]+"",Ce=vt.subsubtitle_6[t[0]]+"",Re=vt[20][t[0]]+"",Pe=vt[21][t[0]]+"",De=vt[22][t[0]]+"",Ie=vt.subtitle_3[t[0]]+"",Ne=vt[23][t[0]]+"",ke=vt[24][t[0]]+"";function Oe(e){t[3](e)}let ze={};function Fe(e){t[4](e)}void 0!==t[0]&&(ze.lang=t[0]),Q=new Su({props:ze}),A.push((()=>W(Q,"lang",Oe)));let Ue={};return void 0!==t[0]&&(Ue.lang=t[0]),dt=new Pu({props:Ue}),A.push((()=>W(dt,"lang",Fe))),Mt=new Nu({props:{posts:t[1]}}),Ot=new Gu({}),qt=new Hu({}),{c(){e=f("section"),n=f("h1"),i=m(ne),r=g(),a=new M,o=g(),s=new M,l=g(),c=new M,p=g(),v=f("h1"),y=m(oe),b=g(),w=new M,S=g(),T=new M,E=g(),L=f("h1"),C=m(ce),R=g(),P=new M,D=g(),N=new M,k=g(),O=new M,z=g(),F=new M,U=g(),B=new M,H=g(),X=f("h1"),Y=m(me),J=g(),Z=new M,K=g(),j(Q.$$.fragment),et=g(),nt=f("h1"),it=m(ve),rt=g(),at=new M,ot=g(),st=f("h1"),lt=m(xe),ct=g(),ut=new M,ht=g(),j(dt.$$.fragment),ft=g(),mt=new M,gt=g(),yt=f("h1"),xt=m(we),_t=g(),bt=new M,wt=g(),j(Mt.$$.fragment),St=g(),Tt=f("h1"),Et=m(Se),At=g(),Lt=new M,Ct=g(),Rt=new M,Pt=g(),Dt=new M,It=g(),Nt=new M,kt=g(),j(Ot.$$.fragment),zt=g(),Ft=f("h1"),Ut=m(Ce),Bt=g(),Ht=new M,Vt=g(),Gt=new M,Wt=g(),jt=new M,$t=g(),j(qt.$$.fragment),Xt=g(),Yt=f("h1"),Jt=m(Ie),Zt=g(),Kt=new M,Qt=g(),te=new M,x(n,"class","title"),a.a=o,s.a=l,c.a=p,x(v,"class","subtitle"),w.a=S,T.a=E,x(L,"class","subtitle"),P.a=D,N.a=k,O.a=z,F.a=U,B.a=H,x(X,"class","subtitle"),Z.a=K,x(nt,"class","subtitle"),at.a=ot,x(st,"class","subtitle"),ut.a=ht,mt.a=gt,x(yt,"class","subtitle"),bt.a=wt,x(Tt,"class","subtitle"),Lt.a=Ct,Rt.a=Pt,Dt.a=It,Nt.a=kt,x(Ft,"class","subtitle"),Ht.a=Vt,Gt.a=Wt,jt.a=$t,x(Yt,"class","subtitle"),Kt.a=Qt,te.a=null,x(e,"id",t[2])},m(t,d){h(t,e,d),u(e,n),u(n,i),u(e,r),a.m(ie,e),u(e,o),s.m(re,e),u(e,l),c.m(ae,e),u(e,p),u(e,v),u(v,y),u(e,b),w.m(se,e),u(e,S),T.m(le,e),u(e,E),u(e,L),u(L,C),u(e,R),P.m(ue,e),u(e,D),N.m(he,e),u(e,k),O.m(de,e),u(e,z),F.m(pe,e),u(e,U),B.m(fe,e),u(e,H),u(e,X),u(X,Y),u(e,J),Z.m(ge,e),u(e,K),$(Q,e,null),u(e,et),u(e,nt),u(nt,it),u(e,rt),at.m(ye,e),u(e,ot),u(e,st),u(st,lt),u(e,ct),ut.m(_e,e),u(e,ht),$(dt,e,null),u(e,ft),mt.m(be,e),u(e,gt),u(e,yt),u(yt,xt),u(e,_t),bt.m(Me,e),u(e,wt),$(Mt,e,null),u(e,St),u(e,Tt),u(Tt,Et),u(e,At),Lt.m(Te,e),u(e,Ct),Rt.m(Ee,e),u(e,Pt),Dt.m(Ae,e),u(e,It),Nt.m(Le,e),u(e,kt),$(Ot,e,null),u(e,zt),u(e,Ft),u(Ft,Ut),u(e,Bt),Ht.m(Re,e),u(e,Vt),Gt.m(Pe,e),u(e,Wt),jt.m(De,e),u(e,$t),$(qt,e,null),u(e,Xt),u(e,Yt),u(Yt,Jt),u(e,Zt),Kt.m(Ne,e),u(e,Qt),te.m(ke,e),ee=!0},p(t,[e]){(!ee||1&e)&&ne!==(ne=vt.title[t[0]]+"")&&_(i,ne),(!ee||1&e)&&ie!==(ie=vt[1][t[0]]+"")&&a.p(ie),(!ee||1&e)&&re!==(re=vt[2][t[0]]+"")&&s.p(re),(!ee||1&e)&&ae!==(ae=vt[3][t[0]]+"")&&c.p(ae),(!ee||1&e)&&oe!==(oe=vt.subtitle_1[t[0]]+"")&&_(y,oe),(!ee||1&e)&&se!==(se=vt[4][t[0]]+"")&&w.p(se),(!ee||1&e)&&le!==(le=vt[5][t[0]]+"")&&T.p(le),(!ee||1&e)&&ce!==(ce=vt.subtitle_2[t[0]]+"")&&_(C,ce),(!ee||1&e)&&ue!==(ue=vt[6][t[0]]+"")&&P.p(ue),(!ee||1&e)&&he!==(he=vt[7][t[0]]+"")&&N.p(he),(!ee||1&e)&&de!==(de=vt[8][t[0]]+"")&&O.p(de),(!ee||1&e)&&pe!==(pe=vt[9][t[0]]+"")&&F.p(pe),(!ee||1&e)&&fe!==(fe=vt[10][t[0]]+"")&&B.p(fe),(!ee||1&e)&&me!==(me=vt.subsubtitle_1[t[0]]+"")&&_(Y,me),(!ee||1&e)&&ge!==(ge=vt[11][t[0]]+"")&&Z.p(ge);const n={};!tt&&1&e&&(tt=!0,n.lang=t[0],I((()=>tt=!1))),Q.$set(n),(!ee||1&e)&&ve!==(ve=vt.subsubtitle_2[t[0]]+"")&&_(it,ve),(!ee||1&e)&&ye!==(ye=vt[12][t[0]]+"")&&at.p(ye),(!ee||1&e)&&xe!==(xe=vt.subsubtitle_3[t[0]]+"")&&_(lt,xe),(!ee||1&e)&&_e!==(_e=vt[13][t[0]]+"")&&ut.p(_e);const r={};!pt&&1&e&&(pt=!0,r.lang=t[0],I((()=>pt=!1))),dt.$set(r),(!ee||1&e)&&be!==(be=vt[14][t[0]]+"")&&mt.p(be),(!ee||1&e)&&we!==(we=vt.subsubtitle_4[t[0]]+"")&&_(xt,we),(!ee||1&e)&&Me!==(Me=vt[15][t[0]]+"")&&bt.p(Me);const o={};2&e&&(o.posts=t[1]),Mt.$set(o),(!ee||1&e)&&Se!==(Se=vt.subsubtitle_5[t[0]]+"")&&_(Et,Se),(!ee||1&e)&&Te!==(Te=vt[16][t[0]]+"")&&Lt.p(Te),(!ee||1&e)&&Ee!==(Ee=vt[17][t[0]]+"")&&Rt.p(Ee),(!ee||1&e)&&Ae!==(Ae=vt[18][t[0]]+"")&&Dt.p(Ae),(!ee||1&e)&&Le!==(Le=vt[19][t[0]]+"")&&Nt.p(Le),(!ee||1&e)&&Ce!==(Ce=vt.subsubtitle_6[t[0]]+"")&&_(Ut,Ce),(!ee||1&e)&&Re!==(Re=vt[20][t[0]]+"")&&Ht.p(Re),(!ee||1&e)&&Pe!==(Pe=vt[21][t[0]]+"")&&Gt.p(Pe),(!ee||1&e)&&De!==(De=vt[22][t[0]]+"")&&jt.p(De),(!ee||1&e)&&Ie!==(Ie=vt.subtitle_3[t[0]]+"")&&_(Jt,Ie),(!ee||1&e)&&Ne!==(Ne=vt[23][t[0]]+"")&&Kt.p(Ne),(!ee||1&e)&&ke!==(ke=vt[24][t[0]]+"")&&te.p(ke)},i(t){ee||(V(Q.$$.fragment,t),V(dt.$$.fragment,t),V(Mt.$$.fragment,t),V(Ot.$$.fragment,t),V(qt.$$.fragment,t),ee=!0)},o(t){G(Q.$$.fragment,t),G(dt.$$.fragment,t),G(Mt.$$.fragment,t),G(Ot.$$.fragment,t),G(qt.$$.fragment,t),ee=!1},d(t){t&&d(e),q(Q),q(dt),q(Mt),q(Ot),q(qt)}}}function ju(t,e,n){let{lang:i}=e,{posts:r}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang),"posts"in t&&n(1,r=t.posts)},[i,r,"methods",function(t){i=t,n(0,i)},function(t){i=t,n(0,i)}]}class $u extends J{constructor(t){super(),Y(this,t,ju,Wu,a,{lang:0,posts:1,id:2})}get id(){return this.$$.ctx[2]}}function qu(t,e,n){const i=t.slice();return i[1]=e[n],i}function Xu(t,e,n){const i=t.slice();return i[1]=e[n],i}function Yu(t,e,n){const i=t.slice();return i[1]=e[n],i}function Ju(t){let e,n=xt.paragraphs_1[t[1]][t[0]]+"";return{c(){e=f("p")},m(t,i){h(t,e,i),e.innerHTML=n},p(t,i){1&i&&n!==(n=xt.paragraphs_1[t[1]][t[0]]+"")&&(e.innerHTML=n)},d(t){t&&d(e)}}}function Zu(t){let e,n,i,r=xt.enumerations[t[1]][t[0]]+"";return{c(){e=f("li"),n=new M,i=g(),n.a=i},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=xt.enumerations[t[1]][t[0]]+"")&&n.p(r)},d(t){t&&d(e)}}}function Ku(t){let e,n,i,r=xt.paragraphs_2[t[1]][t[0]]+"";return{c(){e=f("p"),n=new M,i=g(),n.a=i},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=xt.paragraphs_2[t[1]][t[0]]+"")&&n.p(r)},d(t){t&&d(e)}}}function Qu(e){let n,i,r,a,o,s,l,c=xt.title[e[0]]+"",v=Object.keys(xt.paragraphs_1),y=[];for(let t=0;t<v.length;t+=1)y[t]=Ju(Yu(e,v,t));let b=Object.keys(xt.enumerations),w=[];for(let t=0;t<b.length;t+=1)w[t]=Zu(Xu(e,b,t));let M=Object.keys(xt.paragraphs_2),S=[];for(let t=0;t<M.length;t+=1)S[t]=Ku(qu(e,M,t));return{c(){n=f("section"),i=f("h1"),r=m(c),a=g();for(let t=0;t<y.length;t+=1)y[t].c();o=g(),s=f("ol");for(let t=0;t<w.length;t+=1)w[t].c();l=g();for(let t=0;t<S.length;t+=1)S[t].c();x(i,"class","title")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(n,a);for(let t=0;t<y.length;t+=1)y[t].m(n,null);u(n,o),u(n,s);for(let t=0;t<w.length;t+=1)w[t].m(s,null);u(n,l);for(let t=0;t<S.length;t+=1)S[t].m(n,null)},p(t,[e]){if(1&e&&c!==(c=xt.title[t[0]]+"")&&_(r,c),1&e){let i;for(v=Object.keys(xt.paragraphs_1),i=0;i<v.length;i+=1){const r=Yu(t,v,i);y[i]?y[i].p(r,e):(y[i]=Ju(r),y[i].c(),y[i].m(n,o))}for(;i<y.length;i+=1)y[i].d(1);y.length=v.length}if(1&e){let n;for(b=Object.keys(xt.enumerations),n=0;n<b.length;n+=1){const i=Xu(t,b,n);w[n]?w[n].p(i,e):(w[n]=Zu(i),w[n].c(),w[n].m(s,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}if(1&e){let i;for(M=Object.keys(xt.paragraphs_2),i=0;i<M.length;i+=1){const r=qu(t,M,i);S[i]?S[i].p(r,e):(S[i]=Ku(r),S[i].c(),S[i].m(n,null))}for(;i<S.length;i+=1)S[i].d(1);S.length=M.length}},i:t,o:t,d(t){t&&d(n),p(y,t),p(w,t),p(S,t)}}}function th(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class eh extends J{constructor(t){super(),Y(this,t,th,Qu,a,{lang:0})}}function nh(t,e,n){const i=t.slice();return i[1]=e[n],i}function ih(t){let e,n,i,r=_t.paragraphs[t[1]][t[0]]+"";return{c(){e=f("p"),n=new M,i=g(),n.a=i},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=_t.paragraphs[t[1]][t[0]]+"")&&n.p(r)},d(t){t&&d(e)}}}function rh(e){let n,i,r,a,o=_t.title[e[0]]+"",s=Object.keys(_t.paragraphs),l=[];for(let t=0;t<s.length;t+=1)l[t]=ih(nh(e,s,t));return{c(){n=f("section"),i=f("h1"),r=m(o),a=g();for(let t=0;t<l.length;t+=1)l[t].c();x(i,"class","title")},m(t,e){h(t,n,e),u(n,i),u(i,r),u(n,a);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(t,[e]){if(1&e&&o!==(o=_t.title[t[0]]+"")&&_(r,o),1&e){let i;for(s=Object.keys(_t.paragraphs),i=0;i<s.length;i+=1){const r=nh(t,s,i);l[i]?l[i].p(r,e):(l[i]=ih(r),l[i].c(),l[i].m(n,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},i:t,o:t,d(t){t&&d(n),p(l,t)}}}function ah(t,e,n){let{lang:i}=e;return t.$$set=t=>{"lang"in t&&n(0,i=t.lang)},[i]}class oh extends J{constructor(t){super(),Y(this,t,ah,rh,a,{lang:0})}}function sh(t){if(isNaN(t))return NaN;for(var e=String(+t).split(""),n=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"],i="",r=3;r--;)i=(n[+e.pop()+10*r]||"")+i;return Array(+e.join("")+1).join("M")+i}function lh(t){return function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}(t).toLowerCase().trim()}function ch(e){let n,r,a,o,s,c,p,m;return{c(){n=f("div"),r=f("input"),a=g(),o=f("button"),s=f("img"),x(r,"title","search-input"),x(r,"type","text"),x(r,"placeholder",e[2]),x(r,"class","svelte-107h92u"),x(s,"alt","Search"),l(s.src,c="/assets/images/search.svg")||x(s,"src","/assets/images/search.svg"),x(s,"class","svelte-107h92u"),o.disabled=e[0],x(o,"title","Search"),x(o,"class","svelte-107h92u"),x(n,"id","search-bar"),w(n,"margin","auto"),x(n,"class","svelte-107h92u")},m(t,i){h(t,n,i),u(n,r),b(r,e[1]),u(n,a),u(n,o),u(o,s),p||(m=[y(r,"input",e[7]),y(o,"click",e[3])],p=!0)},p(t,[e]){4&e&&x(r,"placeholder",t[2]),2&e&&r.value!==t[1]&&b(r,t[1]),1&e&&(o.disabled=t[0])},i:t,o:t,d(t){t&&d(n),p=!1,i(m)}}}function uh(t,e,n){let i,r,{disable:a=!1}=e,{onchange:o}=e,{onsubmit:s}=e,{placeholders:l}=e;let c="Search",u=-1,h=0;function d(){if(!Array.isArray(l)||0===l.length)return;h=0,u=(u+1)%l.length;const t=l[u],e=Math.floor(2e3/(1*t.length)),i=()=>{h>t.length||(n(2,c=t.substring(0,h++)),setTimeout((()=>{i()}),e))};i()}return setInterval((()=>{d()}),3500),d(),t.$$set=t=>{"disable"in t&&n(0,a=t.disable),"onchange"in t&&n(4,o=t.onchange),"onsubmit"in t&&n(5,s=t.onsubmit),"placeholders"in t&&n(6,l=t.placeholders)},t.$$.update=()=>{2&t.$$.dirty&&null!=i&&(r=lh(i.trim().replaceAll("&nbsp;"," ")),a||o(r))},[a,i,c,function(){a||s(r)},o,s,l,function(){i=this.value,n(1,i)}]}class hh extends J{constructor(t){super(),Y(this,t,uh,ch,a,{disable:0,onchange:4,onsubmit:5,placeholders:6})}}function dh(t,e,n){const i=t.slice();return i[12]=e[n],i[14]=n,i}function ph(t,e,n){const i=t.slice();return i[15]=e[n],i[17]=n,i}function fh(t,e,n){const i=t.slice();return i[18]=e[n],i}function mh(t){let e,n,i,r=t[1],a=[];for(let e=0;e<r.length;e+=1)a[e]=gh(fh(t,r,e));return{c(){e=f("div"),n=f("table"),i=f("tr");for(let t=0;t<a.length;t+=1)a[t].c();x(i,"class","svelte-1e6ozt9"),x(n,"class","svelte-1e6ozt9"),x(e,"class","table-headers svelte-1e6ozt9"),x(e,"id",t[4])},m(t,r){h(t,e,r),u(e,n),u(n,i);for(let t=0;t<a.length;t+=1)a[t].m(i,null)},p(t,e){if(2&e){let n;for(r=t[1],n=0;n<r.length;n+=1){const o=fh(t,r,n);a[n]?a[n].p(o,e):(a[n]=gh(o),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},d(t){t&&d(e),p(a,t)}}}function gh(t){let e,n,i=t[18]+"";return{c(){e=f("th"),n=m(i),x(e,"class","header svelte-1e6ozt9")},m(t,i){h(t,e,i),u(e,n)},p(t,e){2&e&&i!==(i=t[18]+"")&&_(n,i)},d(t){t&&d(e)}}}function vh(t){let e,n,i,r,a,o,s,m,v,_=t[2],b=[];for(let e=0;e<_.length;e+=1)b[e]=bh(dh(t,_,e));return{c(){e=f("div"),n=f("table");for(let t=0;t<b.length;t+=1)b[t].c();r=g(),a=f("div"),o=f("img"),x(n,"class",i=c(t[0]?"disabled":"enabled")+" svelte-1e6ozt9"),x(e,"class","table-values svelte-1e6ozt9"),x(e,"id",t[3]),x(o,"alt","download"),l(o.src,s="/assets/images/download.png")||x(o,"src","/assets/images/download.png"),x(o,"width","30"),x(o,"height","30"),x(o,"class","svelte-1e6ozt9"),x(a,"class","download svelte-1e6ozt9")},m(i,s){h(i,e,s),u(e,n);for(let t=0;t<b.length;t+=1)b[t].m(n,null);h(i,r,s),h(i,a,s),u(a,o),m||(v=y(o,"click",t[9]),m=!0)},p(t,e){if(4&e){let i;for(_=t[2],i=0;i<_.length;i+=1){const r=dh(t,_,i);b[i]?b[i].p(r,e):(b[i]=bh(r),b[i].c(),b[i].m(n,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=_.length}1&e&&i!==(i=c(t[0]?"disabled":"enabled")+" svelte-1e6ozt9")&&x(n,"class",i)},d(t){t&&d(e),p(b,t),t&&d(r),t&&d(a),m=!1,v()}}}function yh(t){let e,n=t[15]+"";return{c(){e=m(n)},m(t,n){h(t,e,n)},p(t,i){4&i&&n!==(n=t[15]+"")&&_(e,n)},d(t){t&&d(e)}}}function xh(t){let e,n,i,r=t[15]+"";return{c(){e=f("a"),n=m(r),x(e,"href",i=t[15]),x(e,"target","_blank"),x(e,"class","svelte-1e6ozt9")},m(t,i){h(t,e,i),u(e,n)},p(t,a){4&a&&r!==(r=t[15]+"")&&_(n,r),4&a&&i!==(i=t[15])&&x(e,"href",i)},d(t){t&&d(e)}}}function _h(t){let e,n;function i(t,e){return 4&e&&(n=null),null==n&&(n=!!(t[15].length>4&&"http"===t[15].substring(0,4))),n?xh:yh}let r=i(t,-1),a=r(t);return{c(){e=f("th"),a.c(),x(e,"class","value svelte-1e6ozt9"),x(e,"data-row_id",t[14]),x(e,"data-col_id",t[17])},m(t,n){h(t,e,n),a.m(e,null)},p(t,n){r===(r=i(t,n))&&a?a.p(t,n):(a.d(1),a=r(t),a&&(a.c(),a.m(e,null)))},d(t){t&&d(e),a.d()}}}function bh(t){let e,n,i=t[12],r=[];for(let e=0;e<i.length;e+=1)r[e]=_h(ph(t,i,e));return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c();n=g(),x(e,"class","svelte-1e6ozt9")},m(t,i){h(t,e,i);for(let t=0;t<r.length;t+=1)r[t].m(e,null);u(e,n)},p(t,a){if(4&a){let o;for(i=t[12],o=0;o<i.length;o+=1){const s=ph(t,i,o);r[o]?r[o].p(s,a):(r[o]=_h(s),r[o].c(),r[o].m(e,n))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d(t){t&&d(e),p(r,t)}}}function wh(e){let n,i,r,a,o=null!==e[1]&&mh(e),s=null!==e[2]&&vh(e);return{c(){n=f("br"),i=g(),o&&o.c(),r=g(),s&&s.c(),a=v(),x(n,"class","svelte-1e6ozt9")},m(t,e){h(t,n,e),h(t,i,e),o&&o.m(t,e),h(t,r,e),s&&s.m(t,e),h(t,a,e)},p(t,[e]){null!==t[1]?o?o.p(t,e):(o=mh(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null),null!==t[2]?s?s.p(t,e):(s=vh(t),s.c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&d(n),t&&d(i),o&&o.d(t),t&&d(r),s&&s.d(t),t&&d(a)}}}function Mh(t,e,n){let{data:i}=e,{cell_func:r}=e,{table_id:a=`mtable-${Math.floor(1e4*Math.random())}`}=e,{disable:o=!1}=e;const s=`${a}-values`,l=`${a}-headers`;let c=null,u=null;function h(){const t="cai_"+function(t){let e=new Date,n=String((e.getSeconds()+t)%60);2!==n.length&&(n="0"+n);let i=Math.floor((e.getSeconds()+t)/60),r=String((e.getMinutes()+i)%60);2!==r.length&&(r="0"+r);let a=Math.floor((e.getMinutes()+i)/60),o=String((e.getHours()+a)%24);2!==o.length&&(o="0"+o);let s=Math.floor((e.getHours()+a)/24),l=String(e.getDate()+s);2!==l.length&&(l="0"+l);let c=String(e.getMonth()+1);return 2!==c.length&&(c="0"+c),String(e.getFullYear())+"-"+c+"-"+l+"_"+o+":"+r+":"+n}(0)+".csv",e=i.map((t=>t.map((t=>`"${t}"`)).join(","))).join("\n"),n=new Blob([e],{type:"text/csv"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{const e=window.document.createElement("a");e.href=window.URL.createObjectURL(n),e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}return t.$$set=t=>{"data"in t&&n(6,i=t.data),"cell_func"in t&&n(7,r=t.cell_func),"table_id"in t&&n(8,a=t.table_id),"disable"in t&&n(0,o=t.disable)},t.$$.update=()=>{64&t.$$.dirty&&function(t){if(!Array.isArray(t))return!1;if(t.length<1)return console.error("invalid data for table - array of length < 1"),!1;if(!Array.isArray(t[0]))return console.error("invalid data for table - first element not an array"),!1;if(0===t[0].length)return console.error("invalid data for table - first element of length 0"),!1;let e=t[0].length;for(let n=1;n<t.length;n++){if(!Array.isArray(t[n]))return console.error(`invalid data for table - ${n}th element not an array`),!1;if(t[n].length!==e)return console.error(`invalid data for table - ${n}th element not of same length`),!1}return!0}(i)&&(n(2,u=i.filter(((t,e)=>0!==e))),n(1,c=i[0]),setTimeout((()=>{!function(){const t=document.getElementById(s);if(null===t)return;const e=document.getElementById(l);if(null===e)return;let n=t.querySelectorAll("tr")[0];if(void 0===n)return;let i=n.querySelectorAll("th"),r=0,a=Array.from(i,(t=>{const e=1*t.getBoundingClientRect().width;return r+=e,e}));a=a.map((t=>Math.round(100*t/r))),r=a.reduce(((t,e)=>t+e),0),100!==r&&(a[0]=100-r+a[0]),i=e.querySelectorAll("tr")[0].querySelectorAll("th");for(let t=0;t<i.length;t++)i[t].style.width=`${a[t]}%`;let o=t.querySelectorAll("tr");for(let t=0;t<o.length;t++){i=o[t].querySelectorAll("th");for(let t=0;t<i.length;t++)i[t].style.width=`${a[t]}%`}}(),function(){const t=document.getElementById(s).getElementsByTagName("th");for(let e of t){const t=e.innerText,{row_id:n,col_id:i}=e.dataset;"function"==typeof r&&r(e,t,n,i)}}()}),100))},[o,c,u,s,l,h,i,r,a,()=>{h()}]}class Sh extends J{constructor(t){super(),Y(this,t,Mh,wh,a,{data:6,cell_func:7,table_id:8,disable:0})}}function Th(t){let e,n;return{c(){e=f("p"),n=m(t[4]),x(e,"class","svelte-1aye3t0")},m(t,i){h(t,e,i),u(e,n)},p(t,e){16&e&&_(n,t[4])},d(t){t&&d(e)}}}function Eh(t){let e,n;return{c(){e=f("p"),n=m(t[4]),w(e,"color","red"),x(e,"class","svelte-1aye3t0")},m(t,i){h(t,e,i),u(e,n)},p(t,e){16&e&&_(n,t[4])},d(t){t&&d(e)}}}function Ah(t){let e,n,i,r,a,o,s,l,c,u,p,m,v,y;function _(e){t[9](e)}let b={onchange:t[5],onsubmit:t[6],placeholders:t[0]};function w(e){t[10](e)}function M(e){t[11](e)}void 0!==t[1]&&(b.disable=t[1]),i=new hh({props:b}),A.push((()=>W(i,"disable",_)));let S={};function T(t,e){return t[3].length-1>=Lh?Eh:Th}void 0!==t[2]&&(S.disable=t[2]),void 0!==t[3]&&(S.data=t[3]),l=new Sh({props:S}),A.push((()=>W(l,"disable",w))),A.push((()=>W(l,"data",M)));let E=T(t),L=E(t);return{c(){e=f("br"),n=g(),j(i.$$.fragment),a=g(),o=f("div"),s=g(),j(l.$$.fragment),p=g(),L.c(),m=g(),v=f("br"),x(o,"class","separator svelte-1aye3t0")},m(t,r){h(t,e,r),h(t,n,r),$(i,t,r),h(t,a,r),h(t,o,r),h(t,s,r),$(l,t,r),h(t,p,r),L.m(t,r),h(t,m,r),h(t,v,r),y=!0},p(t,[e]){const n={};1&e&&(n.placeholders=t[0]),!r&&2&e&&(r=!0,n.disable=t[1],I((()=>r=!1))),i.$set(n);const a={};!c&&4&e&&(c=!0,a.disable=t[2],I((()=>c=!1))),!u&&8&e&&(u=!0,a.data=t[3],I((()=>u=!1))),l.$set(a),E===(E=T(t))&&L?L.p(t,e):(L.d(1),L=E(t),L&&(L.c(),L.m(m.parentNode,m)))},i(t){y||(V(i.$$.fragment,t),V(l.$$.fragment,t),y=!0)},o(t){G(i.$$.fragment,t),G(l.$$.fragment,t),y=!1},d(t){t&&d(e),t&&d(n),q(i,t),t&&d(a),t&&d(o),t&&d(s),q(l,t),t&&d(p),L.d(t),t&&d(m),t&&d(v)}}}const Lh=3e3;function Ch(t,e,n){let i,{word_mapping:r}=e,{documents:a}=e,{placeholders:o}=e,s=!1,l=!1,c="",u=[];const h=["Source","Keyword","Published On","Link"];let d={};Object.values(r).forEach((t=>{d[t]=[]})),a.forEach(((t,e)=>{t.wv.forEach((t=>{d[t].push(e)}))})),Object.keys(d).forEach((t=>{d[t]=[...new Set(d[t])]}));let p={};function f(t){if(null==t||0===t.length)return[];let e=t.split(" ").map((t=>r[lh(t)]));if(e=e.filter((t=>void 0!==t)),e=[...new Set(e)],0===e.length)return[];let n=e.map((t=>d[t]));return n=n.reduce(((t,e)=>t.filter((t=>e.includes(t))))),n.map((t=>{const n=a[t],i=e.map((t=>p[t.toString()])).join(";");return[n.source_name,i,n.t,n.l]}))}return Object.keys(r).forEach((t=>{p[r[t]]=t})),u.unshift(h),i=u,t.$$set=t=>{"word_mapping"in t&&n(7,r=t.word_mapping),"documents"in t&&n(8,a=t.documents),"placeholders"in t&&n(0,o=t.placeholders)},[o,s,l,i,c,function(t){n(2,l=!0),u=f(t).splice(0,20),u.unshift(h),n(4,c=""),n(3,i=u)},function(t){n(1,s=!0),setTimeout((()=>{u=f(t).splice(0,Lh),u.unshift(h),n(4,c=`${u.length-1===Lh?"max ":""}${u.length-1} ${u.length-1>1?"results":"result"}`),n(3,i=u),n(1,s=!1),n(2,l=!1)}),50)},r,a,function(t){s=t,n(1,s)},function(t){l=t,n(2,l)},function(t){i=t,n(3,i)}]}class Rh extends J{constructor(t){super(),Y(this,t,Ch,Ah,a,{word_mapping:7,documents:8,placeholders:0})}}function Ph(t,e,n){const i=t.slice();return i[2]=e[n],i}function Dh(e){let n,i,r,a,o,s,c,p,v,y,_,b,w,S=e[2].name+"",T=e[2].description+"",E=e[2].html+"";return{c(){n=f("div"),i=f("img"),o=g(),s=f("h1"),c=m(S),p=g(),v=f("p"),y=m(T),_=g(),b=new M,w=g(),x(i,"alt",r=e[2].name),l(i.src,a=e[2].src)||x(i,"src",a),x(i,"class","svelte-1u4k67e"),x(s,"class","svelte-1u4k67e"),x(v,"class","svelte-1u4k67e"),b.a=w,x(n,"class","portraits svelte-1u4k67e")},m(t,e){h(t,n,e),u(n,i),u(n,o),u(n,s),u(s,c),u(n,p),u(n,v),u(v,y),u(n,_),b.m(E,n),u(n,w)},p:t,d(t){t&&d(n)}}}function Ih(e){let n,i=e[0],r=[];for(let t=0;t<i.length;t+=1)r[t]=Dh(Ph(e,i,t));return{c(){n=f("div");for(let t=0;t<r.length;t+=1)r[t].c();x(n,"class","container svelte-1u4k67e")},m(t,e){h(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,[e]){if(1&e){let a;for(i=t[0],a=0;a<i.length;a+=1){const o=Ph(t,i,a);r[a]?r[a].p(o,e):(r[a]=Dh(o),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:t,o:t,d(t){t&&d(n),p(r,t)}}}function Nh(t,e,n){let{data:i}=e;const r=i.map((t=>{const e=`<div style="display: flex; justify-content: center;">${Object.keys(t.endpoint).sort().map((e=>{return`\n                <a target="_blank" href="${t.endpoint[e].url}"" style="margin: 8px; width: 25%">\n                    <img src="/assets/images/${e}.png" width=16 height=16>\n                    <p style="font-size:12px;margin:0px;padding:0px">\n                        ${n=t.endpoint[e].followers,n>=1e9?(n/1e9).toFixed(1).replace(/\.0$/,"")+"G":n>=1e6?(n/1e6).toFixed(1).replace(/\.0$/,"")+"M":n>=1e3?(n/1e3).toFixed(1).replace(/\.0$/,"")+"K":n}\n                    </p>\n                </a>\n            `;var n})).join("")}</div>`;return{name:t.name,description:t.description,endpoint:t.endpoint,src:`/assets/portraits/${t.name.replaceAll(" ","_")}.jpg`,html:e}}));return t.$$set=t=>{"data"in t&&n(1,i=t.data)},[r,i]}class kh extends J{constructor(t){super(),Y(this,t,Nh,Ih,a,{data:1})}}function Oh(t,e,n){const i=t.slice();return i[1]=e[n],i}function zh(t){let e,n,i,r=t[1]+"";return{c(){e=f("li"),n=new M,i=g(),n.a=i,x(e,"class","svelte-hm9cao")},m(t,a){h(t,e,a),n.m(r,e),u(e,i)},p(t,e){1&e&&r!==(r=t[1]+"")&&n.p(r)},d(t){t&&d(e)}}}function Fh(e){let n,i,r=e[0],a=[];for(let t=0;t<r.length;t+=1)a[t]=zh(Oh(e,r,t));return{c(){n=f("div"),i=f("ol");for(let t=0;t<a.length;t+=1)a[t].c();x(i,"type","i"),x(i,"class","svelte-hm9cao"),x(n,"class","content svelte-hm9cao")},m(t,e){h(t,n,e),u(n,i);for(let t=0;t<a.length;t+=1)a[t].m(i,null)},p(t,[e]){if(1&e){let n;for(r=t[0],n=0;n<r.length;n+=1){const o=Oh(t,r,n);a[n]?a[n].p(o,e):(a[n]=zh(o),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},i:t,o:t,d(t){t&&d(n),p(a,t)}}}function Uh(t,e,n){let{elements:i}=e;return t.$$set=t=>{"elements"in t&&n(0,i=t.elements)},[i]}class Bh extends J{constructor(t){super(),Y(this,t,Uh,Fh,a,{elements:0})}}function Hh(e){let n,r,a,o,s,c,p,v,b,w,M;return{c(){n=f("div"),r=f("img"),o=g(),s=f("h1"),c=m(e[0]),p=g(),v=f("img"),x(r,"alt","previous"),l(r.src,a="/assets/images/previous.png")||x(r,"src","/assets/images/previous.png"),x(r,"class","svelte-quhphy"),x(s,"class","svelte-quhphy"),x(v,"alt","next"),l(v.src,b="/assets/images/next.png")||x(v,"src","/assets/images/next.png"),x(v,"class","svelte-quhphy"),x(n,"class","buttons svelte-quhphy")},m(t,i){h(t,n,i),u(n,r),u(n,o),u(n,s),u(s,c),u(n,p),u(n,v),w||(M=[y(r,"click",e[6]),y(v,"click",e[7])],w=!0)},p(t,[e]){1&e&&_(c,t[0])},i:t,o:t,d(t){t&&d(n),w=!1,i(M)}}}function Vh(t,e,n){let{options:i}=e,{previous_callback:r}=e,{next_callback:a}=e,o=-1,s="";function l(){o-1<0||(o-=1,n(0,s=i[o].value),r(i[o].key))}function c(){o+1>=i.length||(o+=1,n(0,s=i[o].value),a(i[o].key))}T((()=>{[...new Set(i)].length!==i.length&&console.error("duplicates in slider options"),c()}));return t.$$set=t=>{"options"in t&&n(3,i=t.options),"previous_callback"in t&&n(4,r=t.previous_callback),"next_callback"in t&&n(5,a=t.next_callback)},[s,l,c,i,r,a,()=>{l()},()=>{c()}]}class Gh extends J{constructor(t){super(),Y(this,t,Vh,Hh,a,{options:3,previous_callback:4,next_callback:5})}}function Wh(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jh(t){let e=t,n=t,i=t;function r(t,e,r=0,a=t.length){if(r<a){if(0!==n(e,e))return a;do{const n=r+a>>>1;i(t[n],e)<0?r=n+1:a=n}while(r<a)}return r}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=Wh,i=(e,n)=>Wh(t(e),n)),{left:r,center:function(t,n,i=0,a=t.length){const o=r(t,n,i,a-1);return o>i&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,r=0,a=t.length){if(r<a){if(0!==n(e,e))return a;do{const n=r+a>>>1;i(t[n],e)<=0?r=n+1:a=n}while(r<a)}return r}}}const $h=jh(Wh).right;jh((function(t){return null===t?NaN:+t})).center;var qh=$h,Xh=Math.sqrt(50),Yh=Math.sqrt(10),Jh=Math.sqrt(2);function Zh(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=Xh?10:a>=Yh?5:a>=Jh?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=Xh?10:a>=Yh?5:a>=Jh?2:1)}function Kh(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=Xh?r*=10:a>=Yh?r*=5:a>=Jh&&(r*=2),e<t?-r:r}function Qh(t){return t}var td=1e-6;function ed(t){return"translate("+t+",0)"}function nd(t){return"translate(0,"+t+")"}function id(t){return e=>+t(e)}function rd(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ad(){return!this.__axis}function od(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",h=1===t||3===t?ed:nd;function d(d){var p=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,f=null==r?e.tickFormat?e.tickFormat.apply(e,n):Qh:r,m=Math.max(a,0)+s,g=e.range(),v=+g[0]+l,y=+g[g.length-1]+l,x=(e.bandwidth?rd:id)(e.copy(),l),_=d.selection?d.selection():d,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(p,e).order(),M=w.exit(),S=w.enter().append("g").attr("class","tick"),T=w.select("line"),E=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),E=E.merge(S.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==_&&(b=b.transition(d),w=w.transition(d),T=T.transition(d),E=E.transition(d),M=M.transition(d).attr("opacity",td).attr("transform",(function(t){return isFinite(t=x(t))?h(t+l):this.getAttribute("transform")})),S.attr("opacity",td).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:x(t))+l)}))),M.remove(),b.attr("d",4===t||2===t?o?"M"+c*o+","+v+"H"+l+"V"+y+"H"+c*o:"M"+l+","+v+"V"+y:o?"M"+v+","+c*o+"V"+l+"H"+y+"V"+c*o:"M"+v+","+l+"H"+y),w.attr("opacity",1).attr("transform",(function(t){return h(x(t)+l)})),T.attr(u+"2",c*a),E.attr(u,c*m).text(f),_.filter(ad).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=x}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(a=o=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(o=+t,d):o},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function sd(t){return od(3,t)}var ld={value:()=>{}};function cd(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ud(i)}function ud(t){this._=t}function hd(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function dd(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function pd(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ld,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ud.prototype=cd.prototype={constructor:ud,on:function(t,e){var n,i=this._,r=hd(t+"",i),a=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=r[a]).type)i[n]=pd(i[n],t.name,e);else if(null==e)for(n in i)i[n]=pd(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=r[a]).type)&&(n=dd(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ud(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var fd="http://www.w3.org/1999/xhtml",md={svg:"http://www.w3.org/2000/svg",xhtml:fd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gd(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),md.hasOwnProperty(e)?{space:md[e],local:t}:t}function vd(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fd&&e.documentElement.namespaceURI===fd?e.createElement(t):e.createElementNS(n,t)}}function yd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xd(t){var e=gd(t);return(e.local?yd:vd)(e)}function _d(){}function bd(t){return null==t?_d:function(){return this.querySelector(t)}}function wd(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Md(){return[]}function Sd(t){return null==t?Md:function(){return this.querySelectorAll(t)}}function Td(t){return function(){return this.matches(t)}}function Ed(t){return function(e){return e.matches(t)}}var Ad=Array.prototype.find;function Ld(){return this.firstElementChild}var Cd=Array.prototype.filter;function Rd(){return Array.from(this.children)}function Pd(t){return new Array(t.length)}function Dd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Id(t){return function(){return t}}function Nd(t,e,n,i,r,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Dd(t,a[s]);for(;s<l;++s)(o=e[s])&&(r[s]=o)}function kd(t,e,n,i,r,a,o){var s,l,c,u=new Map,h=e.length,d=a.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?r[s]=l:u.set(c,l));for(s=0;s<d;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(i[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new Dd(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(p[s])===l&&(r[s]=l)}function Od(t){return t.__data__}function zd(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Fd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ud(t){return function(){this.removeAttribute(t)}}function Bd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hd(t,e){return function(){this.setAttribute(t,e)}}function Vd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gd(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Wd(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function jd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $d(t){return function(){this.style.removeProperty(t)}}function qd(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Xd(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Yd(t,e){return t.style.getPropertyValue(e)||jd(t).getComputedStyle(t,null).getPropertyValue(e)}function Jd(t){return function(){delete this[t]}}function Zd(t,e){return function(){this[t]=e}}function Kd(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Qd(t){return t.trim().split(/^|\s+/)}function tp(t){return t.classList||new ep(t)}function ep(t){this._node=t,this._names=Qd(t.getAttribute("class")||"")}function np(t,e){for(var n=tp(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ip(t,e){for(var n=tp(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function rp(t){return function(){np(this,t)}}function ap(t){return function(){ip(this,t)}}function op(t,e){return function(){(e.apply(this,arguments)?np:ip)(this,t)}}function sp(){this.textContent=""}function lp(t){return function(){this.textContent=t}}function cp(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function up(){this.innerHTML=""}function hp(t){return function(){this.innerHTML=t}}function dp(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function pp(){this.nextSibling&&this.parentNode.appendChild(this)}function fp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mp(){return null}function gp(){var t=this.parentNode;t&&t.removeChild(this)}function vp(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yp(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xp(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function _p(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;i<a;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function bp(t,e,n){return function(){var i,r=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=e);this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function wp(t,e,n){var i=jd(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Mp(t,e){return function(){return wp(this,t,e)}}function Sp(t,e){return function(){return wp(this,t,e.apply(this,arguments))}}Dd.prototype={constructor:Dd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ep.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Tp=[null];function Ep(t,e){this._groups=t,this._parents=e}function Ap(){return new Ep([[document.documentElement]],Tp)}function Lp(t){return"string"==typeof t?new Ep([[document.querySelector(t)]],[document.documentElement]):new Ep([[t]],Tp)}function Cp(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}Ep.prototype=Ap.prototype={constructor:Ep,select:function(t){"function"!=typeof t&&(t=bd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],l=s.length,c=i[r]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Ep(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return wd(t.apply(this,arguments))}}(t):Sd(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(i.push(t.call(o,o.__data__,c,s)),r.push(o));return new Ep(i,r)},selectChild:function(t){return this.select(null==t?Ld:function(t){return function(){return Ad.call(this.children,t)}}("function"==typeof t?t:Ed(t)))},selectChildren:function(t){return this.selectAll(null==t?Rd:function(t){return function(){return Cd.call(this.children,t)}}("function"==typeof t?t:Ed(t)))},filter:function(t){"function"!=typeof t&&(t=Td(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Ep(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Od);var n=e?kd:Nd,i=this._parents,r=this._groups;"function"!=typeof t&&(t=Id(t));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=i[c],h=r[c],d=h.length,p=zd(t.call(u,u&&u.__data__,c,i)),f=p.length,m=s[c]=new Array(f),g=o[c]=new Array(f),v=l[c]=new Array(d);n(u,h,m,g,v,p,e);for(var y,x,_=0,b=0;_<f;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(x=g[b])&&++b<f;);y._next=x||null}}return(o=new Ep(o,i))._enter=s,o._exit=l,o},enter:function(){return new Ep(this._enter||this._groups.map(Pd),this._parents)},exit:function(){return new Ep(this._exit||this._groups.map(Pd),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,a=i.length,o=Math.min(r,a),s=new Array(r),l=0;l<o;++l)for(var c,u=n[l],h=i[l],d=u.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<r;++l)s[l]=n[l];return new Ep(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Fd);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],l=s.length,c=r[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new Ep(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=gd(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Bd:Ud:"function"==typeof e?n.local?Wd:Gd:n.local?Vd:Hd)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?$d:"function"==typeof e?Xd:qd)(t,e,null==n?"":n)):Yd(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Jd:"function"==typeof e?Kd:Zd)(t,e)):this.node()[t]},classed:function(t,e){var n=Qd(t+"");if(arguments.length<2){for(var i=tp(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?op:e?rp:ap)(n,e))},text:function(t){return arguments.length?this.each(null==t?sp:("function"==typeof t?cp:lp)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?up:("function"==typeof t?dp:hp)(t)):this.node().innerHTML},raise:function(){return this.each(pp)},lower:function(){return this.each(fp)},append:function(t){var e="function"==typeof t?t:xd(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:xd(t),i=null==e?mp:"function"==typeof e?e:bd(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(gp)},clone:function(t){return this.select(t?yp:vp)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=xp(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?bp:_p,i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Sp:Mp)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}};const Rp={capture:!0,passive:!1};function Pp(t){t.preventDefault(),t.stopImmediatePropagation()}function Dp(t){var e=t.document.documentElement,n=Lp(t).on("dragstart.drag",Pp,Rp);"onselectstart"in e?n.on("selectstart.drag",Pp,Rp):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ip(t,e){var n=t.document.documentElement,i=Lp(t).on("dragstart.drag",null);e&&(i.on("click.drag",Pp,Rp),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Np(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kp(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Op(){}var zp=.7,Fp=1/zp,Up="\\s*([+-]?\\d+)\\s*",Bp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vp=/^#([0-9a-f]{3,8})$/,Gp=new RegExp("^rgb\\("+[Up,Up,Up]+"\\)$"),Wp=new RegExp("^rgb\\("+[Hp,Hp,Hp]+"\\)$"),jp=new RegExp("^rgba\\("+[Up,Up,Up,Bp]+"\\)$"),$p=new RegExp("^rgba\\("+[Hp,Hp,Hp,Bp]+"\\)$"),qp=new RegExp("^hsl\\("+[Bp,Hp,Hp]+"\\)$"),Xp=new RegExp("^hsla\\("+[Bp,Hp,Hp,Bp]+"\\)$"),Yp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Jp(){return this.rgb().formatHex()}function Zp(){return this.rgb().formatRgb()}function Kp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vp.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Qp(e):3===n?new rf(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?tf(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?tf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Gp.exec(t))?new rf(e[1],e[2],e[3],1):(e=Wp.exec(t))?new rf(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=jp.exec(t))?tf(e[1],e[2],e[3],e[4]):(e=$p.exec(t))?tf(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=qp.exec(t))?lf(e[1],e[2]/100,e[3]/100,1):(e=Xp.exec(t))?lf(e[1],e[2]/100,e[3]/100,e[4]):Yp.hasOwnProperty(t)?Qp(Yp[t]):"transparent"===t?new rf(NaN,NaN,NaN,0):null}function Qp(t){return new rf(t>>16&255,t>>8&255,255&t,1)}function tf(t,e,n,i){return i<=0&&(t=e=n=NaN),new rf(t,e,n,i)}function ef(t){return t instanceof Op||(t=Kp(t)),t?new rf((t=t.rgb()).r,t.g,t.b,t.opacity):new rf}function nf(t,e,n,i){return 1===arguments.length?ef(t):new rf(t,e,n,null==i?1:i)}function rf(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function af(){return"#"+sf(this.r)+sf(this.g)+sf(this.b)}function of(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function sf(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function lf(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new uf(t,e,n,i)}function cf(t){if(t instanceof uf)return new uf(t.h,t.s,t.l,t.opacity);if(t instanceof Op||(t=Kp(t)),!t)return new uf;if(t instanceof uf)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new uf(o,s,l,t.opacity)}function uf(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function hf(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Np(Op,Kp,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Jp,formatHex:Jp,formatHsl:function(){return cf(this).formatHsl()},formatRgb:Zp,toString:Zp}),Np(rf,nf,kp(Op,{brighter:function(t){return t=null==t?Fp:Math.pow(Fp,t),new rf(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?zp:Math.pow(zp,t),new rf(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:af,formatHex:af,formatRgb:of,toString:of})),Np(uf,(function(t,e,n,i){return 1===arguments.length?cf(t):new uf(t,e,n,null==i?1:i)}),kp(Op,{brighter:function(t){return t=null==t?Fp:Math.pow(Fp,t),new uf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?zp:Math.pow(zp,t),new uf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new rf(hf(t>=240?t-240:t+120,r,i),hf(t,r,i),hf(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var df=t=>()=>t;function pf(t){return 1==(t=+t)?ff:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):df(isNaN(e)?n:e)}}function ff(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):df(isNaN(t)?e:t)}var mf=function t(e){var n=pf(e);function i(t,e){var i=n((t=nf(t)).r,(e=nf(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=ff(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function gf(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(a){for(n=0;n<i;++n)r[n]=t[n]*(1-a)+e[n]*a;return r}}function vf(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=Sf(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}function yf(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function xf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _f(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Sf(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var bf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wf=new RegExp(bf.source,"g");function Mf(t,e){var n,i,r,a=bf.lastIndex=wf.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=bf.exec(t))&&(i=wf.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:xf(n,i)})),a=wf.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function Sf(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?df(e):("number"===r?xf:"string"===r?(n=Kp(e))?(e=n,mf):Mf:e instanceof Kp?mf:e instanceof Date?yf:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?vf:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?_f:xf:gf))(t,e)}function Tf(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ef,Af=180/Math.PI,Lf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cf(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*Af,skewX:Math.atan(l)*Af,scaleX:o,scaleY:s}}function Rf(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,i,r,a,o,s){if(t!==r||i!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:xf(t,r)},{i:l-2,x:xf(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:xf(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:xf(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(a.skewX,o.skewX,s,l),function(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:xf(t,n)},{i:s-2,x:xf(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Pf=Rf((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Lf:Cf(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Df=Rf((function(t){return null==t?Lf:(Ef||(Ef=document.createElementNS("http://www.w3.org/2000/svg","g")),Ef.setAttribute("transform",t),(t=Ef.transform.baseVal.consolidate())?Cf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Lf)}),", ",")",")");function If(t){return((t=Math.exp(t))+1/t)/2}var Nf,kf,Of=function t(e,n,i){function r(t,r){var a,o,s=t[0],l=t[1],c=t[2],u=r[0],h=r[1],d=r[2],p=u-s,f=h-l,m=p*p+f*f;if(m<1e-12)o=Math.log(d/c)/e,a=function(t){return[s+t*p,l+t*f,c*Math.exp(e*t*o)]};else{var g=Math.sqrt(m),v=(d*d-c*c+i*m)/(2*c*n*g),y=(d*d-c*c-i*m)/(2*d*n*g),x=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);o=(_-x)/e,a=function(t){var i,r=t*o,a=If(x),u=c/(n*g)*(a*(i=e*r+x,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[s+u*p,l+u*f,c*a/If(e*r+x)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4),zf=0,Ff=0,Uf=0,Bf=0,Hf=0,Vf=0,Gf="object"==typeof performance&&performance.now?performance:Date,Wf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jf(){return Hf||(Wf($f),Hf=Gf.now()+Vf)}function $f(){Hf=0}function qf(){this._call=this._time=this._next=null}function Xf(t,e,n){var i=new qf;return i.restart(t,e,n),i}function Yf(){Hf=(Bf=Gf.now())+Vf,zf=Ff=0;try{!function(){jf(),++zf;for(var t,e=Nf;e;)(t=Hf-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zf}()}finally{zf=0,function(){var t,e,n=Nf,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Nf=e);kf=t,Zf(i)}(),Hf=0}}function Jf(){var t=Gf.now(),e=t-Bf;e>1e3&&(Vf-=e,Bf=t)}function Zf(t){zf||(Ff&&(Ff=clearTimeout(Ff)),t-Hf>24?(t<1/0&&(Ff=setTimeout(Yf,t-Gf.now()-Vf)),Uf&&(Uf=clearInterval(Uf))):(Uf||(Bf=Gf.now(),Uf=setInterval(Jf,1e3)),zf=1,Wf(Yf)))}function Kf(t,e,n){var i=new qf;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}qf.prototype=Xf.prototype={constructor:qf,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?jf():+n)+(null==e?0:+e),this._next||kf===this||(kf?kf._next=this:Nf=this,kf=this),this._call=t,this._time=n,Zf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zf())}};var Qf=cd("start","end","cancel","interrupt"),tm=[];function em(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var c,u,h,d;if(1!==n.state)return l();for(c in r)if((d=r[c]).name===n.name){if(3===d.state)return Kf(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Kf((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Xf(a,0,n.time)}(t,n,{name:e,index:i,group:r,on:Qf,tween:tm,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function nm(t,e){var n=rm(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function im(t,e){var n=rm(t,e);if(n.state>3)throw new Error("too late; already running");return n}function rm(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function am(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}function om(t,e){var n,i;return function(){var r=im(this,t),a=r.tween;if(a!==n)for(var o=0,s=(i=n=a).length;o<s;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function sm(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=im(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=s;break}l===c&&r.push(s)}a.tween=r}}function lm(t,e,n){var i=t._id;return t.each((function(){var t=im(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return rm(t,i).value[e]}}function cm(t,e){var n;return("number"==typeof e?xf:e instanceof Kp?mf:(n=Kp(e))?(e=n,mf):Mf)(t,e)}function um(t){return function(){this.removeAttribute(t)}}function hm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dm(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===i?r:r=e(i=o,n)}}function pm(t,e,n){var i,r,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===i?r:r=e(i=o,n)}}function fm(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttribute(t)}}function mm(t,e,n){var i,r,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===i&&s===r?a:(r=s,a=e(i=o,l));this.removeAttributeNS(t.space,t.local)}}function gm(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function vm(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ym(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&vm(t,r)),n}return r._value=e,r}function xm(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&gm(t,r)),n}return r._value=e,r}function _m(t,e){return function(){nm(this,t).delay=+e.apply(this,arguments)}}function bm(t,e){return e=+e,function(){nm(this,t).delay=e}}function wm(t,e){return function(){im(this,t).duration=+e.apply(this,arguments)}}function Mm(t,e){return e=+e,function(){im(this,t).duration=e}}function Sm(t,e){if("function"!=typeof e)throw new Error;return function(){im(this,t).ease=e}}function Tm(t,e,n){var i,r,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?nm:im;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}var Em=Ap.prototype.constructor;function Am(t){return function(){this.style.removeProperty(t)}}function Lm(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Cm(t,e,n){var i,r;function a(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Lm(t,a,n)),i}return a._value=e,a}function Rm(t){return function(e){this.textContent=t.call(this,e)}}function Pm(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Rm(i)),e}return i._value=t,i}var Dm=0;function Im(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Nm(){return++Dm}var km=Ap.prototype;Im.prototype={constructor:Im,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bd(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,c=i[o],u=c.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,em(h[d],e,n,d,h,rm(s,n)));return new Im(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Sd(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=t.call(l,l.__data__,h,c),f=rm(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&em(d,e,n,m,p,f);a.push(p),o.push(l)}return new Im(a,o,e,n)},selectChild:km.selectChild,selectChildren:km.selectChildren,filter:function(t){"function"!=typeof t&&(t=Td(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,l=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Im(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,c=e[s],u=n[s],h=c.length,d=o[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<i;++s)o[s]=e[s];return new Im(o,this._parents,this._name,this._id)},selection:function(){return new Em(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Nm(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=rm(o,e);em(o,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Im(i,this._parents,t,n)},call:km.call,nodes:km.nodes,node:km.node,size:km.size,empty:km.empty,each:km.each,on:function(t,e){var n=this._id;return arguments.length<2?rm(this.node(),n).on.on(t):this.each(Tm(n,t,e))},attr:function(t,e){var n=gd(t),i="transform"===n?Df:cm;return this.attrTween(t,"function"==typeof e?(n.local?mm:fm)(n,i,lm(this,"attr."+t,e)):null==e?(n.local?hm:um)(n):(n.local?pm:dm)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=gd(t);return this.tween(n,(i.local?ym:xm)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Pf:cm;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var a=Yd(this,t),o=(this.style.removeProperty(t),Yd(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}(t,i)).on("end.style."+t,Am(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,a;return function(){var o=Yd(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Yd(this,t)),o===l?null:o===i&&l===r?a:(r=l,a=e(i=o,s))}}(t,i,lm(this,"style."+t,e))).each(function(t,e){var n,i,r,a,o="style."+e,s="end."+o;return function(){var l=im(this,t),c=l.on,u=null==l.value[o]?a||(a=Am(e)):void 0;c===n&&r===u||(i=(n=c).copy()).on(s,r=u),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,a=n+"";return function(){var o=Yd(this,t);return o===a?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Cm(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(lm(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Pm(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=rm(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?om:sm)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?_m:bm)(e,t)):rm(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?wm:Mm)(e,t)):rm(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Sm(e,t)):rm(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;im(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--r&&a()}};n.each((function(){var n=im(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===r&&a()}))},[Symbol.iterator]:km[Symbol.iterator]};var Om={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function zm(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Fm(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Um(t){return(t=Fm(Math.abs(t)))?t[1]:NaN}Ap.prototype.interrupt=function(t){return this.each((function(){am(this,t)}))},Ap.prototype.transition=function(t){var e,n;t instanceof Im?(e=t._id,t=t._name):(e=Nm(),(n=Om).time=jf(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,c=0;c<l;++c)(o=s[c])&&em(o,t,e,c,s,n||zm(o,e));return new Im(i,this._parents,t,e)};var Bm,Hm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vm(t){if(!(e=Hm.exec(t)))throw new Error("invalid format: "+t);var e;return new Gm({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Gm(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Wm(t,e){var n=Fm(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Vm.prototype=Gm.prototype,Gm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var jm={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Wm(100*t,e),r:Wm,s:function(t,e){var n=Fm(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(Bm=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Fm(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $m(t){return t}var qm,Xm,Ym,Jm=Array.prototype.map,Zm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Km(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?$m:(e=Jm.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,a=[],o=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?$m:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Jm.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Vm(t)).fill,n=t.align,h=t.sign,d=t.symbol,p=t.zero,f=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):jm[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var x="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===d?a:/[%p]/.test(y)?l:"",b=jm[y],w=/[defgprs%]/.test(y);function M(t){var r,a,l,d=x,M=_;if("c"===y)M=b(t)+M,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==h&&(S=!1),d=(S?"("===h?h:c:"-"===h||"("===h?"":h)+d,M=("s"===y?Zm[8+Bm/3]:"")+M+(S&&"("===h?")":""),w)for(r=-1,a=t.length;++r<a;)if(48>(l=t.charCodeAt(r))||l>57){M=(46===l?o+t.slice(r+1):t.slice(r))+M,t=t.slice(0,r);break}}m&&!p&&(t=i(t,1/0));var T=d.length+t.length+M.length,E=T<f?new Array(f-T+1).join(e):"";switch(m&&p&&(t=i(E+t,E.length?f-M.length:1/0),E=""),n){case"<":t=d+t+M+E;break;case"=":t=d+E+t+M;break;case"^":t=E.slice(0,T=E.length>>1)+d+t+M+E.slice(T);break;default:t=E+d+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var n=h(((t=Vm(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Um(e)/3))),r=Math.pow(10,-i),a=Zm[8+i/3];return function(t){return n(r*t)+a}}}}function Qm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function tg(t){return+t}qm=Km({thousands:",",grouping:[3],currency:["$",""]}),Xm=qm.format,Ym=qm.formatPrefix;var eg=[0,1];function ng(t){return t}function ig(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function rg(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=ig(r,i),a=n(o,a)):(i=ig(i,r),a=n(a,o)),function(t){return a(i(t))}}function ag(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=ig(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=qh(t,e,1,i)-1;return a[n](r[n](e))}}function og(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sg(){var t,e,n,i,r,a,o=eg,s=eg,l=Sf,c=ng;function u(){var t,e,n,l=Math.min(o.length,s.length);return c!==ng&&(t=o[0],e=o[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),i=l>2?ag:rg,r=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(o.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=i(s,o.map(t),xf)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,tg),u()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=Tf,u()},h.clamp=function(t){return arguments.length?(c=!!t||ng,u()):c!==ng},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}function lg(){return sg()(ng,ng)}function cg(t,e,n,i){var r,a=Kh(t,e,n);switch((i=Vm(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Um(e)/3)))-Um(Math.abs(t)))}(a,o))||(i.precision=r),Ym(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Um(e)-Um(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Um(Math.abs(t)))}(a))||(i.precision=r-2*("%"===i.type))}return Xm(i)}function ug(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,a,o,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=Zh(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,a=new Array(r=i-n+1);++s<r;)a[s]=(n+s)*o}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,a=new Array(r=i-n+1);++s<r;)a[s]=(n+s)/o}return i&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return cg(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(r=l,l=c,c=r,r=o,o=s,s=r);u-- >0;){if((r=Zh(l,c,n))===i)return a[o]=l,a[s]=c,e(a);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function hg(){var t=lg();return t.copy=function(){return og(t,hg())},Qm.apply(t,arguments),ug(t)}function dg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function pg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function fg(t){return t<0?-t*t:t*t}function mg(t){var e=t(ng,ng),n=1;function i(){return 1===n?t(ng,ng):.5===n?t(pg,fg):t(dg(n),dg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},ug(e)}function gg(){var t=mg(sg());return t.copy=function(){return og(t,gg()).exponent(t.exponent())},Qm.apply(t,arguments),t}var vg=new Date,yg=new Date;function xg(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<i);return s},r.filter=function(n){return xg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return vg.setTime(+e),yg.setTime(+i),t(vg),t(yg),Math.floor(n(vg,yg))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var _g=xg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));_g.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?xg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):_g:null};var bg=_g;const wg=1e3,Mg=6e4,Sg=36e5,Tg=864e5,Eg=6048e5,Ag=2592e6,Lg=31536e6;var Cg=xg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*wg)}),(function(t,e){return(e-t)/wg}),(function(t){return t.getUTCSeconds()})),Rg=Cg,Pg=xg((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*wg)}),(function(t,e){t.setTime(+t+e*Mg)}),(function(t,e){return(e-t)/Mg}),(function(t){return t.getMinutes()})),Dg=Pg,Ig=xg((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*wg-t.getMinutes()*Mg)}),(function(t,e){t.setTime(+t+e*Sg)}),(function(t,e){return(e-t)/Sg}),(function(t){return t.getHours()})),Ng=Ig,kg=xg((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mg)/Tg),(t=>t.getDate()-1)),Og=kg;function zg(t){return xg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mg)/Eg}))}var Fg=zg(0),Ug=zg(1);zg(2),zg(3);var Bg=zg(4);zg(5),zg(6);var Hg=xg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Vg=Hg,Gg=xg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Gg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Wg=Gg,jg=xg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Mg)}),(function(t,e){return(e-t)/Mg}),(function(t){return t.getUTCMinutes()})),$g=jg,qg=xg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Sg)}),(function(t,e){return(e-t)/Sg}),(function(t){return t.getUTCHours()})),Xg=qg,Yg=xg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Tg}),(function(t){return t.getUTCDate()-1})),Jg=Yg;function Zg(t){return xg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Eg}))}var Kg=Zg(0),Qg=Zg(1);Zg(2),Zg(3);var tv=Zg(4);Zg(5),Zg(6);var ev=xg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),nv=ev,iv=xg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));iv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var rv=iv;function av(t,e,n,i,r,a){const o=[[Rg,1,wg],[Rg,5,5e3],[Rg,15,15e3],[Rg,30,3e4],[a,1,Mg],[a,5,3e5],[a,15,9e5],[a,30,18e5],[r,1,Sg],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,Tg],[i,2,1728e5],[n,1,Eg],[e,1,Ag],[e,3,7776e6],[t,1,Lg]];function s(e,n,i){const r=Math.abs(n-e)/i,a=jh((([,,t])=>t)).right(o,r);if(a===o.length)return t.every(Kh(e/Lg,n/Lg,i));if(0===a)return bg.every(Math.max(Kh(e,n,i),1));const[s,l]=o[r/o[a-1][2]<o[a][2]/r?a-1:a];return s.every(l)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:s(t,e,n),a=r?r.range(t,+e+1):[];return i?a.reverse():a},s]}av(rv,nv,Kg,Jg,Xg,$g);const[ov,sv]=av(Wg,Vg,Fg,Og,Ng,Dg);function lv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function uv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var hv,dv,pv={"-":"",_:" ",0:"0"},fv=/^\s*\d+/,mv=/^%/,gv=/[\\^$*+?|[\]().{}]/g;function vv(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function yv(t){return t.replace(gv,"\\$&")}function xv(t){return new RegExp("^(?:"+t.map(yv).join("|")+")","i")}function _v(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function bv(t,e,n){var i=fv.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function wv(t,e,n){var i=fv.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Mv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Sv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Tv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Ev(t,e,n){var i=fv.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Av(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Lv(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Cv(t,e,n){var i=fv.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Rv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Pv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Dv(t,e,n){var i=fv.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Iv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Nv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function kv(t,e,n){var i=fv.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Ov(t,e,n){var i=fv.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function zv(t,e,n){var i=fv.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Fv(t,e,n){var i=mv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Uv(t,e,n){var i=fv.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Bv(t,e,n){var i=fv.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Hv(t,e){return vv(t.getDate(),e,2)}function Vv(t,e){return vv(t.getHours(),e,2)}function Gv(t,e){return vv(t.getHours()%12||12,e,2)}function Wv(t,e){return vv(1+Og.count(Wg(t),t),e,3)}function jv(t,e){return vv(t.getMilliseconds(),e,3)}function $v(t,e){return jv(t,e)+"000"}function qv(t,e){return vv(t.getMonth()+1,e,2)}function Xv(t,e){return vv(t.getMinutes(),e,2)}function Yv(t,e){return vv(t.getSeconds(),e,2)}function Jv(t){var e=t.getDay();return 0===e?7:e}function Zv(t,e){return vv(Fg.count(Wg(t)-1,t),e,2)}function Kv(t){var e=t.getDay();return e>=4||0===e?Bg(t):Bg.ceil(t)}function Qv(t,e){return t=Kv(t),vv(Bg.count(Wg(t),t)+(4===Wg(t).getDay()),e,2)}function ty(t){return t.getDay()}function ey(t,e){return vv(Ug.count(Wg(t)-1,t),e,2)}function ny(t,e){return vv(t.getFullYear()%100,e,2)}function iy(t,e){return vv((t=Kv(t)).getFullYear()%100,e,2)}function ry(t,e){return vv(t.getFullYear()%1e4,e,4)}function ay(t,e){var n=t.getDay();return vv((t=n>=4||0===n?Bg(t):Bg.ceil(t)).getFullYear()%1e4,e,4)}function oy(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vv(e/60|0,"0",2)+vv(e%60,"0",2)}function sy(t,e){return vv(t.getUTCDate(),e,2)}function ly(t,e){return vv(t.getUTCHours(),e,2)}function cy(t,e){return vv(t.getUTCHours()%12||12,e,2)}function uy(t,e){return vv(1+Jg.count(rv(t),t),e,3)}function hy(t,e){return vv(t.getUTCMilliseconds(),e,3)}function dy(t,e){return hy(t,e)+"000"}function py(t,e){return vv(t.getUTCMonth()+1,e,2)}function fy(t,e){return vv(t.getUTCMinutes(),e,2)}function my(t,e){return vv(t.getUTCSeconds(),e,2)}function gy(t){var e=t.getUTCDay();return 0===e?7:e}function vy(t,e){return vv(Kg.count(rv(t)-1,t),e,2)}function yy(t){var e=t.getUTCDay();return e>=4||0===e?tv(t):tv.ceil(t)}function xy(t,e){return t=yy(t),vv(tv.count(rv(t),t)+(4===rv(t).getUTCDay()),e,2)}function _y(t){return t.getUTCDay()}function by(t,e){return vv(Qg.count(rv(t)-1,t),e,2)}function wy(t,e){return vv(t.getUTCFullYear()%100,e,2)}function My(t,e){return vv((t=yy(t)).getUTCFullYear()%100,e,2)}function Sy(t,e){return vv(t.getUTCFullYear()%1e4,e,4)}function Ty(t,e){var n=t.getUTCDay();return vv((t=n>=4||0===n?tv(t):tv.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ey(){return"+0000"}function Ay(){return"%"}function Ly(t){return+t}function Cy(t){return Math.floor(+t/1e3)}function Ry(t){return new Date(t)}function Py(t){return t instanceof Date?+t:+new Date(+t)}function Dy(t,e,n,i,r,a,o,s,l,c){var u=lg(),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),_=c("%Y");function b(t){return(l(t)<t?p:s(t)<t?f:o(t)<t?m:a(t)<t?g:i(t)<t?r(t)<t?v:y:n(t)<t?x:_)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,Py)):d().map(Ry)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?b:c(e)},u.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}(n,t)):u},u.copy=function(){return og(u,Dy(t,e,n,i,r,a,o,s,l,c))},u}!function(t){hv=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=xv(r),u=_v(r),h=xv(a),d=_v(a),p=xv(o),f=_v(o),m=xv(s),g=_v(s),v=xv(l),y=_v(l),x={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Hv,e:Hv,f:$v,g:iy,G:ay,H:Vv,I:Gv,j:Wv,L:jv,m:qv,M:Xv,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ly,s:Cy,S:Yv,u:Jv,U:Zv,V:Qv,w:ty,W:ey,x:null,X:null,y:ny,Y:ry,Z:oy,"%":Ay},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:sy,e:sy,f:dy,g:My,G:Ty,H:ly,I:cy,j:uy,L:hy,m:py,M:fy,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ly,s:Cy,S:my,u:gy,U:vy,V:xy,w:_y,W:by,x:null,X:null,y:wy,Y:Sy,Z:Ey,"%":Ay},b={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return S(t,e,n,i)},d:Pv,e:Pv,f:zv,g:Av,G:Ev,H:Iv,I:Iv,j:Dv,L:Ov,m:Rv,M:Nv,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:Cv,Q:Uv,s:Bv,S:kv,u:wv,U:Mv,V:Sv,w:bv,W:Tv,x:function(t,e,i){return S(t,n,e,i)},X:function(t,e,n){return S(t,i,e,n)},y:Av,Y:Ev,Z:Lv,"%":Fv};function w(t,e){return function(n){var i,r,a,o=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=pv[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function M(t,e){return function(n){var i,r,a=uv(1900,void 0,1);if(S(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=cv(uv(a.y,0,1))).getUTCDay(),i=r>4||0===r?Qg.ceil(i):Qg(i),i=Jg.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=lv(uv(a.y,0,1))).getDay(),i=r>4||0===r?Ug.ceil(i):Ug(i),i=Og.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?cv(uv(a.y,0,1)).getUTCDay():lv(uv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,cv(a)):lv(a)}}function S(t,e,n,i){for(var r,a,o=0,s=e.length,l=n.length;o<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=b[r in pv?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),_.x=w(n,_),_.X=w(i,_),_.c=w(e,_),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}(t),dv=hv.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Iy=t=>()=>t;function Ny(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function ky(t,e,n){this.k=t,this.x=e,this.y=n}ky.prototype={constructor:ky,scale:function(t){return 1===t?this:new ky(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ky(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oy=new ky(1,0,0);function zy(t){t.stopImmediatePropagation()}function Fy(t){t.preventDefault(),t.stopImmediatePropagation()}function Uy(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function By(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Hy(){return this.__zoom||Oy}function Vy(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Gy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wy(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}nt();const jy=nt()?320:600,$y=128,qy=8,Xy=64,Yy=8,Jy="#eee",Zy="#222",Ky="Roboto-Mono";function Qy(t){return t.includes("facebook")?"facebook":t.includes("t.me")?"telegram":t.includes("twitter")?"twitter":t.includes("youtube")?"youtube":null}function tx(t){const e=Qy(t.url);let n={name:"",count:0};return"twitter"===e?(n.name="shares",n.count=t.engagement.shares):"facebook"===e?(n.name="reactions",n.count=t.engagement.reactions):["youtube","telegram"].includes(e)&&(n.name="views",n.count=t.engagement.views),n}function ex(t,e,n){const[i,r]=function(t,e=30,n="published_at"){const i=t.map((t=>new Date(t[n])));return[Math.min(...i)-24*e*60*60*1e3,Math.max(...i)+24*e*60*60*1e3]}(t,2),a=function(){return Qm.apply(Dy(ov,sv,Wg,Vg,Fg,Og,Ng,Dg,Rg,dv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().rangeRound([0,n-1]).domain([i,r]),o=[...new Set(t.map((t=>t.source_name)))],s=[...new Set(e.map((t=>t.name)))].filter((t=>o.includes(t)));let l=new Set;e.map((t=>Object.keys(t.endpoint))).forEach((t=>t.forEach((t=>l.add(t))))),l=[...l];const c={},u={};s.forEach(((t,e)=>{c[t]=e,u[e]=t}));const h=[...Array(s.length)].map((t=>Array(n).fill([])));t.forEach((t=>{const e=t.source_name,n=new Date(t.published_at),i=c[e];if(void 0===i)return;const r=a(n);h[i][r]=h[i][r].concat([t])}));let d={};l.forEach((e=>{t.filter((t=>Qy(t.url)===e)).forEach((t=>{const n=tx(t),i=d[e];(void 0===i||+n.count>i)&&(d[e]=+n.count)}))})),h.forEach(((t,e)=>{Math.max(...t.map((t=>t.length)))}));let p={};return l.forEach((t=>{p[t]=gg().domain([0,d[t]])})),{matrix:h,source_mapping:c,time_scale:a,color_scales:p}}function nx(t){const e=t.toLowerCase().split(" ");for(let t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].substring(1);return e.join(" ")}function ix(t,e,n,i,r,a,o){Object.keys(i).forEach((t=>{i[t]=i[t].range([Jy,"#444","#222"])}));const s=1*t[0].length,l=1*Object.keys(e).length,c=1*jy/s,u=800/l,h=Math.floor(Math.min(c,u))-2,d=(h+2)*s,p=(h+2)*l,f=h,{matrix_df:m,sources_df:g}=function(t,e,n,i,r){const a=[],o={};Object.keys(e).forEach((t=>{const n=+e[t];o[n]=t;const s=n*(i+2);a.push({row_id:n,y:s+r-2,text:nx(t)})}));const s=[];return t.forEach(((t,e)=>{t.forEach(((t,r)=>{const a=o[e];let l=Jy,c=0;t.length>0&&t.forEach((t=>{const e=tx(t).count;e>c&&(c=e,l=n[Qy(t.url)](e))})),s.push({row_id:e,source_name:a,x:r*(i+2),y:e*(i+2),width:i,height:i,fill:l,value:t.length,data:t})}))})),{matrix_df:s,sources_df:a}}(t,e,i,h,f),v=r.append("svg").attr("width",jy+128+Yy+qy).attr("height",800+$y+Xy),y=v.append("g").attr("transform","translate("+Yy+","+$y+")"),x=v.append("g").attr("transform","translate("+Yy+","+$y+")"),_=v.append("g").attr("transform","translate("+(Yy+d+8)+","+$y+")"),b=v.append("g").attr("transform","translate("+Yy+","+($y+p)+")");y.selectAll("rect").data(m).enter().append("rect").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("fill",(t=>t.fill)).attr("stroke",(t=>t.fill)).attr("stroke-width","0").attr("cursor",(t=>t.value>0?"pointer":"default")).on("mouseover",(function(t,e){0!=+e.value&&(a.style("display","inline"),a.html((()=>function(t){return`\n        <h2>${t.source_name}</h2>\n        <p><b>${t.data.length} ${t.data.length>1?"posts":"post"}</b></p>\n        ${t.data.map((t=>{const e=Qy(t.url),n=tx(t);return`<p>${t.published_at}: ${e}, ${n.name}: ${(+n.count).toLocaleString()}</p>`})).join("")}\n    `}(e))),Lp(this).attr("stroke-width",3))})).on("mousemove",(t=>{a.style("left",`${t.pageX+16}px`).style("top",`${t.pageY+16}px`)})).on("mouseout",(function(){a.style("display","none"),Lp(this).attr("stroke-width",0)})).on("click",((t,e)=>{if(nt())return;const n=e.data.map((t=>t.url));0!==n.length&&Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((t=>{if(t)for(let t=0;t<n.length;t++)window.open(n[t],"_blank")}))})),_.selectAll("text").data(g).enter().append("text").attr("font-size",`${h}px`).attr("font-family",Ky).style("fill",Zy).attr("x","0px").attr("y",(t=>`${t.y}px`)).text((t=>t.text));const w=function(t){let e=0;return t.selectAll("text").each((function(t){const n=this.getBoundingClientRect().width;n>e&&(e=n)})),e}(_),M=d+8+w;v.attr("width",`${M+Yy+qy}px`),v.attr("height",`${p+Xy+$y}px`),v.append("g").attr("transform","translate("+(Yy+M/2)+",8)");const S=n.copy();if(S.range([0,d-2]),function(t,e,n){const i=dv("%y/%m"),r=nt()?sd(e).tickFormat(i).ticks(5):sd(e).tickFormat(i);t.attr("class","axis").call(r).style("font-size",n)}(b,S,h),Array.isArray(o)&&o.length>0){const t=o.filter((t=>{const e=S(new Date(t.date));return e>0&&e<d-2}));x.selectAll("rect").data(t).enter().append("rect").attr("x",(t=>`${S(new Date(t.date))}px`)).attr("y","0px").attr("width","1px").attr("height",`${p}px`).attr("fill",Zy).attr("opacity",0),x.selectAll("text").data(t).enter().append("text").attr("font-size",`${h}px`).attr("letter-spacing","0.3").attr("fill",Zy).attr("font-family",Ky).attr("x","0px").attr("y","0px").attr("transform",((t,e)=>{const n=2===e?-2:-6;return`translate(${S(new Date(t.date))-2}, ${n}), rotate(-20)`})).text((t=>t.title)).attr("opacity",0)}return{svg:x}}function rx(e){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",e[0]),x(i,"class","svelte-1thrdwa"),x(a,"id",e[1]),x(a,"class","tooltip svelte-1thrdwa"),x(n,"class","container svelte-1thrdwa")},m(t,e){h(t,n,e),u(n,i),u(n,r),u(n,a)},p:t,i:t,o:t,d(t){t&&d(n)}}}function ax(t,e,n){let{lang:i}=e,{data:r}=e,{sources:a}=e,{events:o}=e;const s=Math.round(1e3*Math.random()),l=`heatmap-${s}`,c=`heatmaptooltip-${s}`;return T((async()=>{if(!Array.isArray(r))return;const{matrix:t,source_mapping:e,time_scale:n,color_scales:i}=ex(r,a,60),s=document.querySelector("main"),u=Lp(`#${l}`),h=Lp(`#${c}`),d=window.screen.height,{svg:p}=ix(t,e,n,i,u,h,o);let f=!1;s.addEventListener("scroll",(()=>{const{top:t,bottom:e}=p.node().getBoundingClientRect();t>-(e-t)/2&&t<2*d/3?f||(f=!0,function(t){t.selectAll("rect").transition().duration(1e3).attr("opacity",1).delay(((t,e)=>100*e)),t.selectAll("text").transition().duration(1e3).attr("opacity",1).delay(((t,e)=>100*e))}(p)):(f=!1,function(t){t.selectAll("rect").attr("opacity",0),t.selectAll("text").attr("opacity",0)}(p))}))})),t.$$set=t=>{"lang"in t&&n(2,i=t.lang),"data"in t&&n(3,r=t.data),"sources"in t&&n(4,a=t.sources),"events"in t&&n(5,o=t.events)},[l,c,i,r,a,o]}class ox extends J{constructor(t){super(),Y(this,t,ax,rx,a,{lang:2,data:3,sources:4,events:5})}}const sx=32,lx=8,cx=24,ux=8,hx=nt()?320:540,dx=20;function px(e){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",e[0]),x(a,"id",e[1]),x(a,"class","tooltip"),x(n,"class","container svelte-16x6i8h")},m(t,e){h(t,n,e),u(n,i),u(n,r),u(n,a)},p:t,i:t,o:t,d(t){t&&d(n)}}}function fx(t,e,n){let{lang:i}=e,{data:r}=e,{title:a}=e,{max_interactions:o}=e;const s=`dotmatrixplot-${Math.round(1e4*Math.random())}`,l=`dotmatrixtooltip-${Math.round(1e4*Math.random())}`;return T((()=>{const t=Lp(`#${s}`),e=Lp(`#${l}`),n=document.querySelector("main"),i=window.screen.height,{svg:c}=function(t,e,n,i,r){const a=Math.floor(t.length*dx/hx)*dx+dx,o=e.append("svg").attr("width",hx+ux+lx).attr("height",a+sx+cx);t.sort(((t,e)=>+e.interactions.count-t.interactions.count));const s=hg().domain([0,Math.round(1e3*Math.ceil(i/1e3))]).range(["#ccc","#333"]),l=o.append("g").attr("transform","translate("+ux+","+sx+")");return o.append("g").attr("transform","translate("+ux+",0)").append("text").attr("x","0px").attr("y","20px").attr("text-anchor","start").attr("fill","#222").text(r),l.selectAll("rect").data(t).enter().append("rect").attr("x","0px").attr("y","0px").attr("width","17px").attr("height","17px").attr("fill",(t=>s(t.interactions.count))).attr("stroke-width","0px").attr("stroke",(t=>s(t.interactions.count))).attr("cursor","pointer").on("mouseover",(function(t,e){0!=+e.value&&(n.style("display","inline"),n.html((()=>function(t){return`\n    <h2>${t.source_name}</h2>\n    <p>Platform: ${t.source_type}</p>\n    <p>${t.interactions.name}: ${(+t.interactions.count).toLocaleString()}</p>\n    `}(e))),Lp(this).attr("stroke-width","4px"))})).on("mousemove",(t=>{n.style("left",`${t.pageX+16}px`).style("top",`${t.pageY+16}px`)})).on("mouseout",(function(){n.style("display","none"),Lp(this).attr("stroke-width","0px")})).on("click",((t,e)=>{nt()||window.open(e.url,"_blank")})),{svg:l}}(r,t,e,o,a);let u=!1;n.addEventListener("scroll",(()=>{const{top:t,bottom:e}=c.node().getBoundingClientRect();t>-(e-t)/2&&t<i?u||(u=!0,c.selectAll("rect").transition().duration(1e3).attr("x",((t,e)=>e*dx%hx+"px")).attr("y",((t,e)=>Math.floor(e*dx/hx)*dx+"px"))):(u=!1,function(t){t.selectAll("rect").attr("x","0px").attr("y","0px")}(c))}))})),t.$$set=t=>{"lang"in t&&n(2,i=t.lang),"data"in t&&n(3,r=t.data),"title"in t&&n(4,a=t.title),"max_interactions"in t&&n(5,o=t.max_interactions)},[s,l,i,r,a,o]}class mx extends J{constructor(t){super(),Y(this,t,fx,px,a,{lang:2,data:3,title:4,max_interactions:5})}}function gx(t){const e={};return t.forEach(((t,n)=>{e[n]=t.reduce(((t,e)=>t+e),0)})),function(t){let e=0;return Object.keys(t).forEach((n=>{t[n]>e&&(e=t[n])})),Object.keys(t).forEach((n=>{t[n]=t[n]/(1*e)})),t}(e)}class vx{constructor(t,e){this.nodes=t,this.vertices=e,this.lexicon=this.compute_ranked_lexicon(t),this._nodes=null,this._vertices=null,this._lexicon=null,this.keys=[...new Set(this.nodes.map((t=>t.key)))],this.compute_centrality(this.nodes,this.vertices)}deepcopy(){this._nodes=JSON.parse(JSON.stringify(this.nodes)),this._vertices=JSON.parse(JSON.stringify(this.vertices)),this._lexicon=JSON.parse(JSON.stringify(this.lexicon)),this.nodes=JSON.parse(JSON.stringify(this.nodes)),this.vertices=JSON.parse(JSON.stringify(this.vertices)),this.lexicon=JSON.parse(JSON.stringify(this.lexicon))}compute_normalized_adjacency_matrix(t){const e=[],n=this.nodes.length;for(let t=0;t<n;t++)e.push(new Array(n).fill(0));return t.forEach((t=>{const n=+t.node_1_id,i=+t.node_2_id,r=t.weight;e[n][i]+=r,e[i][n]+=r})),e}compute_centrality(t,e){const n=gx(this.compute_normalized_adjacency_matrix(e));t.forEach(((e,i)=>{t[i].centrality=n[+e.id]}))}compute_ranked_lexicon(t){let e=[].concat.apply([],t.map((t=>[].concat.apply([],t.posts.map((t=>t.lexicon_match))))));const n={};return e.forEach((t=>{n[t]=0})),e.forEach((t=>{n[t]+=1})),e=[...new Set(e)],e.sort(((t,e)=>n[e]-n[t])),e}}const yx=nt()?320:500,xx=nt()?320:500,_x=8,bx=8,wx=8,Mx=8,Sx=.7,Tx=.3,Ex=.7,Ax=.3;function Lx(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function Cx(t,e,n,i,r){return t-n<0||t+n>i||e-n<0||e+n>r}function Rx(){const t=Math.random()*Math.PI/2;let e=.1*Math.cos(t)*(180/Math.PI),n=.1*Math.sin(t)*(180/Math.PI);const i=Math.random();return i<.25?(e=-e,n=-n):i<.5?n=-n:i<.75&&(e=-e),[n,e]}function Px(t){return[t.map((t=>+t[0])).reduce(((t,e)=>t+e),0),t.map((t=>+t[1])).reduce(((t,e)=>t+e),0)]}function Dx(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}nt();class Ix{constructor(t){this.nodes=null,this.links=null,this.callback=t}load_data(t,e){this.nodes=t,this.links=e}get_link(t,e){for(let n=0;n<this.links.length;n++)if(this.links[n].node_1_id===t&&this.links[n].node_2_id===e||this.links[n].node_1_id===e&&this.links[n].node_2_id===t)return this.links[n];return null}get_link_weight(t){return null===t?0:t.weight}compute_force(t,e){const n=this.get_link(t.id,e.id),i=t.cx,r=t.cy,a=t.radius,o=e.cx,s=e.cy,l=e.radius,c=o-i,u=s-r,h=1*Lx(i,r,o,s),d=this.get_link_weight(n),p=null===n?.5*Math.sqrt(h):d*Math.sqrt(h),f=(a+l+16)/(1*h);return[c/h*(.03*p-12*f),u/h*(.03*p-12*f)]}async run(t,e=100){let n=0,i=1/0;for(;;){if(i<.1){console.log(`stopped optimizer due to displacement goal (step count : ${n})`);break}if(n>t){console.log("stopped optimizer due to step ceiling");break}n+=1,i=0;const r={};for(let t=0;t<this.nodes.length;t++){const e=this.nodes[t],n=[];for(let t=0;t<this.nodes.length;t++){const i=this.nodes[t];if(i.id===e.id)continue;const r=this.compute_force(e,i);null!==r&&n.push(r)}const i=Px(n),a=[1*i[0],1*i[1]];r[e.id]=a}this.nodes.forEach((t=>{const e=r[t.id];t.cx+=e[0],t.cy+=e[1],i+=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))})),n%e==0&&(this.callback(this.nodes),await Dx(0))}this.callback(this.nodes)}}class Nx{constructor(t,e,n,i){this.callback=null==i?()=>{}:i,this.graph=t,this.physics=new Ix((t=>{this.update_positions(t)})),this.canvas=e,this.tooltip=n,this.g_graph=null,this.g_words=null,this.max_circle_radius=100,this.font_size=null,this.init()}async init(){const t=this;this.canvas.selectAll("*").remove();const e=this.canvas.append("svg").attr("width",yx+Mx+bx).attr("height",xx+_x+wx).style("border","1px solid #ccc").style("background-color","white");this.font_size=(xx+_x+wx)/(this.graph.lexicon.length+1),this.font_size>12&&(this.font_size=12),this.g_graph=e.append("g"),this.g_words=e.append("g").attr("class","lexicon").attr("transform","translate(8, 4)");const n=function(){var t,e,n,i=Uy,r=By,a=Wy,o=Vy,s=Gy,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Of,d=cd("start","zoom","end"),p=500,f=0,m=10;function g(t){t.property("__zoom",Hy).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",T).filter(s).on("touchstart.zoom",E).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new ky(e,t.x,t.y)}function y(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new ky(t.k,i,r)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n,i){t.on("start.zoom",(function(){b(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,a=arguments,o=b(t,a).event(i),s=r.apply(t,a),l=null==n?x(s):"function"==typeof n?n.apply(t,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,d="function"==typeof e?e.apply(t,a):e,p=h(u.invert(l).concat(c/u.k),d.invert(l).concat(c/d.k));return function(t){if(1===t)t=d;else{var e=p(t),n=c/e[2];t=new ky(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}}))}function b(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function M(t,...e){if(i.apply(this,arguments)){var n=b(this,e).event(t),r=this.__zoom,s=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,o.apply(this,arguments)))),u=Cp(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(r.k===s)return;n.mouse=[u,r.invert(u)],am(this),n.start()}Fy(t),n.wheel=setTimeout(h,150),n.zoom("mouse",a(y(v(r,s),n.mouse[0],n.mouse[1]),n.extent,c))}function h(){n.wheel=null,n.end()}}function S(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,o=b(this,e,!0).event(t),s=Lp(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",p,!0),l=Cp(t,r),u=t.clientX,h=t.clientY;Dp(t.view),zy(t),o.mouse=[l,this.__zoom.invert(l)],am(this),o.start()}function d(t){if(Fy(t),!o.moved){var e=t.clientX-u,n=t.clientY-h;o.moved=e*e+n*n>f}o.event(t).zoom("mouse",a(y(o.that.__zoom,o.mouse[0]=Cp(t,r),o.mouse[1]),o.extent,c))}function p(t){s.on("mousemove.zoom mouseup.zoom",null),Ip(t.view,o.moved),Fy(t),o.event(t).end()}}function T(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,o=Cp(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(o),l=n.k*(t.shiftKey?.5:2),h=a(y(v(n,l),o,s),r.apply(this,e),c);Fy(t),u>0?Lp(this).transition().duration(u).call(_,h,o,t):Lp(this).call(g.transform,h,o,t)}}function E(n,...r){if(i.apply(this,arguments)){var a,o,s,l,c=n.touches,u=c.length,h=b(this,r,n.changedTouches.length===u).event(n);for(zy(n),o=0;o<u;++o)l=[l=Cp(s=c[o],this),this.__zoom.invert(l),s.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,a=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(h.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),p)),am(this),h.start())}}function A(t,...e){if(this.__zooming){var n,i,r,o,s=b(this,e).event(t),l=t.changedTouches,u=l.length;for(Fy(t),n=0;n<u;++n)r=Cp(i=l[n],this),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var h=s.touch0[0],d=s.touch0[1],p=s.touch1[0],f=s.touch1[1],m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m,g=(g=f[0]-d[0])*g+(g=f[1]-d[1])*g;i=v(i,Math.sqrt(m/g)),r=[(h[0]+p[0])/2,(h[1]+p[1])/2],o=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(y(i,r,o),s.extent,c))}}function L(t,...i){if(this.__zooming){var r,a,o=b(this,i).event(t),s=t.changedTouches,l=s.length;for(zy(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),r=0;r<l;++r)a=s[r],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=Cp(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<m)){var c=Lp(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",Hy),t!==r?_(t,e,n,i):r.interrupt().each((function(){b(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n,i){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,i)},g.scaleTo=function(t,e,n,i){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,o=null==n?x(t):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return a(y(v(i,l),o,s),t,c)}),n,i)},g.translateBy=function(t,e,n,i){g.transform(t,(function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,i)},g.translateTo=function(t,e,n,i,o){g.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,s=null==i?x(t):"function"==typeof i?i.apply(this,arguments):i;return a(Oy.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),i,o)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Lp(this.that).datum();d.call(t,this.that,new Ny(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:d}),e)}},g.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:Iy(+t),g):o},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:Iy(!!t),g):i},g.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Iy(!!t),g):s},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:Iy([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(a=t,g):a},g.duration=function(t){return arguments.length?(u=+t,g):u},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=d.on.apply(d,arguments);return t===d?g:t},g.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,g):Math.sqrt(f)},g.tapDistance=function(t){return arguments.length?(m=+t,g):m},g}().scaleExtent([.05,1]).on("zoom",(function(e){t.g_graph.attr("transform",`translate(${e.transform.x},${e.transform.y}), scale(${e.transform.k})`)}));e.call(n).call(n.transform,Oy.translate(yx/2,xx/2).scale(.1));let i=!0;for(;i||this.are_there_nodes_outside_canvas();)i=!1,this.max_circle_radius-=3,this.map_nodes();const r=Math.max(...this.graph.vertices.map((t=>t.weight)));this.scale_links_width=hg().domain([1,r]).range([8,30]),this.init_draw(),await this.run_physics(!0),this.graph.deepcopy(),this.callback()}async run_physics(t=!1){t?(this.physics.load_data(this.graph.nodes,this.graph.vertices),await this.physics.run(6e3,10)):(this.physics.load_data(this.graph._nodes,this.graph._vertices),await this.physics.run(1e3,20))}are_there_nodes_outside_canvas(){for(let t=0;t<this.graph.nodes.length;t++){if(Cx(this.graph.nodes[t].cx,this.graph.nodes[t].cy,this.graph.nodes[t].radius,yx,xx))return!0}return!1}does_node_overlap_with_others(t,e,n,i){for(let s=0;s<this.graph.nodes.length;s++){const l=this.graph.nodes[s].id,c=this.graph.nodes[s].cx,u=this.graph.nodes[s].cy,h=this.graph.nodes[s].radius;if(l!==t&&(r=i,a=h,o=16,Lx(e,n,c,u)<r+a+o))return!0}var r,a,o;return!1}map_nodes(){const t=function(){return gg.apply(null,arguments).exponent(.5)}().domain([0,1]).range([0,this.max_circle_radius]);this.graph.nodes.forEach((e=>{e.radius=t(e.weight),e.cx=yx/2,e.cy=xx/2})),this.graph.nodes.forEach(((t,e)=>{if(0===e)return;const n=t.id,i=t.radius;let r=1/0,a=1/0,o=1/0;for(let t=0;t<10;t++){let t=yx/2,e=xx/2;const[s,l]=Rx();for(;this.does_node_overlap_with_others(n,t,e,i);)t+=s,e+=l;const c=Lx(t,e,yx/2,xx/2);c<o&&(o=c,r=t,a=e)}this.graph.nodes[e].cx=r,this.graph.nodes[e].cy=a}))}compute_link_coordinates(t,e){const n=t.cx,i=t.cy,r=t.radius,a=e.cx,o=e.cy,s=e.radius,l=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-o,2)),c=r/(1*l),u=(l-s)/(1*l);return{x1_t:(1-c)*n+c*a,y1_t:(1-c)*i+c*o,x2_t:(1-u)*n+u*a,y2_t:(1-u)*i+u*o}}get_nodes_linked_to_this_node(t){let e=[];return this.graph.vertices.filter((e=>e.node_1_id===t||e.node_2_id===t)).forEach((n=>{e.push(n.node_1_id===t?n.node_2_id:n.node_1_id)})),e=[...new Set(e)],e}get_max_text_width(t){let e=0;return t.selectAll("text").each((function(t){const n=this.getBoundingClientRect().width;n>e&&(e=n)})),e}init_draw(){const t=this.graph.vertices,e=this.graph.nodes,n=this.graph.lexicon,i={};e.forEach((t=>{i[t.id]={cx:t.cx,cy:t.cy,radius:t.radius}})),this.g_graph.selectAll("line").data(t).enter().append("line").attr("x1",(t=>{const{x1_t:e}=this.compute_link_coordinates(i[t.node_1_id],i[t.node_2_id]);return e})).attr("y1",(t=>{const{y1_t:e}=this.compute_link_coordinates(i[t.node_1_id],i[t.node_2_id]);return e})).attr("x2",(t=>{const{x2_t:e}=this.compute_link_coordinates(i[t.node_1_id],i[t.node_2_id]);return e})).attr("y2",(t=>{const{y2_t:e}=this.compute_link_coordinates(i[t.node_1_id],i[t.node_2_id]);return e})).attr("opacity",Tx).attr("stroke","#3d5c94").attr("stroke-width",(t=>`${this.scale_links_width(t.weight)}px`)).on("mouseover",((t,e)=>{const n=e.node_1_id,i=e.node_2_id,r=[n,i];this.tooltip.style("display","inline"),this.tooltip.html((()=>e.tooltip)),this.g_graph.selectAll("circle").attr("opacity",(t=>r.includes(t.id)?Sx:.3)),this.g_graph.selectAll("line").attr("opacity",(t=>n===t.node_1_id&&i===t.node_2_id?Tx:0)),this.g_words.selectAll("text").attr("opacity",(t=>e.lexicon_match.includes(t)?Ex:Ax))})).on("mousemove",(t=>{this.tooltip.style("left",`${t.pageX+16}px`).style("top",`${t.pageY+16}px`)})).on("mouseout",(()=>{this.tooltip.style("display","none"),this.g_graph.selectAll("circle").attr("opacity",Sx),this.g_graph.selectAll("line").attr("opacity",Tx),this.g_words.selectAll("text").attr("opacity",Ex)})).on("click",((t,e)=>{if(nt())return;const{urls:n}=e;Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((t=>{if(t)for(let t=0;t<n.length;t++)window.open(n[t],"_blank")}))})),this.g_graph.selectAll("circle").data(e).enter().append("circle").attr("opacity",Sx).attr("r",(t=>t.radius)).attr("cx",(t=>t.cx)).attr("cy",(t=>t.cy)).attr("fill","#3d5b94").on("mouseover",((t,e)=>{const n=e.id;this.tooltip.style("display","inline"),this.tooltip.html((()=>e.tooltip));const i=[].concat.apply([],e.posts.map((t=>t.lexicon_match))),r=this.get_nodes_linked_to_this_node(n);this.g_graph.selectAll("circle").attr("opacity",(t=>n===t.id||r.includes(t.id)?Sx:.3)),this.g_graph.selectAll("line").attr("opacity",(t=>[t.node_1_id,t.node_2_id].includes(n)?Tx:0)),this.g_words.selectAll("text").attr("opacity",(t=>i.includes(t)?Ex:Ax))})).on("mousemove",(t=>{this.tooltip.style("left",`${t.pageX+16}px`).style("top",`${t.pageY+16}px`)})).on("mouseout",(()=>{this.tooltip.style("display","none"),this.g_graph.selectAll("circle").attr("opacity",Sx),this.g_graph.selectAll("line").attr("opacity",Tx),this.g_words.selectAll("text").attr("opacity",Ex)})).on("click",((t,e)=>{if(nt())return;const n=e.posts.map((t=>t.url));Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((t=>{if(t)for(let t=0;t<n.length;t++)window.open(n[t],"_blank")}))})),this.g_graph.selectAll("text").data(e).enter().append("text").attr("font-size","96px").style("text-transform","capitalize").attr("text-anchor","middle").attr("x",(t=>t.cx)).attr("y",(t=>t.cy-t.radius-32)).text((t=>t.key)),this.g_words.selectAll("text").data(n).enter().append("text").attr("cursor","pointer").attr("opacity",Ex).attr("font-size",`${this.font_size}px`).attr("y",((t,e)=>(e+1)*this.font_size+"px")).text((t=>t)).on("mouseover",((t,e)=>{this.g_words.selectAll("text").attr("opacity",(t=>e===t?Ex:Ax)),this.g_graph.selectAll("circle").attr("opacity",(t=>[].concat.apply([],t.posts.map((t=>t.lexicon_match))).includes(e)?Sx:.3)),this.g_graph.selectAll("text").attr("opacity",(t=>[].concat.apply([],t.posts.map((t=>t.lexicon_match))).includes(e)?Ex:Ax)),this.g_graph.selectAll("line").attr("opacity",(t=>t.lexicon_match.includes(e)?Tx:0))})).on("mouseout",(()=>{this.g_graph.selectAll("circle").attr("opacity",Sx),this.g_graph.selectAll("text").attr("opacity",Ex),this.g_graph.selectAll("line").attr("opacity",Tx),this.g_words.selectAll("text").attr("opacity",Ex)}))}update_positions(t){const e={};this.graph.nodes.forEach((t=>{e[t.id]={cx:t.cx,cy:t.cy,radius:t.radius}})),t.forEach((t=>{e[t.id]={cx:t.cx,cy:t.cy,radius:t.radius}})),this.g_graph.selectAll("line").attr("x1",(t=>{const{x1_t:n}=this.compute_link_coordinates(e[t.node_1_id],e[t.node_2_id]);return n})).attr("y1",(t=>{const{y1_t:n}=this.compute_link_coordinates(e[t.node_1_id],e[t.node_2_id]);return n})).attr("x2",(t=>{const{x2_t:n}=this.compute_link_coordinates(e[t.node_1_id],e[t.node_2_id]);return n})).attr("y2",(t=>{const{y2_t:n}=this.compute_link_coordinates(e[t.node_1_id],e[t.node_2_id]);return n})),this.g_graph.selectAll("circle").attr("r",(t=>e[t.id].radius)).attr("cx",(t=>e[t.id].cx)).attr("cy",(t=>e[t.id].cy)),this.g_graph.selectAll("text").attr("x",(t=>e[t.id].cx)).attr("y",(t=>e[t.id].cy-e[t.id].radius-32))}}class kx{constructor(t,e,n,i,r){this.canvas=n,this.tooltip=i,this.callback=r,this.dataLoader=new vx(t,e),this.render=new Nx(this.dataLoader,this.canvas,this.tooltip,this.callback)}update(t,e){this.dataLoader=new vx(t,e),this.render=new Nx(this.dataLoader,this.canvas,this.tooltip,this.callback)}async run_physics(){await this.render.run_physics()}}function Ox(e){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",e[0]),x(i,"class","svelte-l0vhww"),x(a,"id",e[1]),x(a,"class","tooltip svelte-l0vhww"),x(n,"class","container svelte-l0vhww")},m(t,e){h(t,n,e),u(n,i),u(n,r),u(n,a)},p:t,i:t,o:t,d(t){t&&d(n)}}}function zx(t,e,n){let{lang:i}=e,{nodes:r}=e,{vertices:a}=e;const o=Math.round(1e3*Math.random()),s=`network-${o}`,l=`networktooltip-${o}`;let c,u,h=null;return T((async()=>{n(6,c=Lp(`#${s}`)),n(7,u=Lp(`#${l}`))})),t.$$set=t=>{"lang"in t&&n(2,i=t.lang),"nodes"in t&&n(3,r=t.nodes),"vertices"in t&&n(4,a=t.vertices)},t.$$.update=()=>{248&t.$$.dirty&&a&&(null===h?n(5,h=new kx(r,a,c,u)):h.update(r,a))},[s,l,i,r,a,h,c,u]}class Fx extends J{constructor(t){super(),Y(this,t,zx,Ox,a,{lang:2,nodes:3,vertices:4})}}function Ux(t){return Math.max(...Object.keys(t.endpoint).map((e=>t.endpoint[e].followers)))}function Bx(t){return t.map((t=>{const{url:e,source_name:n,categories:i}=t,r=function(t){return t.includes("facebook")?"facebook":t.includes("t.me")?"telegram":t.includes("twitter")?"twitter":t.includes("youtube")?"youtube":null}(e);return{interactions:tx(t),url:e,source_name:n,source_type:r,categories:i}}))}function Hx(t,e,n,i){const r=function(t,e){const n=[...new Set(e.map((t=>t.name)))],i=Ux(e.sort(((t,e)=>Ux(e)-Ux(t)))[0]),r=n.map((n=>{const r=t.filter((t=>t.source_name===n)),a=Ux(e.filter((t=>t.name===n))[0]),o=r.map((t=>({categories:t.categories,published_at:t.published_at,url:t.url,lexicon_match:t.lexicon_match})));return o.sort(((t,e)=>new Date(t.published_at)-new Date(e.published_at))),{key:n,weight:a/(1*i),posts:o}}));r.sort(((t,e)=>e.weight-t.weight));const a=r.filter((t=>t.posts.length>0));return a.forEach(((t,e)=>{t.id=e})),a}(t,n),a=function(t,e){const n=[];for(let e=0;e<t.length;e++)for(let i=e+1;i<t.length;i++)n.push({node_id_1:e,node_id_2:i});let i=[];return n.forEach((n=>{const r=n.node_id_1,a=n.node_id_2,o=t.filter((t=>t.id===r))[0],s=t.filter((t=>t.id===a))[0],l=[...new Set([].concat.apply([],o.posts.map((t=>t.categories))))],c=[...new Set([].concat.apply([],s.posts.map((t=>t.categories))))],u=l.filter((t=>c.includes(t)));if(0===u.length)return;let h=!1;for(let t=0;t<o.posts.length&&!h;t++)for(let n=0;n<s.posts.length&&!h;n++){const i=new Date(o.posts[t].published_at),r=new Date(s.posts[n].published_at);Math.abs(i-r)/864e5<e&&(h=!0)}h&&i.push({node_1_id:r,node_2_id:a,intersection:u,weight:u.length})})),i}(r,i);let o={};r.forEach((t=>{o[t.id]=t}));let s={};return e.forEach((t=>{s[t.key]=t})),r.forEach((t=>{t.tooltip=`\n            <h2>${t.key}</h2>\n            ${t.posts.map((t=>`<p>${t.published_at}</p>`)).join("")}\n        `})),a.forEach((t=>{const e=o[t.node_1_id],n=o[t.node_2_id],r=e.posts.map(((t,n)=>(t.id=`1-${n}`,t.source=e.key,t))),a=n.posts.map(((t,e)=>(t.id=`2-${e}`,t.source=n.key,t)));let s=[],l=[];for(let t=0;t<r.length;t++)for(let e=0;e<a.length;e++){const n=r[t],o=a[e],c=new Date(n.published_at),u=new Date(o.published_at);Math.abs(c-u)/864e5<i&&(l.includes(n.id)||(l.push(n.id),s.push(n)),l.includes(o.id)||(l.push(o.id),s.push(o)))}s.sort(((t,e)=>new Date(t.published_at)-new Date(e.published_at))),t.urls=s.map((t=>t.url));const c=new Set([].concat.apply([],e.posts.map((t=>t.lexicon_match)))),u=new Set([].concat.apply([],n.posts.map((t=>t.lexicon_match))));t.lexicon_match=[...new Set([...c].filter((t=>u.has(t))))],t.tooltip=`\n            <h2>${e.key} - ${n.key}</h2>\n            ${s.map((t=>`<p>${t.published_at}: ${t.source}</p>`)).join("")}\n        `})),[r,a]}function Vx(t,e,n){const i=t.slice();return i[38]=e[n],i[40]=n,i}function Gx(t){let e,n;return e=new mx({props:{data:t[16].filter((function(...e){return t[29](t[38],...e)})),title:`${sh(t[40]+1)}. ${t[38].name_count}`,max_interactions:Math.max(...t[16].map($x))}}),{c(){j(e.$$.fragment)},m(t,i){$(e,t,i),n=!0},p(e,n){t=e},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Wx(t){let e,n,i,r,a,o,s,l,c,v,y,b,w,S,T,E,L,C,R,P,D,N,k,O,z,F,U,X,Y,J,Z,K,Q,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,ht,dt,pt,ft,mt,gt,vt,xt,_t,bt,wt,Mt,St,Tt,Et,At,Lt,Ct,Rt,Pt,Dt,It,Nt,kt,Ot,zt,Ft,Ut,Bt,Ht,Vt,Gt,Wt,jt,$t,qt,Xt,Yt,Jt,Zt,Kt,Qt,te,ee,ne=t[4].title[t[0]]+"",ie=t[4].partners[t[0]]+"",re=yt.subtitle_1[t[0]]+"",ae=t[20](t[13])[t[0]]+"",oe=yt.subtitle_2[t[0]]+"",se=t[21](t[5].length.toLocaleString())[t[0]]+"",le=yt.searchbar_1[t[0]]+"",ce=yt.searchbar_2[t[0]]+"",ue=yt.subtitle_3[t[0]]+"",he=yt.subsubtitle_1[t[0]]+"",de=t[22](t[6].length)[t[0]]+"",pe=yt.subsubtitle_2[t[0]]+"",fe=t[26](t[8].length)[t[0]]+"",me=yt.subsubtitle_3[t[0]]+"",ge=yt.engagement_1[t[0]]+"",ve=yt.subtitle_4[t[0]]+"",ye=t[27](t[15].length,t[14].length)[t[0]]+"",xe=yt.subsubtitle_4[t[0]]+"",_e=t[24](t[14].length.toLocaleString())[t[0]]+"",be=yt.subsubtitle_5[t[0]]+"",we=t[23](t[9].length)[t[0]]+"",Me=yt.subsubtitle_6[t[0]]+"",Se=yt.engagement_2[t[0]]+"",Te=yt.subsubtitle_7[t[0]]+"",Ee=yt.coordination[t[0]]+"",Ae=t[25][t[0]]+"";b=new Sh({props:{data:t[12]}}),k=new Rh({props:{placeholders:t[1].examples.queries,documents:t[5],word_mapping:t[7]}}),Q=new Sh({props:{data:t[10]}}),ot=new Sh({props:{data:t[11]}}),pt=new Sh({props:{data:t[19]}}),bt=new ox({props:{data:t[15],sources:t[14],events:t[8]}}),Lt=new kh({props:{data:t[14]}}),kt=new Bh({props:{elements:t[9].map(jx)}});let Le=t[9],Ce=[];for(let e=0;e<Le.length;e+=1)Ce[e]=Gx(Vx(t,Le,e));const Re=t=>G(Ce[t],1,1,(()=>{Ce[t]=null}));function Pe(e){t[32](e)}function De(e){t[33](e)}Jt=new Gh({props:{previous_callback:t[30],next_callback:t[31],options:t[18]}});let Ie={};return void 0!==t[2]&&(Ie.nodes=t[2]),void 0!==t[3]&&(Ie.vertices=t[3]),Kt=new Fx({props:Ie}),A.push((()=>W(Kt,"nodes",Pe))),A.push((()=>W(Kt,"vertices",De))),{c(){e=f("section"),n=f("h1"),i=m(ne),r=g(),a=new M,o=g(),s=f("h1"),l=m(re),c=g(),v=new M,y=g(),j(b.$$.fragment),w=g(),S=f("h1"),T=m(oe),E=g(),L=new M,C=g(),R=new M,P=g(),D=new M,N=g(),j(k.$$.fragment),O=g(),z=f("h1"),F=m(ue),U=g(),X=f("h1"),Y=m(he),J=g(),Z=new M,K=g(),j(Q.$$.fragment),tt=g(),et=f("h1"),nt=m(pe),it=g(),rt=new M,at=g(),j(ot.$$.fragment),st=g(),lt=f("h1"),ct=m(me),ut=g(),ht=new M,dt=g(),j(pt.$$.fragment),ft=g(),mt=f("h1"),gt=m(ve),vt=g(),xt=new M,_t=g(),j(bt.$$.fragment),wt=g(),Mt=f("h1"),St=m(xe),Tt=g(),Et=new M,At=g(),j(Lt.$$.fragment),Ct=g(),Rt=f("h1"),Pt=m(be),Dt=g(),It=new M,Nt=g(),j(kt.$$.fragment),Ot=g(),zt=f("h1"),Ft=m(Me),Ut=g(),Bt=new M,Ht=g();for(let t=0;t<Ce.length;t+=1)Ce[t].c();Vt=g(),Gt=f("h1"),Wt=m(Te),jt=g(),$t=new M,qt=g(),Xt=new M,Yt=g(),j(Jt.$$.fragment),Zt=g(),j(Kt.$$.fragment),x(n,"class","title"),a.a=o,x(s,"class","subtitle"),v.a=y,x(S,"class","subtitle"),L.a=C,R.a=P,D.a=N,x(z,"class","subtitle"),x(X,"class","subsubtitle"),Z.a=K,x(et,"class","subsubtitle"),rt.a=at,x(lt,"class","subsubtitle"),ht.a=dt,x(mt,"class","subtitle"),xt.a=_t,x(Mt,"class","subsubtitle"),Et.a=At,x(Rt,"class","subsubtitle"),It.a=Nt,x(zt,"class","subsubtitle"),Bt.a=Ht,x(Gt,"class","subsubtitle"),$t.a=qt,Xt.a=Yt},m(t,d){h(t,e,d),u(e,n),u(n,i),u(e,r),a.m(ie,e),u(e,o),u(e,s),u(s,l),u(e,c),v.m(ae,e),u(e,y),$(b,e,null),u(e,w),u(e,S),u(S,T),u(e,E),L.m(se,e),u(e,C),R.m(le,e),u(e,P),D.m(ce,e),u(e,N),$(k,e,null),u(e,O),u(e,z),u(z,F),u(e,U),u(e,X),u(X,Y),u(e,J),Z.m(de,e),u(e,K),$(Q,e,null),u(e,tt),u(e,et),u(et,nt),u(e,it),rt.m(fe,e),u(e,at),$(ot,e,null),u(e,st),u(e,lt),u(lt,ct),u(e,ut),ht.m(ge,e),u(e,dt),$(pt,e,null),u(e,ft),u(e,mt),u(mt,gt),u(e,vt),xt.m(ye,e),u(e,_t),$(bt,e,null),u(e,wt),u(e,Mt),u(Mt,St),u(e,Tt),Et.m(_e,e),u(e,At),$(Lt,e,null),u(e,Ct),u(e,Rt),u(Rt,Pt),u(e,Dt),It.m(we,e),u(e,Nt),$(kt,e,null),u(e,Ot),u(e,zt),u(zt,Ft),u(e,Ut),Bt.m(Se,e),u(e,Ht);for(let t=0;t<Ce.length;t+=1)Ce[t].m(e,null);u(e,Vt),u(e,Gt),u(Gt,Wt),u(e,jt),$t.m(Ee,e),u(e,qt),Xt.m(Ae,e),u(e,Yt),$(Jt,e,null),u(e,Zt),$(Kt,e,null),ee=!0},p(t,n){(!ee||1&n[0])&&ne!==(ne=t[4].title[t[0]]+"")&&_(i,ne),(!ee||1&n[0])&&ie!==(ie=t[4].partners[t[0]]+"")&&a.p(ie),(!ee||1&n[0])&&re!==(re=yt.subtitle_1[t[0]]+"")&&_(l,re),(!ee||1&n[0])&&ae!==(ae=t[20](t[13])[t[0]]+"")&&v.p(ae),(!ee||1&n[0])&&oe!==(oe=yt.subtitle_2[t[0]]+"")&&_(T,oe),(!ee||1&n[0])&&se!==(se=t[21](t[5].length.toLocaleString())[t[0]]+"")&&L.p(se),(!ee||1&n[0])&&le!==(le=yt.searchbar_1[t[0]]+"")&&R.p(le),(!ee||1&n[0])&&ce!==(ce=yt.searchbar_2[t[0]]+"")&&D.p(ce);const r={};if(2&n[0]&&(r.placeholders=t[1].examples.queries),k.$set(r),(!ee||1&n[0])&&ue!==(ue=yt.subtitle_3[t[0]]+"")&&_(F,ue),(!ee||1&n[0])&&he!==(he=yt.subsubtitle_1[t[0]]+"")&&_(Y,he),(!ee||1&n[0])&&de!==(de=t[22](t[6].length)[t[0]]+"")&&Z.p(de),(!ee||1&n[0])&&pe!==(pe=yt.subsubtitle_2[t[0]]+"")&&_(nt,pe),(!ee||1&n[0])&&fe!==(fe=t[26](t[8].length)[t[0]]+"")&&rt.p(fe),(!ee||1&n[0])&&me!==(me=yt.subsubtitle_3[t[0]]+"")&&_(ct,me),(!ee||1&n[0])&&ge!==(ge=yt.engagement_1[t[0]]+"")&&ht.p(ge),(!ee||1&n[0])&&ve!==(ve=yt.subtitle_4[t[0]]+"")&&_(gt,ve),(!ee||1&n[0])&&ye!==(ye=t[27](t[15].length,t[14].length)[t[0]]+"")&&xt.p(ye),(!ee||1&n[0])&&xe!==(xe=yt.subsubtitle_4[t[0]]+"")&&_(St,xe),(!ee||1&n[0])&&_e!==(_e=t[24](t[14].length.toLocaleString())[t[0]]+"")&&Et.p(_e),(!ee||1&n[0])&&be!==(be=yt.subsubtitle_5[t[0]]+"")&&_(Pt,be),(!ee||1&n[0])&&we!==(we=t[23](t[9].length)[t[0]]+"")&&It.p(we),(!ee||1&n[0])&&Me!==(Me=yt.subsubtitle_6[t[0]]+"")&&_(Ft,Me),(!ee||1&n[0])&&Se!==(Se=yt.engagement_2[t[0]]+"")&&Bt.p(Se),66048&n[0]){let i;for(Le=t[9],i=0;i<Le.length;i+=1){const r=Vx(t,Le,i);Ce[i]?(Ce[i].p(r,n),V(Ce[i],1)):(Ce[i]=Gx(r),Ce[i].c(),V(Ce[i],1),Ce[i].m(e,Vt))}for(B(),i=Le.length;i<Ce.length;i+=1)Re(i);H()}(!ee||1&n[0])&&Te!==(Te=yt.subsubtitle_7[t[0]]+"")&&_(Wt,Te),(!ee||1&n[0])&&Ee!==(Ee=yt.coordination[t[0]]+"")&&$t.p(Ee),(!ee||1&n[0])&&Ae!==(Ae=t[25][t[0]]+"")&&Xt.p(Ae);const o={};!Qt&&4&n[0]&&(Qt=!0,o.nodes=t[2],I((()=>Qt=!1))),!te&&8&n[0]&&(te=!0,o.vertices=t[3],I((()=>te=!1))),Kt.$set(o)},i(t){if(!ee){V(b.$$.fragment,t),V(k.$$.fragment,t),V(Q.$$.fragment,t),V(ot.$$.fragment,t),V(pt.$$.fragment,t),V(bt.$$.fragment,t),V(Lt.$$.fragment,t),V(kt.$$.fragment,t);for(let t=0;t<Le.length;t+=1)V(Ce[t]);V(Jt.$$.fragment,t),V(Kt.$$.fragment,t),ee=!0}},o(t){G(b.$$.fragment,t),G(k.$$.fragment,t),G(Q.$$.fragment,t),G(ot.$$.fragment,t),G(pt.$$.fragment,t),G(bt.$$.fragment,t),G(Lt.$$.fragment,t),G(kt.$$.fragment,t),Ce=Ce.filter(Boolean);for(let t=0;t<Ce.length;t+=1)G(Ce[t]);G(Jt.$$.fragment,t),G(Kt.$$.fragment,t),ee=!1},d(t){t&&d(e),q(b),q(k),q(Q),q(ot),q(pt),q(bt),q(Lt),q(kt),p(Ce,t),q(Jt),q(Kt)}}}const jx=t=>t.description,$x=t=>t.interactions.count;function qx(t,e,n){let{lang:i}=e,{dataset:r}=e,{params:a}=e;const o=yt.brazil,{sources:s,posts:l,submissions:c,lexicon:u,dictionary:h,events:d,categories:p,lexicon_table:f,events_table:m,political_network_table:g,nbr_of_accounts:v,min_date:y,max_date:x,belligerents:_,submissions_of_interest:b}=r,w=Bx(b);let M,S;function T(t){const e=c.filter((e=>e.categories.includes(t)));n(2,[M,S]=Hx(e,p,s,15),M,n(3,S))}const E=p.map((t=>({key:t.key,value:t.name_count})));return t.$$set=t=>{"lang"in t&&n(0,i=t.lang),"dataset"in t&&n(28,r=t.dataset),"params"in t&&n(1,a=t.params)},[i,a,M,S,o,l,u,h,d,p,f,m,g,v,_,b,w,T,E,[["Type","Minimum Value"],["Views","30000"],["Reactions","800"],["Comments","150"],["Shares","50"]],t=>({eng:`<p>The participants identified ${t} Telegram, Facebook, Twitter and Youtube accounts as being part of the political network.</p>`,por:`<p>Os participantes identificaram ${t} contas pertencentes à rede política nas plataformas Telegram, Facebook, Twitter e Youtube.</p>`,ara:`<p>حدّد المشاركون ${t} حساباً على تيليغرام، فايسبوك، تويتر، ويوتيوب كحسابات تشكّل جزءاً من شبكة سياسية.</p>`}),t=>({eng:`<p>Data collection returned a total of ${t} posts between ${y} and ${x}.</p>`,por:`<p>No total, foram coletadas ${t} postagens entre ${y} e ${x}.</p>`,ara:`<p>نتج عن جمع البيانات ${t} ${x}تدوينة بين كانون ${y} و .</p>`}),t=>({eng:`<p>Participants came up with a list of ${t} words prone to be used in disinformation. Only posts containing at least one of these keywords were kept.</p>`,por:`<p>Os participantes desenvolveram uma lista com ${t} palavras associadas a práticas de desinformação.</p>`,ara:`<p>اقترح المشاركون قائمةً من ${t} كلمة اعتبروا أنها ميالة لأن تُستخدم ضمن المعلومات المضللة. </p>`}),t=>({eng:`<p> We reviewed all the posts of interest and categorized them into ${t} narratives.</p>`,por:`<p>Todas as postagens de interesse foram revisadas e classificadas em ${t} narrativas.</p>`,ara:`<p>راجعنا كافة التدوينات ذات الاهتمام وصنّفناها ضمن ${t} سرديات. </p>`}),t=>({eng:`<p>Here is a short description of the ${t} state-affiliated accounts that published disinformation.</p>`,por:`<p>Abaixo, uma breve descrição de todas as ${t} contas associadas ao Estado que publicaram desinformação.</p>`,ara:`<p>في ما يلي وصف وجيز عن ${t} حساباً تابعاً للدولة نشر معلومات مضللة.</p>`}),()=>({eng:"<p>If there is a link between two belligerents it means they published a message containing the same keyword within a 15 days interval.</p>",por:"<p>Cada vínculo entre dois “beligerantes” é um sinal de que ambos publicaram uma mensagem contendo a mesma palavra-chave num intervalo de 15 dias.</p>",ara:"<p>إذا كان هناك خط يربط بين خصمين، فهذا يعني أنهما نشرا رسالةً تتضمّن الكلمة الرئيسية نفسها خلال فترة 15 يوماً. </p>"}),t=>({eng:`<p>The shock timeline developed by the participants is composed of ${t} key events. We only considered social media posts published during the 21 days following each event.</p>`,por:`<p>A linha do tempo de choque desenvolvida pelos participantes é composta por ${t} eventos principais. Consideramos apenas postagens de mídia social publicadas durante os 21 dias seguintes a cada evento.</p>`,ara:`<p>يتكون الجدول الزمني للصدمة الذي وضعه المشاركون من ${t} أحداث رئيسية. نظرنا فقط في منشورات وسائل التواصل الاجتماعي المنشورة خلال 21 يومًا بعد كل حدث.</p>`}),(t,e)=>({eng:`<p>Using automated lexical, temporal and engagement filters, in combination with human reviews we uncovered a total of ${t} posts containing disinformation from ${e} belligerents.</p>`,por:`<p>Usando filtros automatizados lexicais, temporais e de engajamento, em combinação com análises humanas, descobrimos um total de ${t} postagens contendo desinformação de ${e} beligerantes.</p>`,ara:`<p>باستخدام عوامل التصفية التلقائية المعجمية والزمانية والمشاركة ، بالإضافة إلى المراجعات البشرية ، اكتشفنا ما مجموعه ${t} منشورات تحتوي على معلومات مضللة من ${e} متحاربين.</p>`}),r,(t,e)=>e.categories.includes(t.key),t=>T(t),t=>T(t),function(t){M=t,n(2,M)},function(t){S=t,n(3,S)}]}class Xx extends J{constructor(t){super(),Y(this,t,qx,Wx,a,{lang:0,dataset:28,params:1},null,[-1,-1])}}function Yx(t,e,n){const i=t.slice();return i[38]=e[n],i[40]=n,i}function Jx(t){let e,n;return e=new mx({props:{data:t[16].filter((function(...e){return t[29](t[38],...e)})),title:`${sh(t[40]+1)}. ${t[38].name_count}`,max_interactions:Math.max(...t[16].map(Qx))}}),{c(){j(e.$$.fragment)},m(t,i){$(e,t,i),n=!0},p(e,n){t=e},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Zx(t){let e,n,i,r,a,o,s,l,c,v,y,b,w,S,T,E,L,C,R,P,D,N,k,O,z,F,U,X,Y,J,Z,K,Q,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,ht,dt,pt,ft,mt,gt,vt,xt,_t,bt,wt,Mt,St,Tt,Et,At,Lt,Ct,Rt,Pt,Dt,It,Nt,kt,Ot,zt,Ft,Ut,Bt,Ht,Vt,Gt,Wt,jt,$t,qt,Xt,Yt,Jt,Zt,Kt,Qt,te,ee,ne=t[4].title[t[0]]+"",ie=t[4].partners[t[0]]+"",re=yt.subtitle_1[t[0]]+"",ae=t[20](t[13])[t[0]]+"",oe=yt.subtitle_2[t[0]]+"",se=t[21](t[5].length.toLocaleString())[t[0]]+"",le=yt.searchbar_1[t[0]]+"",ce=yt.searchbar_2[t[0]]+"",ue=yt.subtitle_3[t[0]]+"",he=yt.subsubtitle_1[t[0]]+"",de=t[22](t[6].length)[t[0]]+"",pe=yt.subsubtitle_2[t[0]]+"",fe=t[26](t[8].length)[t[0]]+"",me=yt.subsubtitle_3[t[0]]+"",ge=yt.engagement_1[t[0]]+"",ve=yt.subtitle_4[t[0]]+"",ye=t[27](t[15].length,t[14].length)[t[0]]+"",xe=yt.subsubtitle_4[t[0]]+"",_e=t[24](t[14].length.toLocaleString())[t[0]]+"",be=yt.subsubtitle_5[t[0]]+"",we=t[23](t[9].length)[t[0]]+"",Me=yt.subsubtitle_6[t[0]]+"",Se=yt.engagement_2[t[0]]+"",Te=yt.subsubtitle_7[t[0]]+"",Ee=yt.coordination[t[0]]+"",Ae=t[25][t[0]]+"";b=new Sh({props:{data:t[12]}}),k=new Rh({props:{placeholders:t[1].examples.queries,documents:t[5],word_mapping:t[7]}}),Q=new Sh({props:{data:t[10]}}),ot=new Sh({props:{data:t[11]}}),pt=new Sh({props:{data:t[19]}}),bt=new ox({props:{data:t[15],sources:t[14],events:t[8]}}),Lt=new kh({props:{data:t[14]}}),kt=new Bh({props:{elements:t[9].map(Kx)}});let Le=t[9],Ce=[];for(let e=0;e<Le.length;e+=1)Ce[e]=Jx(Yx(t,Le,e));const Re=t=>G(Ce[t],1,1,(()=>{Ce[t]=null}));function Pe(e){t[32](e)}function De(e){t[33](e)}Jt=new Gh({props:{previous_callback:t[30],next_callback:t[31],options:t[18]}});let Ie={};return void 0!==t[2]&&(Ie.nodes=t[2]),void 0!==t[3]&&(Ie.vertices=t[3]),Kt=new Fx({props:Ie}),A.push((()=>W(Kt,"nodes",Pe))),A.push((()=>W(Kt,"vertices",De))),{c(){e=f("section"),n=f("h1"),i=m(ne),r=g(),a=new M,o=g(),s=f("h1"),l=m(re),c=g(),v=new M,y=g(),j(b.$$.fragment),w=g(),S=f("h1"),T=m(oe),E=g(),L=new M,C=g(),R=new M,P=g(),D=new M,N=g(),j(k.$$.fragment),O=g(),z=f("h1"),F=m(ue),U=g(),X=f("h1"),Y=m(he),J=g(),Z=new M,K=g(),j(Q.$$.fragment),tt=g(),et=f("h1"),nt=m(pe),it=g(),rt=new M,at=g(),j(ot.$$.fragment),st=g(),lt=f("h1"),ct=m(me),ut=g(),ht=new M,dt=g(),j(pt.$$.fragment),ft=g(),mt=f("h1"),gt=m(ve),vt=g(),xt=new M,_t=g(),j(bt.$$.fragment),wt=g(),Mt=f("h1"),St=m(xe),Tt=g(),Et=new M,At=g(),j(Lt.$$.fragment),Ct=g(),Rt=f("h1"),Pt=m(be),Dt=g(),It=new M,Nt=g(),j(kt.$$.fragment),Ot=g(),zt=f("h1"),Ft=m(Me),Ut=g(),Bt=new M,Ht=g();for(let t=0;t<Ce.length;t+=1)Ce[t].c();Vt=g(),Gt=f("h1"),Wt=m(Te),jt=g(),$t=new M,qt=g(),Xt=new M,Yt=g(),j(Jt.$$.fragment),Zt=g(),j(Kt.$$.fragment),x(n,"class","title"),a.a=o,x(s,"class","subtitle"),v.a=y,x(S,"class","subtitle"),L.a=C,R.a=P,D.a=N,x(z,"class","subtitle"),x(X,"class","subsubtitle"),Z.a=K,x(et,"class","subsubtitle"),rt.a=at,x(lt,"class","subsubtitle"),ht.a=dt,x(mt,"class","subtitle"),xt.a=_t,x(Mt,"class","subsubtitle"),Et.a=At,x(Rt,"class","subsubtitle"),It.a=Nt,x(zt,"class","subsubtitle"),Bt.a=Ht,x(Gt,"class","subsubtitle"),$t.a=qt,Xt.a=Yt},m(t,d){h(t,e,d),u(e,n),u(n,i),u(e,r),a.m(ie,e),u(e,o),u(e,s),u(s,l),u(e,c),v.m(ae,e),u(e,y),$(b,e,null),u(e,w),u(e,S),u(S,T),u(e,E),L.m(se,e),u(e,C),R.m(le,e),u(e,P),D.m(ce,e),u(e,N),$(k,e,null),u(e,O),u(e,z),u(z,F),u(e,U),u(e,X),u(X,Y),u(e,J),Z.m(de,e),u(e,K),$(Q,e,null),u(e,tt),u(e,et),u(et,nt),u(e,it),rt.m(fe,e),u(e,at),$(ot,e,null),u(e,st),u(e,lt),u(lt,ct),u(e,ut),ht.m(ge,e),u(e,dt),$(pt,e,null),u(e,ft),u(e,mt),u(mt,gt),u(e,vt),xt.m(ye,e),u(e,_t),$(bt,e,null),u(e,wt),u(e,Mt),u(Mt,St),u(e,Tt),Et.m(_e,e),u(e,At),$(Lt,e,null),u(e,Ct),u(e,Rt),u(Rt,Pt),u(e,Dt),It.m(we,e),u(e,Nt),$(kt,e,null),u(e,Ot),u(e,zt),u(zt,Ft),u(e,Ut),Bt.m(Se,e),u(e,Ht);for(let t=0;t<Ce.length;t+=1)Ce[t].m(e,null);u(e,Vt),u(e,Gt),u(Gt,Wt),u(e,jt),$t.m(Ee,e),u(e,qt),Xt.m(Ae,e),u(e,Yt),$(Jt,e,null),u(e,Zt),$(Kt,e,null),ee=!0},p(t,n){(!ee||1&n[0])&&ne!==(ne=t[4].title[t[0]]+"")&&_(i,ne),(!ee||1&n[0])&&ie!==(ie=t[4].partners[t[0]]+"")&&a.p(ie),(!ee||1&n[0])&&re!==(re=yt.subtitle_1[t[0]]+"")&&_(l,re),(!ee||1&n[0])&&ae!==(ae=t[20](t[13])[t[0]]+"")&&v.p(ae),(!ee||1&n[0])&&oe!==(oe=yt.subtitle_2[t[0]]+"")&&_(T,oe),(!ee||1&n[0])&&se!==(se=t[21](t[5].length.toLocaleString())[t[0]]+"")&&L.p(se),(!ee||1&n[0])&&le!==(le=yt.searchbar_1[t[0]]+"")&&R.p(le),(!ee||1&n[0])&&ce!==(ce=yt.searchbar_2[t[0]]+"")&&D.p(ce);const r={};if(2&n[0]&&(r.placeholders=t[1].examples.queries),k.$set(r),(!ee||1&n[0])&&ue!==(ue=yt.subtitle_3[t[0]]+"")&&_(F,ue),(!ee||1&n[0])&&he!==(he=yt.subsubtitle_1[t[0]]+"")&&_(Y,he),(!ee||1&n[0])&&de!==(de=t[22](t[6].length)[t[0]]+"")&&Z.p(de),(!ee||1&n[0])&&pe!==(pe=yt.subsubtitle_2[t[0]]+"")&&_(nt,pe),(!ee||1&n[0])&&fe!==(fe=t[26](t[8].length)[t[0]]+"")&&rt.p(fe),(!ee||1&n[0])&&me!==(me=yt.subsubtitle_3[t[0]]+"")&&_(ct,me),(!ee||1&n[0])&&ge!==(ge=yt.engagement_1[t[0]]+"")&&ht.p(ge),(!ee||1&n[0])&&ve!==(ve=yt.subtitle_4[t[0]]+"")&&_(gt,ve),(!ee||1&n[0])&&ye!==(ye=t[27](t[15].length,t[14].length)[t[0]]+"")&&xt.p(ye),(!ee||1&n[0])&&xe!==(xe=yt.subsubtitle_4[t[0]]+"")&&_(St,xe),(!ee||1&n[0])&&_e!==(_e=t[24](t[14].length.toLocaleString())[t[0]]+"")&&Et.p(_e),(!ee||1&n[0])&&be!==(be=yt.subsubtitle_5[t[0]]+"")&&_(Pt,be),(!ee||1&n[0])&&we!==(we=t[23](t[9].length)[t[0]]+"")&&It.p(we),(!ee||1&n[0])&&Me!==(Me=yt.subsubtitle_6[t[0]]+"")&&_(Ft,Me),(!ee||1&n[0])&&Se!==(Se=yt.engagement_2[t[0]]+"")&&Bt.p(Se),66048&n[0]){let i;for(Le=t[9],i=0;i<Le.length;i+=1){const r=Yx(t,Le,i);Ce[i]?(Ce[i].p(r,n),V(Ce[i],1)):(Ce[i]=Jx(r),Ce[i].c(),V(Ce[i],1),Ce[i].m(e,Vt))}for(B(),i=Le.length;i<Ce.length;i+=1)Re(i);H()}(!ee||1&n[0])&&Te!==(Te=yt.subsubtitle_7[t[0]]+"")&&_(Wt,Te),(!ee||1&n[0])&&Ee!==(Ee=yt.coordination[t[0]]+"")&&$t.p(Ee),(!ee||1&n[0])&&Ae!==(Ae=t[25][t[0]]+"")&&Xt.p(Ae);const o={};!Qt&&4&n[0]&&(Qt=!0,o.nodes=t[2],I((()=>Qt=!1))),!te&&8&n[0]&&(te=!0,o.vertices=t[3],I((()=>te=!1))),Kt.$set(o)},i(t){if(!ee){V(b.$$.fragment,t),V(k.$$.fragment,t),V(Q.$$.fragment,t),V(ot.$$.fragment,t),V(pt.$$.fragment,t),V(bt.$$.fragment,t),V(Lt.$$.fragment,t),V(kt.$$.fragment,t);for(let t=0;t<Le.length;t+=1)V(Ce[t]);V(Jt.$$.fragment,t),V(Kt.$$.fragment,t),ee=!0}},o(t){G(b.$$.fragment,t),G(k.$$.fragment,t),G(Q.$$.fragment,t),G(ot.$$.fragment,t),G(pt.$$.fragment,t),G(bt.$$.fragment,t),G(Lt.$$.fragment,t),G(kt.$$.fragment,t),Ce=Ce.filter(Boolean);for(let t=0;t<Ce.length;t+=1)G(Ce[t]);G(Jt.$$.fragment,t),G(Kt.$$.fragment,t),ee=!1},d(t){t&&d(e),q(b),q(k),q(Q),q(ot),q(pt),q(bt),q(Lt),q(kt),p(Ce,t),q(Jt),q(Kt)}}}const Kx=t=>t.description,Qx=t=>t.interactions.count;function t_(t,e,n){let{lang:i}=e,{dataset:r}=e,{params:a}=e;const o=yt.lebanon,{sources:s,posts:l,submissions:c,lexicon:u,dictionary:h,events:d,categories:p,lexicon_table:f,events_table:m,political_network_table:g,nbr_of_accounts:v,min_date:y,max_date:x,belligerents:_,submissions_of_interest:b}=r,w=Bx(b);let M,S;function T(t){const e=c.filter((e=>e.categories.includes(t)));n(2,[M,S]=Hx(e,p,s,15),M,n(3,S))}const E=p.map((t=>({key:t.key,value:t.name_count})));return t.$$set=t=>{"lang"in t&&n(0,i=t.lang),"dataset"in t&&n(28,r=t.dataset),"params"in t&&n(1,a=t.params)},[i,a,M,S,o,l,u,h,d,p,f,m,g,v,_,b,w,T,E,[["Type","Minimum Value"],["Views","500"],["Reactions","200"],["Comments","200"],["Shares","100"]],t=>({eng:`<p>The participants identified ${t} Telegram, Facebook, Twitter and Youtube accounts as being part of the political network.</p>`,por:`<p>Os participantes identificaram ${t} contas pertencentes à rede política nas plataformas Telegram, Facebook, Twitter e Youtube.</p>`,ara:`<p>حدّد المشاركون ${t} حساباً على تيليغرام، فايسبوك، تويتر، ويوتيوب كحسابات تشكّل جزءاً من شبكة سياسية.</p>`}),t=>({eng:`<p>Data collection returned a total of ${t} posts between ${y} and ${x}.</p>`,por:`<p>No total, foram coletadas ${t} postagens entre ${y} e ${x}.</p>`,ara:`<p>نتج عن جمع البيانات ${t} ${x}تدوينة بين كانون ${y} و .</p>`}),t=>({eng:`<p>Participants came up with a list of ${t} words prone to be used in disinformation. Only posts containing at least one of these keywords were kept.</p>`,por:`<p>Os participantes desenvolveram uma lista com ${t} palavras associadas a práticas de desinformação.</p>`,ara:`<p>اقترح المشاركون قائمةً من ${t} كلمة اعتبروا أنها ميالة لأن تُستخدم ضمن المعلومات المضللة. </p>`}),t=>({eng:`<p> We reviewed all the posts of interest and categorized them into ${t} narratives.</p>`,por:`<p>Todas as postagens de interesse foram revisadas e classificadas em ${t} narrativas.</p>`,ara:`<p>راجعنا كافة التدوينات ذات الاهتمام وصنّفناها ضمن ${t} سرديات. </p>`}),t=>({eng:`<p>Here is a short description of the ${t} state-affiliated accounts that published disinformation.</p>`,por:`<p>Abaixo, uma breve descrição de todas as ${t} contas associadas ao Estado que publicaram desinformação.</p>`,ara:`<p>في ما يلي وصف وجيز عن ${t} حساباً تابعاً للدولة نشر معلومات مضللة.</p>`}),()=>({eng:"<p>If there is a link between two belligerents it means they published a message containing the same keyword within a 15 days interval.</p>",por:"<p>Cada vínculo entre dois “beligerantes” é um sinal de que ambos publicaram uma mensagem contendo a mesma palavra-chave num intervalo de 15 dias.</p>",ara:"<p>إذا كان هناك خط يربط بين خصمين، فهذا يعني أنهما نشرا رسالةً تتضمّن الكلمة الرئيسية نفسها خلال فترة 15 يوماً. </p>"}),t=>({eng:`<p>The shock timeline developed by the participants is composed of ${t} key events. We only considered social media posts published during the 21 days following each event.</p>`,por:`<p>A linha do tempo de choque desenvolvida pelos participantes é composta por ${t} eventos principais. Consideramos apenas postagens de mídia social publicadas durante os 21 dias seguintes a cada evento.</p>`,ara:`<p>يتكون الجدول الزمني للصدمة الذي وضعه المشاركون من ${t} أحداث رئيسية. نظرنا فقط في منشورات وسائل التواصل الاجتماعي المنشورة خلال 21 يومًا بعد كل حدث.</p>`}),(t,e)=>({eng:`<p>Using automated lexical, temporal and engagement filters, in combination with human reviews we uncovered a total of ${t} posts containing disinformation from ${e} belligerents.</p>`,por:`<p>Usando filtros automatizados lexicais, temporais e de engajamento, em combinação com análises humanas, descobrimos um total de ${t} postagens contendo desinformação de ${e} beligerantes.</p>`,ara:`<p>باستخدام عوامل التصفية التلقائية المعجمية والزمانية والمشاركة ، بالإضافة إلى المراجعات البشرية ، اكتشفنا ما مجموعه ${t} منشورات تحتوي على معلومات مضللة من ${e} متحاربين.</p>`}),r,(t,e)=>e.categories.includes(t.key),t=>T(t),t=>T(t),function(t){M=t,n(2,M)},function(t){S=t,n(3,S)}]}class e_ extends J{constructor(t){super(),Y(this,t,t_,Zx,a,{lang:0,dataset:28,params:1},null,[-1,-1])}}function n_(t){let e,n,i,r,a,o,s,l,c,u,p,m,v,y;i=new $u({props:{posts:t[6],lang:t[0]}});let _=t[2]&&i_(t),b=t[3]&&r_(t);return c=new eh({props:{lang:t[0]}}),v=new oh({props:{lang:t[0]}}),{c(){e=f("div"),n=g(),j(i.$$.fragment),r=g(),_&&_.c(),a=g(),b&&b.c(),o=g(),s=f("div"),l=g(),j(c.$$.fragment),u=g(),p=f("div"),m=g(),j(v.$$.fragment),x(e,"class","separator"),x(s,"class","separator"),x(p,"class","separator")},m(t,d){h(t,e,d),h(t,n,d),$(i,t,d),h(t,r,d),_&&_.m(t,d),h(t,a,d),b&&b.m(t,d),h(t,o,d),h(t,s,d),h(t,l,d),$(c,t,d),h(t,u,d),h(t,p,d),h(t,m,d),$(v,t,d),y=!0},p(t,e){const n={};64&e&&(n.posts=t[6]),1&e&&(n.lang=t[0]),i.$set(n),t[2]?_?(_.p(t,e),4&e&&V(_,1)):(_=i_(t),_.c(),V(_,1),_.m(a.parentNode,a)):_&&(B(),G(_,1,1,(()=>{_=null})),H()),t[3]?b?(b.p(t,e),8&e&&V(b,1)):(b=r_(t),b.c(),V(b,1),b.m(o.parentNode,o)):b&&(B(),G(b,1,1,(()=>{b=null})),H());const r={};1&e&&(r.lang=t[0]),c.$set(r);const s={};1&e&&(s.lang=t[0]),v.$set(s)},i(t){y||(V(i.$$.fragment,t),V(_),V(b),V(c.$$.fragment,t),V(v.$$.fragment,t),y=!0)},o(t){G(i.$$.fragment,t),G(_),G(b),G(c.$$.fragment,t),G(v.$$.fragment,t),y=!1},d(t){t&&d(e),t&&d(n),q(i,t),t&&d(r),_&&_.d(t),t&&d(a),b&&b.d(t),t&&d(o),t&&d(s),t&&d(l),q(c,t),t&&d(u),t&&d(p),t&&d(m),q(v,t)}}}function i_(t){let e,n,i,r;return i=new Xx({props:{lang:t[0],params:t[4],dataset:t[7]}}),{c(){e=f("div"),n=g(),j(i.$$.fragment),x(e,"class","separator")},m(t,a){h(t,e,a),h(t,n,a),$(i,t,a),r=!0},p(t,e){const n={};1&e&&(n.lang=t[0]),16&e&&(n.params=t[4]),128&e&&(n.dataset=t[7]),i.$set(n)},i(t){r||(V(i.$$.fragment,t),r=!0)},o(t){G(i.$$.fragment,t),r=!1},d(t){t&&d(e),t&&d(n),q(i,t)}}}function r_(t){let e,n,i,r;return i=new e_({props:{lang:t[0],params:t[5],dataset:t[8]}}),{c(){e=f("div"),n=g(),j(i.$$.fragment),x(e,"class","separator")},m(t,a){h(t,e,a),h(t,n,a),$(i,t,a),r=!0},p(t,e){const n={};1&e&&(n.lang=t[0]),32&e&&(n.params=t[5]),256&e&&(n.dataset=t[8]),i.$set(n)},i(t){r||(V(i.$$.fragment,t),r=!0)},o(t){G(i.$$.fragment,t),r=!1},d(t){t&&d(e),t&&d(n),q(i,t)}}}function a_(t){let e,n,i,r,a,o,s,l,c,p,m,v,y;function _(e){t[10](e)}n=new su({props:{lang:t[0]}});let b={};void 0!==t[0]&&(b.lang=t[0]),o=new du({props:b}),A.push((()=>W(o,"lang",_))),m=new xu({props:{lang:t[0]}});let w=t[1]&&n_(t);return{c(){e=f("main"),j(n.$$.fragment),i=g(),r=f("div"),a=g(),j(o.$$.fragment),l=g(),c=f("div"),p=g(),j(m.$$.fragment),v=g(),w&&w.c(),x(r,"class","separator"),x(c,"class","separator"),x(e,"class","svelte-vo2gtc")},m(t,s){h(t,e,s),$(n,e,null),u(e,i),u(e,r),u(e,a),$(o,e,null),u(e,l),u(e,c),u(e,p),$(m,e,null),u(e,v),w&&w.m(e,null),y=!0},p(t,[i]){const r={};1&i&&(r.lang=t[0]),n.$set(r);const a={};!s&&1&i&&(s=!0,a.lang=t[0],I((()=>s=!1))),o.$set(a);const l={};1&i&&(l.lang=t[0]),m.$set(l),t[1]?w?(w.p(t,i),2&i&&V(w,1)):(w=n_(t),w.c(),V(w,1),w.m(e,null)):w&&(B(),G(w,1,1,(()=>{w=null})),H())},i(t){y||(V(n.$$.fragment,t),V(o.$$.fragment,t),V(m.$$.fragment,t),V(w),y=!0)},o(t){G(n.$$.fragment,t),G(o.$$.fragment,t),G(m.$$.fragment,t),G(w),y=!1},d(t){t&&d(e),q(n),q(o),q(m),w&&w.d()}}}function o_(t,e,n){let i,r,a,o,{lang:s}=e,{isMobile:l}=e,c=!1,u=!1,h=!1,d=null;return T((async()=>{n(4,i=await iu("brazil")),n(5,r=await iu("lebanon")),n(6,d=ru(i.examples.lexicon,r.examples.lexicon)),n(1,c=!0);const[t,e,l]=await tu("brazil"),[p,f,m]=await eu("brazil"),g={sources:t,posts_zipped:await nu("brazil"),submissions:p,lexicon:e,events:l,categories:m,dictionary:f,OF_INTEREST:et,MIN_NBR_OF_PUBLICATION_OF_INTEREST:1,lang:s};var v=new Worker("assets/scripts/task_preproc.js",{type:"module"});v.addEventListener("message",(function(t){n(7,a=t.data),n(2,u=!0)}),!1),v.postMessage(g);const[y,x,_]=await tu("lebanon"),[b,w,M]=await eu("lebanon"),S={sources:y,posts_zipped:await nu("lebanon"),submissions:b,lexicon:x,events:_,categories:M,dictionary:w,OF_INTEREST:et,MIN_NBR_OF_PUBLICATION_OF_INTEREST:1,lang:s};var T=new Worker("assets/scripts/task_preproc.js",{type:"module"});T.addEventListener("message",(function(t){n(8,o=t.data),n(3,h=!0)}),!1),T.postMessage(S)})),t.$$set=t=>{"lang"in t&&n(0,s=t.lang),"isMobile"in t&&n(9,l=t.isMobile)},[s,c,u,h,i,r,d,a,o,l,function(t){s=t,n(0,s)}]}class s_ extends J{constructor(t){super(),Y(this,t,o_,a_,a,{lang:0,isMobile:9})}}function l_(e){let n,i;return n=new Ct({props:{lang:e[1]}}),{c(){j(n.$$.fragment)},m(t,e){$(n,t,e),i=!0},p:t,i(t){i||(V(n.$$.fragment,t),i=!0)},o(t){G(n.$$.fragment,t),i=!1},d(t){q(n,t)}}}function c_(t){let e,n,i,r,a,o,s,l,c,u;i=new dt({props:{isMobile:t[2],lang:t[1]}}),a=new Xc({}),s=new s_({props:{isMobile:t[2],lang:t[1]}});let p=t[0]&&l_(t);return{c(){e=f("title"),e.textContent=`${K}`,n=g(),j(i.$$.fragment),r=g(),j(a.$$.fragment),o=g(),j(s.$$.fragment),l=g(),p&&p.c(),c=v()},m(t,d){h(t,e,d),h(t,n,d),$(i,t,d),h(t,r,d),$(a,t,d),h(t,o,d),$(s,t,d),h(t,l,d),p&&p.m(t,d),h(t,c,d),u=!0},p(t,[e]){t[0]?p?(p.p(t,e),1&e&&V(p,1)):(p=l_(t),p.c(),V(p,1),p.m(c.parentNode,c)):p&&(B(),G(p,1,1,(()=>{p=null})),H())},i(t){u||(V(i.$$.fragment,t),V(a.$$.fragment,t),V(s.$$.fragment,t),V(p),u=!0)},o(t){G(i.$$.fragment,t),G(a.$$.fragment,t),G(s.$$.fragment,t),G(p),u=!1},d(t){t&&d(e),t&&d(n),q(i,t),t&&d(r),q(a,t),t&&d(o),q(s,t),t&&d(l),p&&p.d(t),t&&d(c)}}}function u_(t,e,n){const i=function(){const t={};let e=window.location.href.split("?");return 2!==e.length||(e=e[1],e=e.split("&"),e.forEach((e=>{if(!e.includes("="))return;const n=e.split("=");2===n.length&&(t[n[0]]=n[1])}))),t}().lang||"eng",r=nt();let a=0,o=0,s=!1;return T((()=>{o=window.innerHeight,setTimeout((()=>{const t=document.querySelector("main");t.addEventListener("scroll",(function(e){a=t.scrollTop,n(0,s=a>.1*o);const i=document.getElementsByClassName("tooltip");for(let t of i)t.style.display="none"}))}),200)})),[s,i,r]}return new class extends J{constructor(t){super(),Y(this,t,u_,c_,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
