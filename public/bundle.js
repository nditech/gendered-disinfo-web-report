var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,o;function l(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(e){return null==e?"":e}function u(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function g(){return m(" ")}function v(){return m("")}function y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function w(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}class M{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=f(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)d(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(h)}}function S(e){o=e}function T(e){(function(){if(!o)throw new Error("Function called outside component initialization");return o})().$$.on_mount.push(e)}const E=[],A=[],L=[],C=[],R=Promise.resolve();let P=!1;function D(e){L.push(e)}function I(e){C.push(e)}const N=new Set;let k=0;function z(){const e=o;do{for(;k<E.length;){const e=E[k];k++,S(e),O(e.$$)}for(S(null),E.length=0,k=0;A.length;)A.pop()();for(let e=0;e<L.length;e+=1){const t=L[e];N.has(t)||(N.add(t),t())}L.length=0}while(E.length);for(;C.length;)C.pop()();P=!1,N.clear(),S(e)}function O(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const F=new Set;let U;function B(){U={r:0,c:[],p:U}}function H(){U.r||i(U.c),U=U.p}function V(e,t){e&&e.i&&(F.delete(e),e.i(t))}function G(e,t,n,i){if(e&&e.o){if(F.has(e))return;F.add(e),U.c.push((()=>{F.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function W(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function q(e){e&&e.c()}function j(e,n,a,s){const{fragment:o,on_mount:l,on_destroy:c,after_update:u}=e.$$;o&&o.m(n,a),s||D((()=>{const n=l.map(t).filter(r);c?c.push(...n):i(n),e.$$.on_mount=[]})),u.forEach(D)}function $(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function X(e,t){-1===e.$$.dirty[0]&&(E.push(e),P||(P=!0,R.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(t,r,a,s,l,c,u,d=[-1]){const p=o;S(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||p.$$.root};u&&u(f.root);let m=!1;if(f.ctx=a?a(t,r.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),m&&X(t,e)),n})):[],f.update(),m=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(h)}else f.fragment&&f.fragment.c();r.intro&&V(t.$$.fragment),j(t,r.target,r.anchor,r.customElement),z()}S(p)}class J{$destroy(){$(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Z=[{key:"eng",name:"English",mobile:"en"},{key:"por",name:"Português",mobile:"pt"},{key:"ara",name:"عَرَبي",mobile:"عَرَ"},{key:"fra",name:"Français",mobile:"fr"},{key:"spa",name:"Español",mobile:"es"}],K="State-Based Disinformation Campaigns During Times of Crises",Q="https://ndi.org",ee="info@charitableanalytics.org",te=[[{key:"contains_disinfo",value:"yes"},{key:"harms_women",value:"yes"}]];function ne(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(e){return console.log("Error in isMobile"),!1}}function ie(e,t,n){const i=e.slice();return i[3]=t[n],i}function re(e,t,n){const i=e.slice();return i[3]=t[n],i}function ae(e){let t,n,i,r=Z,a=[];for(let t=0;t<r.length;t+=1)a[t]=oe(ie(e,r,t));return{c(){t=f("p"),t.textContent=`${K}`,n=g(),i=f("li");for(let e=0;e<a.length;e+=1)a[e].c();x(t,"id","title"),x(t,"class","svelte-99jpo8"),x(i,"id","languages"),x(i,"class","svelte-99jpo8")},m(e,r){d(e,t,r),d(e,n,r),d(e,i,r);for(let e=0;e<a.length;e+=1)a[e].m(i,null)},p(e,t){if(0&t){let n;for(r=Z,n=0;n<r.length;n+=1){const s=ie(e,r,n);a[n]?a[n].p(s,t):(a[n]=oe(s),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},d(e){e&&h(t),e&&h(n),e&&h(i),p(a,e)}}}function se(e){let t,n=Z,i=[];for(let t=0;t<n.length;t+=1)i[t]=le(re(e,n,t));return{c(){t=f("li");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"id","languages"),x(t,"class","svelte-99jpo8")},m(e,n){d(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,r){if(0&r){let a;for(n=Z,a=0;a<n.length;a+=1){const s=re(e,n,a);i[a]?i[a].p(s,r):(i[a]=le(s),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(e){e&&h(t),p(i,e)}}}function oe(t){let n,i,r,a=t[3].name+"";return{c(){n=f("a"),i=m(a),x(n,"href",r=ue(t[3].key)),x(n,"class","svelte-99jpo8")},m(e,t){d(e,n,t),u(n,i)},p:e,d(e){e&&h(n)}}}function le(t){let n,i,r,a=t[3].mobile+"";return{c(){n=f("a"),i=m(a),x(n,"href",r=ue(t[3].key)),x(n,"class","svelte-99jpo8")},m(e,t){d(e,n,t),u(n,i)},p:e,d(e){e&&h(n)}}}function ce(t){let n,i,r,a,s,o,c;function p(e,t){return e[0]?se:ae}let m=p(t),v=m(t);return{c(){n=f("nav"),i=f("div"),r=f("img"),s=g(),v.c(),x(r,"alt","logo"),l(r.src,a="/assets/ndi-logo.svg")||x(r,"src","/assets/ndi-logo.svg"),x(r,"class","svelte-99jpo8"),x(i,"id","logo"),x(i,"class","svelte-99jpo8"),x(n,"class","svelte-99jpo8")},m(e,a){d(e,n,a),u(n,i),u(i,r),u(n,s),v.m(n,null),o||(c=y(i,"click",t[2]),o=!0)},p(e,[t]){m===(m=p(e))&&v?v.p(e,t):(v.d(1),v=m(e),v&&(v.c(),v.m(n,null)))},i:e,o:e,d(e){e&&h(n),v.d(),o=!1,c()}}}function ue(e){const t=window.location.href;return t.includes("lang=")?`${t.split("?")[0]}?lang=${e}`:`${t}?lang=${e}`}function de(e,t,n){let{lang:i}=t,{isMobile:r}=t;return e.$$set=e=>{"lang"in e&&n(1,i=e.lang),"isMobile"in e&&n(0,r=e.isMobile)},[r,i,()=>window.open(Q,"_blank")]}class he extends J{constructor(e){super(),Y(this,e,de,ce,a,{lang:1,isMobile:0})}}var pe={eng:"Examining State-Based Disinformation Campaigns During Times of Crises",por:"Examinando Campanhas de Desinformação Associadas ao Estado em Tempos de Crise",ara:"دراسة حملات التضليل القائمة على الدولة في أوقات الأزمات",spa:"Análisis de campañas de desinformación alineadas con el Estado durante tiempos de crisis",fra:"Examen des campagnes de désinformation menées par l’État en période de crise"},fe={eng:"Case Studies : Lebanon & Brazil",por:"Estudos de Caso: Líbano e Brasil"},me={title:{eng:"Introduction",por:"Introdução",spa:"Introducción",ara:"مقدّمة",fra:"Introduction"},paragraphs:{1:{spa:"Tras el paso de las situaciones de conmoción, las personas quieren respuestas, pero no hay consenso y claridad sobre lo sucedido. Como resultado de ello, las falsedades deliberadas y espontáneas pueden proliferar con una velocidad inimaginable. Los foros, digitales y no digitales, están plagados de ideologías oportunistas y perversas. En su calidad de responsables de gestionar la respuesta a las situaciones de conmoción, el Estado y las instituciones pueden tomar medidas para informar y guiar a un público preocupado. Los líderes oportunistas pueden aprovechar su posición para consolidarse en el poder. Pasan por alto, condonan o amplifican la información falsa a fin de socavar la integridad del espacio de información para su propio beneficio político. En efecto, emplean la propaganda para manipular la opinión pública. Para lograr su objetivo, de alguna manera deben disfrazar el engaño bajo una fachada atractiva y encantadora que alentará a su público objetivo a aceptarla sin emitir crítica alguna. Las ideas familiares y las creencias ampliamente arraigadas, incluidas las normas culturales establecidas, pueden servir como “material de envase”.",eng:"In the wake of shocks, people want answers but facts have yet to emerge. As a result, deliberate and spontaneous falsehoods can proliferate with incredible velocity. Forums, digital and non-digital, are plagued with opportunistic and perverse ideologies. In charge of managing the response to the shock, the State and institutions can take steps to inform and guide a concerned public. Opportunistic leaders can leverage their position for power consolidation. They overlook, condone, or amplify false information to undermine the integrity of the information space for their own political advantage. In effect, they employ propaganda to manipulate public opinion. To achieve their goal, they must somehow disguise the deceit in an appealing, disarming veneer that will encourage its intended audience to accept it uncritically. Familiar ideas and widely-held beliefs, including established cultural norms, can provide such “packaging”.",por:"Diante de eventos perturbadores, as pessoas exigem respostas, mesmo que os fatos ainda estejam por vir. O resultado é a rápida proliferação de mentiras, deliberadas e espontâneas. Fóruns, digitais ou não, estão impregnados de ideologias perversas que surfam na onda do momento. Responsáveis pela resposta ao choque, o Estado e as instituições podem agir para informar e orientar um público alarmado. Mas líderes oportunistas podem se utilizar do cargo para tentar se consolidar no poder, negligenciando, tolerando e ecoando informações falsas com o objetivo de minar a integridade do espaço informacional para o próprio proveito político. Em circunstâncias extremas, promovem campanhas para manipular a opinião pública. Para obterem sucesso, buscam maneiras de encobrir a farsa com uma roupagem cativante e sedutora para que ela seja aceita acriticamente pelo público que desejam atingir. Ideias batidas e crenças disseminadas, incluindo normas culturais estabelecidas, podem servir como “verniz”.",ara:"في أعقاب الصدمات، يبحث الناس عادةً عن إجابات لكنّ الحقائق لا تكون قد ظهرت بعد. لذا، يمكن أن تنتشر الأكاذيب الملفّقة عمداً أو عن غير عمد بسرعة الضوء. فلا يخفى على أحد أنّ المنتديات، الرقمية منها وغير الرقمية، مرتع للأيديولوجيات الانتهازية والمنحرفة. في هذا الإطار، تتّخذ الدولة والمؤسسات، المسؤولة عن إدارة آلية الاستجابة للصدمة، خطوات غرضها تزويد الجمهور القلق بالمعلومات وتوجيهه نحوها. لكنّ القادة الانتهازيين قد يستغلون مناصبهم لتكريس سلطتهم. فيتجاهلون المعلومات الخاطئة، أو يتغاضون عنها، أو يضخّمونها بغية تقويض سلامة فضاء المعلومات، واستغلاله لمكاسبهم السياسية الخاصة. فتراهم يستخدمون أساليب البروباغاندا للتلاعب بالرأي العام. لكن سعياً إلى تحقيق هدفهم هذا، يجدون أنفسهم مضطرين إلى إخفاء خداعهم وراء هالةٍ جذابة، ومربكة، لتشجيع جمهورهم المنشود على قبولهم بلا تردد. ويمكن للأفكار المألوفة والمعتقدات الواسعة الانتشار، بما فيها المعايير الثقافية الراسخة، أن تؤمّن لهم مثل هذه “الرزمة المتكاملة“.",fra:"Au lendemain d’un bouleversement, nous voulons des réponses, mais les faits ne sont pas encore connus. Les mensonges délibérés et spontanés peuvent donc proliférer à une vitesse incroyable. Les forums, numériques ou non, sont la proie d’idéologies opportunistes et perverses. Chargés de gérer la réaction à l’événement, l’État et les institutions peuvent prendre certaines mesures pour informer le public concerné et le guider. Les leaders opportunistes peuvent tirer parti de leur position pour renforcer leur pouvoir. Ils négligent, cautionnent ou amplifient les fausses informations afin de compromettre l’intégrité du système d’information pour leur propre intérêt politique. Concrètement, ils utilisent la propagande pour manipuler l’opinion publique. Pour atteindre leur objectif, ils doivent d’une manière ou d’une autre camoufler la tromperie sous une forme attrayante et désarmante qui encouragera le public visé à l’accepter sans réserve. Des idées familières et des croyances largement ancrées, notamment les normes culturelles établies, peuvent offrir ce type de « conditionnement »."},2:{spa:"En aquellas sociedades en las que hay percepciones y estereotipos arraigados en torno al género, las afirmaciones en torno al género pueden utilizarse como mecanismo de entrega para la desinformación. Este es el enfoque del presente estudio. Si bien se ha trabajado mucho sobre la desinformación, se sabe muy poco sobre las formas en que se hace uso deliberado de las normas, percepciones y estereotipos de género para mejorar la aceptación de la desinformación, particularmente durante las situaciones de conmoción social, en las cuales las poblaciones pueden ser las más vulnerables a la propagación de tales falsedades. Llamamos a este tipo particular de engaño “desinformación con enfoque de género” y, cuando es empleada intencionalmente por un grupo en particular (p. ej., un partido político u organización de la sociedad civil), nos referimos a ella como “campañas de desinformación con enfoque de género”.",eng:"In societies in which there are entrenched perceptions and stereotypes around gender, claims around gender can be used as the delivery mechanism for disinformation. This is the focus of this current study. While much work has been done on disinformation, very little is known about the ways in which gendered norms, perceptions, and stereotypes are deliberately leveraged to enhance the uptake of disinformation, particularly during society-scale shocks during which populations can be the most vulnerable to the spread of such falsehoods. We term this particular brand of deception “gendered disinformation” - and when it is employed intentionally by a particular group (e.g., a political party or civil society organization), we refer to it as “gendered disinformation campaigns.”",por:"Em sociedades imersas em concepções e estereótipos enraizados sobre gênero, declarações com viés de gênero podem ser utilizadas como meio para a desinformação. Esse é o foco deste trabalho. Por mais que a “desinformação” seja um tema recorrente, se sabe muito pouco sobre as formas como normas, concepções e estereótipos relativos a gênero são deliberadamente utilizados para ampliar o consumo de desinformação, particularmente durante choques de dimensão coletiva, que tendem a deixar determinadas populações mais vulneráveis à proliferação de mentiras. Chamamos essa forma particular de farsa de “desinformação de gênero” – e, quando empregada intencionalmente por algum grupo (por exemplo, por um partido político ou uma organização da sociedade civil), caracterizamos como “campanhas de desinformação de gênero”.",ara:"في المجتمعات التي تنتشر فيها التصورات الراسخة والأفكار النمطية المتعلقة بالجندر، يمكن استغلال المزاعم ذات الصلة بالجندر لنشر معلومات مضللة. هذا هو المحور الذي تركّز عليه هذه الدراسة. فرغم إجراء الكثير من الأبحاث حول المعلومات المضللة، لا يُعرف الكثير عن طرق استغلال المعايير والتصورات والأفكار النمطية الجندرية، عمداً، لغرض تعزيز نشر المعلومات المضللة، خاصةً خلال الصدمات التي تنتشر على نطاق المجتمع بأكمله، أي عندما يكون السكان أكثر عرضةً لانتشار هذه الأكاذيب. نطلق على هذا النوع المحدد من الخداع اسم “التضليل الجندري“. وعندما تلجأ إليه مجموعة معيّنة عمداً (مثلاً حزب سياسي أو منظمة مجتمع مدني)، يُعرف باسم “حملات التضليل الجندري“. ",fra:"Dans les sociétés où les perceptions et les stéréotypes liés au sexe sont bien ancrés, les affirmations relatives au genre peuvent être utilisées comme mécanisme de diffusion de la désinformation. C’est l’objectif de la présente étude. Si de nombreuses études ont été consacrées à la désinformation, on sait très peu de choses sur la manière dont les normes, les perceptions et les stéréotypes liés au genre sont délibérément exploités pour renforcer l’adoption de la désinformation, en particulier lors de bouleversements sociaux au cours desquels les populations peuvent être les plus vulnérables à la diffusion de ces fausses informations. Nous appelons cette forme particulière de tromperie la « désinformation sexiste » et, lorsqu’elle est employée intentionnellement par un groupe particulier (par ex., un parti politique ou une organisation de la société civile), nous parlons de « campagnes de désinformation sexistes »."},3:{spa:"En este estudio, realizado en asociación con el Instituto Nacional Demócrata (National Democratic Institute, NDI), buscamos establecer la prevalencia y la naturaleza de las campañas de desinformación con enfoque de género durante períodos de conmoción social. Para ello, realizamos investigaciones paralelas en dos países diferentes: Brasil y el Líbano. Los estudios son metodológicamente idénticos, lo cual nos permite hacer comparaciones entre los contextos de ambos países. Además, nuestra elección de Brasil y Líbano brinda la oportunidad de examinar la desinformación en sociedades bastante dispares. Esto permite a este primer estudio proporcionar una amplia caracterización de campañas de desinformación en su entorno de existencia.",eng:"In this study, undertaken in partnership with the National Democratic Institute (NDI), we, Charitable Analytics International (CAI) seek to establish the prevalence and nature of gendered disinformation campaigns during periods of society-scale shock. To do this, we conduct parallel investigations in two different countries: Brazil and Lebanon. The studies are methodologically identical - which enables us to make comparisons between the two country contexts. Further, our choice of Brazil and Lebanon provides the opportunity to examine disinformation in quite different societies - permitting this first study to provide a broad characterization of disinformation campaigns as they may exist.",por:"Neste estudo, realizado em parceria com o National Democratic Institute (NDI), examinamos a prevalência e a natureza de campanhas de desinformação de gênero durante choques de dimensão coletiva. Para tal, foram realizadas pesquisas paralelas em dois países distintos: Brasil e Líbano. As pesquisas são metodologicamente idênticas, tornando possível comparações entre os dois contextos nacionais. A opção por Brasil e Líbano também se deve à possibilidade de se analisar o fenômeno da desinformação em sociedades bem díspares, permitindo, neste primeiro estudo, uma caracterização abrangente das campanhas de desinformação na prática.",ara:"في هذه الدراسة المنفّذة بالشراكة مع المعهد الديمقراطي الوطني، نسعى إلى تبيّن مدى انتشار حملات التضليل الجندري وطبيعتها، في فترات الصدمات على نطاق المجتمع بأسره. للقيام بذلك، قمنا بإجراء تحقيقين متوازيين في بلدين مختلفين، هما البرازيل ولبنان. تُعتبر الدراستان متطابقتين من حيث المنهجية المعتمدة، مما مكّننا من المقارنة بين بيئتي البلدين. فضلاً عن ذلك، من خلال اختيارنا للبرازيل ولبنان، تمكّنا من تحليل المعلومات المضللة في مجتمعين مختلفين كل الاختلاف- مما أتاح لهذه الدراسة الأولى أن تحدّد المواصفات العامة لحملات التضليل الموجودة.",fra:"Dans cette étude, menée en partenariat avec le National Democratic Institute (NDI), nous cherchons à établir la prévalence et la nature des campagnes de désinformation sexistes en période de bouleversement social. Pour ce faire, nous menons des enquêtes parallèles dans deux pays différents : Le Brésil et le Liban. Les études sont identiques sur le plan méthodologique, ce qui nous permet d’effectuer des comparaisons entre le contexte des deux pays. En outre, notre choix du Brésil et du Liban nous donne l’occasion d’examiner la désinformation dans des sociétés très différentes, ce qui permet à cette première étude de caractériser largement les campagnes de désinformation telles qu’elles peuvent exister."},4:{spa:"El propósito de este enfoque es mejorar la comprensión de qué medidas se necesitan para garantizar que las mujeres estén empoderadas para participar en posiciones de liderazgo y toma de decisiones en respuesta a las situaciones de conmoción, y la recuperación de estas, como pandemias, desastres naturales y conflictos/violencia. Esperamos que estas conclusiones sirvan como fuente de información para la orientación de programas de gobiernos democráticos y las intervenciones destinadas a contrarrestar el impacto de estas tácticas.",eng:"The purpose of this focus is to enhance the understanding of what measures are needed to ensure that women are empowered to participate in leadership and decision making in the response to and recovery from shocks, such as pandemics, natural disasters, and conflict/violence. Our hope is that these findings will inform democratic governance program guidance and interventions aimed at countering the impact of these tactics.",por:"O propósito desta análise é contribuir para a formulação das medidas necessárias destinadas a garantir o empoderamento das mulheres para que estas ocupem posições de liderança e comando no enfrentamento e na superação de choques, como pandemias, desastres naturais e situações de conflito/violência. Nossa esperança é que os resultados da pesquisa sejam um alicerce para diretrizes e intervenções de programas de governança democrática dedicados a combater os impactos dessas táticas.",ara:"يهدف محور التركيز هذه الدراسة إلى تحسين فهم الإجراءات المطلوبة لتمكين المرأة وحملها على المشاركة في المناصب القيادية وعمليات صنع القرار في سياق الاستجابة للصدمات والتعافي منها، على غرار الأوبئة، والكوارث الطبيعية، والنزاعات/ العنف. وأملنا أن تساهم هذه النتائج في تحسين برامج الحوكمة الديمقراطية وتدخلاتها، الهادفة إلى مكافحة تأثير هذه التكتيكات. ",fra:"L’objectif de ce point est de mieux comprendre les mesures à prendre pour permettre aux femmes de participer au leadership et à la prise de décision dans le cadre de la gestion des catastrophes, telles que les pandémies, les catastrophes naturelles et les conflits ou la violence. Nous espérons que ces résultats éclaireront les directives et interventions du programme de gouvernance démocratique visant à contrer l’impact de ces tactiques."},5:{spa:"Buscamos campañas de desinformación en los lugares donde a menudo el alcance público es mayor y son más fáciles de encontrar: las redes sociales. Más específicamente, analizamos 4 plataformas de redes sociales: Telegram, Youtube, Facebook y Twitter. Habida cuenta de los contextos de ambos países, esperábamos encontrar pruebas sustanciales de desinformación con enfoque de género. Para sorpresa nuestra, descubrimos que, en el marco temporal estudiado, prácticamente no aparecieron pruebas de campañas de desinformación con enfoque de género. Aunque se descubrieron narrativas dañinas con enfoque de género publicadas por políticos tradicionales, no se detectó una prevalencia y la exhibición característica de acciones coordinadas. Además, el uso de marcos con enfoque de género para propagar la desinformación fue algo inusual.",eng:"We looked for disinformation campaigns in the places where they are often most widespread and easiest to find: social media. More specifically, we looked at 4 social media platforms – Telegram, Youtube, Facebook and Twitter. In both country contexts, we expected substantial evidence of gendered disinformation. Surprisingly, we discovered that, within the studied time frame, virtually no evidence of gendered disinformation campaigns appeared. Although harmful gendered narratives published by political insiders were discovered, prevalence, and characteristic display of coordination was not. Moreover the use of gendered frames to propagate disinformation was rare.",por:"As campanhas de desinformação foram pesquisadas no local onde são mais disseminadas e fáceis de encontrar: nas redes sociais, particularmente em quatro plataformas - Telegram, Youtube, Facebook e Twitter. A expectativa, em ambos os contextos nacionais, era encontrar diversas evidências de práticas de desinformação de gênero. Surpreendentemente, durante o período de realização da pesquisa, não foi detectada praticamente nenhuma evidência de campanhas de desinformação de gênero. Apesar da identificação de narrativas pejorativas sobre gênero publicadas por integrantes do círculo político, não houve prevalência nem padrões característicos de coesão. Além disso, se mostrou rara a utilização de enquadramentos de gênero na propagação de desinformação.",ara:"بحثنا عن حملات التضليل في الأماكن حيث يكثر انتشارها ويسهل إيجادها بشكل غالب، أي: وسائل التواصل الاجتماعي. على وجه التحديد، درسنا 4 منصات لوسائل التواصل الاجتماعي هي: تيليغرام، يوتيوب، فايسبوك وتويتر. في كلتا بيئتي البلدين، توقّعنا إيجاد أدلة كثيرة جداً على التضليل الجندري. لكننا اكتشفنا، وهنا العجب، أنه خلال فترة الدراسة، لم نعثر على أي دليل البتة على مثل هذه الحملات. ورغم اكتشافنا خطابات مؤذية جندرياً نشرتها دوائر سياسية مطلعة، إلا أننا لم نلحظ أي تفشٍ أو تنسيق مميّز لهذه المنشورات. فضلاً عن ذلك، كان استخدام الأطر الجندرية لنشر المعلومات المضللة نادراً. ",fra:"Nous avons recherché des campagnes de désinformation dans les endroits où elles sont souvent les plus répandues et les plus faciles à trouver : les réseaux sociaux. Plus précisément, nous avons examiné 4 plateformes de réseaux sociaux : Telegram, YouTube, Facebook et Twitter. Dans les deux contextes nationaux, nous nous attendions à des preuves substantielles de désinformation sexiste. Étonnamment, nous avons découvert que, dans la période étudiée, il n’y avait pratiquement aucune preuve de campagnes de désinformation sexistes. Bien que des témoignages sexistes nuisibles publiés par des initiés politiques aient été découverts, la prévalence et la manifestation caractéristique de la coordination ne l’ont pas été. De plus, l’utilisation de cadres sexistes pour diffuser la désinformation était rare."},6:{spa:"En las siguientes secciones, proporcionamos una descripción y evaluación detallada de este estudio. Primero analizaremos los métodos que utilizamos para llevar a cabo la investigación en cada estudio. Luego, analizaremos los resultados obtenidos de cada país. Finalmente, analizaremos los resultados de nuestra investigación en torno a las campañas de desinformación con enfoque de género en cada país, así como lo que podemos aprender sobre estas campañas al comparar nuestras observaciones y conclusiones entre ambos contextos culturales.",eng:"In the following sections, we provide a detailed account and assessment of this study. First we will discuss the methods we used to conduct the investigation in each study. Then we will discuss results from each country. Finally, we will discuss our findings around gendered disinformation campaigns in each country - as well as what we can learn about these campaigns by comparing and contrasting our observations and findings between the two cultural contexts.",por:"Nas próximas seções, apresentamos, em detalhes, o desenho e o balanço da pesquisa, começando pelos métodos utilizados na realização de cada um dos trabalhos investigativos. Em seguida, discutimos os resultados encontrados em cada estudo de caso. Por fim, analisamos as evidências das campanhas de desinformação de gênero verificadas em cada país, além de extrairmos lições sobre campanhas dessa natureza ao comparar e contrastar as observações e as evidências referentes aos dois contextos culturais.",ara:"في الأقسام التالية، نقدّم سرداً مفصّلاً وتقييماً لهذه الدراسة. سنناقش أولاً الطرق التي استخدمناها لإدارة التحقيق في كلّ دراسة. بعد ذلك، سنناقش النتائج من كل دولة. أخيراً، سنتمعن في النتائج التي توصّلنا إليها بالنسبة إلى حملات التضليل الجندري في كل دولة، فضلاً عن الدروس المستخلصة من هذه الحملات، من خلال إيجاد أوجه الشبه والاختلاف في ملاحظاتنا ونتائجنا بين كلتا البيئتين الثقافيتين.",fra:"Dans les sections qui suivent, nous fournissons un compte-rendu détaillé et une évaluation de l’étude. Tout d’abord, nous discuterons des méthodes utilisées pour conduire notre investigation dans chaque étude. Ensuite, nous discuterons des résultats de chaque pays. Enfin, nous présenterons nos conclusions concernant les campagnes de désinformation sexistes dans chaque pays ainsi que de ce que nous pouvons apprendre sur ces campagnes en comparant nos observations et nos résultats entre les deux contextes culturels."}}},ge={title:{eng:"Gendered Disinformation",por:"Gênero",ara:"المعلومات المضللة جندرياً",spa:"Desinformación con enfoque de género",fra:"Désinformation sexiste"},subtitle:{eng:"State-Based Gendered Disinformation",por:"Desinformação de Gênero Associada ao Estado",ara:"التضليل الجندري القائم على الدولة",spa:"Desinformación con enfoque de género alineada con el Estado",fra:"Désinformation sexiste de l’État"},paragraphs_1:{1:{eng:"The online space is increasingly crucial for politics. It encourages digital citizenship and democratizes voices, giving women and other marginalized communities a platform. It is cheaper to mount an online campaign, and it maintains physical safety. Unfortunately, that democratization of voices also results in new types of threats against political women. These attacks fall under the umbrella of online violence against women in politics (VAW-P), which <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>encompasses the wide variety of attacks women experience when participating in democratic discourse on the internet.</a>",por:"O espaço virtual é cada vez mais importante na política. Ele incentiva a cidadania digital e democratiza vozes, oferecendo uma plataforma a mulheres e outras comunidades marginalizadas. Promover uma campanha na internet é mais barato, e garante a segurança física. Infelizmente, a democratização de vozes também resulta em novos tipos de ameaça contra mulheres politicamente ativas. Esses ataques estão no âmbito dos atos considerados de violência virtual contra mulheres na política (VAW-P, na sigla em inglês), que <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>engloba a ampla variedade de agressões sofridas por mulheres que participam do debate democrático na internet</a>.",ara:"لا يخفى على أحد أنّ الفضاء الإلكتروني يكتسي أهميةً بالغةً ومتزايدةً في عالم السياسة. فهو يشجع على المواطنة الرقمية وديمقراطية الأصوات، ويمنح النساء وبقية الجماعات المهمّشة منصّةً للتعبير عن أنفسهم. زد على ذلك أنّ تنظيم حملة إلكترونية أرخص ثمناً ويحافظ على السلامة الجسدية. لكنّ دمقرطة الأصوات تؤدي أيضاً، للأسف، إلى ظهور أنواع جديدة من التهديدات ضد النساء العاملات في السياسة. تندرج هذه الهجمات ضمن إطار العنف الإلكتروني الممارس ضد النساء في السياسة، وهو يشمل المجموعة المتنوعة من الهجمات التي تتعرض لها المرأة لدى المشاركة في الخطاب الديمقراطي على الإنترنت.",spa:"El espacio en línea es cada vez más crucial para la política. Fomenta la ciudadanía digital y democratiza las voces, e igualmente sirve de plataforma a las mujeres y otras comunidades marginadas. Es más económico organizar una campaña en línea, y permite salvaguardar la seguridad física de los participantes. Desafortunadamente, esta democratización de las voces también da como resultado nuevos tipos de amenazas contra las mujeres políticas. Los ataques en este entorno se diluyen bajo el título de violencia en línea contra las mujeres en política (violence against women in politics, VAW-P), que <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>abarca la amplia variedad de ataques que experimentan las mujeres cuando participan en el discurso democrático en Internet</a>.",fra:"L’espace en ligne est de plus en plus crucial pour la politique. Il encourage la citoyenneté numérique et démocratise les voix, offrant ainsi une plateforme aux femmes et aux autres communautés marginalisées. Il est moins coûteux de monter une campagne en ligne qui permet également de protéger la sécurité physique. Malheureusement, cette démocratisation des voix entraîne également de nouveaux types de dangers contre les femmes engagées dans la vie politique. Ces attaques relèvent de la violence en ligne contre les femmes engagées dans la vie politique (Violence against women in politics, VAW-P), qui <a target='_blank' href='https://ndi.org/publications/addressing-online-misogyny-and-gendered-disinformation-how-guide'>englobe la grande variété d’attaques subies par les femmes qui participent au discours démocratique sur Internet</a>."},2:{spa:"El enfoque de este informe es la desinformación con enfoque de género. La desinformación con enfoque de género es una forma de violencia en línea contra las mujeres en política (VAW-P) que tiene como objetivo influir en los resultados políticos al desacreditar y degradar a las mujeres en la política. La desinformación con enfoque de género tiende a clasificarse en tres categorías: asustar a las mujeres para que se retiren de la política; alejar el apoyo popular de las mujeres políticamente activas y aprovechar las normas de género para modificar los resultados políticos.",eng:"The focus of this report is gendered disinformation. Gendered disinformation is a form of online violence against women in politics (VAW-P) that aims to sway political outcomes by discrediting and demeaning women in politics. Gendered disinformation tends to fall into three categories: to scare women into withdrawing from politics; to pull popular support away from politically active women, and to leverage gender norms to modify political outcomes.",por:"Este relatório tem como foco a desinformação de gênero, um tipo de violência virtual contra mulheres na política cujo objetivo é influenciar a cena política por meio da difamação e da depreciação de mulheres na política. A desinformação de gênero tende a se manifestar por meio de três formas: intimidação com o objetivo de forçar a deserção de mulheres da política; cerceamento ao apoio popular de mulheres politicamente ativas; e alavancagem de normas de gênero com a intenção de influenciar o cenário político.",ara:"يركّز هذا التقرير على التضليل الجندري. التضليل الجندري هو شكل من أشكال العنف على الإنترنت ضد المرأة في السياسة، هدفه التأثير على النتائج السياسية من خلال تشويه سمعة النساء في السياسة وتحقيرهن. تندرج هذه المعلومات المضللة إجمالاً ضمن ثلاث فئات: تخويف المرأة لحملها على الانسحاب من السياسة؛ سحب الدعم الشعبي بعيداً عن النساء الناشطات سياسياً، واستغلال المعايير الجندرية لتغيير النتائج السياسية.",fra:"L’objectif de ce rapport est la désinformation sexiste. La désinformation sexiste est une forme de violence en ligne contre les femmes engagées dans la vie politique (VAW-P) qui vise à influencer les résultats politiques en discréditant (et en humiliant) les femmes engagées dans la vie politique. La désinformation sexiste a tendance à se répartir en trois catégories : faire peur aux femmes pour qu’elles se retirent de la politique, détourner le soutien populaire des femmes politiquement actives et tirer parti des normes de genre pour influencer les résultats politiques."},3:{spa:"Al usar tácticas atemorizantes, los atacantes en línea usan imágenes e historias falsas, a menudo con componentes sexualizados, para menospreciar a las mujeres políticamente activas y manipular o detener su participación política. Un ataque a una mujer a menudo puede tener un efecto dominó: cuando otras mujeres, especialmente mujeres jóvenes, ven cómo se las trata en línea, pueden autocensurarse para evitar recibir el mismo trato. Según un informe reciente de Plan International, la desinformación y la información engañosa <a target='_blank' href='https://plan-international.org/publications/truth-gap'>afectan la participación política en línea de las niñas.</a>",eng:"When using scare tactics, online attackers use fake images and stories, often with sexualized components, to demean politically active women and manipulate or stop their political participation. An attack on one woman can often have a ripple effect: when other women, especially young women, see how they are treated online, they may self-censor in case they receive the same treatment. According to a recent report by Plan International, misinformation and disinformation negatively <a target='_blank' href='https://plan-international.org/publications/truth-gap'>affect girl’s online political participation</a>.",por:"Nas táticas de intimidação, os agressores se utilizam de imagens e histórias falsas, geralmente providas de conteúdo sexual, para depreciar mulheres politicamente ativas e manipular ou impedir sua participação política. As ofensas a uma mulher tendem a se propagar em onda: quando outra mulher, geralmente jovem, se depara com esse tipo de tratamento na internet, é possível que ela se autocensure para não sofrer o mesmo tratamento. Segundo um relatório recente da Plan International, informações infundadas e práticas de desinformação <a target='_blank' href='https://plan-international.org/publications/truth-gap'>afetam negativamente a participação política de mulheres na internet</a>.",ara:"عند اختيار تكتيكات التخويف، يستخدم المهاجمون الإلكترونيون صوراً وأخباراً كاذبة، تتضمّن عناصر جنسية في الغالب، بغية تحقير النساء الناشطات سياسياً والتلاعب بمشاركتهنّ السياسية أو إيقافها. فلا يخفى على أحد أنّ التهجم على امرأة واحدة يمكن أن يخلّف تداعيات مضاعفة: فعندما ترى نساء أخريات، خاصة الشابات منهن، كيف تتمّ معاملتهنّ على الشبكة الإلكترونية، قد يلجأن إلى ممارسة الرقابة الذاتية خوفاً من تلقي المعاملة نفسها. وفقاً لتقرير حديث صادر عن منظمة “الخطة الدولية“، تؤثّر المعلومات الخاطئة والمضللة سلباً على مشاركة الفتيات السياسية على الإنترنت.",fra:"En recourant à des tactiques d’intimidation, les agresseurs en ligne utilisent des images et des histoires truquées, souvent à connotation sexuelle, pour rabaisser les femmes politiquement actives et les manipuler ou les empêcher de participer à la vie politique. Une attaque contre une femme a souvent un effet d’entraînement : d’autres femmes, en particulier jeunes, qui observent la façon dont les femmes sont traitées en ligne, peuvent s’autocensurer par crainte de subir le même traitement. Selon un récent rapport de Plan International, les fausses informations et la désinformation <a target='_blank' href='https://plan-international.org/publications/truth-gap'>affectent négativement la participation politique en ligne des filles.</a>"},4:{spa:"Los atacantes en línea también utilizan normas de género arraigadas para ahuyentar el apoyo de las mujeres políticas o de los temas que están promoviendo. Estas campañas a menudo se enfocan en la definición tradicional de roles de género y “feminidad”, las cuales a veces incluyen un componente religioso, para desacreditar y socavar a las mujeres en la política.",eng:"Online attackers also use entrenched gender norms to shift support away from political women or the issues they are promoting. These campaigns often focus on a country’s traditional definition of ‘femininity’ and gender roles, sometimes including a religious component, to discredit and undermine women in politics.",por:"Os agressores também fazem uso de normas de gênero enraizadas para tolher o apoio a mulheres politicamente ativas ou às causas defendidas por elas. Essas campanhas geralmente focam no que cada país define tradicionalmente como “feminilidade” e “papéis de gênero”, às vezes com um complemento religioso, para difamar e prejudicar mulheres do campo político.",ara:"بالإضافة إلى ذلك، يستخدم المهاجمون الإلكترونيون المعايير الجندرية الراسخة لسجب الدعم الشعبي بعيداً عن النساء السياسيات أو القضايا التي يروّجن لها. تركّز هذه الحملات غالباً على التعريف التقليدي “للأنوثة“ في بلد ما، والأدوار الجندرية، مضيفةً عنصراً دينياً في بعض الأحيان، بغية تشويه سمعة النساء في السياسة والاستخفاف بهنّ.",fra:"Les agresseurs en ligne utilisent également des normes de genre bien ancrées pour décourager le soutien aux femmes politiques ou aux sujets qu’elles défendent. Ces campagnes se concentrent souvent sur la définition traditionnelle de la féminité d’un pays et sur les rôles de genre, y compris parfois une composante religieuse, pour discréditer et saper les femmes engagées dans la vie politique."},5:{spa:"Por último, los atacantes utilizan la desinformación con enfoque de género para cambiar los resultados políticos. Este tipo de campaña está dirigida tanto a mujeres como a hombres y, como consecuencia, se debilita el espacio de información y se crea un espacio significativamente menos democrático para todos los participantes. Los ataques aprovechan las normas de género para influir en las percepciones del público sobre los asuntos y las políticas que afectarían el poder de las élites políticas sin esta intervención.",eng:"Finally, attackers use gendered disinformation to change political outcomes. This type of campaign targets both women and men, weakening the information space and creating a significantly less democratic space for all participants. The attacks leverage gender norms to influence the public's perceptions of issues and policies that would negatively impact the power of the political elites without this intervention.",por:"Por fim, os agressores utilizam a desinformação de gênero para alterar o cenário político. Esse tipo de campanha é direcionado tanto a mulheres quanto homens, debilitando o espaço informacional e criando um ambiente consideravelmente menos democrático para todos os participantes. Os ataques se apoiam em normas de gênero com o objetivo de influenciar a percepção do público sobre assuntos e políticas que afetariam negativamente o poder das elites políticas.",ara:"أخيراً، يستخدم المهاجمون التضليل الجندري لتغيير النتائج السياسية. يستهدف هذا النوع من الحملات كلاً من النساء والرجال، فيضعف حيّز المعلومات، ويضيّق بدرجة كبيرة جداً المساحة الديمقراطية المتوفرة لجميع المشاركين. تستغل الهجمات المعايير الجندرية للتأثير على تصوّرات الجمهور تجاه القضايا والسياسات التي يمكن أن تؤثّر سلباً على سلطة النخب السياسية إن لم يكن من هذا التدخل.",fra:"Enfin, les agresseurs utilisent la désinformation sexiste pour influencer les résultats politiques. Ce type de campagne cible à la fois les femmes et les hommes, affaiblissant l’espace d’informations et créant un espace nettement moins démocratique pour tous les participants. Les attaques s’appuient sur les normes sexistes pour influencer la perception du public des problèmes et des politiques qui auraient autrement un impact négatif sur le pouvoir de l’élite politique."}},paragraphs_2:{6:{spa:"Aunque la desinformación con enfoque de género está muy extendida en todas las aristas del espacio en línea, tiene un alcance público mucho mayor cuando proviene de una fuente estatal. Estas incluyen instituciones y organizaciones políticas, redes de organizaciones conectadas y personas influyentes en el entorno político. Sus ataques logran llegar a un público más amplio debido a su posición y hacen que los espacios en línea sean mucho más peligrosos para las mujeres al combinar ataques personales y motivaciones políticas. Estos ataques permiten a los actores estatales socavar la libertad del espacio de información política. Esto, en última instancia, amenaza el espacio democrático y logra mayor repercusión por fuera del mundo político. De acuerdo con el informe del NDI sobre cómo abordar el género y la desinformación: “Si consideramos la permeabilidad de nuestros entornos mediáticos, esta desinformación con enfoque de género puede, a su vez, ser utilizada por actores no estatales para implementar la VAW-P en línea para sus propios fines o ser amplificada involuntariamente por profesionales de los medios y ciudadanos que no pueden discernir su falta de integridad”. También es crucial destacar que las campañas de desinformación con enfoque de género alineadas con el Estado no son un mecanismo exclusivo de los Estados autoritarios. Los países con políticas sólidas para la promoción de los derechos de las mujeres y antecedentes de democracia también son susceptibles a este tipo de ataques.",eng:"Though gendered disinformation is rampant across all corners of the online space, it reaches a much larger audience when it comes from a state-based source. These include political institutions and organizations, networks of connected organizations, and individual influencers in the political environment. Their attacks are amplified because of their position and they make online spaces much more dangerous for women by combining personal attacks and political motivations. These attacks allow state-based actors to undermine the freedom of the political information space. This ultimately threatens the democratic space and gets amplified beyond the political world. According to NDI’s report on addressing gender and disinformation, “reflecting the permeability of our media environments, this gendered disinformation can, in turn, be used either by non-state-based actors to pursue Online VAW-P to their own ends or be unintentionally amplified by media professionals and citizens who are not able to discern its lack of integrity.” It is also crucial to highlight that state-based gendered disinformation campaigns are not limited to authoritarian states. Countries with strong women’s rights policies and a history of democracy are also susceptible to these types of attacks.",por:"Embora a desinformação de gênero esteja invadindo todos os rincões da internet, a audiência é muito maior quando é uma fonte ligada ao Estado, o que inclui instituições e organizações políticas, redes de organizações interconectadas e influenciadores individuais que participam da cena política. As agressões são amplificadas por causa da posição que esses atores exercem, tornando a redoma digital muito mais perigosa para mulheres ao combinar ofensas pessoais e motivações políticas. Por meio dessas agressões, atores ligados ao Estado acabam comprometendo a liberdade do espaço político informacional, o que, em última instância, ameaça o espaço democrático e reverbera para além do mundo político. De acordo com o relatório do NDI sobre gênero e desinformação, “refletindo a permeabilidade da esfera midiática, a desinformação de gênero pode, por sua vez, ser utilizada para fins particulares por agentes de fora do Estado que queiram praticar atos de violência virtual contra mulheres na política, ou pode ser ecoada involuntariamente por profissionais da mídia e cidadãos incapazes de discernir sobre a falta de integridade do conteúdo”. Também é importante salientar que campanhas de desinformação de gênero associadas ao Estado não se restringem a nações autoritárias. Países com políticas incisivas de defesa da mulher e com um histórico democrático também estão sujeitos a esse tipo de agressão.",ara:"رغم استشراء التضليل الجندري في مختلف أنحاء الفضاء الإلكتروني، إلا أنه يبلغ مسامع جمهور أوسع بكثير عندما يكون صادراً عن جهات تابعة للدولة. ومن جملتها المؤسسات والمنظمات السياسية، وشبكات المنظمات المترابطة، والمؤثّرون الأفراد في البيئة السياسية. وتكون هجماتهم مضخّمة بفضل مراكزهم، فيجعلون المساحات الإلكترونية مكاناً أكثر خطورة بالنسبة إلى النساء، من خلال الجمع بين الهجمات الشخصية والدوافع السياسية. تتيح هذه الهجمات للجهات التابعة للدولة تقويض حرية فضاء المعلومات السياسية. فيهدّد هذا الأمر في نهاية المطاف المساحة الديمقراطية، لا بل يتوسّع حتى يتخطى حدود العالم السياسي. في الواقع، وفقاً لتقرير المعهد الديمقراطي الوطني الذي يعالج مسألة الجندر والمعلومات المضللة، “قد يُستخدم التضليل الجندري، شأنه شأن بيئاتنا الإعلامية الهشة، إما من قبل جهات غير تابعة للدولة لممارسة العنف على الإنترنت ضد المرأة في السياسة، سعياً إلى تحقيق مآربها الخاصة، أو غير غير قصد، من قبل عاملين في المجال الإعلامي ومواطنين غير قادرين على تمييز نقص هذه المعلومات، فيتضخّم أثر التضليل نتيجة لذلك.“ من بالغ الأهمية أيضاً تسليط الضوء على أنّ حملات التضليل الجندري التي تقوم بها الدول لا تقتصر فقط على الدول الاستبدادية. فحتى تلك التي تعتمد سياسات متينة لحقوق المرأة وتاريخاً عريقاً في الديمقراطية معرّضة أيضاً لهذه الأنواع من الهجمات.  ",fra:"Bien que la désinformation sexiste soit omniprésente sur Internet, elle touche un public beaucoup plus large lorsqu’elle provient d’une source officielle du gouvernement. Il s’agit notamment d’institutions et d’organisations politiques, de réseaux d’organisations connectées et d’influenceurs individuels dans l’environnement politique. Leurs attaques sont amplifiées en raison de leur position. Elles rendent les sites Internet beaucoup plus dangereux pour les femmes en combinant attaques personnelles et motivations politiques. Ces attaques permettent aux acteurs du gouvernement de porter atteinte à la liberté de l’espace d’information politique. Cela menace finalement l’espace démocratique et transcende le monde politique. Selon le rapport du NDI sur le genre et la désinformation, « reflétant la perméabilité de nos environnements médiatiques, la désinformation sexiste peut, à son tour, être utilisée soit par des acteurs non étatiques pour poursuivre la VAW-P en ligne à leurs propres fins, soit être amplifiée involontairement par les professionnels des médias et les citoyens qui ne sont pas en mesure de distinguer son manque d’intégrité. » Il est également crucial de souligner que les campagnes de désinformation sexistes de l’État ne sont pas limitées aux États autoritaires. Les pays ayant de solides politiques en matière de droits des femmes et une tradition démocratique sont également sensibles à ce type d’attaques."}}},ve={1:{eng:"<p>The objective of this study was to identify and characterize gendered disinformation campaigns on social media that happened around society-scale shocks. Each investigation was carried out in three phases:</p>",por:"<p>O objetivo deste trabalho foi identificar e caracterizar campanhas de desinformação de gênero em redes sociais ocorridas durante choques de dimensão coletiva. Cada braço da pesquisa foi conduzido em três fases:</p>",ara:"<p>هدفت هذه الدراسة إلى تحديد ووصف حملات التضليل الجندري التي تنتشر على وسائل التواصل الاجتماعي خلال فترات الصدمات الممتدة على نطاق المجتمع. أُجري كل تحقيق على ثلاث مراحل:</p>"},2:{eng:"<ol><li>Select a country-specific shock. This would provide the time and context for the content we would collect.</li><li>Collect social media content containing gendered disinformation campaigns pertaining to the shock identified.</li><li>Analyze the social media content to compile a body of evidence and then assess its convergence and impact.</li><ol>",por:"<ol><li>Seleção de uma crise específica de cada país. A partir disso, seria possível determinar o intervalo de tempo e o contexto do conteúdo a ser coletado.</li><li>Coleta de conteúdo das redes sociais contendo campanhas de desinformação de gênero relativas à crise identificada.</li><li>Análise do conteúdo das redes sociais para a compilação de um conjunto de evidências e a posterior avaliação de pontos de convergência e impactos.</li></ol>",ara:"<ol><li>اختيار صدمة خاصة ببلد محدّد. من شأن هذا أن يحدّد الزمن والسياق المتعلقين بالمحتوى الذي سنقوم بجمعه. <i><li>جمع محتوى وسائل التواصل الاجتماعي الذي يتضمّن حملات تضليل جندري ذات صلة بالصدمة التي تمّ تحديدها. <i><li>تحليل محتوى وسائل التواصل الاجتماعي لصياغة مجموعة من الأدلة ثم تقييم مدى تقاربها وتأثيرها.</li></ol>"},3:{eng:"<p>Here we explain the methods employed in these different phases of the project.</p>",por:"<p>Em seguida, apresentamos os métodos empregados nas diferentes fases do projeto.</p>",ara:"<p>نشرح في ما يلي الطرق المستخدمة في مختلف مراحل المشروع.</p>"},4:{eng:"<p>Working with in-country participants, we identified candidate society-scale shocks that had happened within the past year. Our definition of “society-scale shock” was inclusive - we asked participants to identify events that had created prolonged disruption of normal life. From this list, we then collectively identified 1-2 shocks as the focus for the investigation.</p>",por:"<p>Em colaboração com participantes locais, identificamos choques de dimensão coletiva ocorridos no ano anterior à pesquisa, sendo “dimensão coletiva” definido de forma abrangente – pedimos para que os participantes indicassem eventos que afetaram de forma duradoura a vida cotidiana. A partir dessa lista, todos os participantes selecionaram um ou dois eventos como foco da pesquisa.</p>",ara:"<p>لدى العمل مع مشاركين من الدولتين المعنيتين، قمنا بتحديد مجموعة من الصدمات التي حدثت خلال العام الماضي والتي خلّفت تأثيرها على المجتمع برمّته. فاعتمدنا تعريفاً شمولياً “للصدمة على نطاق المجتمع“، وطلبنا من المشاركين تحديد أحداث تسبّبت باختلال مطوّل في مسار الحياة الطبيعية. انطلاقاً من هذه القائمة، حدّدنا، بصورة مشتركة، صدمةً أو اثنتين لتكونا محور التحقيق. </p>"},5:{eng:"<p>The year timeframe was informed by the fact that it can often be difficult to collect social media content further back than a year.</p>",por:"<p>O intervalo de um ano se deve ao fato de ser geralmente difícil coletar conteúdos postados há mais de um ano em redes sociais.</p>",ara:"<p>حصرنا الفترة الزمنية للتحقيق بسنة واحدة، خاصةً وأنه قد يكون من الصعب في معظم الأحيان جمع مواد وسائل التواصل الاجتماعي لفترة تفوق السنة.</p>"},6:{eng:"<p>In this phase, we had to solve a challenging data collection problem. Specifically, we needed a way to find the specific social media accounts and posts that had been weaponized within a vast sea of social media content.</p>",por:"<p>Nessa fase, tivemos que superar um sério obstáculo da coleta de dados. Precisávamos encontrar uma maneira de identificar as contas e as postagens individuais que foram transformadas em instrumentos de guerra em meio à vastidão de conteúdo das redes sociais.</p>",ara:"<p>في هذه المرحلة، كان علينا أن نحلّ مشكلةً عسيرةً تتعلق بجمع البيانات. تحديداً، كان علينا أن نجد طريقةً لإيجاد الحسابات والتدوينات التي تمّ تجنيدها على وسائل التواصل الاجتماعي، في خضمّ بحر شائع من مواد التواصل الاجتماعي.</p>"},7:{eng:"<p>While the rise of AI-powered systems might suggest this a promising avenue for detecting this kind of content at scale, the reality is that automated methods - whether standard keyword-based natural language processing techniques or cutting edge intelligent systems - are presently unable to perform this task. Disinformation identification is an intensely culturally-grounded and nuanced activity: the facts are that, to find, engage with, and understand it, we depend on people who have a deep working knowledge of the culture. The approach we use here involves combining their knowledge and efforts with computational methods. We designed this study with this guiding principle in mind.</p>",por:"<p>Por mais que o desenvolvimento de sistemas alimentados por IA se apresente como uma via promissora para a detecção em larga escala desse tipo de conteúdo, a verdade é que os atuais métodos automatizados – sejam técnicas básicas de processamento de linguagem natural baseadas em palavras-chave ou sistemas inteligentes de ponta – são incapazes de realizar essas tarefas. Identificar conteúdos desinformativos é uma atividade altamente alicerçada na cultura e cheia de sutilezas: o fato é que, para detectar, compreender e interagir com o conteúdo, dependemos de pessoas que tenham um profundo conhecimento sobre a cultura local. Nossa abordagem envolveu a combinação entre o conhecimento e o esforço dos participantes e métodos computacionais. Esse é o fio condutor da pesquisa.</p>",ara:"<p>صحيحٌ أنّ تطور الأنظمة العاملة بالذكاء الاصطناعي قد يكون طريقةً واعدةً للتعرف على هذا النوع من المحتوى على نطاق واسع، لكن يتعذّر على الطرق المؤتمتة القيام بهذه المهمة اليوم، أكانت تقنيات معالجة اللغات الطبيعية القياسية القائمة على الكلمات الرئيسية أم أنظمة ذكية حديثة أخرى. فلا يخفى على أحد أنّ تحديد المعلومات المضللة نشاط دقيق يرتكز، بشكل مكثف، على أسس ثقافية عميقة: بعبارة أخرى، لإيجادها، والتفاعل معها، وفهمها، نعتمد على الأشخاص الذين يتمتعون بإلمام عملي عميق بالثقافة. لذا، تشمل المقاربة التي نستخدمها هنا الجمع بين معارفهم من جهة والاستفادة من آليات الكمبيوتر من جهة أخرى. من هذا المنطلق، صمّمنا هذه الدراسة مع مراعاة هذا المبدأ التوجيهي. </p>"},8:{eng:"<p>The remainder of this subsection is focused on explaining the approach we took to gather a dataset of social media data that provided a representative picture of disinformation campaigns within a particular national-cultural context. At a high-level, this approach involved highly-interactive work with dedicated groups of in-country participants in each of our case-study countries. Data collection consisted of the following steps:</p>",por:"<p>Ao longo desta subseção, tratamos em mais detalhes sobre a abordagem utilizada para que fosse reunida uma quantidade de dados das redes sociais suficientemente representativa das campanhas de desinformação dentro de cada contexto nacional. No geral, essa abordagem envolveu muito trabalho interativo junto a grupos dedicados de participantes locais em cada um dos países selecionados como estudo de caso. A coleta de dados abarcou as seguintes etapas:</p>",ara:"<p>يركّز الجزء المتبقي من هذا القسم الفرعي على شرح المقاربة التي اتّخذناها لتركيب مجموعة من بيانات وسائل التواصل الاجتماعي، وبالتحديد تلك التي تقدّم لمحةً تمثيليةً عن حملات التضليل في بيئة ثقافية وطنية محدّدة. شملت هذه المقاربة، على مستوى عال، نشاطاً على قدر كبير من التفاعلية مع مجموعات مخصّصة من المشاركين المحليين في كلّ من الدولتين اللتين شكلتا محور الدراسة. فشملت عمليات جمع البيانات الخطوات التالية:</p>"},9:{eng:"<ol><li>Orientation workshop: we developed a shared understanding of gendered disinformation, particularly as the participants experienced and observed it in their own media ecosystem.</li><li>Shock timeline workshop: participants dissected the society-scale shock into a series of upsetting events that triggered counter information campaigns by political groups.</li><li>Political network mapping workshop: participants identified social media actors and personalities with political influence. Attention was given to accounts and channels that were known to share disinformation.</li><li>Lexicon building workshop: participants built a list of words that were strongly related to (1) the shock selected for the study, (2) the narratives identified in step #1.</li><li>Automated data collection: using the accounts from step #3 and the lexicon from step #4, we collected social media data that was enriched for gendered disinformation campaign content.</li><li>Data annotation: participants reviewed each post obtained in step #5 and manually coded its disinformation properties - this included flagging those posts which, in fact, were not disinformation.</li></ol>",por:"<ol><li>Workshop de orientação: desenvolvemos uma compreensão partilhada do significado de desinformação de gênero, especialmente conforme os participantes vivenciavam e observavam exemplos na própria redoma midiática.<i><li>Workshop de elaboração de uma cronologia do choque: os participantes dissecaram o choque de dimensão coletiva em uma série de eventos que desencadearam campanhas de contrainformação promovidas por grupos políticos.<i><li>Workshop de mapeamento da rede política: os participantes identificaram atores e personalidades politicamente influentes. Foi dado enfoque às contas e aos canais conhecidos por propagar desinformação.<i><li>Workshop de construção de um léxico: os participantes criaram uma lista de vocábulos intimamente ligados: (1) ao choque selecionado para a pesquisa; (2) às narrativas identificadas na etapa #1.<i><li>Coleta automatizada de dados: a partir das contas da etapa #3 e do léxico da etapa #4, foram coletados dados das redes sociais enriquecidos para conteúdo de campanhas de desinformação de gênero.<i><li>Rotulagem dos dados: os participantes revisaram cada postagem obtida na etapa #5 e codificaram manualmente as propriedades de desinformação contidas – o que incluía a sinalização das postagens que não se enquadravam como desinformação.</li></ol>",ara:"<ol><li>ورشة عمل توجيهية: قمنا بتطوير فهم مشترك للتضليل الجندري، خاصةً في ظل اختبار المشاركين لهذه العملية وملاحظتهم لها في بيئتهم الإعلامية الخاصة. </li><li>ورشة عمل حول التسلسل الزمني للصدمة: في هذه الورشة، فكّك المشاركون الصدمات المنتشرة على نطاق المجتمع إلى سلسلة من الأحداث المزعجة التي حفّزت المجموعات السياسية على شنّ الحملات الإعلامية المضادة. </li><li>ورشة عمل لمسح الشبكات السياسية: حدّد المشاركون الجهات الفاعلة في وسائل التواصل الاجتماعي والشخصيات ذات النفوذ السياسي. وقد اهتمّت هذه الورشة بالحسابات والقنوات التي يُعرف عنها نشر المعلومات المضللة. </li><li>ورشة عمل لإعداد المعجم: أعدّ المشاركون قائمة بالكلمات الوثيقة الصلة (1) بالصدمة محور الدراسة، (2) والسرديات التي تمّ تحديدها في الخطوة 1. </li><li>جمع البيانات بطريقة مؤتمتة: استناداً إلى الحسابات التي تمّ تحديدها في الخطوة 3، والمعجم في الخطوة 4، قمنا بجمع بيانات وسائل التواصل الاجتماعي، بعد مرحلة إثرائها، لغرض تحديد محتوى حملات التضليل الجندري. </li><li>إعداد البيانات وإضافة التعليقات التوضيحية عليها: راجع المشاركون كل تدوينة تمّ تحديدها في الخطوة 5، ثم حدّدوا خصائص التضليل المنوطة بها ورمّزوها يدوياً. شمل ذلك وضع علامة على التدوينات التي لم تتضمّن معلومات مضللة.</li></ol>"},10:{eng:"<p>By the end of step #6, we had produced an annotated dataset of social media posts in which specific features had been identified for each post, allowing analysis in phase 3. Before discussing phase 3, we provide below details about several of the steps above.</p>",por:"<p>Ao final da etapa #6, havíamos constituído uma base de dados rotulados com as postagens das redes sociais, com elementos específicos indicados para cada postagem, o que possibilitou a análise posterior na fase 3. Antes de tratar sobre a fase 3, vamos descrever mais detalhadamente as etapas citadas acima.</p>",ara:"<p>بنهاية الخطوة 6، أصبحت لدينا مجموعة من البيانات المزوّدة بتعليقات توضيحية عن تدوينات وسائل التواصل الاجتماعي، مع تحديد الخاصيات المتعلقة بكل تدوينة، مما أتاح إجراء التحليل في المرحلة 3. لكن قبل مناقشة هذه المرحلة، لا بدّ من التوسّع في بعض الخطوات الواردة أعلاه.</p>"},11:{eng:"<p>Information comes in different flavours. Participants were asked to go on social media and find examples for each type – ref. Throughout the exercise, we provided guidance on how to effectively use the search tool of each social media platform. During this workshop, we collectively identified narratives (both positive and negative) that are established within the culture.</p>",por:"<p>A informação se manifesta de diferentes maneiras. Os participantes foram instruídos a acessar as redes sociais e pesquisar exemplos para cada tipo de informação [missing ref]. Ao longo do exercício, eles receberam treinamento para aprender a usar, de forma efetiva, as ferramentas de busca de cada plataforma. Durante o workshop, foram identificadas, coletivamente, narrativas (positivas e negativas) culturalmente enraizadas.</p>",ara:"<p>تتوفّر المعلومات بأشكال مختلفة. لذلك، طُلب من المشاركين زيارة وسائل التواصل الاجتماعي وإيجاد أمثلة عن كل نوع. خلال هذا التمرين، وجّهنا المشاركين إلى كيفية استخدام أداة البحث بشكل فعال على كلٍّ من منصات وسائل التواصل الاجتماعي. أثناء ورشة العمل، حدّدنا، بشكل جماعي، السرديات المتشابهة (الإيجابية منها والسلبية) الراسخة ضمن الثقافة.</p>"},12:{eng:"<p>Moments of shocks are transient states following an upsetting event – health pandemic, conflict & violence, natural disaster. They shape or instigate new narratives, some of which are disinformative. Participants were tasked with laying out the arborescence of the shock down to the events known to have triggered a counter media response from political groups.</p>",por:"<p>Períodos de choque são estados transitórios decorrentes de eventos perturbadores – pandemias, situações de conflito/violência, desastres naturais. Eles moldam ou fomentam novas narrativas, algumas desinformativas. Os participantes receberam a tarefa de traçar a arborescência do choque até os eventos notabilizados por desencadear postagens contrárias propagadas por grupos políticos.</p>",ara:"<p>لحظات الصدمات هي حالات عابرة تلي حدثاً مزعجاً، كجائحة صحية، أو نزاع وعنف، أو كارثة طبيعية. فتحفّز على قيام سرديات جديدة أو تؤثّر عليها، لكن من هذه السرديات ما يحتوي على معلومات مضللة. في هذا الإطار طُلب من المشاركين رسم شجرة الصدمة للتوسّع، بالتفصيل، في الأحداث المعروف أنها حفّزت بعض المجموعات السياسية على إطلاق آلية إعلامية مضادة.</p>"},13:{eng:"<p>Participants were instructed to go on social media and identify political Twitter accounts, Youtube channels, Telegram, and Facebook public pages – with a focus on accounts probable of disseminating mis-, dis-, strongly opinionated information. As was flagged in earlier sections, many accounts and individuals have political impact without being explicitly political. For example, musicians can advocate for political positions - making them political actors. To this end, we instructed participants to consider three kinds accounts:</p>",por:"<p>Os participantes foram instruídos a acessar as redes sociais e a identificar contas do Twitter, canais do Youtube e perfis públicos do Telegram e do Facebook ligados à política – com ênfase em contas propensas à disseminação de informações infundadas, práticas de desinformação e postagens de forte teor opinativo. Como sinalizado em outras seções, muitas contas e muitos indivíduos causam impacto político sem que sejam explicitamente políticos. Por exemplo, músicos podem defender determinadas posições políticas, se transformando em atores políticos. Com isso em mente, os participantes foram orientados a considerar três tipos de contas</p>",ara:"<p>طُلب من المشاركين زيارة صفحات وسائل التواصل الاجتماعي، فتحديد حسابات سياسية على تويتر، ويوتيوب، وتيليغرام، والصفحات العامة على فايسبوك، مع التركيز على الحسابات المرجّح أن تنشر معلومات خاطئة أو مضللة أو تعكس تعنّتاً شديداً. كما أشير إليه في أقسام سابقة، قد يكون للكثير من الحسابات والأشخاص تأثير سياسي من دون أن يكونوا متمرّسين في السياسة بشكل صريح. على سبيل المثال، يمكن للموسيقيين أن يدافعوا عن مواقف سياسية، مما يجعلهم لاعبين سياسيين. لذا، طلبنا من المشاركين مراعاة ثلاثة أنواع من الحسابات:</p>"},14:{eng:"<p>When identifying accounts, participants included additional information such as political affiliation and level of partisanship. They also focused on accounts with a wide following.</p>",por:"<p>Durante a identificação das contas, os participantes adicionaram informações extras, como filiação política e grau de partidarismo, além de focarem em contas com muitos seguidores.</p>",ara:"<p>عند تحديد الحسابات، أدرج المشاركون معلومات إضافية مثل الانتماء السياسي ومستوى التحزّب. كما ركّزوا على الحسابات ذات العدد الكبير من المتابعين.</p>"},15:{eng:"<p>The lexicon was built with two parts. The first part contained a list of popular idioms, keywords or expressions that characterized the events shortlisted during step #2. The second part contained a list of words strongly associated with each narrative identified during the step #1 of this phase, particularly terms linked to cultural norms about gender. During the construction of this second component, participants were encouraged to include any and all derogatory language.</p>",por:"<p>O léxico foi subdividido em duas partes: uma lista contendo idiomatismos, palavras-chave ou expressões de amplo conhecimento que caracterizassem os eventos pré-selecionados durante a etapa # 2; e uma segunda lista com palavras intimamente ligadas a cada narrativa identificada durante a etapa #1, particularmente termos associados a normas culturais relativas a gênero. Durante a elaboração desta última, os participantes foram encorajados a inserir toda e qualquer linguagem depreciativa.</p>",ara:"<p>تمّ إعداد معجم بجزءين. تضمّن الجزء الأول قائمةً بالتعابير والكلمات الرئيسية الرائجة التي ميّزت الأحداث المندرجة على القائمة القصيرة في الخطوة 2. أما الجزء الثاني، فتضمّن قائمةً بالكلمات المقترنة اقتراناً شديداً بكل سردية تمّ تحديدها في الخطوة 1 من هذه المرحلة، خاصةً المصطلحات المتعلقة بالمعايير الثقافية عن الجندر. خلال بناء هذا المكوّن الثاني، تمّ تشجيع المشاركين على إدراج أي وكل نوع من الكلمات التحقيرية التي يجدونها.</p>"},16:{eng:"<p>To collect social media posts, we used the official interface provided by each platform and a custom browser-based scraper to go beyond the imposed limits on the number of requests.</p>",por:"<p>Para coletar as postagens das redes sociais, utilizamos a interface oficial fornecida por cada plataforma e uma ferramenta para raspagem de dados baseada em navegador adaptada para que o número máximo de solicitações imposto pudesse ser excedido.</p>",ara:"<p>لجمع تدوينات وسائل التواصل الاجتماعي، استندنا إلى الواجهة الرسمية لكل منصة، فضلاً عن مكشطة مرتكزة على المتصفح لتجاوز الحدود المفروضة على عدد الطلبات. </p>"},17:{eng:"<p>Hundreds of thousands of social media posts were expected to be collected and it takes on average 15 seconds for a human to review a post. We needed to bring this number down to a maximum of 18 hours or 4,320 posts.</p>",por:"<p>A expectativa era coletar centenas de milhares de postagens das redes sociais, e cada postagem leva, em média, 15 segundos para ser revisada por um humano. Foi necessário limitar o montante em 18 horas, ou 4.320 postagens.</p>",ara:"<p>كان من المتوقع جمع مئات آلاف التدوينات على وسائل التواصل الاجتماعي، مع العلم أنّ الإنسان يحتاج إلى 15 ثانية تقريباً لمراجعة تدوينة واحدة. فكان علينا أن نخفّض هذا الرقم إلى 18 ساعة كحدّ أقصى أو 4320 تدوينة.</p>"},18:{eng:"<p>Here are the heuristics used to sift the dataset for posts of interest:</p>",por:"<p>Esta foi a base heurística utilizada na filtragem das postagens de interesse no banco de dados:</p>",ara:"<p>في ما يلي آليات الاستدلال المستخدمة لغربلة مجموعة البيانات من أجل الوصول إلى التدوينات المهمّة بالنسبة إلى هذه الدراسة.</p>"},19:{eng:"<ol><li>Temporal: We only retained documents that were posted within the 3 weeks following each upsetting event identified during step #2.</li><li>Lexical: We only retained documents that contained at least one word from the lexicon developed during step #4.</li><li>Engagement: Low engagement is a proxy for low influence. Posts that received low engagement were ignored.</li></ol>",por:"<ol><li>Escopo temporal: Foram mantidos apenas os documentos postados até três semanas após cada evento perturbador identificado na etapa #2.<li>Escopo lexical: Foram mantidos apenas os documentos que continham, no mínimo, um vocábulo presente no léxico desenvolvido na etapa #4.<li>Engajamento: Baixo engajamento é um indicador de influência limitada. Postagens com baixo engajamento foram ignoradas.</li></ol>",ara:"<ol><li>المقياس الزمني: لم نحتفظ إلا بالوثائق التي نُشرت خلال الأسابيع الثلاثة التي تلت الأحداث المزعجة التي تمّ تحديدها في الخطوة 2. <li>المقياس العجمي: لم نحتفظ إلا بالوثائق التي تضمّنت كلمةً واحدةً على الأقل من المعجم التي تمّ إعداده في الخطوة 4. <li>التفاعل: التفاعل المتدني مرادف للنفوذ المتدني. لذا تمّ تجاهل التدوينات التي لم يتمّ التفاعل معها كثيراً.</li></ol>"},20:{eng:"<p>Annotation of the social media posts was done through a web app and was conducted in chunks. A sample of the posts would be sent to our participants and based on their response, the filters were adjusted to increase their precision. Here are the tuning techniques that were employed.</p>",por:"<p>A rotulagem das postagens das redes sociais foi realizada por meio de um web app e conduzida em blocos. Uma amostra das postagens era enviada aos participantes, e, com base nas observações de cada participante, os filtros eram ajustados para que a precisão fosse ampliada. Estas foram as técnicas de tuning empregadas:</p>",ara:"<p>تمّت إضافة التعليقات التوضيحية على تدوينات وسائل التواصل الاجتماعي من خلال تطبيق على الويب، وتمّ القيام بذلك مجموعةً تلو الأخرى. فكنا نرسل نموذجاً عن التدوينات إلى مشاركينا، وبناءً على إجاباتهم، يتمّ تعديل أدوات التصفية لزيادة مستوى الدقة. في ما يلي تقنيات الضبط والتنقيح التي تمّ استخدامها: </p>"},21:{eng:"<ol><li>Lexicon Pruning: Words that were rarely found in posts of interest and often found in benign posts were removed.</li><li>Lexicon Expansion: TF-IDF applied to posts of interest against benign posts was used to discover important words. Our participants would then decide if they should be added to our lexicon.</li><li>Events: If most or all posts published around an event turned out to be benign, the date window would be adjusted or the event would be removed. If an event generated a lot of posts of interest, we looked at when they spiked and adjusted the date window accordingly.</li><li>Artificial Intelligence: To uncover posts that deserved to be reviewed but did not satisfy our temporal or lexical filters, we used a language classification model. However, it needed to be trained on a sizable collection of posts of interest. Once enough had been gathered, we obtained the best results with a DistilBERT multi-lingual model</li></ol>",por:"<ol><li>Poda Lexical: Palavras raramente encontradas em postagens de interesse e regularmente presentes em postagens favoráveis foram removidas.</li><li>Ampliação Lexical: Aplicação do TF-IDF em postagens de interesse em comparação a postagens favoráveis para detectar palavras importantes, que eram posteriormente incluídas no léxico caso fossem aprovadas pelos participantes da pesquisa.</li><li>Eventos: Se a maioria das ou todas as postagens relativas a um evento se revelassem favoráveis, o intervalo de tempo era ajustado ou o evento era removido. Se um evento gerasse muitas postagens de interesse, identificávamos o pico e ajustávamos o intervalo de tempo de acordo.</li><li>Inteligência Artificial: Para detectar postagens que deveriam ser revisadas, mas que não satisfaziam os filtros temporal e lexical, utilizamos um modelo de classificação linguística, que, não obstante, precisava ser treinado a partir de uma quantidade significativa de postagens de interesse. Uma vez reunido o número suficiente de postagens, obtivemos os resultados mais satisfatórios utilizando um modelo multilíngue DistilBERT.</li></ol>",ara:"<ol><li>تقليم المعجم: تمّ التخلص من الكلمات التي نادراً ما وردت في التدوينات ذات الاهتمام، لكنها تكرّرت كثيراً في التدوينات الحميدة. </li><li>توسيع المعجم: تمّ تطبيق معامل “تي إف- آي دي إف“ على التدوينات ذات الاهتمام ومقارنتها بالتدوينات الحميدة لاكتشاف الكلمات المهمّة. بعد ذلك، تركنا لمشاركينا تقرير إذا ما كان ينبغي إضافة هذه الكلمات إلى معجمنا. </li><li>الأحداث: إذا تبيّن أنّ معظم أو كل التدوينات التي نُشرت بشأن حدث ما هي حميدة، يُعدَّل هامش التاريخ أو يتمّ الاستغناء عن الحدث برمّته. فإذا ولّد حدث ما الكثير من التدوينات ذات الاهتمام، نتحقّق من التاريخ الذي شهدت فيه التدوينات ارتفاعاً حاداً ونعدّل هامش التاريخ بناءً على ذلك. </li><li>الذكاء الاصطناعي: لتحديد التدوينات التي تستحق أن تُراجع لكن التي لا تستوفي شروط مصفاة المقياس الزمني أو المعجمي، استخدمنا نموذجاً لتصنيف اللغة. لكن كان لا بدّ من تدريبه على التعامل مع هذه المجموعة الكبيرة من التدوينات ذات الاهتمام. ما إن تمّ جمع ما يكفي من البيانات، حصلنا على أفضل النتائج من خلال نموذج “DistilBERT“ المتعدد اللغات. </li></ol>"},22:{eng:"<p>We repeated chunk by chunk until the participants reviewed all the posts. Through this robust filtering process, only documents that contained a gendered narrative, were identified as disinformation by an in-country participant, and came from a political elite were included in the dataset sent for analysis.</p>",por:"<p>Repetimos a operação bloco por bloco até que todas as postagens fossem revisadas pelos participantes. Por meio desse processo de filtragem rigoroso, apenas os documentos contendo narrativas de gênero eram classificados como desinformação por um participante local e, caso propagados por um membro da elite política, incluídos na base de dados a ser submetida à análise.</p>",ara:"<p>كرّرنا هذه العملية مجموعةً تلو الأخرى إلى أن تمكّن المشاركون من مراجعة التدوينات كافة. من خلال الغربلة بهذا الشكل المحكم، لم تتضمّن مجموعة البيانات التي خضعت للتحليل إلا الوثائق التي تضمّنت سرديةً قائمة على الجندر، أو التي صنّفها أحد المشاركين المحليين كمعلومات مضللة، أو التي صدرت من قبل النخبة السياسية.</p>"},23:{eng:"<p>Once all the social media posts had been reviewed by the participants, we conducted analysis on 4 fronts.</p>",por:"<p>Após os participantes terem revisado todas as postagens das redes sociais, conduzimos quatro frentes analíticas.</p>",ara:"<p>بعد أن راجع المشاركون كافة تدوينات وسائل التواصل الاجتماعي، أجرينا التحليل على أربعة أصعدة.</p>"},24:{eng:"<ol><li>Belligerents: We looked at who were behind the accounts that published disinformation – their political affiliation, their partisanship.</li><li>Salient narratives: The participants reviewed all the posts that had been flagged as containing gendered disinformation and categorized them by narrative.</li><li>Engagement: Disaggregated by social media platforms, we looked at which posts received the highest engagement.</li><li>Coordination: Here we investigated the extent to which different accounts demonstrated a propensity for each of the narratives. To do so, we assessed whether two accounts published a message about the same topic within a 15 day interval.</li></ol>",por:"<ol><li>Beligerantes: Identificamos quem estava por trás das contas que publicaram desinformação – suas filiações e inclinações políticas.</li><li>Narrativas relevantes: Os participantes revisaram todas as postagens sinalizadas por conter desinformação de gênero e classificaram as postagens por narrativa.</li><li>Engajamento: Desagregando por plataforma, identificamos quais postagens despertaram mais engajamento.</li><li>Coesão: Investigamos em que medida contas distintas demonstraram inclinação para cada uma das narrativas. Para tal, avaliamos se duas contas publicaram mensagens sobre um mesmo tópico dentro de um intervalo de quinze dias.</li></ol>",ara:"<ol><li>الخصوم: تمعنّا في أصحاب الحسابات التي نشرت المعلومات المضللة، وتحديداً في انتمائهم السياسي، والجهة التي يتحزّبون لها. </li><li>السرديات البارزة: راجع المشاركون كافة التدوينات التي تمّ وضع علامة عليها كونها تتضمّن معلومات مضللة جندرياً، ثم صنّفوها وفقاً للسردية. </li><li>التفاعل: تمعنّا في التدوينات التي لقيت القدر الأكبر من التفاعل، بعد تصنيفها وفقاً لمنصات وسائل التواصل الاجتماعي.</li><li>التنسيق: درسنا هنا إلى أي مدى أظهرت الحسابات المختلفة ميلاً إلى كل من السرديات. للقيام بذلك، قمنا بتقييم ما إذا كان حسابان قد نشرا رسالةً عن الموضوع نفسه خلال فترة 15 يوماً.</li></ol>"},title:{eng:"Methods",por:"Metodologia",ara:"الطرق"},subtitle_1:{eng:"Phase 1: Selecting a country-specific shock",por:"Fase 1: Seleção de uma crise específica de cada país",ara:"المرحلة 1: اختيار صدمة خاصة ببلد محدّد"},subtitle_2:{eng:"Phase 2: Collecting social media content",por:"Fase 2: Coleta de conteúdo das redes sociais",ara:"المرحلة 2: جمع محتوى وسائل التواصل الاجتماعي"},subsubtitle_1:{eng:"Step #1 - Orientation",por:"Etapa #1 – Orientação",ara:"الخطوة 1- التوجيه"},subsubtitle_2:{eng:"Step #2 - Timeline",por:"Etapa #2 - Cronologia",ara:"الخطوة 2- التسلسل الزمني"},subsubtitle_3:{eng:"​​Step #3 - Political network mapping",por:"Etapa #3 – Mapeamento da rede política",ara:"الخطوة 3- مسح الشبكات السياسية"},subsubtitle_4:{eng:"Step #4 - Lexicon building",por:"Etapa #4 – Construção de um Léxico",ara:"الخطوة 4- إعداد معجم"},subsubtitle_5:{eng:"Step #5 - Data Collection",por:"Etapa #5 – Coleta de Dados",ara:"الخطوة 5- جمع البيانات"},subsubtitle_6:{eng:"Step #6 - Content Annotation",por:"Etapa #6 – Rotulagem do Conteúdo",ara:"الخطوة 6- إضافة التعليقات التوضيحية على المحتوى"},subtitle_3:{eng:"Phase 3: Analyzing social media content",por:"Fase 3: Análise do conteúdo das redes sociais",ara:"المرحلة 3: تحليل محتوى وسائل التواصل الاجتماعي"}},ye={brazil:{title:{eng:"Brazil",por:"Brasil",ara:"البرازيل"},partners:{eng:"<p>For this case study, we partnered with the <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a>. We seek to establish the prevalence and nature of disinformation campaigns throughout the COVID pandemic.</p>",por:"<p>Nosso parceiro local é o <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a>, um centro independente de pesquisa dedicado ao fomento do debate acadêmico em temas relacionados ao direito e à tecnologia, sobretudo às políticas no campo da internet.</p>",ara:"<p>شريكنا في البرازيل هو <a target='_blank' href='https://www.internetlab.org.br/en/'>InternetLab</a> مركز أبحاث مستقل يهدف إلى تعزيز النقاش الأكاديمي حول قضايا متعلقة بالقانون والتكنولوجيا، خاصةً سياسة الإنترنت. </p>"}},lebanon:{title:{eng:"Lebanon",por:"Líbano",ara:"لبنان"},partners:{eng:"<p>For this case study, we partnered with the <a target='_blank' href='https://www.skeyesmedia.org/en/Home'>Skeyes Center for Media and Cultural Freedom</a> and <a target='_blank' href='https://www.abaadmena.org'>ABAAD - Resource Centre for Gender Equality</a>. We seek to establish the prevalence and nature of disinformation campaigns throughout the economic and political crisis.</p>",por:"<p>Trabalhamos com diversas organizações locais, dentre as quais o <a target='_blank' href='https://www.skeyesmedia.org/en/Home'>Skeyes Center for Media and Cultural Freedom</a>, o <a target='_blank' href='https://www.abaadmena.org'>ABAAD - Resource Centre for Gender Equality</a> e o National Democratic Institute.</p>",ara:"<p>عملنا مع عدة منظمات محلية مثل مركز سمير قصير للحريات الإعلامية والثقافية (سكايز)، ومركز الموارد للمساواة بين الجنسين- أبعاد، والمعهد الديمقراطي الوطني.</p>"}},searchbar_1:{eng:"<p>This search bar allows you to find social media posts based on space-separated keywords (click for full results). Some keywords have been removed if they either had low or high occurrence.</p>",por:"<p>Utilizando a barra de pesquisa abaixo, é possível encontrar postagens de redes sociais com base em palavras-chave separadas por espaços (clique para obter todos os resultados). Algumas palavras-chave com poucas ou muitas ocorrências foram descartadas.</p>",ara:"<p>يتيح شريط البحث هذا إيجاد تدوينات وسائل التواصل الاجتماعي بناءً على الكلمات الرئيسية المفصولة بمسافات (انقر للاطلاع على النتائج كاملة). تمّ حذف بعض الكلمات الرئيسية إذا كانت قليلة أو كثيرة الاستعمال.</p>"},searchbar_2:{eng:"<p style='font-style: italic;'>Some posts might have been taken down by the author or the platform since this data collection activity.</p>",por:"<p style='font-style: italic;'>É possível que algumas postagens tenham sido removidas desde o início da coleta de dados.</p>",ara:"<p style='font-style: italic;'>من المحتمل أن تكون بعض التدوينات قد حُذفت منذ أن تمّ جمع هذه البيانات.</p>"},engagement_1:{eng:"<p>Post that did not meet the minimum engagement thresholds were dismissed.</p>",por:"<p>A postagem que não atendeu aos limites mínimos de engajamento foi dispensada.</p>",ara:"<p>تم رفض المشاركة التي لا تلبي الحد الأدنى من المشاركة.</p>"},engagement_2:{eng:"<p>Each post is represented as a square. The color intensity is proportional to the level of engagement.</p>",por:"<p>Cada postagem está representada por um quadrado. A intensidade da cor reflete o nível de engajamento.</p>",ara:"<p>كانت كل تدوينة ممثّلةً على شكل مربّع. وقد عكست كثافة ألوان المربّعات مستوى التفاعل الذي حظيت به كل تدوينة.</p>"},coordination:{eng:"<p>Let's now look at coordination for each of these categories. To do so, we will look at our social media posts using a graph representation.</p>",por:"<p>Agora vamos ver as conexões em cada uma das categorias, ilustradas por meio de uma representação esquemática das postagens coletadas das redes sociais.</p>",ara:"<p>فلنتمعن الآن في مستوى التنسيق بالنسبة إلى كل من هذه الفئات. للقيام بذلك، سندرس تدوينات وسائل التواصل الاجتماعي التي اخترناها استناداً إلى مخططات بيانية.</p>"},subtitle_1:{eng:"Political Network",por:"Rede Política",ara:"الشبكة السياسية"},subtitle_2:{eng:"Dataset",por:"Base de Dados",ara:"مجموعة البيانات"},subtitle_3:{eng:"Filtering",por:"Filtrando",ara:"الفلتره"},subsubtitle_1:{eng:"Lexicon",por:"Léxico",ara:"المعجم"},subsubtitle_2:{eng:"Events",por:"Eventos",ara:"الأحداث"},subsubtitle_3:{eng:"Engagement",por:"Engajamento",ara:"التفاعل"},subtitle_4:{eng:"Results",por:"Resultados",ara:"النتائج"},subsubtitle_4:{eng:"Belligerents",por:"Beligerantes",ara:"الخصوم"},subsubtitle_5:{eng:"Salient Narratives",por:"Narrativas Relevantes",ara:"السرديات البارزة"},subsubtitle_6:{eng:"Engagement",por:"Engajamento",ara:"التفاعل"},subsubtitle_7:{eng:"Coordination",por:"Coesão",ara:"التنسيق"}},xe={title:{eng:"Discussion",por:"Debate",ara:"مناقشة"},paragraphs_1:{1:{eng:"In this study, we investigated the presence of state-based gendered disinformation during periods of societal shock. Lebanon and Brazil were selected as our two case studies. We partnered with in-country civil society organizations and provided training on how to identify disinformation and gendered narratives. Hundreds of thousands of posts were collected from the social media pages of political insiders. Textual, temporal and engagement filtering broached some thousands of posts to be further analyzed. These were distributed to in-country participants for final review. Ultimately, only a few dozen posts were found to support our thesis.",por:"O mote desta pesquisa foi examinar a presença de práticas de desinformação de gênero associadas ao Estado durante choques de dimensão coletiva. O Líbano e o Brasil foram os dois países escolhidos como estudos de caso. Firmamos parcerias com organizações da sociedade civil locais e orientamos como identificar narrativas relativas a gênero e desinformação. Centenas de milhares de postagens de integrantes do círculo político foram coletadas nas redes sociais, e milhares de postagens foram selecionadas com base em linguagem, data de publicação e nível de engajamento e posteriormente distribuídas aos participantes locais para análise. Ao fim, somente algumas poucas dezenas de postagens confirmaram nossas expectativas.",ara:"تحقّقنا في إطار هذه الدراسة في مدى انتشار المعلومات المضللة جندرياً التي تنشرها جهات تابعة للدولة في فترات الصدمات المجتمعية. وقد اخترنا لبنان والبرازيل كدراستي حالة. نسجنا شراكةً مع منظمات مجتمع مدني محلية، ودرّبناها على كيفية تحديد المعلومات المضللة والسرديات الجندرية. تمّ جمع مئات الآلاف من التدوينات من صفحات مواقع التواصل الاجتماعي لدوائر سياسية مطّلعة، ثم تطبيق أدوات نصية، زمنية، وأخرى لقياس مستوى التفاعل بغية غربلة آلاف التدوينات فإخضاعها لمزيد من التحليل. بعد ذلك، تمّ توزيع المجموعة النهائية من التدوينات على المشاركين المحليين لمراجعتها بشكل نهائي. في نهاية الأمر، تبيّن أنّ بضع عشرات من التدوينات فقط تدعم فرضيتنا."},2:{eng:"At the highest level, there are two possible explanations for our findings. One explanation is that active state-based gendered disinformation did occur and the methodology or its implementation failed to detect it. The alternative explanation is that, given the definitions and parameters of the study, the phenomenon did not occur.",por:"No geral, existem duas possíveis explicações para os resultados obtidos. Uma é que a disseminação sistemática de desinformação de gênero associada ao Estado, embora tenha de fato ocorrido, não foi detectada por razões metodológicas ou de implementação. A outra explicação é que, tendo em vista os conceitos e os parâmetros utilizados na pesquisa, o fenômeno não ocorreu.",ara:"على مستوى أعلى، يمكن إيجاد تفسيرين محتملين للنتائج التي توصّلنا إليها. أحدهما هو أنّ الجهات التابعة للدولة أطلقت فعلاً معلومات مضللة جندرياً، لكنّ المنهجية أو طريقة تطبيقها فشلت في كشفها. أما التفسير الآخر، فهي أنه استناداً إلى التعريفات والأنماط التي اعتمدتها الدراسة، فإنّ هذه الظاهرة لم تقع فعلاً."},3:{eng:"Our analysis and experience suggests that of the two options, the second is the most plausible. To substantiate our proposition, here are some precautions that were taken.",por:"Com base na nossa análise e experiência, das duas opções, a mais plausível é a segunda. Para sustentar nossa premissa, seguem algumas precauções que foram tomadas:",ara:"تفترض تحاليلنا وخبراتنا أنّ الخيار الثاني هو الأكثر منطقية. للتثبت من اقتراحنا، اتّخذنا عدة إجراءات وقائية. "}},enumerations:{1:{eng:"Implementation was designed to require the involvement of the in-situ team at each step",por:"A fase de implementação da pesquisa foi concebida visando o envolvimento das equipes locais em cada uma das etapas.",ara:"قصدنا أن يشارك الفريق المحلي في عملية التطبيق عند كل خطوة."},2:{eng:"All tools were designed to be exploratory (high false positive rate) and be narrowed later. The lexicon initially included generic invectives, the shock timeline incorporated minor events, and the political network was expensively mapped.",por:"Todas as ferramentas foram concebidas em caráter exploratório (alta taxa de falso positivo) e posteriormente refinadas. Originalmente, foram incluídos insultos genéricos no léxico, eventos de menor importância foram incorporados à cronologia dos choques e o mapeamento da rede política foi realizado de forma incremental.",ara:"صُمّمت كل الأدوات لتكون استكشافية (أي تسفر عن معدّلات إيجابية خاطئة عالية)، على أن يتمّ تضييق نطاق النتائج لاحقاً. في بادئ الأمر، تضمّن المعجم شتائم عامة، والتسلسل الزمني للصدمة شمل أحداثاً بسيطة، كما أنّ الشبكة السياسية التي رُسمت كانت واسعة جداً."},3:{eng:"We collected and assessed all content generated by the accounts identified in the political mapping exercise during the time period of interest. Recall that these were identified by in-country participants as the most likely public accounts to produce gendered disinformation.",por:"Na fase de mapeamento da rede política, os participantes locais foram instruídos a focar nas contas públicas mais propensas à disseminação de desinformação de gênero.",ara:"قمنا بجمع وتقييم كل المحتويات المنشورة عبر الحسابات التي تمّ تحديدها في تمرين المسح السياسي خلال الفترة ذات الاهتمام. نذكّر بأنّ هذه الحسابات حدّدها المشاركون المحليون باعتبارها الحسابات العامة الأكثر ميلاً إلى نشر معلومات مضللة جندرياً."},4:{eng:"Annotation of the social media posts was sliced into many small increments. Results would be reviewed and tools would be tuned after each completed chunk. Keywords would be added to the lexicon, events to the timeline, and political insiders to the network map.",por:"As observações sobre as postagens das redes sociais foram segmentadas em diversos pequenos adendos. Os resultados foram revisados e as ferramentas otimizadas após a conclusão de cada bloco. O léxico era alimentado com palavras-chave, a cronologia com eventos e o mapa da rede política com integrantes do círculo político.",ara:"عند إضافة التعليقات التوضيحية إلى تدوينات وسائل التواصل الاجتماعي، تمّ تجزيئها إلى عدة أجزاء صغيرة. بعد الانتهاء من كل جزء، تمّت مراجعة النتائج وتعديل الأدوات. كما أضيفت كلمات رئيسية إلى المعجم، وأحداث إلى التسلسل الزمني، ودوائر سياسية مطلعة إلى خريطة الشبكات."},5:{eng:"Flagging a social media post as containing disinformation is a judgement call. To curb subjectivity, a fraction of the posts were sent to multiple independent participants. If they returned different answers, the post would be reviewed by the in-country project managers.",por:"Sinalizar postagens de redes sociais contendo desinformação é uma tarefa interpretativa. Para limitar o aspecto subjetivo, uma fração das postagens era enviada a vários participantes independentes. Se as respostas se mostrassem divergentes, as postagens eram revisadas pelos supervisores de cada equipe local.",ara:"لا يخفى على أحد أنّ إضافة علامة على تدوينة منشورة عبر وسائل التواصل الاجتماعي أمر يعود إلى تقدير المراجع الشخصي. لذا، بهدف التخفيف من التحيّز الذاتي، أُرسلت بضع تدوينات إلى عدة مشاركين مستقلين. فإذا اختلفت إجاباتهم، يتولى مراجعة التدوينة مدراء المشاريع المحليون."},6:{eng:"Posts flagged as containing gendered disinformation were meticulously reviewed by all project stakeholders to distill overarching themes.",por:"As postagens sinalizadas por conterem desinformação de gênero eram meticulosamente revisadas por todos os envolvidos no projeto para que temas genéricos fossem depurados.",ara:"بالنسبة إلى التدوينات التي وُضعت علامة عليها، كونها تتضمّن معلومات مضللة جندرياً، فقد تمّت مراجعتها بدقة من قبل جميع أصحاب المصلحة في المشروع لغربلة المواضيع المحورية. "},7:{eng:"Findings were examined through a qualitative and quantitative lens.",por:"As evidências foram analisadas de uma perspectiva qualitativa e quantitativa.",ara:"تمّ فحص النتائج من زاوية نوعية وكمية."}},paragraphs_2:{4:{eng:"Of equal importance, there are  factors that can explain the absence of gendered disinformation campaigns. Workshops with in-country participants and the data collected surfaced a number of important insights around the information ecosystems of Brazil and Lebanon.",por:"Igualmente importante, alguns fatores podem explicar a inexistência de campanhas de desinformação de gênero. Os workshops realizados com os participantes locais e os dados coletados trouxeram à tona inúmeros insights importantes sobre o ecossistema informacional no Brasil e no Líbano.",ara:"على نفس الدرجة من الأهمية، هناك عوامل أخرى يمكن أن تفسّر عدم وجود حملات للتضليل الجندري. فقد كشفت ورش العمل التي نُظّمت مع المشاركين المحليين، والبيانات التي تمّ جمعها، عن عدد من الأفكار النيّرة المهمة المتعلقة ببيئة المعلومات في البرازيل ولبنان. "},5:{eng:"Strong gendered beliefs are mainstream and are regularly part of the public discourse. However, political elites are careful with the content they post to avoid a public record of overtly gendered attacks.",por:"Crenças enraizadas sobre gênero são hegemônicas e fazem parte constante do debate público. Apesar disso, elites políticas tomam cuidado com o que postam para evitar que tenham o nome manchado por ataques de gênero explícitos.",ara:"لا يخفى على أحد أنّ المعتقدات الجندرية الراسخة معمّمة، وأنها تشكّل جزءاً منتظماً من الخطاب العام. لكنّ النخب السياسية تتعامل بحذر مع المحتوى الذي تنشره لتجنب سجل عام من الهجمات الجندرية الفاضحة."},6:{eng:"Posts had to be disinformative, gendered, from political insiders, generated high engagement, and published no later than a few weeks following each upsetting event. The intersection of all these constraints leads to a narrow research window. The lack of findings can be attributed, in part, to this design.",por:"O conteúdo das postagens precisava ser desinformativo e com viés de gênero, partir do círculo político e gerar engajamento, tudo isso dentro de um intervalo de poucas semanas a partir de cada evento decisivo. A conjunção de todas essas condicionantes limitou o raio da pesquisa, o que pode ter contribuído, em partes, para explicar a falta de evidências.",ara:"كان على التدوينات المأخوذة في الاعتبار أن تتضمّن معلومات مضللة، وأن تكون مرتكزة على الجندر، وصادرة عن جهات سياسية مطّلعة، وأن تحظى بتفاعل عال، وتكون منشورة بعد بضعة أسابيع لا أكثر من كل حدث مزعج. يؤدي تقاطع كل هذه القيود إلى تضييق هامش البحث. في هذا الإطار، يمكن عزو انعدام النتائج، جزئياً، إلى هذا النوع من التصميم."},7:{eng:"Negative gender tropes could also be so deep-seated that they are implied without being textualized. The annotation process could have missed posts due to the lack of explicit gendered language. However, selecting annotators from the studied community should have mitigated this issue.",por:"No Brasil de Bolsonaro e numa sociedade sectária como a libanesa, informações publicadas pela rede política são concebidas como instrumentos de guerra. A população já está habituada e anestesiada. Atores maliciosos podem não escolher qual tipo de farsa utilizar para transmitir a mensagem, quando já não serão mais contidos pelo emprego de propaganda ou mentiras descaradas.",ara:"بالإضافة إلى ذلك، تُعتبر الاستعارات الجندرية السلبية راسخةً جداً لدرجة أنها تكون متضمّنة دونما حاجة بالضرورة إلى ورودها في نصّ. لذا، من المحتمل أن تكون عملية إضافة التعليقات التوضيحية قد أغفلت عن بعض التدوينات بسبب عدم احتوائها على مصطلحات جندرية واضحة. مع ذلك، قد يكون بعض المشاركين الذين شاركوا في هذا التمرين التوضيحي قد خفّفوا من أهمية هذه التدوينات أيضاً. "}}},_e={title:{eng:"Conclusion",por:"Conclusão",ara:"الخاتمة"},paragraphs:{1:{eng:"The results and our confidence in the methodology leads us to conclude that it is unlikely that state-based gendered disinformation campaigns occurred within the studied time frame in both Lebanon and Brazil. Nonetheless, the absence of gendered disinformation campaigns in the two contexts considered here doesn’t discount the possibility that there are disinformation campaigns underway around other narratives, or other gendered disinformation campaigns in other societies.",por:"Os resultados e a nossa confiança na metodologia nos levam a crer que não ocorreram campanhas de desinformação de gênero associadas ao Estado dentro do período considerado tanto no Líbano quanto no Brasil. Apesar da falta de evidências de campanhas de desinformação de gênero em ambos os estudos de caso, não se pode desconsiderar a possibilidade de que campanhas de desinformação envolvendo outras narrativas ou campanhas de desinformação de gênero em outras sociedades estejam em curso.",ara:"أفضت بنا النتائج، وثقتنا بالمنهجية المعتمدة، إلى الاستنتاج أنه من غير المرجح أن تكون حملات التضليل الجندري التي تطلقها جهات تابعة للدولة قد حدثت خلال وقت الدراسة في كل من لبنان والبرازيل. مع ذلك، إنّ غياب هذه الحملات في كلتا البيئتين، ضمن إطار هذه الدراسة، لا ينفي إمكانية شنّ حملات تضليل حول سرديات أخرى، أو حملات تضليل جندري في مجتمعات أخرى."},2:{eng:"We believe the methodology layed out in this report is applicable in other contexts with other themes, account networks, timeframes, languages, and geographies. Its implementation in two dissimilar societies is indicative of its adaptability. We expect our partners in Brazil and Lebanon to build upon it and use it in future work involving the examination of social media.",por:"A metodologia baseada em pesquisa nas redes sociais delineada neste relatório é aplicável a diferentes contextos com outros temas, redes de afinidade, intervalos de tempo, linguagens e geografias. O fato de ter sido implementada em duas sociedades discrepantes é um indicativo de adaptabilidade. Esperamos que ela sirva de base para futuros trabalhos dos nossos parceiros no Brasil e no Líbano envolvendo a análise das plataformas Telegram, Youtube, Facebook e Twitter.",ara:"نعتقد أنه يمكن تطبيق المنهجية المعتمدة في هذا التقرير في بيئات أخرى، وعلى أنواع مختلفة من المواضيع، وشبكات الحسابات، والمهل الزمنية، واللغات، والأماكن الجغرافية. فتطبيقها في مجتمعين مختلفين لدليل على إمكانية تكييفها بحسب السياق. في هذا الإطار، نتوقع من شركائنا في البرازيل ولبنان أن يرتكزوا على هذه المنهجية ويستخدموها في أنشطتهم المقبلة التي تتطلّب دراسة صفحات وسائل التواصل الاجتماعي."}}},be=[{src:"satire.png",title:{eng:"Satire or Parody",por:"Sátira ou Paródia",ara:"الهجاء أو السخرية"},description:{eng:"The use of humor, irony, exaggeration, or ridicule to expose and criticize. Has the potential to fool.",por:"Uso de humor, ironia, hipérbole ou escárnio para expor e criticar. Tem o potencial de confundir.",ara:"استخدام الفكاهة، أو السخرية، أو المبالغة أو الاستهزاء للفضح أو الانتقاد. يمكن أن ينطوي على الخداع"}},{src:"misleading_content.png",title:{eng:"Misleading Content",por:"Conteúdo Enganoso",ara:"المحتوى المضلل"},description:{eng:"Misleading use of information to frame an issue or individual",por:"Informações enganosas utilizadas para enquadrar um tema ou um indivíduo.",ara:"استخدام مضلل للمعلومات بهدف الإيقاع بشخص أو قضية"}},{src:"imposter_content.png",title:{eng:"Imposter Content",por:"Conteúdo Impostor",ara:"محتوى احتيالي"},description:{eng:"When genuine sources are impersonated",por:"Fontes genuínas simuladas por terceiros.",ara:"عندما يتم انتحال صفة المصادر الحقيقية"}},{src:"fabricated_content.png",title:{eng:"Fabricated Content",por:"Conteúdo Fabricado",ara:"محتوى ملفق"},description:{eng:"New content is 100% false, designed to deceive and do harm",por:"Conteúdo publicado que é 100% inventado.",ara:"المحتوى الجديد خاطئ 100%، ومصمّم للخداع والأذى"}},{src:"false_connection.png",title:{eng:"False Connection",por:"Falsa Conexão",ara:"صلة خاطئة"},description:{eng:"When headlines, visuals or captions don't support the content",por:"Quando manchetes, imagens ou legendas não possuem relação com o conteúdo.",ara:"عندما لا تعكس العناوين الرئيسية، أو الصور، أو التعليقات المحتوى"}},{src:"false_context.png",title:{eng:"False Context",por:"Falso Contexto",ara:"سياق خاطئ"},description:{eng:"When genuine content is shared with false contextual information",por:"Conteúdo verdadeiro disseminado em meio a informações contextualizadas falsa.",ara:"عندما يتمّ  نشر محتوى أصلي لكن مع معلومات سياقية خاطئة"}},{src:"manipulated_content.png",title:{eng:"Manipulated Content",por:"Conteúdo Manipulado",ara:"المحتوى الذي تمّ التلاعب به"},description:{eng:"When genuine information or imagery is manipulated to deceive",por:"Informações ou imagens genuínas que foram manipuladas para enganar o púbico.",ara:"عندما يتمّ التلاعب بالمعلومات أو الصور الحقيقية بهدف الخداع"}}],we=[{src:"institutions.png",title:{eng:"Institutions",por:"Instituições",ara:"المؤسسات"},description:{eng:["Bureaucrats/Technocrats","State Affiliated Financial Actors","Business Leaders (private sector)"],por:["Burocratas/Tecnocratas","Atores Financeiros Ligados ao Estado","Líderes Empresariais (setor privado)"],ara:["البيروقراطيون/ التكنوقراط","الجهات الفاعلة المالية التابعة للدولة","كبار رواد الأعمال (القطاع الخاص)"]}},{src:"politics.png",title:{eng:"Politics",por:"Política",ara:"السياسة"},description:{eng:["Elected Officials","Staff of Elected Officials","Political Operatives"],por:["Representantes Eleitos","Assessores de Representantes Eleitos","Operadores Políticos"],ara:["المسؤولون المنتخَبون","موظفو المسؤولين المنتَخبين","العاملون في المجال السياسي"]}},{src:"society.png",title:{eng:"Society",por:"Sociedade",ara:"المجتمع"},description:{eng:["Political Families","Traditional and Religious Leaders","Cultural Leaders"],por:["Famílias Ligadas à Política","Líderes Tradicionais e Religiosos","Líderes Culturais"],ara:["الأسر السياسية","الزعماء التقليديون والدينيون","الزعماء الثقافيون"]}}],Me={eng:"Error",por:"Error",ara:"Error"},Se={title:pe,subtitle:fe,introduction:me,gendereddisinfo:ge,methods:ve,casestudies:ye,discussion:xe,conclusion:_e,information_disorders:be,political_networks:we,error:Me},Te=Object.freeze({__proto__:null,title:pe,subtitle:fe,introduction:me,gendereddisinfo:ge,methods:ve,casestudies:ye,discussion:xe,conclusion:_e,information_disorders:be,political_networks:we,error:Me,default:Se});function Ee(e,t){return function(e){return null!=e&&"string"==typeof e&&""!==e&&Z.map((e=>e.key)).includes(e)}(e)?void 0===Te[t]?(console.error(`'${t}' does not exist in strings`),"error"):void 0===Te[t][e]?(console.error(`'${t}' in the '${e}' language does not exist in strings`),"error"):Te[t][e]:(console.error(`the '${e}' language is not supported`),"error")}function Ae(t){let n,i,r,a,s,o,l,c,p;return{c(){n=f("div"),i=f("p"),r=m("For inquiries contact us at "),a=f("a"),s=m(ee),o=g(),l=f("p"),c=f("a"),p=m("PGP Public Key"),x(a,"href","mailto:"+ee),x(i,"class","italic svelte-1vi9upr"),w(i,"margin-top","8px"),w(i,"margin-bottom","8px"),x(c,"href","/assets/files/pgp.pub.txt"),x(c,"target","_blank"),w(l,"padding-bottom","8px"),x(l,"class","svelte-1vi9upr"),x(n,"class","svelte-1vi9upr")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(i,a),u(a,s),u(n,o),u(n,l),u(l,c),u(c,p)},p:e,i:e,o:e,d(e){e&&h(n)}}}function Le(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class Ce extends J{constructor(e){super(),Y(this,e,Le,Ae,a,{lang:0})}}
/**
     * @license
     * Copyright 2010-2021 Three.js Authors
     * SPDX-License-Identifier: MIT
     */const Re=100,Pe=301,De=302,Ie=306,Ne=1e3,ke=1001,ze=1002,Oe=1003,Fe=1006,Ue=1008,Be=1009,He=1012,Ve=1014,Ge=1015,We=1016,qe=1020,je=1022,$e=1023,Xe=1026,Ye=1027,Je=2300,Ze=2301,Ke=2302,Qe=2400,et=2401,tt=2402,nt=2500,it=3e3,rt=3001,at=3007,st=3002,ot=7680,lt=35044,ct=35048,ut="300 es";class dt{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}let ht=1234567;const pt=Math.PI/180,ft=180/Math.PI,mt=[];for(let e=0;e<256;e++)mt[e]=(e<16?"0":"")+e.toString(16);const gt="undefined"!=typeof crypto&&"randomUUID"in crypto;function vt(){if(gt)return crypto.randomUUID().toUpperCase();const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(mt[255&e]+mt[e>>8&255]+mt[e>>16&255]+mt[e>>24&255]+"-"+mt[255&t]+mt[t>>8&255]+"-"+mt[t>>16&15|64]+mt[t>>24&255]+"-"+mt[63&n|128]+mt[n>>8&255]+"-"+mt[n>>16&255]+mt[n>>24&255]+mt[255&i]+mt[i>>8&255]+mt[i>>16&255]+mt[i>>24&255]).toUpperCase()}function yt(e,t,n){return Math.max(t,Math.min(n,e))}function xt(e,t){return(e%t+t)%t}function _t(e,t,n){return(1-n)*e+n*t}function bt(e){return 0==(e&e-1)&&0!==e}function wt(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Mt=Object.freeze({__proto__:null,DEG2RAD:pt,RAD2DEG:ft,generateUUID:vt,clamp:yt,euclideanModulo:xt,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:_t,damp:function(e,t,n,i){return _t(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(xt(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(ht=e%2147483647),ht=16807*ht%2147483647,(ht-1)/2147483646},degToRad:function(e){return e*pt},radToDeg:function(e){return e*ft},isPowerOfTwo:bt,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:wt,setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+i)/2),u=s((t+i)/2),d=a((t-i)/2),h=s((t-i)/2),p=a((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class St{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}St.prototype.isVector2=!0;class Tt{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],_=i[2],b=i[5],w=i[8];return r[0]=a*f+s*v+o*_,r[3]=a*m+s*y+o*b,r[6]=a*g+s*x+o*w,r[1]=l*f+c*v+u*_,r[4]=l*m+c*y+u*b,r[7]=l*g+c*x+u*w,r[2]=d*f+h*v+p*_,r[5]=d*m+h*y+p*b,r[8]=d*g+h*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*r,h=l*r-a*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(s*n-i*a)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],s=i[6],o=i[1],l=i[4],c=i[7];return i[0]=t*r+n*o,i[3]=t*a+n*l,i[6]=t*s+n*c,i[1]=-n*r+t*o,i[4]=-n*a+t*l,i[7]=-n*s+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Et(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}function At(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Lt(e,t=0){let n=3735928559^t,i=1103547991^t;for(let t,r=0;r<e.length;r++)t=e.charCodeAt(r),n=Math.imul(n^t,2654435761),i=Math.imul(i^t,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}let Ct;Tt.prototype.isMatrix3=!0;class Rt{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ct&&(Ct=At("canvas")),Ct.width=e.width,Ct.height=e.height;const n=Ct.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ct}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Pt=0;class Dt extends dt{constructor(e=Dt.DEFAULT_IMAGE,t=Dt.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,s=1023,o=1009,l=1,c=3e3){super(),Object.defineProperty(this,"id",{value:Pt++}),this.uuid=vt(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=vt()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(It(i[e].image)):t.push(It(i[e]))}else t=It(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ne:e.x=e.x-Math.floor(e.x);break;case ke:e.x=e.x<0?0:1;break;case ze:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ne:e.y=e.y-Math.floor(e.y);break;case ke:e.y=e.y<0?0:1;break;case ze:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function It(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Rt.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Dt.DEFAULT_IMAGE=void 0,Dt.DEFAULT_MAPPING=300,Dt.prototype.isTexture=!0;class Nt{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,y=(c+d)/4,x=(u+f)/4,_=(p+m)/4;return e>o&&e>v?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=x/n):o>v?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=_/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=x/r,i=_/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Nt.prototype.isVector4=!0;class kt extends dt{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t),this.texture=new Dt(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Fe,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}kt.prototype.isWebGLRenderTarget=!0;(class extends kt{constructor(e,t,n){super(e,t);const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class zt extends kt{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}zt.prototype.isWebGLMultisampleRenderTarget=!0;class Ot{constructor(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,i)}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],p=r[a+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ot.prototype.isQuaternion=!0;class Ft{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bt.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Bt.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*n,c=o*n+s*t-r*i,u=o*i+r*n-a*t,d=-r*t-a*n-s*i;return this.x=l*o+d*-r+c*-s-u*-a,this.y=c*o+d*-a+u*-r-l*-s,this.z=u*o+d*-s+l*-a-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Ut.copy(this).projectOnVector(e),this.sub(Ut)}reflect(e){return this.sub(Ut.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(yt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Ft.prototype.isVector3=!0;const Ut=new Ft,Bt=new Ot;class Ht{constructor(e=new Ft(1/0,1/0,1/0),t=new Ft(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,a,s),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,n,i),this.max.set(r,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Gt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Wt.copy(t.boundingBox),Wt.applyMatrix4(e.matrixWorld),this.union(Wt));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Gt),Gt.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zt),Kt.subVectors(this.max,Zt),qt.subVectors(e.a,Zt),jt.subVectors(e.b,Zt),$t.subVectors(e.c,Zt),Xt.subVectors(jt,qt),Yt.subVectors($t,jt),Jt.subVectors(qt,$t);let t=[0,-Xt.z,Xt.y,0,-Yt.z,Yt.y,0,-Jt.z,Jt.y,Xt.z,0,-Xt.x,Yt.z,0,-Yt.x,Jt.z,0,-Jt.x,-Xt.y,Xt.x,0,-Yt.y,Yt.x,0,-Jt.y,Jt.x,0];return!!tn(t,qt,jt,$t,Kt)&&(t=[1,0,0,0,1,0,0,0,1],!!tn(t,qt,jt,$t,Kt)&&(Qt.crossVectors(Xt,Yt),t=[Qt.x,Qt.y,Qt.z],tn(t,qt,jt,$t,Kt)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Gt.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Gt).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Vt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ht.prototype.isBox3=!0;const Vt=[new Ft,new Ft,new Ft,new Ft,new Ft,new Ft,new Ft,new Ft],Gt=new Ft,Wt=new Ht,qt=new Ft,jt=new Ft,$t=new Ft,Xt=new Ft,Yt=new Ft,Jt=new Ft,Zt=new Ft,Kt=new Ft,Qt=new Ft,en=new Ft;function tn(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){en.fromArray(e,a);const s=r.x*Math.abs(en.x)+r.y*Math.abs(en.y)+r.z*Math.abs(en.z),o=t.dot(en),l=n.dot(en),c=i.dot(en);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const nn=new Ht,rn=new Ft,an=new Ft,sn=new Ft;class on{constructor(e=new Ft,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):nn.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){sn.subVectors(e,this.center);const t=sn.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(sn.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return an.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(rn.copy(e.center).add(an)),this.expandByPoint(rn.copy(e.center).sub(an)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ln=new Ft,cn=new Ft,un=new Ft,dn=new Ft,hn=new Ft,pn=new Ft,fn=new Ft;class mn{constructor(e=new Ft,t=new Ft(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ln)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ln.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ln.copy(this.direction).multiplyScalar(t).add(this.origin),ln.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){cn.copy(e).add(t).multiplyScalar(.5),un.copy(t).sub(e).normalize(),dn.copy(this.origin).sub(cn);const r=.5*e.distanceTo(t),a=-this.direction.dot(un),s=dn.dot(this.direction),o=-dn.dot(un),l=dn.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*o-s,d=a*s-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-a*r+s)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(a*r+s)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=a>0?-r:r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(un).multiplyScalar(d).add(cn),h}intersectSphere(e,t){ln.subVectors(e.center,this.origin);const n=ln.dot(this.direction),i=ln.dot(ln)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,ln)}intersectTriangle(e,t,n,i,r){hn.subVectors(t,e),pn.subVectors(n,e),fn.crossVectors(hn,pn);let a,s=this.direction.dot(fn);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}dn.subVectors(this.origin,e);const o=a*this.direction.dot(pn.crossVectors(dn,pn));if(o<0)return null;const l=a*this.direction.dot(hn.cross(dn));if(l<0)return null;if(o+l>s)return null;const c=-a*dn.dot(fn);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class gn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gn).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/vn.setFromMatrixColumn(e,0).length(),r=1/vn.setFromMatrixColumn(e,1).length(),a=1/vn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xn,e,_n)}lookAt(e,t,n){const i=this.elements;return Mn.subVectors(e,t),0===Mn.lengthSq()&&(Mn.z=1),Mn.normalize(),bn.crossVectors(n,Mn),0===bn.lengthSq()&&(1===Math.abs(n.z)?Mn.x+=1e-4:Mn.z+=1e-4,Mn.normalize(),bn.crossVectors(n,Mn)),bn.normalize(),wn.crossVectors(Mn,bn),i[0]=bn.x,i[4]=wn.x,i[8]=Mn.x,i[1]=bn.y,i[5]=wn.y,i[9]=Mn.y,i[2]=bn.z,i[6]=wn.z,i[10]=Mn.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],_=n[15],b=i[0],w=i[4],M=i[8],S=i[12],T=i[1],E=i[5],A=i[9],L=i[13],C=i[2],R=i[6],P=i[10],D=i[14],I=i[3],N=i[7],k=i[11],z=i[15];return r[0]=a*b+s*T+o*C+l*I,r[4]=a*w+s*E+o*R+l*N,r[8]=a*M+s*A+o*P+l*k,r[12]=a*S+s*L+o*D+l*z,r[1]=c*b+u*T+d*C+h*I,r[5]=c*w+u*E+d*R+h*N,r[9]=c*M+u*A+d*P+h*k,r[13]=c*S+u*L+d*D+h*z,r[2]=p*b+f*T+m*C+g*I,r[6]=p*w+f*E+m*R+g*N,r[10]=p*M+f*A+m*P+g*k,r[14]=p*S+f*L+m*D+g*z,r[3]=v*b+y*T+x*C+_*I,r[7]=v*w+y*E+x*R+_*N,r[11]=v*M+y*A+x*P+_*k,r[15]=v*S+y*L+x*D+_*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*s*d+n*l*d+i*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*s*h-r*a*u+n*a*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*o*u+t*s*d+i*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*o*h-s*m*h-u*o*g+s*d*g,y=p*d*l-c*m*l-p*o*h+a*m*h+c*o*g-a*d*g,x=c*f*l-p*u*l+p*s*h-a*f*h-c*s*g+a*u*g,_=p*u*o-c*f*o-p*s*d+a*f*d+c*s*m-a*u*m,b=t*v+n*y+i*x+r*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*g-n*d*g)*w,e[2]=(s*m*r-f*o*r+f*i*l-n*m*l-s*i*g+n*o*g)*w,e[3]=(u*o*r-s*d*r-u*i*l+n*d*l+s*i*h-n*o*h)*w,e[4]=y*w,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*g+t*d*g)*w,e[6]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*g-t*o*g)*w,e[7]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*h+t*o*h)*w,e[8]=x*w,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*g-t*u*g)*w,e[10]=(a*f*r-p*s*r+p*n*l-t*f*l-a*n*g+t*s*g)*w,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*h-t*s*h)*w,e[12]=_*w,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*w,e[14]=(p*s*i-a*f*i-p*n*o+t*f*o+a*n*m-t*s*m)*w,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*d+t*s*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,d=r*l,h=r*c,p=r*u,f=a*c,m=a*u,g=s*u,v=o*l,y=o*c,x=o*u,_=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*_,i[1]=(h+x)*_,i[2]=(p-y)*_,i[3]=0,i[4]=(h-x)*b,i[5]=(1-(d+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=vn.set(i[0],i[1],i[2]).length();const a=vn.set(i[4],i[5],i[6]).length(),s=vn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],yn.copy(this);const o=1/r,l=1/a,c=1/s;return yn.elements[0]*=o,yn.elements[1]*=o,yn.elements[2]*=o,yn.elements[4]*=l,yn.elements[5]*=l,yn.elements[6]*=l,yn.elements[8]*=c,yn.elements[9]*=c,yn.elements[10]*=c,t.setFromRotationMatrix(yn),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),d=-(a+r)/(a-r),h=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,a){const s=this.elements,o=1/(t-e),l=1/(n-i),c=1/(a-r),u=(t+e)*o,d=(n+i)*l,h=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}gn.prototype.isMatrix4=!0;const vn=new Ft,yn=new gn,xn=new Ft(0,0,0),_n=new Ft(1,1,1),bn=new Ft,wn=new Ft,Mn=new Ft,Sn=new gn,Tn=new Ot;class En{constructor(e=0,t=0,n=0,i=En.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(yt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-yt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(yt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-yt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(yt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-yt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Sn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Sn,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Tn.setFromEuler(this),this.setFromQuaternion(Tn,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Ft(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}En.prototype.isEuler=!0,En.DefaultOrder="XYZ",En.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class An{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Ln=0;const Cn=new Ft,Rn=new Ot,Pn=new gn,Dn=new Ft,In=new Ft,Nn=new Ft,kn=new Ot,zn=new Ft(1,0,0),On=new Ft(0,1,0),Fn=new Ft(0,0,1),Un={type:"added"},Bn={type:"removed"};class Hn extends dt{constructor(){super(),Object.defineProperty(this,"id",{value:Ln++}),this.uuid=vt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DefaultUp.clone();const e=new Ft,t=new En,n=new Ot,i=new Ft(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new gn},normalMatrix:{value:new Tt}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=Hn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new An,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Rn.setFromAxisAngle(e,t),this.quaternion.multiply(Rn),this}rotateOnWorldAxis(e,t){return Rn.setFromAxisAngle(e,t),this.quaternion.premultiply(Rn),this}rotateX(e){return this.rotateOnAxis(zn,e)}rotateY(e){return this.rotateOnAxis(On,e)}rotateZ(e){return this.rotateOnAxis(Fn,e)}translateOnAxis(e,t){return Cn.copy(e).applyQuaternion(this.quaternion),this.position.add(Cn.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zn,e)}translateY(e){return this.translateOnAxis(On,e)}translateZ(e){return this.translateOnAxis(Fn,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Pn.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Dn.copy(e):Dn.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),In.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pn.lookAt(In,Dn,this.up):Pn.lookAt(Dn,In,this.up),this.quaternion.setFromRotationMatrix(Pn),i&&(Pn.extractRotation(i.matrixWorld),Rn.setFromRotationMatrix(Pn),this.quaternion.premultiply(Rn.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Un)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Bn)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Bn)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Pn.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Pn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pn),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(In,e,Nn),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(In,kn,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Hn.DefaultUp=new Ft(0,1,0),Hn.DefaultMatrixAutoUpdate=!0,Hn.prototype.isObject3D=!0;const Vn=new Ft,Gn=new Ft,Wn=new Ft,qn=new Ft,jn=new Ft,$n=new Ft,Xn=new Ft,Yn=new Ft,Jn=new Ft,Zn=new Ft;class Kn{constructor(e=new Ft,t=new Ft,n=new Ft){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Vn.subVectors(e,t),i.cross(Vn);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Vn.subVectors(i,t),Gn.subVectors(n,t),Wn.subVectors(e,t);const a=Vn.dot(Vn),s=Vn.dot(Gn),o=Vn.dot(Wn),l=Gn.dot(Gn),c=Gn.dot(Wn),u=a*l-s*s;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(l*o-s*c)*d,p=(a*c-s*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,qn),qn.x>=0&&qn.y>=0&&qn.x+qn.y<=1}static getUV(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,qn),o.set(0,0),o.addScaledVector(r,qn.x),o.addScaledVector(a,qn.y),o.addScaledVector(s,qn.z),o}static isFrontFacing(e,t,n,i){return Vn.subVectors(n,t),Gn.subVectors(e,t),Vn.cross(Gn).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Vn.subVectors(this.c,this.b),Gn.subVectors(this.a,this.b),.5*Vn.cross(Gn).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Kn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return Kn.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Kn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;jn.subVectors(i,n),$n.subVectors(r,n),Yn.subVectors(e,n);const o=jn.dot(Yn),l=$n.dot(Yn);if(o<=0&&l<=0)return t.copy(n);Jn.subVectors(e,i);const c=jn.dot(Jn),u=$n.dot(Jn);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(jn,a);Zn.subVectors(e,r);const h=jn.dot(Zn),p=$n.dot(Zn);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector($n,s);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return Xn.subVectors(r,i),s=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(Xn,s);const g=1/(m+f+d);return a=f*g,s=d*g,t.copy(n).addScaledVector(jn,a).addScaledVector($n,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Qn=0;class ei extends dt{constructor(){super(),Object.defineProperty(this,"id",{value:Qn++}),this.uuid=vt(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=$e,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Re,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ot,this.stencilZFail=ot,this.stencilZPass=ot,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==$e&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}ei.prototype.isMaterial=!0;const ti={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ni={h:0,s:0,l:0},ii={h:0,s:0,l:0};function ri(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ai(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function si(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class oi{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=xt(e,1),t=yt(t,0,1),n=yt(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=ri(r,i,e+1/3),this.g=ri(r,i,e),this.b=ri(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=ti[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=ai(e.r),this.g=ai(e.g),this.b=ai(e.b),this}copyLinearToSRGB(e){return this.r=si(e.r),this.g=si(e.g),this.b=si(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),a=Math.min(t,n,i);let s,o;const l=(a+r)/2;if(a===r)s=0,o=0;else{const e=r-a;switch(o=l<=.5?e/(r+a):e/(2-r-a),r){case t:s=(n-i)/e+(n<i?6:0);break;case n:s=(i-t)/e+2;break;case i:s=(t-n)/e+4}s/=6}return e.h=s,e.s=o,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(ni),ni.h+=e,ni.s+=t,ni.l+=n,this.setHSL(ni.h,ni.s,ni.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ni),e.getHSL(ii);const n=_t(ni.h,ii.h,t),i=_t(ni.s,ii.s,t),r=_t(ni.l,ii.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}oi.NAMES=ti,oi.prototype.isColor=!0,oi.prototype.r=1,oi.prototype.g=1,oi.prototype.b=1;class li extends ei{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new oi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}li.prototype.isMeshBasicMaterial=!0;const ci=new Ft,ui=new St;class di{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=lt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new oi),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new St),t[n++]=r.x,t[n++]=r.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Ft),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Nt),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ui.fromBufferAttribute(this,t),ui.applyMatrix3(e),this.setXY(t,ui.x,ui.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ci.fromBufferAttribute(this,t),ci.applyMatrix3(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.applyMatrix4(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.applyNormalMatrix(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.transformDirection(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==lt&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}di.prototype.isBufferAttribute=!0;class hi extends di{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class pi extends di{constructor(e,t,n){super(new Uint32Array(e),t,n)}}(class extends di{constructor(e,t,n){super(new Uint16Array(e),t,n)}}).prototype.isFloat16BufferAttribute=!0;class fi extends di{constructor(e,t,n){super(new Float32Array(e),t,n)}}let mi=0;const gi=new gn,vi=new Hn,yi=new Ft,xi=new Ht,_i=new Ht,bi=new Ft;class wi extends dt{constructor(){super(),Object.defineProperty(this,"id",{value:mi++}),this.uuid=vt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Et(e)>65535?pi:hi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Tt).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return gi.makeRotationFromQuaternion(e),this.applyMatrix4(gi),this}rotateX(e){return gi.makeRotationX(e),this.applyMatrix4(gi),this}rotateY(e){return gi.makeRotationY(e),this.applyMatrix4(gi),this}rotateZ(e){return gi.makeRotationZ(e),this.applyMatrix4(gi),this}translate(e,t,n){return gi.makeTranslation(e,t,n),this.applyMatrix4(gi),this}scale(e,t,n){return gi.makeScale(e,t,n),this.applyMatrix4(gi),this}lookAt(e){return vi.lookAt(e),vi.updateMatrix(),this.applyMatrix4(vi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yi).negate(),this.translate(yi.x,yi.y,yi.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new fi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ht);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ft(-1/0,-1/0,-1/0),new Ft(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];xi.setFromBufferAttribute(n),this.morphTargetsRelative?(bi.addVectors(this.boundingBox.min,xi.min),this.boundingBox.expandByPoint(bi),bi.addVectors(this.boundingBox.max,xi.max),this.boundingBox.expandByPoint(bi)):(this.boundingBox.expandByPoint(xi.min),this.boundingBox.expandByPoint(xi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new on);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ft,1/0);if(e){const n=this.boundingSphere.center;if(xi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];_i.setFromBufferAttribute(n),this.morphTargetsRelative?(bi.addVectors(xi.min,_i.min),xi.expandByPoint(bi),bi.addVectors(xi.max,_i.max),xi.expandByPoint(bi)):(xi.expandByPoint(_i.min),xi.expandByPoint(_i.max))}xi.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)bi.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(bi));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)bi.fromBufferAttribute(a,t),s&&(yi.fromBufferAttribute(e,t),bi.add(yi)),i=Math.max(i,n.distanceToSquared(bi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;void 0===t.tangent&&this.setAttribute("tangent",new di(new Float32Array(4*s),4));const o=t.tangent.array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new Ft,c[e]=new Ft;const u=new Ft,d=new Ft,h=new Ft,p=new St,f=new St,m=new St,g=new Ft,v=new Ft;function y(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(r),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let e=0,t=x.length;e<t;++e){const t=x[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)y(n[e+0],n[e+1],n[e+2])}const _=new Ft,b=new Ft,w=new Ft,M=new Ft;function S(e){w.fromArray(r,3*e),M.copy(w);const t=l[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(M,t);const n=b.dot(c[e])<0?-1:1;o[4*e]=_.x,o[4*e+1]=_.y,o[4*e+2]=_.z,o[4*e+3]=n}for(let e=0,t=x.length;e<t;++e){const t=x[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new di(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Ft,r=new Ft,a=new Ft,s=new Ft,o=new Ft,l=new Ft,c=new Ft,u=new Ft;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,a=e.attributes[i],s=a.array,o=a.itemSize*t,l=Math.min(s.length,r.length-o);for(let e=0,t=o;e<l;e++,t++)r[t]=s[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)bi.fromBufferAttribute(e,t),bi.normalize(),e.setXYZ(t,bi.x,bi.y,bi.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let r=0,l=t.length;r<l;r++){s=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new di(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wi,n=this.index.array,i=this.attributes;for(const r in i){const a=e(i[r],n);t.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],s=r[i];for(let t=0,i=s.length;t<i;t++){const i=e(s[t],n);a.push(i)}t.morphAttributes[i]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];a.push(i.toJSON(e.data))}a.length>0&&(i[t]=a,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}wi.prototype.isBufferGeometry=!0;const Mi=new gn,Si=new mn,Ti=new on,Ei=new Ft,Ai=new Ft,Li=new Ft,Ci=new Ft,Ri=new Ft,Pi=new Ft,Di=new Ft,Ii=new Ft,Ni=new Ft,ki=new St,zi=new St,Oi=new St,Fi=new Ft,Ui=new Ft;class Bi extends Hn{constructor(e=new wi,t=new li){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ti.copy(n.boundingSphere),Ti.applyMatrix4(r),!1===e.ray.intersectsSphere(Ti))return;if(Mi.copy(r).invert(),Si.copy(e.ray).applyMatrix4(Mi),null!==n.boundingBox&&!1===Si.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const r=n.index,s=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=d.length;n<p;n++){const p=d[n],f=i[p.materialIndex];for(let n=Math.max(p.start,h.start),i=Math.min(r.count,Math.min(p.start+p.count,h.start+h.count));n<i;n+=3){const i=r.getX(n),d=r.getX(n+1),h=r.getX(n+2);a=Hi(this,f,e,Si,s,o,l,c,u,i,d,h),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{for(let n=Math.max(0,h.start),d=Math.min(r.count,h.start+h.count);n<d;n+=3){const d=r.getX(n),h=r.getX(n+1),p=r.getX(n+2);a=Hi(this,i,e,Si,s,o,l,c,u,d,h,p),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==s)if(Array.isArray(i))for(let n=0,r=d.length;n<r;n++){const r=d[n],p=i[r.materialIndex];for(let n=Math.max(r.start,h.start),i=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));n<i;n+=3){a=Hi(this,p,e,Si,s,o,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=r.materialIndex,t.push(a))}}else{for(let n=Math.max(0,h.start),r=Math.min(s.count,h.start+h.count);n<r;n+=3){a=Hi(this,i,e,Si,s,o,l,c,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Hi(e,t,n,i,r,a,s,o,l,c,u,d){Ei.fromBufferAttribute(r,c),Ai.fromBufferAttribute(r,u),Li.fromBufferAttribute(r,d);const h=e.morphTargetInfluences;if(a&&h){Di.set(0,0,0),Ii.set(0,0,0),Ni.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=h[e],n=a[e];0!==t&&(Ci.fromBufferAttribute(n,c),Ri.fromBufferAttribute(n,u),Pi.fromBufferAttribute(n,d),s?(Di.addScaledVector(Ci,t),Ii.addScaledVector(Ri,t),Ni.addScaledVector(Pi,t)):(Di.addScaledVector(Ci.sub(Ei),t),Ii.addScaledVector(Ri.sub(Ai),t),Ni.addScaledVector(Pi.sub(Li),t)))}Ei.add(Di),Ai.add(Ii),Li.add(Ni)}e.isSkinnedMesh&&(e.boneTransform(c,Ei),e.boneTransform(u,Ai),e.boneTransform(d,Li));const p=function(e,t,n,i,r,a,s,o){let l;if(l=1===t.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,2!==t.side,o),null===l)return null;Ui.copy(o),Ui.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ui);return c<n.near||c>n.far?null:{distance:c,point:Ui.clone(),object:e}}(e,t,n,i,Ei,Ai,Li,Fi);if(p){o&&(ki.fromBufferAttribute(o,c),zi.fromBufferAttribute(o,u),Oi.fromBufferAttribute(o,d),p.uv=Kn.getUV(Fi,Ei,Ai,Li,ki,zi,Oi,new St)),l&&(ki.fromBufferAttribute(l,c),zi.fromBufferAttribute(l,u),Oi.fromBufferAttribute(l,d),p.uv2=Kn.getUV(Fi,Ei,Ai,Li,ki,zi,Oi,new St));const e={a:c,b:u,c:d,normal:new Ft,materialIndex:0};Kn.getNormal(Ei,Ai,Li,e.normal),p.face=e}return p}Bi.prototype.isMesh=!0;class Vi extends wi{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,a,p,f,m,g,v){const y=a/m,x=p/g,_=a/2,b=p/2,w=f/2,M=m+1,S=g+1;let T=0,E=0;const A=new Ft;for(let a=0;a<S;a++){const s=a*x-b;for(let o=0;o<M;o++){const d=o*y-_;A[e]=d*i,A[t]=s*r,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-a/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+M*e,i=d+t+M*(e+1),r=d+(t+1)+M*(e+1),a=d+(t+1)+M*e;o.push(n,i,a),o.push(i,r,a),E+=6}s.addGroup(h,E,v),h+=E,d+=T}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(c,3)),this.setAttribute("uv",new fi(u,2))}static fromJSON(e){return new Vi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gi(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Wi(e){const t={};for(let n=0;n<e.length;n++){const i=Gi(e[n]);for(const e in i)t[e]=i[e]}return t}const qi={clone:Gi,merge:Wi};class ji extends ei{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gi(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}ji.prototype.isShaderMaterial=!0;class $i extends Hn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}$i.prototype.isCamera=!0;class Xi extends $i{constructor(e=50,t=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ft*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*pt*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ft*Math.atan(Math.tan(.5*pt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*pt*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Xi.prototype.isPerspectiveCamera=!0;const Yi=90;class Ji extends Hn{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new Xi(Yi,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Ft(1,0,0)),this.add(i);const r=new Xi(Yi,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ft(-1,0,0)),this.add(r);const a=new Xi(Yi,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Ft(0,1,0)),this.add(a);const s=new Xi(Yi,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Ft(0,-1,0)),this.add(s);const o=new Xi(Yi,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Ft(0,0,1)),this.add(o);const l=new Xi(Yi,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Ft(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,a,s,o,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class Zi extends Dt{constructor(e,t,n,i,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Pe,n,i,r,a,s,o,l,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Zi.prototype.isCubeTexture=!0;class Ki extends kt{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Zi(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Fe,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=$e,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Vi(5,5,5),r=new ji({name:"CubemapFromEquirect",uniforms:Gi(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const a=new Bi(i,r),s=t.minFilter;t.minFilter===Ue&&(t.minFilter=Fe);return new Ji(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}Ki.prototype.isWebGLCubeRenderTarget=!0;const Qi=new Ft,er=new Ft,tr=new Tt;class nr{constructor(e=new Ft(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Qi.subVectors(n,t).cross(er.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Qi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||tr.getNormalMatrix(e),i=this.coplanarPoint(Qi).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}nr.prototype.isPlane=!0;const ir=new on,rr=new Ft;class ar{constructor(e=new nr,t=new nr,n=new nr,i=new nr,r=new nr,a=new nr){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(s-i,u-o,f-d,y-m).normalize(),t[1].setComponents(s+i,u+o,f+d,y+m).normalize(),t[2].setComponents(s+r,u+l,f+h,y+g).normalize(),t[3].setComponents(s-r,u-l,f-h,y-g).normalize(),t[4].setComponents(s-a,u-c,f-p,y-v).normalize(),t[5].setComponents(s+a,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ir.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ir)}intersectsSprite(e){return ir.center.set(0,0,0),ir.radius=.7071067811865476,ir.applyMatrix4(e.matrixWorld),this.intersectsSphere(ir)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(rr.x=i.normal.x>0?e.max.x:e.min.x,rr.y=i.normal.y>0?e.max.y:e.min.y,rr.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(rr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sr(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function or(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=i.get(t);void 0===a?i.set(t,function(t,i){const r=t.array,a=t.usage,s=e.createBuffer();e.bindBuffer(i,s),e.bufferData(i,r,a),t.onUploadCallback();let o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?n?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(o=5121),{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(!function(t,i,r){const a=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(a.buffer,t,r),a.version=t.version)}}}class lr extends wi{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*d-a;for(let n=0;n<l;n++){const i=n*u-r;p.push(i,-t,0),f.push(0,0,1),m.push(n/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),a=t+1+l*e;h.push(n,i,a),h.push(i,r,a)}this.setIndex(h),this.setAttribute("position",new fi(p,3)),this.setAttribute("normal",new fi(f,3)),this.setAttribute("uv",new fi(m,2))}static fromJSON(e){return new lr(e.width,e.height,e.widthSegments,e.heightSegments)}}const cr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ur={common:{diffuse:{value:new oi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Tt},uv2Transform:{value:new Tt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Tt}},sprite:{diffuse:{value:new oi(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Tt}}},dr={basic:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.fog,ur.lights,{emissive:{value:new oi(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:Wi([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,ur.lights,{emissive:{value:new oi(0)},specular:{value:new oi(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:Wi([ur.common,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.roughnessmap,ur.metalnessmap,ur.fog,ur.lights,{emissive:{value:new oi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},toon:{uniforms:Wi([ur.common,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.gradientmap,ur.fog,ur.lights,{emissive:{value:new oi(0)}}]),vertexShader:cr.meshtoon_vert,fragmentShader:cr.meshtoon_frag},matcap:{uniforms:Wi([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:Wi([ur.points,ur.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:Wi([ur.common,ur.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:Wi([ur.common,ur.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:Wi([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,{opacity:{value:1}}]),vertexShader:cr.meshnormal_vert,fragmentShader:cr.meshnormal_frag},sprite:{uniforms:Wi([ur.sprite,ur.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new Tt},t2D:{value:null}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},cube:{uniforms:Wi([ur.envmap,{opacity:{value:1}}]),vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:Wi([ur.common,ur.displacementmap,{referencePosition:{value:new Ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:Wi([ur.lights,ur.fog,{color:{value:new oi(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};function hr(e,t,n,i,r){const a=new oi(0);let s,o,l=0,c=null,u=0,d=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),l=t,h(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,h(a,l)},render:function(n,r){let p=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?h(a,l):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===Ie)?(void 0===o&&(o=new Bi(new Vi(1,1,1),new ji({name:"BackgroundCubeMaterial",uniforms:Gi(dr.cube.uniforms),vertexShader:dr.cube.vertexShader,fragmentShader:dr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(o)),o.material.uniforms.envMap.value=f,o.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&u===f.version&&d===e.toneMapping||(o.material.needsUpdate=!0,c=f,u=f.version,d=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):f&&f.isTexture&&(void 0===s&&(s=new Bi(new lr(2,2),new ji({name:"BackgroundMaterial",uniforms:Gi(dr.background.uniforms),vertexShader:dr.background.vertexShader,fragmentShader:dr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),s.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&u===f.version&&d===e.toneMapping||(s.material.needsUpdate=!0,c=f,u=f.version,d=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function pr(e,t,n,i){const r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=h(null);let c=l;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function v(t,n,r,a,s,o){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,s,o):e.vertexAttribIPointer(t,n,r,s,o)}function y(){x(),c!==l&&(c=l,u(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,y,x){let _=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=h(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u);return u}(y,d,l);c!==t&&(c=t,u(c.object)),_=function(e,t){const n=c.attributes,i=e.attributes;let r=0;for(const e in i){const t=n[e],a=i[e];if(void 0===t)return!0;if(t.attribute!==a)return!0;if(t.data!==a.data)return!0;r++}return c.attributesNum!==r||c.index!==t}(y,x),_&&function(e,t){const n={},i=e.attributes;let r=0;for(const e in i){const t=i[e],a={};a.attribute=t,t.data&&(a.data=t.data),n[e]=a,r++}c.attributes=n,c.attributesNum=r,c.index=t}(y,x)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===d.id&&c.wireframe===e||(c.geometry=y.id,c.program=d.id,c.wireframe=e,_=!0)}!0===r.isInstancedMesh&&(_=!0),null!==x&&n.update(x,34963),_&&(!function(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const i=c[t];if(i.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const t=a.normalized,s=a.itemSize,l=n.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,d=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,l=n.stride,h=a.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)m(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)f(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)v(i.location+e,s/i.locationSize,u,t,l*d,(h+s/i.locationSize*e)*d)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)m(i.location+e,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<i.locationSize;e++)f(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)v(i.location+e,s/i.locationSize,u,t,s*d,s/i.locationSize*e*d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}g()}(r,l,d,y),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function fr(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,i,s,o),n.update(s,a,o)}}function mr(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,x=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?e.getParameter(36183):0}}function gr(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new nr,o=new Tt,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const s=0!==e.length||t||0!==i||r;return r=t,n=u(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,s,o){const d=t.clippingPlanes,h=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!r||null===d||0===d.length||a&&!p)a?u(null):c();else{const e=a?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=u(d,s,t,o);for(let e=0;e!==t;++e)r[e]=n[e];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function vr(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=Pe:304===t&&(e.mapping=De),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(303===a||304===a){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const s=e.getRenderTarget(),o=new Ki(a.height/2);return o.fromEquirectangularTexture(e,r),t.set(r,o),e.setRenderTarget(s),r.addEventListener("dispose",i),n(o.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}dr.physical={uniforms:Wi([dr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new St(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new oi(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new oi(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new oi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag};class yr extends $i{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}yr.prototype.isOrthographicCamera=!0;class xr extends ji{constructor(e){super(e),this.type="RawShaderMaterial"}}xr.prototype.isRawShaderMaterial=!0;const _r=Math.pow(2,8),br=[.125,.215,.35,.446,.526,.582],wr=5+br.length,Mr=20,Sr={[it]:0,[rt]:1,[st]:2,3004:3,3005:4,3006:5,[at]:6},Tr=new yr,{_lodPlanes:Er,_sizeLods:Ar,_sigmas:Lr}=zr(),Cr=new oi;let Rr=null;const Pr=(1+Math.sqrt(5))/2,Dr=1/Pr,Ir=[new Ft(1,1,1),new Ft(-1,1,1),new Ft(1,1,-1),new Ft(-1,1,-1),new Ft(0,Pr,Dr),new Ft(0,Pr,-Dr),new Ft(Dr,0,Pr),new Ft(-Dr,0,Pr),new Ft(Pr,Dr,0),new Ft(-Pr,Dr,0)];class Nr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new Ft(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Vr()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}(Mr),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Rr=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Br(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Ur(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Er.length;e++)Er[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Rr),e.scissorTest=!1,Fr(e,0,0,e.width,e.height)}_fromTexture(e){Rr=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Oe,minFilter:Oe,generateMipmaps:!1,type:Be,format:1023,encoding:kr(e)?e.encoding:st,depthBuffer:!1},n=Or(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Or(t),n}_compileMaterial(e){const t=new Bi(Er[0],e);this._renderer.compile(t,Tr)}_sceneToCubeUV(e,t,n,i){const r=new Xi(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.outputEncoding,u=o.toneMapping;o.getClearColor(Cr),o.toneMapping=0,o.outputEncoding=it,o.autoClear=!1;const d=new li({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Bi(new Vi,d);let p=!1;const f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,p=!0):(d.color.copy(Cr),p=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(r.up.set(0,a[t],0),r.lookAt(s[t],0,0)):1==n?(r.up.set(0,0,a[t]),r.lookAt(0,s[t],0)):(r.up.set(0,a[t],0),r.lookAt(0,0,s[t])),Fr(i,n*_r,t>2?_r:0,_r,_r),o.setRenderTarget(i),p&&o.render(h,r),o.render(e,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=u,o.outputEncoding=c,o.autoClear=l,e.background=f}_setEncoding(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===$e&&t.type===Be&&t.encoding===rt?e.value=Sr[3e3]:e.value=Sr[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Pe||e.mapping===De;i?null==this._cubemapShader&&(this._cubemapShader=Br()):null==this._equirectShader&&(this._equirectShader=Ur());const r=i?this._cubemapShader:this._equirectShader,a=new Bi(Er[0],r),s=r.uniforms;s.envMap.value=e,i||s.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(s.inputEncoding,e),this._setEncoding(s.outputEncoding,t.texture),Fr(t,0,0,3*_r,2*_r),n.setRenderTarget(t),n.render(a,Tr)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<wr;t++){const n=Math.sqrt(Lr[t]*Lr[t]-Lr[t-1]*Lr[t-1]),i=Ir[(t-1)%Ir.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Bi(Er[i],l),u=l.uniforms,d=Ar[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,f=isFinite(r)?1+Math.floor(3*p):Mr;f>Mr&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<Mr;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s),u.dTheta.value=h,u.mipInt.value=8-n,this._setEncoding(u.inputEncoding,e.texture),this._setEncoding(u.outputEncoding,e.texture);const v=Ar[i];Fr(t,3*Math.max(0,_r-2*v),(0===i?0:2*_r)+2*v*(i>4?i-8+4:0),3*v,2*v),o.setRenderTarget(t),o.render(c,Tr)}}function kr(e){return void 0!==e&&e.type===Be&&(e.encoding===it||e.encoding===rt||e.encoding===at)}function zr(){const e=[],t=[],n=[];let i=8;for(let r=0;r<wr;r++){const a=Math.pow(2,i);t.push(a);let s=1/a;r>4?s=br[r-8+4-1]:0==r&&(s=0),n.push(s);const o=1/(a-1),l=-o/2,c=1+o/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,p=3,f=2,m=1,g=new Float32Array(p*h*d),v=new Float32Array(f*h*d),y=new Float32Array(m*h*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,p*h*e),v.set(u,f*h*e);const r=[e,e,e,e,e,e];y.set(r,m*h*e)}const x=new wi;x.setAttribute("position",new di(g,p)),x.setAttribute("uv",new di(v,f)),x.setAttribute("faceIndex",new di(y,m)),e.push(x),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Or(e){const t=new kt(3*_r,3*_r,e);return t.texture.mapping=Ie,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Fr(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Ur(){const e=new St(1,1);return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Vr()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Br(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Sr[3e3]},outputEncoding:{value:Sr[3e3]}},vertexShader:Hr(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Vr()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Hr(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Vr(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Gr(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping,s=303===a||304===a,o=a===Pe||a===De;if(s||o){if(t.has(r))return t.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(a)){const a=e.getRenderTarget();null===n&&(n=new Nr(e));const o=s?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,o),e.setRenderTarget(a),r.addEventListener("dispose",i),o.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Wr(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function qr(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const o=new(Et(n)>65535?pi:hi)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function jr(e,t,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,s,i*o,c),n.update(l,a,c)}}function $r(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class Xr extends Dt{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=Oe,this.minFilter=Oe,this.wrapR=ke,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Yr(e,t){return e[0]-t[0]}function Jr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Zr(e,t){let n=1;const i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),e.divideScalar(n)}function Kr(e,t,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new Ft,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,u,d){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const i=c.morphAttributes.position.length;let r=a.get(c);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const e=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,o=c.morphAttributes.normal||[],l=!0===e?2:1;let u=c.attributes.position.count*l,d=1;u>t.maxTextureSize&&(d=Math.ceil(u/t.maxTextureSize),u=t.maxTextureSize);const h=new Float32Array(u*d*4*i),p=new Xr(h,u,d,i);p.format=$e,p.type=Ge;const f=4*l;for(let t=0;t<i;t++){const i=n[t],r=o[t],a=u*d*4*t;for(let t=0;t<i.count;t++){s.fromBufferAttribute(i,t),!0===i.normalized&&Zr(s,i);const n=t*f;h[a+n+0]=s.x,h[a+n+1]=s.y,h[a+n+2]=s.z,h[a+n+3]=0,!0===e&&(s.fromBufferAttribute(r,t),!0===r.normalized&&Zr(s,r),h[a+n+4]=s.x,h[a+n+5]=s.y,h[a+n+6]=s.z,h[a+n+7]=0)}}r={count:i,texture:p,size:new St(u,d)},a.set(c,r)}let o=0;for(let e=0;e<h.length;e++)o+=h[e];const l=c.morphTargetsRelative?1:1-o;d.getUniforms().setValue(e,"morphTargetBaseInfluence",l),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",r.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",r.size)}else{const t=void 0===h?0:h.length;let n=i[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];i[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=h[e]}n.sort(Jr);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(Yr);const a=c.morphAttributes.position,s=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],i=t[1];n!==Number.MAX_SAFE_INTEGER&&i?(a&&c.getAttribute("morphTarget"+e)!==a[n]&&c.setAttribute("morphTarget"+e,a[n]),s&&c.getAttribute("morphNormal"+e)!==s[n]&&c.setAttribute("morphNormal"+e,s[n]),r[e]=i,l+=i):(a&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),s&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),r[e]=0)}const u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Qr(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const s=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==s&&(t.update(l),r.set(l,s)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}Xr.prototype.isDataTexture2DArray=!0;class ea extends Dt{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=Oe,this.minFilter=Oe,this.wrapR=ke,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ea.prototype.isDataTexture3D=!0;const ta=new Dt,na=new Xr,ia=new ea,ra=new Zi,aa=[],sa=[],oa=new Float32Array(16),la=new Float32Array(9),ca=new Float32Array(4);function ua(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=aa[r];if(void 0===a&&(a=new Float32Array(r),aa[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function da(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function ha(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function pa(e,t){let n=sa[t];void 0===n&&(n=new Int32Array(t),sa[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function fa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ma(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(da(n,t))return;e.uniform2fv(this.addr,t),ha(n,t)}}function ga(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(da(n,t))return;e.uniform3fv(this.addr,t),ha(n,t)}}function va(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(da(n,t))return;e.uniform4fv(this.addr,t),ha(n,t)}}function ya(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(da(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ha(n,t)}else{if(da(n,i))return;ca.set(i),e.uniformMatrix2fv(this.addr,!1,ca),ha(n,i)}}function xa(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(da(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ha(n,t)}else{if(da(n,i))return;la.set(i),e.uniformMatrix3fv(this.addr,!1,la),ha(n,i)}}function _a(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(da(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ha(n,t)}else{if(da(n,i))return;oa.set(i),e.uniformMatrix4fv(this.addr,!1,oa),ha(n,i)}}function ba(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function wa(e,t){const n=this.cache;da(n,t)||(e.uniform2iv(this.addr,t),ha(n,t))}function Ma(e,t){const n=this.cache;da(n,t)||(e.uniform3iv(this.addr,t),ha(n,t))}function Sa(e,t){const n=this.cache;da(n,t)||(e.uniform4iv(this.addr,t),ha(n,t))}function Ta(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ea(e,t){const n=this.cache;da(n,t)||(e.uniform2uiv(this.addr,t),ha(n,t))}function Aa(e,t){const n=this.cache;da(n,t)||(e.uniform3uiv(this.addr,t),ha(n,t))}function La(e,t){const n=this.cache;da(n,t)||(e.uniform4uiv(this.addr,t),ha(n,t))}function Ca(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||ta,r)}function Ra(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||ia,r)}function Pa(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||ra,r)}function Da(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||na,r)}function Ia(e,t){e.uniform1fv(this.addr,t)}function Na(e,t){const n=ua(t,this.size,2);e.uniform2fv(this.addr,n)}function ka(e,t){const n=ua(t,this.size,3);e.uniform3fv(this.addr,n)}function za(e,t){const n=ua(t,this.size,4);e.uniform4fv(this.addr,n)}function Oa(e,t){const n=ua(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Fa(e,t){const n=ua(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ua(e,t){const n=ua(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ba(e,t){e.uniform1iv(this.addr,t)}function Ha(e,t){e.uniform2iv(this.addr,t)}function Va(e,t){e.uniform3iv(this.addr,t)}function Ga(e,t){e.uniform4iv(this.addr,t)}function Wa(e,t){e.uniform1uiv(this.addr,t)}function qa(e,t){e.uniform2uiv(this.addr,t)}function ja(e,t){e.uniform3uiv(this.addr,t)}function $a(e,t){e.uniform4uiv(this.addr,t)}function Xa(e,t,n){const i=t.length,r=pa(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||ta,r[e])}function Ya(e,t,n){const i=t.length,r=pa(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||ra,r[e])}function Ja(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return fa;case 35664:return ma;case 35665:return ga;case 35666:return va;case 35674:return ya;case 35675:return xa;case 35676:return _a;case 5124:case 35670:return ba;case 35667:case 35671:return wa;case 35668:case 35672:return Ma;case 35669:case 35673:return Sa;case 5125:return Ta;case 36294:return Ea;case 36295:return Aa;case 36296:return La;case 35678:case 36198:case 36298:case 36306:case 35682:return Ca;case 35679:case 36299:case 36307:return Ra;case 35680:case 36300:case 36308:case 36293:return Pa;case 36289:case 36303:case 36311:case 36292:return Da}}(t.type)}function Za(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ia;case 35664:return Na;case 35665:return ka;case 35666:return za;case 35674:return Oa;case 35675:return Fa;case 35676:return Ua;case 5124:case 35670:return Ba;case 35667:case 35671:return Ha;case 35668:case 35672:return Va;case 35669:case 35673:return Ga;case 5125:return Wa;case 36294:return qa;case 36295:return ja;case 36296:return $a;case 35678:case 36198:case 36298:case 36306:case 35682:return Xa;case 35680:case 36300:case 36308:case 36293:return Ya}}(t.type)}function Ka(e){this.id=e,this.seq=[],this.map={}}Za.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ha(t,e)},Ka.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}};const Qa=/(\w+)(\])?(\[|\.)?/g;function es(e,t){e.seq.push(t),e.map[t.id]=t}function ts(e,t,n){const i=e.name,r=i.length;for(Qa.lastIndex=0;;){const a=Qa.exec(i),s=Qa.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){es(n,void 0===c?new Ja(o,e,t):new Za(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Ka(o),es(n,e)),n=e}}}function ns(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);ts(n,e.getUniformLocation(t,n.name),this)}}function is(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}ns.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},ns.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},ns.upload=function(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},ns.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let rs=0;function as(e){switch(e){case it:return["Linear","( value )"];case rt:return["sRGB","( value )"];case st:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case at:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function ss(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function os(e,t){const n=as(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ls(e,t){const n=as(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function cs(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function us(e){return""!==e}function ds(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function hs(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ps=/^[ \t]*#include +<([\w\d./]+)>/gm;function fs(e){return e.replace(ps,ms)}function ms(e,t){const n=cr[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return fs(n)}const gs=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,vs=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ys(e){return e.replace(vs,_s).replace(gs,xs)}function xs(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_s(e,t,n,i)}function _s(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function bs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ws(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Pe:case De:t="ENVMAP_TYPE_CUBE";break;case Ie:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case De:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(us).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(us).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(us).join("\n"),v.length>0&&(v+="\n")):(g=[bs(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(us).join("\n"),v=[p,bs(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?cr.tonemapping_pars_fragment:"",0!==n.toneMapping?cs("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===je?"#define OPAQUE":"",cr.encodings_pars_fragment,n.map?os("mapTexelToLinear",n.mapEncoding):"",n.matcap?os("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?os("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?os("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?os("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?os("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?os("lightMapTexelToLinear",n.lightMapEncoding):"",ls("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(us).join("\n")),s=fs(s),s=ds(s,n),s=hs(s,n),o=fs(o),o=ds(o,n),o=hs(o,n),s=ys(s),o=ys(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===ut?"":"out highp vec4 pc_fragColor;",n.glslVersion===ut?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+o,_=is(r,35633,y+g+s),b=is(r,35632,x);if(r.attachShader(m,_),r.attachShader(m,b),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(_).trim(),n=r.getShaderInfoLog(b).trim();let i=!0,a=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=ss(r,_,"vertex"),n=ss(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,M;return r.deleteShader(_),r.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new ns(r,m)),w},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;35674===i.type&&(s=2),35675===i.type&&(s=3),35676===i.type&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(r,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=rs++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}function Ms(e,t,n,i,r,a,s){const o=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,d=r.maxVertexUniforms,h=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=it,l&&e&&e.isTexture&&e.format===$e&&e.type===Be&&e.encoding===rt&&(t=it),t}return{getParameters:function(a,o,m,v,y){const x=v.fog,_=a.isMeshStandardMaterial?v.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||_),w=f[a.type],M=y.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(u)return 1024;{const e=d,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(y):0;let S,T;if(null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead.")),w){const e=dr[w];S=e.vertexShader,T=e.fragmentShader}else S=a.vertexShader,T=a.fragmentShader;const E=e.getRenderTarget(),A=a.alphaTest>0,L=a.clearcoat>0;return{isWebGL2:l,shaderID:w,shaderName:a.type,vertexShader:S,fragmentShader:T,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==E?g(E.texture):e.outputEncoding,map:!!a.map,mapEncoding:g(a.map),matcap:!!a.matcap,matcapEncoding:g(a.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:g(b),envMapCubeUV:!!b&&(b.mapping===Ie||307===b.mapping),lightMap:!!a.lightMap,lightMapEncoding:g(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:g(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,clearcoat:L,clearcoatMap:L&&!!a.clearcoatMap,clearcoatRoughnessMap:L&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:g(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:A,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:g(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||!!a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!x,useFog:a.fog,fogExp2:x&&x.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===y.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:u,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(Lt(t.fragmentShader)),n.push(Lt(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<m.length;e++)n.push(t[m[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=dr[t];n=qi.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new ws(e,n,t,a),o.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function Ss(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Ts(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Es(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function As(e){const t=[];let n=0;const i=[],r=[],a=[],s={id:-1};function o(i,r,a,o,l,c){let u=t[n];const d=e.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:d.program||s,groupOrder:o,renderOrder:i.renderOrder,z:l,group:c},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=d.program||s,u.groupOrder=o,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transmissive:r,transparent:a,init:function(){n=0,i.length=0,r.length=0,a.length=0},push:function(e,t,n,s,l,c){const u=o(e,t,n,s,l,c);n.transmission>0?r.push(u):!0===n.transparent?a.push(u):i.push(u)},unshift:function(e,t,n,s,l,c){const u=o(e,t,n,s,l,c);n.transmission>0?r.unshift(u):!0===n.transparent?a.unshift(u):i.unshift(u)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Ts),r.length>1&&r.sort(t||Es),a.length>1&&a.sort(t||Es)}}}function Ls(e){let t=new WeakMap;return{get:function(n,i){let r;return!1===t.has(n)?(r=new As(e),t.set(n,[r])):i>=t.get(n).length?(r=new As(e),t.get(n).push(r)):r=t.get(n)[i],r},dispose:function(){t=new WeakMap}}}function Cs(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ft,color:new oi};break;case"SpotLight":n={position:new Ft,direction:new Ft,color:new oi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ft,color:new oi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ft,skyColor:new oi,groundColor:new oi};break;case"RectAreaLight":n={color:new oi,position:new Ft,halfWidth:new Ft,halfHeight:new Ft}}return e[t.id]=n,n}}}let Rs=0;function Ps(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ds(e,t){const n=new Cs,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new Ft);const a=new Ft,s=new gn,o=new gn;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0;a.sort(Ps);const y=!0!==s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,x=t.intensity,_=t.distance,b=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*x*y,l+=s.g*x*y,c+=s.b*x*y;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=b,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(x*y),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[h]=n,r.spotShadowMap[h]=b,r.spotShadowMatrix[h]=t.shadow.matrix,v++}r.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=b,r.pointShadowMatrix[d]=t.shadow.matrix,g++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(x*y),e.groundColor.copy(t.groundColor).multiplyScalar(x*y),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=ur.LTC_FLOAT_1,r.rectAreaLTC2=ur.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ur.LTC_HALF_1,r.rectAreaLTC2=ur.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const x=r.hash;x.directionalLength===u&&x.pointLength===d&&x.spotLength===h&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=v,x.directionalLength=u,x.pointLength=d,x.spotLength=h,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,r.version=Rs++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(h.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(h.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),i++}else if(h.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),e.direction.normalize(),u++}}},state:r}}function Is(e,t){const n=new Ds(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function Ns(e,t){let n=new WeakMap;return{get:function(i,r=0){let a;return!1===n.has(i)?(a=new Is(e,t),n.set(i,[a])):r>=n.get(i).length?(a=new Is(e,t),n.get(i).push(a)):a=n.get(i)[r],a},dispose:function(){n=new WeakMap}}}class ks extends ei{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}ks.prototype.isMeshDepthMaterial=!0;class zs extends ei{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Ft,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}zs.prototype.isMeshDistanceMaterial=!0;function Os(e,t,n){let i=new ar;const r=new St,a=new St,s=new Nt,o=new ks({depthPacking:3201}),l=new zs,c={},u=n.maxTextureSize,d={0:1,1:0,2:2},h=new ji({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new wi;f.setAttribute("position",new di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Bi(f,h),g=this;function v(n,i){const r=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,p,m,null)}function y(t,n,i,r,a,s,u){let h=null;const p=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==p?p:!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const e=h.uuid,t=i.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let r=n[t];void 0===r&&(r=h.clone(),n[t]=r),h=r}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=3===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],h.alphaMap=i.alphaMap,h.alphaTest=i.alphaTest,h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.displacementMap=i.displacementMap,h.displacementScale=i.displacementScale,h.displacementBias=i.displacementBias,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,!0===r.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=a,h.farDistance=s),h}function x(n,r,a,s,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=y(n,0,u,s,a.near,a.far,o);e.renderBufferDirect(a,null,i,t,n,c)}}}else if(r.visible){const t=y(n,0,r,s,a.near,a.far,o);e.renderBufferDirect(a,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],r,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;r.copy(d.mapSize);const p=d.getFrameExtents();if(r.multiply(p),a.copy(d.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/p.x),r.x=a.x*p.x,d.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/p.y),r.y=a.y*p.y,d.mapSize.y=a.y)),null===d.map&&!d.isPointLightShadow&&3===this.type){const e={minFilter:Fe,magFilter:Fe,format:$e};d.map=new kt(r.x,r.y,e),d.map.texture.name=c.name+".shadowMap",d.mapPass=new kt(r.x,r.y,e),d.camera.updateProjectionMatrix()}if(null===d.map){const e={minFilter:Oe,magFilter:Oe,format:$e};d.map=new kt(r.x,r.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const f=d.getViewportCount();for(let e=0;e<f;e++){const t=d.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),d.updateMatrices(c,e),i=d.getFrustum(),x(n,o,d.camera,c,this.type)}d.isPointLightShadow||3!==this.type||v(d,o),d.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function Fs(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Nt;let i=null;const r=new Nt(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?O(2929):F(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?O(2960):F(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}};let o={},l=null,c={},u=null,d=!1,h=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,_=null,b=null,w=null,M=null,S=null;const T=e.getParameter(35661);let E=!1,A=0;const L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(L)[1]),E=A>=1):-1!==L.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),E=A>=2);let C=null,R={};const P=e.getParameter(3088),D=e.getParameter(2978),I=(new Nt).fromArray(P),N=(new Nt).fromArray(D);function k(t,n,i){const r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return a}const z={};function O(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function F(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}z[3553]=k(3553,3553,1),z[34067]=k(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),O(2929),a.setFunc(3),V(!1),G(1),O(2884),H(0);const U={[Re]:32774,101:32778,102:32779};if(i)U[103]=32775,U[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(U[103]=e.MIN_EXT,U[104]=e.MAX_EXT)}const B={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function H(t,n,i,r,a,s,o,l){if(0!==t){if(!1===d&&(O(3042),d=!0),5===t)a=a||n,s=s||i,o=o||r,n===p&&a===g||(e.blendEquationSeparate(U[n],U[a]),p=n,g=a),i===f&&r===m&&s===v&&o===y||(e.blendFuncSeparate(B[i],B[r],B[s],B[o]),f=i,m=r,v=s,y=o),h=t,x=null;else if(t!==h||l!==x){if(p===Re&&g===Re||(e.blendEquation(32774),p=Re,g=Re),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,v=null,y=null,h=t,x=l}}else!0===d&&(F(3042),d=!1)}function V(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function G(t){0!==t?(O(2884),t!==b&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):F(2884),b=t}function W(t,n,i){t?(O(32823),M===n&&S===i||(e.polygonOffset(n,i),M=n,S=i)):F(32823)}function q(t){void 0===t&&(t=33984+T-1),C!==t&&(e.activeTexture(t),C=t)}return{buffers:{color:r,depth:a,stencil:s},enable:O,disable:F,bindFramebuffer:function(t,n){return null===n&&null!==l&&(n=l),c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,i&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(36160,t),l=t)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:H,setMaterial:function(e,t){2===e.side?F(2884):O(2884);let n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?H(0):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;s.setTest(i),i&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?O(32926):F(32926)},setFlipSided:V,setCullFace:G,setLineWidth:function(t){t!==w&&(E&&e.lineWidth(t),w=t)},setPolygonOffset:W,setScissorTest:function(e){e?O(3089):F(3089)},activeTexture:q,bindTexture:function(t,n){null===C&&q();let i=R[C];void 0===i&&(i={type:void 0,texture:void 0},R[C]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=R[C];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},C=null,R={},l=null,c={},u=null,d=!1,h=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,_=null,b=null,w=null,M=null,S=null,I.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),r.reset(),a.reset(),s.reset()}}}function Us(e,t,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):At("canvas")}function g(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?wt:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===p&&(p=m(a,s));const o=n?m(a,s):p;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return bt(e.width)&&bt(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==Oe&&e.minFilter!==Fe}function x(t,n,r,a,s=1){e.generateMipmap(t);i.get(n).__maxMipLevel=Math.log2(Math.max(r,a,s))}function _(n,i,r,a){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===i&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===rt?35907:32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function b(e){return e===Oe||1004===e||1005===e?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&h.delete(n),s.memory.textures--}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,r=i.get(t),a=i.get(n);if(!t)return;void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),s.memory.textures--),i.remove(n[t])}i.remove(n),i.remove(t)}(n)}let S=0;function T(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=s.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function E(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?function(t,i,r){if(6!==i.image.length)return;R(t,i),n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=s||l?l?i.image[e].image:i.image[e]:g(i.image[e],!1,!0,c);const d=u[0],h=v(d)||o,p=a.convert(i.format),f=a.convert(i.type),m=_(i.internalFormat,p,f,i.encoding);let b;if(C(34067,i,h),s){for(let e=0;e<6;e++){b=u[e].mipmaps;for(let t=0;t<b.length;t++){const r=b[t];i.format!==$e&&i.format!==je?null!==p?n.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,r.width,r.height,0,p,f,r.data)}}t.__maxMipLevel=b.length-1}else{b=i.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<b.length;t++){const i=b[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,p,f,i.data)}}else{n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<b.length;t++){const i=b[t];n.texImage2D(34069+e,t+1,m,p,f,i.image[e])}}t.__maxMipLevel=b.length}y(i,h)&&x(34067,i,d.width,d.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(s,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}const A={[Ne]:10497,[ke]:33071,[ze]:33648},L={[Oe]:9728,1004:9984,1005:9986,[Fe]:9729,1007:9985,[Ue]:9987};function C(n,a,s){if(s?(e.texParameteri(n,10242,A[a.wrapS]),e.texParameteri(n,10243,A[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[a.wrapR]),e.texParameteri(n,10240,L[a.magFilter]),e.texParameteri(n,10241,L[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===ke&&a.wrapT===ke||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,b(a.magFilter)),e.texParameteri(n,10241,b(a.minFilter)),a.minFilter!==Oe&&a.minFilter!==Fe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.type===Ge&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===We&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),s.memory.textures++)}function P(t,i,r){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),R(t,i),n.activeTexture(33984+r),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!o&&(e.wrapS!==ke||e.wrapT!==ke||e.minFilter!==Oe&&e.minFilter!==Fe)}(i)&&!1===v(i.image),c=g(i.image,l,!1,u),d=v(c)||o,h=a.convert(i.format);let p,f=a.convert(i.type),m=_(i.internalFormat,h,f,i.encoding);C(s,i,d);const b=i.mipmaps;if(i.isDepthTexture)m=6402,o?m=i.type===Ge?36012:i.type===Ve?33190:i.type===qe?35056:33189:i.type===Ge&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Xe&&6402===m&&i.type!==He&&i.type!==Ve&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=He,f=a.convert(i.type)),i.format===Ye&&6402===m&&(m=34041,i.type!==qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=qe,f=a.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,h,f,null);else if(i.isDataTexture)if(b.length>0&&d){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,m,p.width,p.height,0,h,f,p.data);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,h,f,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=b.length;e<t;e++)p=b[e],i.format!==$e&&i.format!==je?null!==h?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,h,f,p.data);t.__maxMipLevel=b.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(b.length>0&&d){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,m,h,f,p);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,m,h,f,c),t.__maxMipLevel=0;y(i,d)&&x(s,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function D(t,r,s,o,l){const c=a.convert(s.format),u=a.convert(s.type),d=_(s.internalFormat,c,u,s.encoding);32879===l||35866===l?n.texImage3D(l,0,d,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,d,r.width,r.height,0,c,u,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,l,i.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Ge?r=36012:t.type===Ve&&(r=33190));const i=k(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=k(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=a.convert(t.format),s=a.convert(t.type),o=_(t.internalFormat,r,s,t.encoding);if(i){const t=k(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Xe)e.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),I(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),I(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function k(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}let z=!1,O=!1;this.allocateTextureUnit=function(){const e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?P(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?P(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,f=l.isDataTexture3D||l.isDataTexture2DArray,m=v(t)||o;if(!o||l.format!==je||l.type!==Ge&&l.type!==We||(l.format=$e,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(o){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const i=a.convert(l.format),r=a.convert(l.type),s=_(l.internalFormat,i,r,l.encoding),o=k(t);e.renderbufferStorageMultisample(36161,o,s,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),I(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(34067,u.__webglTexture),C(34067,l,m);for(let e=0;e<6;e++)D(c.__webglFramebuffer[e],t,l,36064,34069+e);y(l,m)&&x(34067,l,t.width,t.height),n.unbindTexture()}else if(h){const e=t.texture;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=i.get(a);n.bindTexture(3553,s.__webglTexture),C(3553,a,m),D(c.__webglFramebuffer,t,a,36064+r,3553),y(a,m)&&x(3553,a,t.width,t.height)}n.unbindTexture()}else{let e=3553;if(f)if(o){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,u.__webglTexture),C(e,l,m),D(c.__webglFramebuffer,t,l,36064,e),y(l,m)&&x(e,l,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||o,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,s=r.length;a<s;a++){const s=r[a];if(y(s,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=i.get(s).__webglTexture;n.bindTexture(t,r),x(t,s,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o){const r=t.width,a=t.height;let s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024);const o=i.get(t);n.bindFramebuffer(36008,o.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,o.__webglFramebuffer),e.blitFramebuffer(0,0,r,a,0,0,r,a,s,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,o.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),e=e.texture),E(e,t)}}function Bs(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===Be)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===He)return 5123;if(1013===e)return 5124;if(e===Ve)return 5125;if(e===Ge)return 5126;if(e===We)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===je)return 6407;if(e===$e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===Xe)return 6402;if(e===Ye)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===qe?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Hs extends Xi{constructor(e=[]){super(),this.cameras=e}}Hs.prototype.isArrayCamera=!0;class Vs extends Hn{constructor(){super(),this.type="Group"}}Vs.prototype.isGroup=!0;const Gs={type:"move"};class Ws{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Vs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Vs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ft,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ft),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Vs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ft,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ft),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Gs))),l&&e.hand){a=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const e=new Vs;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[i.jointName]=e,l.add(e)}const r=l.joints[i.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}}class qs extends dt{constructor(e,t){super();const n=this,i=e.state;let r=null,a=1,s=null,o="local-floor",l=null,c=null,u=null,d=null,h=null,p=!1,f=null,m=null,g=null,v=null,y=null,x=null;const _=[],b=new Map,w=new Xi;w.layers.enable(1),w.viewport=new Nt;const M=new Xi;M.layers.enable(2),M.viewport=new Nt;const S=[w,M],T=new Hs;T.layers.enable(1),T.layers.enable(2);let E=null,A=null;function L(e){const t=b.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function C(){b.forEach((function(e,t){e.disconnect(t)})),b.clear(),E=null,A=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),f&&t.deleteFramebuffer(f),m&&t.deleteRenderbuffer(m),g&&t.deleteRenderbuffer(g),u=null,f=null,m=null,g=null,h=null,d=null,c=null,r=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function R(e){const t=r.inputSources;for(let e=0;e<_.length;e++)b.set(t[e],_[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=b.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),b.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=b.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=_[e];return void 0===t&&(t=new Ws,_[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=_[e];return void 0===t&&(t=new Ws,_[e]=t),t.getGripSpace()},this.getHand=function(e){let t=_[e];return void 0===t&&(t=new Ws,_[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return c},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",C),r.addEventListener("inputsourceschange",R);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h})}else if(t instanceof WebGLRenderingContext){const n={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(r,t,n),r.updateRenderState({layers:[h]})}else{p=e.antialias;let n=null;e.depth&&(x=256,e.stencil&&(x|=1024),y=e.stencil?33306:36096,n=e.stencil?35056:33190);const s={colorFormat:e.alpha?32856:32849,depthFormat:n,scaleFactor:a};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(s),u=t.createFramebuffer(),r.updateRenderState({layers:[d]}),p&&(f=t.createFramebuffer(),m=t.createRenderbuffer(),t.bindRenderbuffer(36161,m),t.renderbufferStorageMultisample(36161,4,32856,d.textureWidth,d.textureHeight),i.bindFramebuffer(36160,f),t.framebufferRenderbuffer(36160,36064,36161,m),t.bindRenderbuffer(36161,null),null!==n&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,n,d.textureWidth,d.textureHeight),t.framebufferRenderbuffer(36160,y,36161,g),t.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}s=await r.requestReferenceSpace(o),k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new Ft,D=new Ft;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;T.near=M.near=w.near=e.near,T.far=M.far=w.far=e.far,E===T.near&&A===T.far||(r.updateRenderState({depthNear:T.near,depthFar:T.far}),E=T.near,A=T.far);const t=e.parent,n=T.cameras;I(T,t);for(let e=0;e<n.length;e++)I(n[e],t);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),e.position.copy(T.position),e.quaternion.copy(T.quaternion),e.scale.copy(T.scale),e.matrix.copy(T.matrix),e.matrixWorld.copy(T.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const i=P.distanceTo(D),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=s*u,p=s*d,f=i/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,v=o+f,y=h-m,x=p+(i-m),_=l*o/v*g,b=c*o/v*g;e.projectionMatrix.makePerspective(y,x,_,b,g,v)}(T,w,M):T.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let N=null;const k=new sr;k.setAnimationLoop((function(e,n){if(l=n.getViewerPose(s),v=n,null!==l){const e=l.views;null!==h&&i.bindXRFramebuffer(h.framebuffer);let n=!1;e.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const a=e[r];let s=null;if(null!==h)s=h.getViewport(a);else{const e=c.getViewSubImage(d,a);i.bindXRFramebuffer(u),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,y,3553,e.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),s=e.viewport}const o=S[r];o.matrix.fromArray(a.transform.matrix),o.projectionMatrix.fromArray(a.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&T.matrix.copy(o.matrix),!0===n&&T.cameras.push(o)}p&&(i.bindXRFramebuffer(f),null!==x&&t.clear(x))}const a=r.inputSources;for(let e=0;e<_.length;e++){const t=_[e],i=a[e];t.update(i,n,s)}if(N&&N(e,n),p){const e=d.textureWidth,n=d.textureHeight;i.bindFramebuffer(36008,f),i.bindFramebuffer(36009,u),t.invalidateFramebuffer(36008,[y]),t.invalidateFramebuffer(36009,[y]),t.blitFramebuffer(0,0,e,n,0,0,e,n,16384,9728),t.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,f)}v=null})),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}function js(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,a,s){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t,i){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,s):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function $s(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=At("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let d=null,h=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=it,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,_=-1,b=null;const w=new Nt,M=new Nt;let S=null,T=t.width,E=t.height,A=1,L=null,C=null;const R=new Nt(0,0,T,E),P=new Nt(0,0,T,E);let D=!1;const I=[],N=new ar;let k=!1,z=!1,O=null;const F=new gn,U=new Ft,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===x?A:1}let V,G,W,q,j,$,X,Y,J,Z,K,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de=n;function he(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:i,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),null===de){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=he(t,e),null===de)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){V=new Wr(de),G=new mr(de,V,e),V.init(G),ce=new Bs(de,V,G),W=new Fs(de,V,G),I[0]=1029,q=new $r(de),j=new Ss,$=new Us(de,V,W,j,G,ce,q),X=new vr(m),Y=new Gr(m),J=new or(de,G),ue=new pr(de,V,J,G),Z=new qr(de,J,q,ue),K=new Qr(de,Z,J,q),se=new Kr(de,G,$),ie=new gr(j),Q=new Ms(m,X,Y,V,G,ue,ie),ee=new js(j),te=new Ls(j),ne=new Ns(V,G),ae=new hr(m,X,W,K,o),re=new Os(m,K,G),oe=new fr(de,V,q,G),le=new jr(de,V,q,G),q.programs=Q.programs,m.capabilities=G,m.extensions=V,m.properties=j,m.renderLists=te,m.shadowMap=re,m.state=W,m.info=q}pe();const fe=new qs(m,de);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=q.autoReset,t=re.enabled,n=re.autoUpdate,i=re.needsUpdate,r=re.type;pe(),q.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=i,re.type=r}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){(function(e){const t=j.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))})(e),j.remove(e)}(t)}this.xr=fe,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(T,E,!1))},this.getSize=function(e){return e.set(T,E)},this.setSize=function(e,n,i){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,E=n,t.width=Math.floor(e*A),t.height=Math.floor(n*A),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*A,E*A).floor()},this.setDrawingBufferSize=function(e,n,i){T=e,E=n,A=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),W.viewport(w.copy(R).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),W.scissor(M.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){W.setScissorTest(D=e)},this.setOpaqueSort=function(e){L=e},this.setTransparentSort=function(e){C=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),de.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),te.dispose(),ne.dispose(),j.dispose(),X.dispose(),Y.dispose(),K.dispose(),ue.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",xe),fe.removeEventListener("sessionend",_e),O&&(O.dispose(),O=null),be.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=B);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=B);$.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===x?m.outputEncoding:x.texture.encoding,l=(i.isMeshStandardMaterial?Y:X).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,g=j.get(i),v=h.state.lights;if(!0===k&&(!0===z||e!==b)){const t=e===b&&i.id===_;ie.setState(i,e,t)}let y=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==v.state.version||g.outputEncoding!==o||r.isInstancedMesh&&!1===g.instancing?y=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?y=!0:r.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||i.fog&&g.fog!==a?y=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===ie.numPlanes&&g.numIntersection===ie.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==d||g.morphNormals!==p||!0===G.isWebGL2&&g.morphTargetsCount!==f)&&(y=!0):y=!0:y=!0:y=!0:(y=!0,g.__version=i.version);let w=g.currentProgram;!0===y&&(w=Ee(i,t,r));let M=!1,S=!1,T=!1;const L=w.getUniforms(),C=g.uniforms;W.useProgram(w.program)&&(M=!0,S=!0,T=!0);i.id!==_&&(_=i.id,S=!0);if(M||b!==e){if(L.setValue(de,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&L.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,S=!0,T=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=L.map.cameraPosition;void 0!==t&&t.setValue(de,U.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&L.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(de,r,"bindMatrix"),L.setOptional(de,r,"bindMatrixInverse");const e=r.skeleton;e&&(G.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),L.setValue(de,"boneTexture",e.boneTexture,$),L.setValue(de,"boneTextureSize",e.boneTextureSize)):L.setOptional(de,e,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||se.update(r,n,i,w);(S||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,L.setValue(de,"receiveShadow",r.receiveShadow));S&&(L.setValue(de,"toneMappingExposure",m.toneMappingExposure),g.needsLights&&(P=T,(R=C).ambientLightColor.needsUpdate=P,R.lightProbe.needsUpdate=P,R.directionalLights.needsUpdate=P,R.directionalLightShadows.needsUpdate=P,R.pointLights.needsUpdate=P,R.pointLightShadows.needsUpdate=P,R.spotLights.needsUpdate=P,R.spotLightShadows.needsUpdate=P,R.rectAreaLights.needsUpdate=P,R.hemisphereLights.needsUpdate=P),a&&i.fog&&ee.refreshFogUniforms(C,a),ee.refreshMaterialUniforms(C,i,A,E,O),ns.upload(de,g.uniformsList,C,$));var R,P;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ns.upload(de,g.uniformsList,C,$),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&L.setValue(de,"center",r.center);return L.setValue(de,"modelViewMatrix",r.modelViewMatrix),L.setValue(de,"normalMatrix",r.normalMatrix),L.setValue(de,"modelMatrix",r.matrixWorld),w}(e,t,n,i,r);W.setMaterial(i,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,d=1;!0===i.wireframe&&(l=Z.getWireframeAttribute(n),d=2),ue.setup(r,i,o,n,l);let p=oe;null!==l&&(u=J.get(l),p=le,p.setIndex(u));const f=null!==l?l.count:c.count,g=n.drawRange.start*d,v=n.drawRange.count*d,y=null!==a?a.start*d:0,w=null!==a?a.count*d:1/0,M=Math.max(g,y),S=Math.min(f,g+v,y+w)-1,T=Math.max(0,S-M+1);if(0!==T){if(r.isMesh)!0===i.wireframe?(W.setLineWidth(i.wireframeLinewidth*H()),p.setMode(1)):p.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),W.setLineWidth(e*H()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);if(r.isInstancedMesh)p.renderInstances(M,T,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(M,T,e)}else p.render(M,T)}},this.compile=function(e,t){h=ne.get(e),h.init(),f.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){Ee(n[i],e,t)}else Ee(n,e,t)})),f.pop(),h=null};let ye=null;function xe(){be.stop()}function _e(){be.start()}const be=new sr;function we(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=K.update(e),r=e.material;r.visible&&d.push(e,t,r,n,U.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==q.render.frame&&(e.skeleton.update(),e.skeleton.frame=q.render.frame),!e.frustumCulled||N.intersectsObject(e))){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=K.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&d.push(e,t,o,n,U.z,s)}}else r.visible&&d.push(e,t,r,n,U.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)we(r[e],t,n,i)}function Me(e,t,n,i){const r=e.opaque,a=e.transmissive,o=e.transparent;h.setupLightsView(n),a.length>0&&function(e,t,n){if(null===O){const e=!0===s&&!0===G.isWebGL2;O=new(e?zt:kt)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(We)?We:Be,minFilter:Ue,magFilter:Oe,wrapS:ke,wrapT:ke})}const i=m.getRenderTarget();m.setRenderTarget(O),m.clear();const r=m.toneMapping;m.toneMapping=0,Se(e,t,n),m.toneMapping=r,$.updateMultisampleRenderTarget(O),$.updateRenderTargetMipmap(O),m.setRenderTarget(i)}(r,t,n),i&&W.viewport(w.copy(i)),r.length>0&&Se(r,t,n),a.length>0&&Se(a,t,n),o.length>0&&Se(o,t,n)}function Se(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(n.layers)&&Te(s,t,n,o,l,c)}}function Te(e,t,n,i,r,a){e.onBeforeRender(m,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(m,t,n,i,e,a),!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,a),r.side=0,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,a),r.side=2):m.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(m,t,n,i,r,a)}function Ee(e,t,n){!0!==t.isScene&&(t=B);const i=j.get(e),r=h.state.lights,a=h.state.shadowsArray,s=r.state.version,o=Q.getParameters(e,r.state,a,t,n),l=Q.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",ve),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return Ae(e,o),u}else o.uniforms=Q.getUniforms(e),e.onBuild(n,o,m),e.onBeforeCompile(o,m),u=Q.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ie.uniform),Ae(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotShadowMatrix.value=r.state.spotShadowMatrix,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=u.getUniforms(),f=ns.seqWithValue(p.seq,d);return i.currentProgram=u,i.uniformsList=f,u}function Ae(e,t){const n=j.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}be.setAnimationLoop((function(e){ye&&ye(e)})),"undefined"!=typeof window&&be.setContext(window),this.setAnimationLoop=function(e){ye=e,fe.setAnimationLoop(e),null===e?be.stop():be.start()},fe.addEventListener("sessionstart",xe),fe.addEventListener("sessionend",_e),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),h=ne.get(e,f.length),h.init(),f.push(h),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(F),z=this.localClippingEnabled,k=ie.init(this.clippingPlanes,z,t),d=te.get(e,p.length),d.init(),p.push(d),we(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(L,C),!0===k&&ie.beginShadows();const n=h.state.shadowsArray;if(re.render(n,e,t),!0===k&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Me(d,e,i,i.viewport)}}else Me(d,e,t);null!==x&&($.updateMultisampleRenderTarget(x),$.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),ue.resetDefaultState(),_=-1,b=null,f.pop(),h=f.length>0?f[f.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTarget=function(e,t=0,n=0){x=e,v=t,y=n,e&&void 0===j.get(e).__webglFramebuffer&&$.setupRenderTarget(e);let i=null,r=!1,a=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const s=j.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=s[t],r=!0):i=e.isWebGLMultisampleRenderTarget?j.get(e).__webglMultisampledFramebuffer:s,w.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else w.copy(R).multiplyScalar(A).floor(),M.copy(P).multiplyScalar(A).floor(),S=D;if(W.bindFramebuffer(36160,i)&&G.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(I.length!==n.length||36064!==I[0]){for(let e=0,t=n.length;e<t;e++)I[e]=36064+e;I.length=n.length,t=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,t=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,t=!0);t&&(G.isWebGL2?de.drawBuffers(I):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(W.viewport(w),W.scissor(M),W.setScissorTest(S),r){const i=j.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(a){const i=j.get(e.texture),r=t||0;de.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}_=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=j.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){W.bindFramebuffer(36160,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==$e&&ce.convert(o)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===We&&(V.has("EXT_color_buffer_half_float")||G.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(l===Be||ce.convert(l)===de.getParameter(35738)||l===Ge&&(G.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===de.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&de.readPixels(t,n,i,r,ce.convert(o),ce.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==x?j.get(x).__webglFramebuffer:null;W.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);let s=ce.convert(t.format);G.isWebGL2&&(6407===s&&(s=32849),6408===s&&(s=32856)),$.setTexture2D(t,0),de.copyTexImage2D(3553,n,s,e.x,e.y,r,a,0),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,a=t.image.height,s=ce.convert(n.format),o=ce.convert(n.type);$.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):de.texSubImage2D(3553,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&de.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ce.convert(i.format),c=ce.convert(i.type);let u;if(i.isDataTexture3D)$.setTexture3D(i,0),u=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(i,0),u=35866}de.pixelStorei(37440,i.flipY),de.pixelStorei(37441,i.premultiplyAlpha),de.pixelStorei(3317,i.unpackAlignment);const d=de.getParameter(3314),h=de.getParameter(32878),p=de.getParameter(3316),f=de.getParameter(3315),g=de.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?de.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,v.data)):de.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v),de.pixelStorei(3314,d),de.pixelStorei(32878,h),de.pixelStorei(3316,p),de.pixelStorei(3315,f),de.pixelStorei(32877,g),0===r&&i.generateMipmaps&&de.generateMipmap(u),W.unbindTexture()},this.initTexture=function(e){$.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,W.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}$s.prototype.isWebGLRenderer=!0;(class extends $s{}).prototype.isWebGL1Renderer=!0;class Xs extends Hn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Xs.prototype.isScene=!0;class Ys{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=lt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vt()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ys.prototype.isInterleavedBuffer=!0;const Js=new Ft;class Zs{constructor(e,t,n,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Js.x=this.getX(t),Js.y=this.getY(t),Js.z=this.getZ(t),Js.applyMatrix4(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Js.x=this.getX(t),Js.y=this.getY(t),Js.z=this.getZ(t),Js.applyNormalMatrix(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Js.x=this.getX(t),Js.y=this.getY(t),Js.z=this.getZ(t),Js.transformDirection(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new di(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Zs.prototype.isInterleavedBufferAttribute=!0;class Ks extends ei{constructor(e){super(),this.type="SpriteMaterial",this.color=new oi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Qs;Ks.prototype.isSpriteMaterial=!0;const eo=new Ft,to=new Ft,no=new Ft,io=new St,ro=new St,ao=new gn,so=new Ft,oo=new Ft,lo=new Ft,co=new St,uo=new St,ho=new St;function po(e,t,n,i,r,a){io.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(ro.x=a*io.x-r*io.y,ro.y=r*io.x+a*io.y):ro.copy(io),e.copy(t),e.x+=ro.x,e.y+=ro.y,e.applyMatrix4(ao)}(class extends Hn{constructor(e){if(super(),this.type="Sprite",void 0===Qs){Qs=new wi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Ys(e,5);Qs.setIndex([0,1,2,0,2,3]),Qs.setAttribute("position",new Zs(t,3,0,!1)),Qs.setAttribute("uv",new Zs(t,2,3,!1))}this.geometry=Qs,this.material=void 0!==e?e:new Ks,this.center=new St(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),to.setFromMatrixScale(this.matrixWorld),ao.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),no.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&to.multiplyScalar(-no.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;po(so.set(-.5,-.5,0),no,a,to,i,r),po(oo.set(.5,-.5,0),no,a,to,i,r),po(lo.set(.5,.5,0),no,a,to,i,r),co.set(0,0),uo.set(1,0),ho.set(1,1);let s=e.ray.intersectTriangle(so,oo,lo,!1,eo);if(null===s&&(po(oo.set(-.5,.5,0),no,a,to,i,r),uo.set(0,1),s=e.ray.intersectTriangle(so,lo,oo,!1,eo),null===s))return;const o=e.ray.origin.distanceTo(eo);o<e.near||o>e.far||t.push({distance:o,point:eo.clone(),uv:Kn.getUV(eo,so,oo,lo,co,uo,ho,new St),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const fo=new Ft,mo=new Nt,go=new Nt,vo=new Ft,yo=new gn;class xo extends Bi{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gn,this.bindMatrixInverse=new gn}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;mo.fromBufferAttribute(i.attributes.skinIndex,e),go.fromBufferAttribute(i.attributes.skinWeight,e),fo.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const i=go.getComponent(e);if(0!==i){const r=mo.getComponent(e);yo.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(vo.copy(fo).applyMatrix4(yo),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}xo.prototype.isSkinnedMesh=!0;(class extends Hn{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends Dt{constructor(e=null,t=1,n=1,i,r,a,s,o,l=1003,c=1003,u,d){super(null,a,s,o,l,c,i,r,u,d),this.image={data:e,width:t,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class _o extends di{constructor(e,t,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}_o.prototype.isInstancedBufferAttribute=!0;const bo=new gn,wo=new gn,Mo=[],So=new Bi;(class extends Bi{constructor(e,t,n){super(e,t),this.instanceMatrix=new _o(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(So.geometry=this.geometry,So.material=this.material,void 0!==So.material)for(let r=0;r<i;r++){this.getMatrixAt(r,bo),wo.multiplyMatrices(n,bo),So.matrixWorld=wo,So.raycast(e,Mo);for(let e=0,n=Mo.length;e<n;e++){const n=Mo[e];n.instanceId=r,n.object=this,t.push(n)}Mo.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new _o(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class To extends ei{constructor(e){super(),this.type="LineBasicMaterial",this.color=new oi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}To.prototype.isLineBasicMaterial=!0;const Eo=new Ft,Ao=new Ft,Lo=new gn,Co=new mn,Ro=new on;class Po extends Hn{constructor(e=new wi,t=new To){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Eo.fromBufferAttribute(t,e-1),Ao.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Eo.distanceTo(Ao);e.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ro.copy(n.boundingSphere),Ro.applyMatrix4(i),Ro.radius+=r,!1===e.ray.intersectsSphere(Ro))return;Lo.copy(i).invert(),Co.copy(e.ray).applyMatrix4(Lo);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new Ft,c=new Ft,u=new Ft,d=new Ft,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,a.start),s=Math.min(i.count,a.start+a.count)-1;n<s;n+=h){const a=i.getX(n),s=i.getX(n+1);l.fromBufferAttribute(r,a),c.fromBufferAttribute(r,s);if(Co.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(d);h<e.near||h>e.far||t.push({distance:h,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),i=Math.min(r.count,a.start+a.count)-1;n<i;n+=h){l.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(Co.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Po.prototype.isLine=!0;const Do=new Ft,Io=new Ft;class No extends Po{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Do.fromBufferAttribute(t,e),Io.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Do.distanceTo(Io);e.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}No.prototype.isLineSegments=!0;(class extends Po{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class ko extends ei{constructor(e){super(),this.type="PointsMaterial",this.color=new oi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}ko.prototype.isPointsMaterial=!0;const zo=new gn,Oo=new mn,Fo=new on,Uo=new Ft;function Bo(e,t,n,i,r,a,s){const o=Oo.distanceSqToPoint(e);if(o<n){const n=new Ft;Oo.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}(class extends Hn{constructor(e=new wi,t=new ko){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fo.copy(n.boundingSphere),Fo.applyMatrix4(i),Fo.radius+=r,!1===e.ray.intersectsSphere(Fo))return;zo.copy(i).invert(),Oo.copy(e.ray).applyMatrix4(zo);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){const r=n.index,s=n.attributes.position;if(null!==r){for(let n=Math.max(0,a.start),l=Math.min(r.count,a.start+a.count);n<l;n++){const a=r.getX(n);Uo.fromBufferAttribute(s,a),Bo(Uo,a,o,i,e,t,this)}}else{for(let n=Math.max(0,a.start),r=Math.min(s.count,a.start+a.count);n<r;n++)Uo.fromBufferAttribute(s,n),Bo(Uo,n,o,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0;(class extends Dt{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.format=void 0!==s?s:je,this.minFilter=void 0!==a?a:Fe,this.magFilter=void 0!==r?r:Fe,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;(class extends Dt{constructor(e,t,n,i,r,a,s,o,l,c,u,d){super(null,a,s,o,l,c,i,r,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;(class extends Dt{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends Dt{constructor(e,t,n,i,r,a,s,o,l,c){if((c=void 0!==c?c:Xe)!==Xe&&c!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Xe&&(n=He),void 0===n&&c===Ye&&(n=qe),super(null,i,r,a,s,o,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:Oe,this.minFilter=void 0!==o?o:Oe,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0,new Ft,new Ft,new Ft,new Kn;class Ho{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let s,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),s=n[i]-a,s<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i];return(i+(a-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),s=this.getPoint(r),o=t||(a.isVector2?new St:new Ft);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Ft,i=[],r=[],a=[],s=new Ft,o=new gn;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new Ft)}r[0]=new Ft,a[0]=new Ft;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(i[t-1],i[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(yt(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(yt(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Vo extends Ho{constructor(e=0,t=0,n=1,i=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new St,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Vo.prototype.isEllipseCurve=!0;class Go extends Vo{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.type="ArcCurve"}}function Wo(){let e=0,t=0,n=0,i=0;function r(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+o)+(i-n)/o;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}Go.prototype.isArcCurve=!0;const qo=new Ft,jo=new Wo,$o=new Wo,Xo=new Wo;class Yo extends Ho{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Ft){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(qo.subVectors(i[0],i[1]).add(i[0]),s=qo);const u=i[l%r],d=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(qo.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=qo),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),jo.initNonuniformCatmullRom(s.x,u.x,d.x,o.x,t,n,i),$o.initNonuniformCatmullRom(s.y,u.y,d.y,o.y,t,n,i),Xo.initNonuniformCatmullRom(s.z,u.z,d.z,o.z,t,n,i)}else"catmullrom"===this.curveType&&(jo.initCatmullRom(s.x,u.x,d.x,o.x,this.tension),$o.initCatmullRom(s.y,u.y,d.y,o.y,this.tension),Xo.initCatmullRom(s.z,u.z,d.z,o.z,this.tension));return n.set(jo.calc(c),$o.calc(c),Xo.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ft).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Jo(e,t,n,i,r){const a=.5*(i-t),s=.5*(r-n),o=e*e;return(2*n-2*i+a+s)*(e*o)+(-3*n+3*i-2*a-s)*o+a*e+n}function Zo(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Ko(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}Yo.prototype.isCatmullRomCurve3=!0;class Qo extends Ho{constructor(e=new St,t=new St,n=new St,i=new St){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new St){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(Ko(e,i.x,r.x,a.x,s.x),Ko(e,i.y,r.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Qo.prototype.isCubicBezierCurve=!0;class el extends Ho{constructor(e=new Ft,t=new Ft,n=new Ft,i=new Ft){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ft){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(Ko(e,i.x,r.x,a.x,s.x),Ko(e,i.y,r.y,a.y,s.y),Ko(e,i.z,r.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}el.prototype.isCubicBezierCurve3=!0;class tl extends Ho{constructor(e=new St,t=new St){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new St){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new St;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}tl.prototype.isLineCurve=!0;class nl extends Ho{constructor(e=new St,t=new St,n=new St){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new St){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Zo(e,i.x,r.x,a.x),Zo(e,i.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}nl.prototype.isQuadraticBezierCurve=!0;class il extends Ho{constructor(e=new Ft,t=new Ft,n=new Ft){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ft){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Zo(e,i.x,r.x,a.x),Zo(e,i.y,r.y,a.y),Zo(e,i.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}il.prototype.isQuadraticBezierCurve3=!0;class rl extends Ho{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new St){const n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),s=r-a,o=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Jo(s,o.x,l.x,c.x,u.x),Jo(s,o.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new St).fromArray(n))}return this}}rl.prototype.isSplineCurve=!0;var al=Object.freeze({__proto__:null,ArcCurve:Go,CatmullRomCurve3:Yo,CubicBezierCurve:Qo,CubicBezierCurve3:el,EllipseCurve:Vo,LineCurve:tl,LineCurve3:class extends Ho{constructor(e=new Ft,t=new Ft){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Ft){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:nl,QuadraticBezierCurve3:il,SplineCurve:rl});class sl extends Ho{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new tl(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,a=this.curves[r],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new al[n.type]).fromJSON(n))}return this}}class ol extends sl{constructor(e){super(),this.type="Path",this.currentPoint=new St,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new tl(this.currentPoint.clone(),new St(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new nl(this.currentPoint.clone(),new St(e,t),new St(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const s=new Qo(this.currentPoint.clone(),new St(e,t),new St(n,i),new St(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new rl(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,s,o),this}absellipse(e,t,n,i,r,a,s,o){const l=new Vo(e,t,n,i,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ll extends ol{constructor(e){super(e),this.uuid=vt(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new ol).fromJSON(n))}return this}}const cl=function(e,t,n=2){const i=t&&t.length,r=i?t[0]*n:e.length;let a=ul(e,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,d,h,p;if(i&&(a=function(e,t,n,i){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*i,l=a<s-1?t[a+1]*i:e.length,c=ul(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(bl(c));for(r.sort(vl),a=0;a<r.length;a++)yl(r[a],n),n=dl(n,n.next);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?1/p:0}return hl(a,s,n,o,l,p),s};function ul(e,t,n,i,r){let a,s;if(r===function(e,t,n,i){let r=0;for(let a=t,s=n-i;a<n;a+=i)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)s=Pl(a,e[a],e[a+1],s);else for(a=n-i;a>=t;a-=i)s=Pl(a,e[a],e[a+1],s);return s&&Tl(s,s.next)&&(Dl(s),s=s.next),s}function dl(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Tl(i,i.next)&&0!==Sl(i.prev,i,i.next))i=i.next;else{if(Dl(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function hl(e,t,n,i,r,a,s){if(!e)return;!s&&a&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=_l(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(s>1)}(r)}(e,i,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?fl(e,i,r,a):pl(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),Dl(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?hl(e=ml(dl(e),t,n),t,n,i,r,a,2):2===s&&gl(e,t,n,i,r,a):hl(dl(e),t,n,i,r,a,1);break}}function pl(e){const t=e.prev,n=e,i=e.next;if(Sl(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(wl(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Sl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function fl(e,t,n,i){const r=e.prev,a=e,s=e.next;if(Sl(r,a,s)>=0)return!1;const o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,l=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,c=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,u=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,d=_l(o,l,t,n,i),h=_l(c,u,t,n,i);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&wl(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&Sl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&wl(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&Sl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&wl(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&Sl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&wl(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&Sl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ml(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!Tl(r,a)&&El(r,i,i.next,a)&&Cl(r,a)&&Cl(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Dl(i),Dl(i.next),i=e=a),i=i.next}while(i!==e);return dl(i)}function gl(e,t,n,i,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Ml(s,e)){let o=Rl(s,e);return s=dl(s,s.next),o=dl(o,o.next),hl(s,t,n,i,r,a),void hl(o,t,n,i,r,a)}e=e.next}s=s.next}while(s!==e)}function vl(e,t){return e.x-t.x}function yl(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let a,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s){if(s=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(i===s)return a;const o=a,l=a.x,c=a.y;let u,d=1/0;n=a;do{i>=n.x&&n.x>=l&&i!==n.x&&wl(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),Cl(n,e)&&(u<d||u===d&&(n.x>a.x||n.x===a.x&&xl(a,n)))&&(a=n,d=u)),n=n.next}while(n!==o);return a}(e,t),t){const n=Rl(t,e);dl(t,t.next),dl(n,n.next)}}function xl(e,t){return Sl(e.prev,e,t.prev)<0&&Sl(t.next,e,e.next)<0}function _l(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function bl(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function wl(e,t,n,i,r,a,s,o){return(r-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(r-s)*(i-o)>=0}function Ml(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&El(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Cl(e,t)&&Cl(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Sl(e.prev,e,t.prev)||Sl(e,t.prev,t))||Tl(e,t)&&Sl(e.prev,e,e.next)>0&&Sl(t.prev,t,t.next)>0)}function Sl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Tl(e,t){return e.x===t.x&&e.y===t.y}function El(e,t,n,i){const r=Ll(Sl(e,t,n)),a=Ll(Sl(e,t,i)),s=Ll(Sl(n,i,e)),o=Ll(Sl(n,i,t));return r!==a&&s!==o||(!(0!==r||!Al(e,n,t))||(!(0!==a||!Al(e,i,t))||(!(0!==s||!Al(n,e,i))||!(0!==o||!Al(n,t,i)))))}function Al(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ll(e){return e>0?1:e<0?-1:0}function Cl(e,t){return Sl(e.prev,e,e.next)<0?Sl(e,t,e.next)>=0&&Sl(e,e.prev,t)>=0:Sl(e,t,e.prev)<0||Sl(e,e.next,t)<0}function Rl(e,t){const n=new Il(e.i,e.x,e.y),i=new Il(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Pl(e,t,n,i){const r=new Il(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Dl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Il(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Nl{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Nl.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];kl(e),zl(n,e);let a=e.length;t.forEach(kl);for(let e=0;e<t.length;e++)i.push(a),a+=t[e].length,zl(n,t[e]);const s=cl(n,i);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}}function kl(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function zl(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Ol extends wi{constructor(e=new ll([new St(.5,.5),new St(-.5,.5),new St(-.5,-.5),new St(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++){a(e[t])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Fl;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,x,_,b=!1;f&&(g=f.getSpacedPoints(o),b=!0,c=!1,v=f.computeFrenetFrames(o,!1),y=new Ft,x=new Ft,_=new Ft),c||(p=0,u=0,d=0,h=0);const w=e.extractPoints(s);let M=w.shape;const S=w.holes;if(!Nl.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];Nl.isClockWise(t)&&(S[e]=t.reverse())}}const T=Nl.triangulateShape(M,S),E=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const L=M.length,C=T.length;function R(e,t,n){let i,r,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,d=s*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,f=t.y+s/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(s*c-o*l);i=p+s*m-e.x,r=f+o*m-e.y;const g=i*i+r*r;if(g<=2)return new St(i,r);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=s,a=Math.sqrt(u)):(i=s,r=o,a=Math.sqrt(u/2))}return new St(i/a,r/a)}const P=[];for(let e=0,t=E.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),P[e]=R(E[e],E[n],E[i]);const D=[];let I,N=P.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];I=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[e]=R(t[e],t[i],t[r]);D.push(I),N=N.concat(I)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=A(E[e],P[e],i);O(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],I[e],i);O(r.x,r.y,-n)}}}const k=d+h;for(let e=0;e<L;e++){const t=c?A(M[e],N[e],k):M[e];b?(x.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(x).add(y),O(_.x,_.y,_.z)):O(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<L;t++){const n=c?A(M[t],N[t],k):M[t];b?(x.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(x).add(y),O(_.x,_.y,_.z)):O(n.x,n.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=E.length;e<t;e++){const t=A(E[e],P[e],i);O(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=D[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],I[e],i);b?O(r.x,r.y+g[o-1].y,g[o-1].x+n):O(r.x,r.y,l+n)}}}function z(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=L*e,a=L*(e+1);U(t+i+n,t+r+n,t+r+a,t+i+a)}}}function O(e,t,n){a.push(e),a.push(t),a.push(n)}function F(e,t,r){B(e),B(t),B(r);const a=i.length/3,s=m.generateTopUV(n,i,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[2])}function U(e,t,r,a){B(e),B(t),B(a),B(t),B(r),B(a);const s=i.length/3,o=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function B(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function H(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=L*e;for(let e=0;e<C;e++){const n=T[e];F(n[2]+t,n[1]+t,n[0]+t)}e=o+2*p,t=L*e;for(let e=0;e<C;e++){const n=T[e];F(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<C;e++){const t=T[e];F(t[2],t[1],t[0])}for(let e=0;e<C;e++){const t=T[e];F(t[0]+L*o,t[1]+L*o,t[2]+L*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;z(E,t),t+=E.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];z(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new fi(i,3)),this.setAttribute("uv",new fi(r,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new al[i.type]).fromJSON(i)),new Ol(n,e.options)}}const Fl={generateTopUV:function(e,t,n,i,r){const a=t[3*n],s=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new St(a,s),new St(o,l),new St(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new St(s,1-l),new St(c,1-d),new St(h,1-f),new St(m,1-v)]:[new St(o,1-l),new St(u,1-d),new St(p,1-f),new St(g,1-v)]}};class Ul extends wi{constructor(e=new ll([new St(0,.5),new St(-.5,-.5),new St(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Nl.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Nl.isClockWise(t)&&(u[e]=t.reverse())}const d=Nl.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],i=t[0]+s,r=t[1]+s,a=t[2]+s;n.push(i,r,a),o+=3}}this.setIndex(n),this.setAttribute("position",new fi(i,3)),this.setAttribute("normal",new fi(r,3)),this.setAttribute("uv",new fi(a,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new Ul(n,e.curveSegments)}}class Bl extends wi{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new Ft,d=new Ft,h=[],p=[],f=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0==h&&0==a?y=.5/t:h==n&&o==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(a+v*s),u.y=e*Math.cos(a+v*s),u.z=e*Math.sin(i+o*r)*Math.sin(a+v*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=c[e][i+1],r=c[e][i],s=c[e+1][i],l=c[e+1][i+1];(0!==e||a>0)&&h.push(t,r,l),(e!==n-1||o<Math.PI)&&h.push(r,s,l)}this.setIndex(h),this.setAttribute("position",new fi(p,3)),this.setAttribute("normal",new fi(f,3)),this.setAttribute("uv",new fi(m,2))}static fromJSON(e){return new Bl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}(class extends ei{constructor(e){super(),this.type="ShadowMaterial",this.color=new oi(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Hl extends ei{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new oi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Hl.prototype.isMeshStandardMaterial=!0;(class extends Hl{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new St(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new oi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new oi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new oi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class extends ei{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new oi(16777215),this.specular=new oi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class extends ei{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new oi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends ei{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends ei{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new oi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends ei{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new oi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends To{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Vl={arraySlice:function(e,t,n){return Vl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{s=a[i],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[i],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{s=a[i],void 0!==s&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)},subclip:function(e,t,n,i,r=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<n||a>=i)){l.push(t.times[e]);for(let n=0;n<o;++n)c.push(t.values[e*o+n])}}0!==l.length&&(t.times=Vl.convertArray(l,t.times.constructor),t.values=Vl.convertArray(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,a=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===s)continue;let o=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=i.times.length-1;let h;if(a<=i.times[0]){const e=o,t=l-o;h=Vl.arraySlice(i.values,e,t)}else if(a>=i.times[d]){const e=d*l+o,t=e+l-o;h=Vl.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=o,n=l-o;e.evaluate(a),h=Vl.arraySlice(e.resultBuffer,t,n)}if("quaternion"===r){(new Ot).fromArray(h).normalize().conjugate().toArray(h)}const p=s.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)Ot.multiplyQuaternionsFlat(s.values,t,h,0,s.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)s.values[t+n]-=h[n]}}}return e.blendMode=2501,e}};class Gl{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Gl.prototype.beforeStart_=Gl.prototype.copySampleValue_,Gl.prototype.afterEnd_=Gl.prototype.copySampleValue_;class Wl extends Gl{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qe,endingEnd:Qe}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case et:r=e,s=2*t-n;break;case tt:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case et:a=e,o=2*n-t;break;case tt:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,x=h*m-h*f;for(let e=0;e!==s;++e)r[e]=g*a[c+e]+v*a[l+e]+y*a[o+e]+x*a[u+e];return r}}class ql extends Gl{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),u=1-c;for(let e=0;e!==s;++e)r[e]=a[l+e]*u+a[o+e]*c;return r}}class jl extends Gl{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class $l{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vl.convertArray(t,this.TimeBufferType),this.values=Vl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Vl.convertArray(e.times,Array),values:Vl.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new jl(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ql(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Wl(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Je:t=this.InterpolantFactoryMethodDiscrete;break;case Ze:t=this.InterpolantFactoryMethodLinear;break;case Ke:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Je;case this.InterpolantFactoryMethodLinear:return Ze;case this.InterpolantFactoryMethodSmooth:return Ke}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=Vl.arraySlice(n,r,a),this.values=Vl.arraySlice(this.values,r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&Vl.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Vl.arraySlice(this.times),t=Vl.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ke,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=Vl.arraySlice(e,0,a),this.values=Vl.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=Vl.arraySlice(this.times,0),t=Vl.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}$l.prototype.TimeBufferType=Float32Array,$l.prototype.ValueBufferType=Float32Array,$l.prototype.DefaultInterpolation=Ze;class Xl extends $l{}Xl.prototype.ValueTypeName="bool",Xl.prototype.ValueBufferType=Array,Xl.prototype.DefaultInterpolation=Je,Xl.prototype.InterpolantFactoryMethodLinear=void 0,Xl.prototype.InterpolantFactoryMethodSmooth=void 0;class Yl extends $l{}Yl.prototype.ValueTypeName="color";class Jl extends $l{}Jl.prototype.ValueTypeName="number";class Zl extends Gl{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let e=l+s;l!==e;l+=4)Ot.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Kl extends $l{InterpolantFactoryMethodLinear(e){return new Zl(this.times,this.values,this.getValueSize(),e)}}Kl.prototype.ValueTypeName="quaternion",Kl.prototype.DefaultInterpolation=Ze,Kl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ql extends $l{}Ql.prototype.ValueTypeName="string",Ql.prototype.ValueBufferType=Array,Ql.prototype.DefaultInterpolation=Je,Ql.prototype.InterpolantFactoryMethodLinear=void 0,Ql.prototype.InterpolantFactoryMethodSmooth=void 0;class ec extends $l{}ec.prototype.ValueTypeName="vector";class tc{constructor(e,t=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=vt(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(nc(n[e]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push($l.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let e=0;e<r;e++){let s=[],o=[];s.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=Vl.getKeyframeOrder(s);s=Vl.sortedArray(s,1,l),o=Vl.sortedArray(o,1,l),i||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new Jl(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(r);if(a&&a.length>1){const e=a[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const a=[];for(const e in i)a.push(this.CreateFromMorphTargetSequence(e,i[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],s=[];Vl.flattenJSON(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new Jl(".morphTargetInfluence["+n+"]",e,a))}o=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";n(ec,a+".position",r,"pos",i),n(Kl,a+".quaternion",r,"rot",i),n(ec,a+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nc(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jl;case"vector":case"vector2":case"vector3":case"vector4":return ec;case"color":return Yl;case"quaternion":return Kl;case"bool":case"boolean":return Xl;case"string":return Ql}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Vl.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const ic={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const rc=new class{constructor(e,t,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}};class ac{constructor(e){this.manager=void 0!==e?e:rc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const sc={};class oc extends ac{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=ic.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==sc[e])return void sc[e].push({onLoad:t,onProgress:n,onError:i});sc[e]=[],sc[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(a).then((t=>{if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=sc[e],i=t.body.getReader(),r=t.headers.get("Content-Length"),a=r?parseInt(r):0,s=0!==a;let o=0;return new ReadableStream({start(e){!function t(){i.read().then((({done:i,value:r})=>{if(i)e.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}}))}()}})}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{const t=new Response(e);switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((e=>(new DOMParser).parseFromString(e,this.mimeType)));case"json":return t.json();default:return t.text()}})).then((t=>{ic.add(e,t);const n=sc[e];delete sc[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}this.manager.itemEnd(e)})).catch((t=>{const n=sc[e];delete sc[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e),this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lc extends ac{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ic.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s=At("img");function o(){c(),ic.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class cc extends ac{constructor(e){super(e)}load(e,t,n,i){const r=new Zi,a=new lc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],(function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)o(t);return r}}class uc extends ac{constructor(e){super(e)}load(e,t,n,i){const r=new Dt,a=new lc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}class dc extends Hn{constructor(e,t=1){super(),this.type="Light",this.color=new oi(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}dc.prototype.isLight=!0;(class extends dc{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.groundColor=new oi(t)}copy(e){return dc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const hc=new gn,pc=new Ft,fc=new Ft;class mc{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new St(512,512),this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ar,this._frameExtents=new St(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;pc.setFromMatrixPosition(e.matrixWorld),t.position.copy(pc),fc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fc),t.updateMatrixWorld(),hc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gc extends mc{constructor(){super(new Xi(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*ft*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}gc.prototype.isSpotLightShadow=!0;(class extends dc{constructor(e,t,n=0,i=Math.PI/3,r=0,a=1){super(e,t),this.type="SpotLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.shadow=new gc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const vc=new gn,yc=new Ft,xc=new Ft;class _c extends mc{constructor(){super(new Xi(90,1,.5,500)),this._frameExtents=new St(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new Ft(1,0,0),new Ft(-1,0,0),new Ft(0,0,1),new Ft(0,0,-1),new Ft(0,1,0),new Ft(0,-1,0)],this._cubeUps=[new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,0,1),new Ft(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),yc.setFromMatrixPosition(e.matrixWorld),n.position.copy(yc),xc.copy(n.position),xc.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(xc),n.updateMatrixWorld(),i.makeTranslation(-yc.x,-yc.y,-yc.z),vc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vc)}}_c.prototype.isPointLightShadow=!0;(class extends dc{constructor(e,t,n=0,i=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new _c}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class bc extends mc{constructor(){super(new yr(-5,5,5,-5,.5,500))}}bc.prototype.isDirectionalLightShadow=!0;(class extends dc{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.shadow=new bc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends dc{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends dc{constructor(e,t,n=10,i=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class wc{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Ft)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}wc.prototype.isSphericalHarmonics3=!0;class Mc extends dc{constructor(e=new wc,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Mc.prototype.isLightProbe=!0;(class extends wi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;let Sc;(class extends ac{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ic.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){ic.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;const Tc=function(){return void 0===Sc&&(Sc=new(window.AudioContext||window.webkitAudioContext)),Sc};class Ec extends ac{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new oc(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);Tc().decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}(class extends Mc{constructor(e,t,n=1){super(void 0,n);const i=(new oi).set(e),r=(new oi).set(t),a=new Ft(i.r,i.g,i.b),s=new Ft(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends Mc{constructor(e,t=1){super(void 0,t);const n=(new oi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Ac{constructor(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]}_slerp(e,t,n,i){Ot.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;Ot.multiplyQuaternionsFlat(e,a,e,t,e,n),Ot.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}}const Lc="\\[\\]\\.:\\/",Cc=new RegExp("[\\[\\]\\.:\\/]","g"),Rc="[^\\[\\]\\.:\\/]",Pc="[^"+Lc.replace("\\.","")+"]",Dc=/((?:WC+[\/:])*)/.source.replace("WC",Rc),Ic=/(WCOD+)?/.source.replace("WCOD",Pc),Nc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rc),kc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rc),zc=new RegExp("^"+Dc+Ic+Nc+kc+"$"),Oc=["material","materials","bones"];class Fc{constructor(e,t,n){this.path=t,this.parsedPath=n||Fc.parseTrackName(t),this.node=Fc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Fc.Composite(e,t,n):new Fc(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cc,"")}static parseTrackName(e){const t=zc.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Oc.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Fc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fc.Composite=class{constructor(e,t,n){const i=n||Fc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Fc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Fc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Fc.prototype.GetterByBindingType=[Fc.prototype._getValue_direct,Fc.prototype._getValue_array,Fc.prototype._getValue_arrayElement,Fc.prototype._getValue_toArray],Fc.prototype.SetterByBindingTypeAndVersioning=[[Fc.prototype._setValue_direct,Fc.prototype._setValue_direct_setNeedsUpdate,Fc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_array,Fc.prototype._setValue_array_setNeedsUpdate,Fc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_arrayElement,Fc.prototype._setValue_arrayElement_setNeedsUpdate,Fc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fc.prototype._setValue_fromArray,Fc.prototype._setValue_fromArray_setNeedsUpdate,Fc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Uc{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Qe,endingEnd:Qe};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=2202===n;if(0===e)return-1===r?i:a&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=et,i.endingEnd=et):(i.endingStart=e?this.zeroSlopeAtStart?et:Qe:tt,i.endingEnd=t?this.zeroSlopeAtEnd?et:Qe:tt)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}(class extends dt{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=i[e],l=r.name;let u=c[l];if(void 0!==u)a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new Ac(Fc.create(n,l,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),a[e]=u}s[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ql(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a="string"==typeof e?tc.findByName(i,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:nt),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Uc(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?tc.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==n;++s){t[s]._update(i,e,r,a)}const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);(class extends Ys{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const Bc=new Ft,Hc=new gn,Vc=new gn;function Gc(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Gc(e.children[n]));return t}const Wc=new Float32Array(1);function qc(t){let n;return{c(){n=f("canvas"),x(n,"id","bg"),x(n,"class","fade-in-long svelte-18dj93x")},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}new Int32Array(Wc.buffer),Ho.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ho.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ol.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends No{constructor(e=10,t=10,n=4473924,i=8947848){n=new oi(n),i=new oi(i);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,u=-s;e<=t;e++,u+=a){o.push(-s,0,u,s,0,u),o.push(u,0,-s,u,0,s);const t=e===r?n:i;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new wi;c.setAttribute("position",new fi(o,3)),c.setAttribute("color",new fi(l,3));super(c,new To({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends No{constructor(e){const t=Gc(e),n=new wi,i=[],r=[],a=new oi(0,0,1),s=new oi(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new fi(i,3)),n.setAttribute("color",new fi(r,3));super(n,new To({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Vc.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Hc.multiplyMatrices(Vc,r.matrixWorld),Bc.setFromMatrixPosition(Hc),i.setXYZ(n,Bc.x,Bc.y,Bc.z),Hc.multiplyMatrices(Vc,r.parent.matrixWorld),Bc.setFromMatrixPosition(Hc),i.setXYZ(n+1,Bc.x,Bc.y,Bc.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ac.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(e)},ac.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Ht.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ht.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ht.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Ht.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ht.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},on.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ar.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Tt.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Tt.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Tt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Tt.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Tt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Tt.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},gn.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},gn.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},gn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ft).setFromMatrixColumn(this,3)},gn.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},gn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},gn.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},gn.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},gn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},gn.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},gn.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},gn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},gn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},gn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},gn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},gn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},gn.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},gn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},gn.prototype.makeFrustum=function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)},gn.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},nr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ot.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Ot.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},mn.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},mn.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},mn.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Kn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Kn.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Kn.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Kn.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Kn.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Kn.barycoordFromPoint=function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kn.getBarycoord(e,t,n,i,r)},Kn.normal=function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kn.getNormal(e,t,n,i)},ll.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},ll.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ol(this,e)},ll.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ul(this,e)},St.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},St.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},St.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ft.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ft.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ft.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Ft.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Ft.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Ft.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Ft.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Ft.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Ft.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nt.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Nt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Hn.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Hn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Hn.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Hn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Hn.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Hn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Bi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Bi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),xo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Xi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(dc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(di.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ct},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ct)}}}),di.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?ct:lt),this},di.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},di.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},wi.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},wi.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new di(arguments[1],arguments[2])))},wi.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},wi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},wi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},wi.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},wi.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(wi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Ys.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?ct:lt),this},Ys.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ol.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ol.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ol.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Xs.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(ei.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new oi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ji.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),$s.prototype.clearTarget=function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},$s.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},$s.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},$s.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},$s.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},$s.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},$s.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},$s.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},$s.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},$s.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},$s.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},$s.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},$s.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},$s.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},$s.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},$s.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},$s.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},$s.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},$s.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},$s.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},$s.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},$s.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},$s.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},$s.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},$s.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties($s.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?rt:it}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Os.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(kt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends Hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Ec).load(e,(function(e){t.setBuffer(e)})),this},Ji.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Ji.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)},Rt.crossOrigin=void 0,Rt.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new uc;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Rt.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new cc;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Rt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Rt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"134"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="134");function jc(e,t,n,i,r,a){var s=e-i,o=t-r,l=n-a;return Math.sqrt(s*s+o*o+l*l)}function $c(e){function t(e,t,n,i){const r=new Bl(i,12,12),a=new li({color:0,opacity:.15,transparent:!0}),s=new Bi(r,a);return s.position.set(e,t,n),s}function n(e,t,n,i,r,a){const s=(new wi).setFromPoints([new Ft(e,t,n),new Ft(i,r,a)]),o=new To({color:0,opacity:.15,transparent:!0});return new Po(s,o)}let i=[];for(let e=0;e<500;e++){const[e,n,r]=Array(3).fill().map((()=>Mt.randFloatSpread(70))),a=t(e,n,r,.1+.05*Math.random());i.push(a)}let r=[];for(let e=0;e<i.length;e++){let t=[];for(let n=e+1;n<i.length;n++){const[r,a,s]=i[e].position,[o,l,c]=i[n].position,u=jc(r,a,s,o,l,c);t.push([n,u])}t.sort(((e,t)=>e[1]-t[1]));for(let a=0;a<3;a++){if(a>=t.length)continue;const[s,o]=t[a],[l,c,u]=i[e].position,[d,h,p]=i[s].position;if(Math.random()>.5)continue;const f=n(l,c,u,d,h,p);r.push(f)}}return T((()=>{const e=document.querySelector("#bg"),t=new Xs,n=new Xi(50,window.innerWidth/window.innerHeight,.1,1e3),a=new $s({alpha:!0,canvas:e});function s(){const e=document.querySelector("main").scrollTop;n.position.z=.002*e}a.setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),n.position.x=0,n.position.y=0,n.position.z=0,i.forEach((e=>t.add(e))),r.forEach((e=>t.add(e))),a.render(t,n),function e(){requestAnimationFrame(e),n.rotation.z+=5e-4,a.render(t,n)}(),setTimeout((()=>{document.querySelector("main").addEventListener("scroll",s)}),200)})),[]}class Xc extends J{constructor(e){super(),Y(this,e,$c,qc,a,{})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jc={exports:{}};Jc.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="swal-button";t.CLASS_NAMES={MODAL:"swal-modal",OVERLAY:"swal-overlay",SHOW_MODAL:"swal-overlay--show-modal",MODAL_TITLE:"swal-title",MODAL_TEXT:"swal-text",ICON:"swal-icon",ICON_CUSTOM:"swal-icon--custom",CONTENT:"swal-content",FOOTER:"swal-footer",BUTTON_CONTAINER:"swal-button-container",BUTTON:i,CONFIRM_BUTTON:i+"--confirm",CANCEL_BUTTON:i+"--cancel",DANGER_BUTTON:i+"--danger",BUTTON_LOADING:i+"--loading",BUTTON_LOADER:i+"__loader"},t.default=t.CLASS_NAMES},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getNode=function(e){var t="."+e;return document.querySelector(t)},t.stringToNode=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},t.insertAfter=function(e,t){var n=t.nextSibling;t.parentNode.insertBefore(e,n)},t.removeNode=function(e){e.parentElement.removeChild(e)},t.throwErr=function(e){throw"SweetAlert: "+(e=e.replace(/ +(?= )/g,"")).trim()},t.isPlainObject=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},t.ordinalSuffixOf=function(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}},function(e,t,n){function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(25));var r=n(26);t.overlayMarkup=r.default,i(n(27)),i(n(28)),i(n(29));var a=n(0),s=a.default.MODAL_TITLE,o=a.default.MODAL_TEXT,l=a.default.ICON,c=a.default.FOOTER;t.iconMarkup='\n  <div class="'+l+'"></div>',t.titleMarkup='\n  <div class="'+s+'"></div>\n',t.textMarkup='\n  <div class="'+o+'"></div>',t.footerMarkup='\n  <div class="'+c+'"></div>\n'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.CONFIRM_KEY="confirm",t.CANCEL_KEY="cancel";var r={visible:!0,text:null,value:null,className:"",closeModal:!0},a=Object.assign({},r,{visible:!1,text:"Cancel",value:null}),s=Object.assign({},r,{text:"OK",value:!0});t.defaultButtonList={cancel:a,confirm:s};var o=function(e){switch(e){case t.CONFIRM_KEY:return s;case t.CANCEL_KEY:return a;default:var n=e.charAt(0).toUpperCase()+e.slice(1);return Object.assign({},r,{text:n,value:e})}},l=function(e,t){var n=o(e);return!0===t?Object.assign({},n,{visible:!0}):"string"==typeof t?Object.assign({},n,{visible:!0,text:t}):i.isPlainObject(t)?Object.assign({visible:!0},n,t):Object.assign({},n,{visible:!1})},c=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],s=e[r],o=l(r,s);t[r]=o}return t.cancel||(t.cancel=a),t},u=function(e){var n={};switch(e.length){case 1:n[t.CANCEL_KEY]=Object.assign({},a,{visible:!1});break;case 2:n[t.CANCEL_KEY]=l(t.CANCEL_KEY,e[0]),n[t.CONFIRM_KEY]=l(t.CONFIRM_KEY,e[1]);break;default:i.throwErr("Invalid number of 'buttons' in array ("+e.length+").\n      If you want more than 2 buttons, you need to use an object!")}return n};t.getButtonListOpts=function(e){var n=t.defaultButtonList;return"string"==typeof e?n[t.CONFIRM_KEY]=l(t.CONFIRM_KEY,e):Array.isArray(e)?n=u(e):i.isPlainObject(e)?n=c(e):!0===e?n=u([!0,!0]):!1===e?n=u([!1,!1]):void 0===e&&(n=t.defaultButtonList),n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),a=n(0),s=a.default.MODAL,o=a.default.OVERLAY,l=n(30),c=n(31),u=n(32),d=n(33);t.injectElIntoModal=function(e){var t=i.getNode(s),n=i.stringToNode(e);return t.appendChild(n),n};var h=function(e){e.className=s,e.textContent=""},p=function(e,t){h(e);var n=t.className;n&&e.classList.add(n)};t.initModalContent=function(e){var t=i.getNode(s);p(t,e),l.default(e.icon),c.initTitle(e.title),c.initText(e.text),d.default(e.content),u.default(e.buttons,e.dangerMode)};var f=function(){var e=i.getNode(o),t=i.stringToNode(r.modalMarkup);e.appendChild(t)};t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r={isOpen:!1,promise:null,actions:{},timer:null},a=Object.assign({},r);t.resetState=function(){a=Object.assign({},r)},t.setActionValue=function(e){if("string"==typeof e)return s(i.CONFIRM_KEY,e);for(var t in e)s(t,e[t])};var s=function(e,t){a.actions[e]||(a.actions[e]={}),Object.assign(a.actions[e],{value:t})};t.setActionOptionsFor=function(e,t){var n=(void 0===t?{}:t).closeModal,i=void 0===n||n;Object.assign(a.actions[e],{closeModal:i})},t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(3),a=n(0),s=a.default.OVERLAY,o=a.default.SHOW_MODAL,l=a.default.BUTTON,c=a.default.BUTTON_LOADING,u=n(5);t.openModal=function(){i.getNode(s).classList.add(o),u.default.isOpen=!0};var d=function(){i.getNode(s).classList.remove(o),u.default.isOpen=!1};t.onAction=function(e){void 0===e&&(e=r.CANCEL_KEY);var t=u.default.actions[e],n=t.value;if(!1===t.closeModal){var a=l+"--"+e;i.getNode(a).classList.add(c)}else d();u.default.promise.resolve(n)},t.getState=function(){var e=Object.assign({},u.default);return delete e.promise,delete e.timer,e},t.stopLoading=function(){for(var e=document.querySelectorAll("."+l),t=0;t<e.length;t++)e[t].classList.remove(c)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){e.exports=t.sweetAlert=n(9)}).call(t,n(7))},function(e,t,n){(function(t){e.exports=t.swal=n(10)}).call(t,n(7))},function(e,t,n){"undefined"!=typeof window&&n(11),n(16);var i=n(23).default;e.exports=i},function(e,t,n){var i=n(12);"string"==typeof i&&(i=[[e.i,i,""]]);var r={insertAt:"top",transform:void 0};n(14)(i,r),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(13)(void 0)).push([e.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',""])},function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=i(r);return[n].concat(r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}))).concat([a]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(u(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(u(i.parts[a],t));f[i.id]={id:i.id,refs:1,parts:s}}}}function r(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],s=t.base?a[0]+t.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};i[s]?i[s].parts.push(o):n.push(i[s]={id:s,parts:[o]})}return n}function a(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=x[x.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function o(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),a(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),a(e,t),t}function c(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function u(e,t){var n,i,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var c=y++;n=v||(v=o(t)),i=d.bind(null,n,c,!1),r=d.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=p.bind(null,n,t),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(t),i=h.bind(null,n),r=function(){s(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function d(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=_(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}var f={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}((function(){return window&&document&&document.all&&!window.atob})),g=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}((function(e){return document.querySelector(e)})),v=null,y=0,x=[],_=n(15);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=r(e,t);return i(n,t),function(e){for(var a=[],s=0;s<n.length;s++){var o=n[s];(l=f[o.id]).refs--,a.push(l)}for(e&&i(r(e,t),t),s=0;s<a.length;s++){var l;if(0===(l=a[s]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){var i=n(17);"undefined"==typeof window||window.Promise||(window.Promise=i),n(21),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[a],e))return!0;a++}return!1}}),"undefined"!=typeof window&&[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}))},function(e,t,n){(function(t){!function(n){function i(){}function r(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}o(t.promise,i)}else(1===e._state?o:l)(t.promise,e._value)}))):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void d(r(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,o(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}var h=setTimeout;a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(i);return s(this,new u(e,t,n)),n},a.all=function(e){var t=Array.prototype.slice.call(e);return new a((function(e,n){function i(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var o=s.then;if("function"==typeof o)return void o.call(s,(function(e){i(a,e)}),n)}t[a]=s,0==--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,a=0;a<t.length;a++)i(a,t[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)}))},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){h(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)}(this)}).call(t,n(18).setImmediate)},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(19),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,o(l),l++}function r(e){delete c[e]}function a(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function s(e){if(u)setTimeout(s,0,e);else{var t=c[e];if(t){u=!0;try{a(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var o,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){s(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},o=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;o=function(t){var n=d.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(s,0,e)},h.setImmediate=i,h.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(7),n(20))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&o())}function o(){if(!m){var e=r(s);m=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,f=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||m||r(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){n(22).polyfill()},function(e,t,n){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),s=0,o=a.length;s<o;s++){var l=a[s],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(n[l]=r[l])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}e.exports={assign:i,polyfill:r}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=n(6),a=n(5),s=n(36),o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof window){var n=s.getOpts.apply(void 0,e);return new Promise((function(e,t){a.default.promise={resolve:e,reject:t},i.default(n),setTimeout((function(){r.openModal()}))}))}};o.close=r.onAction,o.getState=r.getState,o.setActionValue=a.setActionValue,o.stopLoading=r.stopLoading,o.setDefaults=s.setDefaults,t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(0).default.MODAL,a=n(4),s=n(34),o=n(35),l=n(1);t.init=function(e){i.getNode(r)||(document.body||l.throwErr("You can only use SweetAlert AFTER the DOM has loaded!"),s.default(),a.default()),a.initModalContent(e),o.default(e)},t.default=t.init},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).default.MODAL;t.modalMarkup='\n  <div class="'+i+'" role="dialog" aria-modal="true"></div>',t.default=t.modalMarkup},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i='<div \n    class="'+n(0).default.OVERLAY+'"\n    tabIndex="-1">\n  </div>';t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).default.ICON;t.errorIconMarkup=function(){var e=i+"--error",t=e+"__line";return'\n    <div class="'+e+'__x-mark">\n      <span class="'+t+" "+t+'--left"></span>\n      <span class="'+t+" "+t+'--right"></span>\n    </div>\n  '},t.warningIconMarkup=function(){var e=i+"--warning";return'\n    <span class="'+e+'__body">\n      <span class="'+e+'__dot"></span>\n    </span>\n  '},t.successIconMarkup=function(){var e=i+"--success";return'\n    <span class="'+e+"__line "+e+'__line--long"></span>\n    <span class="'+e+"__line "+e+'__line--tip"></span>\n\n    <div class="'+e+'__ring"></div>\n    <div class="'+e+'__hide-corners"></div>\n  '}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).default.CONTENT;t.contentMarkup='\n  <div class="'+i+'">\n\n  </div>\n'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=i.default.BUTTON_CONTAINER,a=i.default.BUTTON,s=i.default.BUTTON_LOADER;t.buttonMarkup='\n  <div class="'+r+'">\n\n    <button\n      class="'+a+'"\n    ></button>\n\n    <div class="'+s+'">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n\n  </div>\n'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(2),a=n(0),s=a.default.ICON,o=a.default.ICON_CUSTOM,l=["error","warning","success","info"],c={error:r.errorIconMarkup(),warning:r.warningIconMarkup(),success:r.successIconMarkup()},u=function(e,t){var n=s+"--"+e;t.classList.add(n);var i=c[e];i&&(t.innerHTML=i)},d=function(e,t){t.classList.add(o);var n=document.createElement("img");n.src=e,t.appendChild(n)},h=function(e){if(e){var t=i.injectElIntoModal(r.iconMarkup);l.includes(e)?u(e,t):d(e,t)}};t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(4),a=function(e){navigator.userAgent.includes("AppleWebKit")&&(e.style.display="none",e.offsetHeight,e.style.display="")};t.initTitle=function(e){if(e){var t=r.injectElIntoModal(i.titleMarkup);t.textContent=e,a(t)}},t.initText=function(e){if(e){var t=document.createDocumentFragment();e.split("\n").forEach((function(e,n,i){t.appendChild(document.createTextNode(e)),n<i.length-1&&t.appendChild(document.createElement("br"))}));var n=r.injectElIntoModal(i.textMarkup);n.appendChild(t),a(n)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),a=n(0),s=a.default.BUTTON,o=a.default.DANGER_BUTTON,l=n(3),c=n(2),u=n(6),d=n(5),h=function(e,t,n){var r=t.text,a=t.value,h=t.className,p=t.closeModal,f=i.stringToNode(c.buttonMarkup),m=f.querySelector("."+s),g=s+"--"+e;m.classList.add(g),h&&(Array.isArray(h)?h:h.split(" ")).filter((function(e){return e.length>0})).forEach((function(e){m.classList.add(e)})),n&&e===l.CONFIRM_KEY&&m.classList.add(o),m.textContent=r;var v={};return v[e]=a,d.setActionValue(v),d.setActionOptionsFor(e,{closeModal:p}),m.addEventListener("click",(function(){return u.onAction(e)})),f},p=function(e,t){var n=r.injectElIntoModal(c.footerMarkup);for(var i in e){var a=e[i],s=h(i,a,t);a.visible&&n.appendChild(s)}0===n.children.length&&n.remove()};t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(4),a=n(2),s=n(5),o=n(6),l=n(0).default.CONTENT,c=function(e){e.addEventListener("input",(function(e){var t=e.target.value;s.setActionValue(t)})),e.addEventListener("keyup",(function(e){if("Enter"===e.key)return o.onAction(i.CONFIRM_KEY)})),setTimeout((function(){e.focus(),s.setActionValue("")}),0)},u=function(e,t,n){var i=document.createElement(t),r=l+"__"+t;for(var a in i.classList.add(r),n){var s=n[a];i[a]=s}"input"===t&&c(i),e.appendChild(i)},d=function(e){if(e){var t=r.injectElIntoModal(a.contentMarkup),n=e.element,i=e.attributes;"string"==typeof n?u(t,n,i):t.appendChild(n)}};t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(2),a=function(){var e=i.stringToNode(r.overlayMarkup);document.body.appendChild(e)};t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=n(6),a=n(1),s=n(3),o=n(0),l=o.default.MODAL,c=o.default.BUTTON,u=o.default.OVERLAY,d=function(e){e.preventDefault(),g()},h=function(e){e.preventDefault(),v()},p=function(e){if(i.default.isOpen&&"Escape"===e.key)return r.onAction(s.CANCEL_KEY)},f=function(e){if(i.default.isOpen&&"Tab"===e.key)return d(e)},m=function(e){if(i.default.isOpen)return"Tab"===e.key&&e.shiftKey?h(e):void 0},g=function(){var e=a.getNode(c);e&&(e.tabIndex=0,e.focus())},v=function(){var e=a.getNode(l).querySelectorAll("."+c),t=e[e.length-1];t&&t.focus()},y=function(e){e[e.length-1].addEventListener("keydown",f)},x=function(e){e[0].addEventListener("keydown",m)},_=function(){var e=a.getNode(l).querySelectorAll("."+c);e.length&&(y(e),x(e))},b=function(e){if(a.getNode(u)===e.target)return r.onAction(s.CANCEL_KEY)},w=function(e){var t=a.getNode(u);t.removeEventListener("click",b),e&&t.addEventListener("click",b)},M=function(e){i.default.timer&&clearTimeout(i.default.timer),e&&(i.default.timer=window.setTimeout((function(){return r.onAction(s.CANCEL_KEY)}),e))},S=function(e){e.closeOnEsc?document.addEventListener("keyup",p):document.removeEventListener("keyup",p),e.dangerMode?g():v(),_(),w(e.closeOnClickOutside),M(e.timer)};t.default=S},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(3),a=n(37),s=n(38),o={title:null,text:null,icon:null,buttons:r.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},l=Object.assign({},o);t.setDefaults=function(e){l=Object.assign({},o,e)};var c=function(e){var t=e&&e.button,n=e&&e.buttons;return void 0!==t&&void 0!==n&&i.throwErr("Cannot set both 'button' and 'buttons' options!"),void 0!==t?{confirm:t}:n},u=function(e){return i.ordinalSuffixOf(e+1)},d=function(e,t){i.throwErr(u(t)+" argument ('"+e+"') is invalid")},h=function(e,t){var n=e+1,r=t[n];i.isPlainObject(r)||void 0===r||i.throwErr("Expected "+u(n)+" argument ('"+r+"') to be a plain object")},p=function(e,t){var n=e+1,r=t[n];void 0!==r&&i.throwErr("Unexpected "+u(n)+" argument ("+r+")")},f=function(e,t,n,r){var a=t instanceof Element;if("string"==typeof t){if(0===n)return{text:t};if(1===n)return{text:t,title:r[0]};if(2===n)return h(n,r),{icon:t};d(t,n)}else{if(a&&0===n)return h(n,r),{content:t};if(i.isPlainObject(t))return p(n,r),t;d(t,n)}};t.getOpts=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};e.forEach((function(t,i){var r=f(0,t,i,e);Object.assign(n,r)}));var i=c(n);n.buttons=r.getButtonListOpts(i),delete n.button,n.content=a.getContentOpts(n.content);var u=Object.assign({},o,l,n);return Object.keys(u).forEach((function(e){s.DEPRECATED_OPTS[e]&&s.logDeprecation(e)})),u}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r={element:"input",attributes:{placeholder:""}};t.getContentOpts=function(e){var t={};return i.isPlainObject(e)?Object.assign(t,e):e instanceof Element?{element:e}:"input"===e?r:null}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.logDeprecation=function(e){var n=t.DEPRECATED_OPTS[e],i=n.onlyRename,r=n.replacement,a=n.subOption,s=n.link,o='SweetAlert warning: "'+e+'" option has been '+(i?"renamed":"deprecated")+".";r&&(o+=" Please use"+(a?' "'+a+'" in ':" ")+'"'+r+'" instead.');var l="https://sweetalert.js.org";o+=s?" More details: "+l+s:" More details: "+l+"/guides/#upgrading-from-1x",console.warn(o)},t.DEPRECATED_OPTS={type:{replacement:"icon",link:"/docs/#icon"},imageUrl:{replacement:"icon",link:"/docs/#icon"},customClass:{replacement:"className",onlyRename:!0,link:"/docs/#classname"},imageSize:{},showCancelButton:{replacement:"buttons",link:"/docs/#buttons"},showConfirmButton:{replacement:"button",link:"/docs/#button"},confirmButtonText:{replacement:"button",link:"/docs/#button"},confirmButtonColor:{},cancelButtonText:{replacement:"buttons",link:"/docs/#buttons"},closeOnConfirm:{replacement:"button",subOption:"closeModal",link:"/docs/#button"},closeOnCancel:{replacement:"buttons",subOption:"closeModal",link:"/docs/#buttons"},showLoaderOnConfirm:{replacement:"buttons"},animation:{},inputType:{replacement:"content",link:"/docs/#content"},inputValue:{replacement:"content",link:"/docs/#content"},inputPlaceholder:{replacement:"content",link:"/docs/#content"},html:{replacement:"content",link:"/docs/#content"},allowEscapeKey:{replacement:"closeOnEsc",onlyRename:!0,link:"/docs/#closeonesc"},allowClickOutside:{replacement:"closeOnClickOutside",onlyRename:!0,link:"/docs/#closeonclickoutside"}}}]);var Zc=Yc(Jc.exports);function Kc(e,t="json"){return new Promise((function(n,i){const r=new XMLHttpRequest;r.onload=function(){let e;r.response&&(e=r.response.message),r.status>=200&&r.status<300?n(r.response):i({status:r.status,statusText:r.statusText,message:e})},r.onerror=function(e){i({status:r.status,statusText:r.statusText})},r.open("GET",e,!0),r.responseType=t,r.timeout=4e4,r.ontimeout=function(e){console.log("ERROR: Internet not working"),i({status:r.status,statusText:r.statusText})},r.send()}))}async function Qc(e,t,n="json"){let i;return await new Promise(((r,a)=>{Kc(e,n).catch((e=>{const{status:n,statusText:i,message:r}=e,a="string"==typeof r?r:i;return Zc({title:`${Ee(t,"error")} ${n}`,text:a}),null})).then((e=>{i=e,r()}))})),i}async function eu(e){const t=[];t.push(Kc(`/assets/data/${e}/sources.json`)),t.push(Kc(`/assets/data/${e}/lexicon.json`)),t.push(Kc(`/assets/data/${e}/events.json`));const n=await Promise.all(t);return null!==n&&Array.isArray(n)&&0!==n.length?n:null}async function tu(e){const t=[];t.push(Kc(`/assets/data/${e}/submissions.json`)),t.push(Kc(`/assets/data/${e}/dictionary.json`)),t.push(Kc(`/assets/data/${e}/categories.json`));const n=await Promise.all(t);return null!==n&&Array.isArray(n)&&0!==n.length?n:null}async function nu(e){const t=await Qc(`/assets/data/${e}/posts.json.zip`,"eng","blob");return null===t?null:t}async function iu(e){return await Qc(`/assets/data/${e}/params.json`,"eng")}function ru([e,...t],n=[]){return void 0===e?n:[e,...ru(n,t)]}function au(t){let n;return{c(){n=f("div"),n.innerHTML='<div id="loader" class="svelte-hwhuff"></div>',x(n,"id","container"),x(n,"class","svelte-hwhuff")},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}class su extends J{constructor(e){super(),Y(this,e,null,au,a,{})}}function ou(t){let n,i,r,a,s,o,c,p,v,y,b,M,S,T,E,A,L,C,R,P,D,I,N,k,z,O=(void 0!==pe[t[0]]?pe[t[0]]:pe.eng)+"",F=(void 0!==fe[t[0]]?fe[t[0]]:fe.eng)+"";return{c(){n=f("div"),i=f("div"),r=f("img"),s=g(),o=f("div"),c=f("br"),p=g(),v=f("div"),y=f("p"),b=m(O),M=g(),S=f("p"),T=m(F),E=g(),A=f("br"),L=g(),C=f("div"),R=f("p"),R.textContent="by",P=g(),D=f("p"),I=f("a"),N=m("National Democratic Institute"),k=g(),z=f("br"),x(r,"alt","cover photo"),l(r.src,a="/assets/images/cover.jpg")||x(r,"src","/assets/images/cover.jpg"),x(r,"class","svelte-1st7wz6"),x(i,"id","top-img-container"),x(i,"class","svelte-1st7wz6"),x(y,"class","top-title svelte-1st7wz6"),x(S,"class","top-subtitle svelte-1st7wz6"),w(R,"margin-bottom","0px"),x(I,"href",Q),x(I,"target","_blank"),x(D,"class","authors svelte-1st7wz6"),x(o,"class","top-title-container svelte-1st7wz6"),x(n,"id","cover"),x(n,"class","svelte-1st7wz6")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,s),u(n,o),u(o,c),u(o,p),u(o,v),u(v,y),u(y,b),u(v,M),u(v,S),u(S,T),u(o,E),u(o,A),u(o,L),u(o,C),u(C,R),u(C,P),u(C,D),u(D,I),u(I,N),u(o,k),u(o,z)},p(e,[t]){1&t&&O!==(O=(void 0!==pe[e[0]]?pe[e[0]]:pe.eng)+"")&&_(b,O),1&t&&F!==(F=(void 0!==fe[e[0]]?fe[e[0]]:fe.eng)+"")&&_(T,F)},i:e,o:e,d(e){e&&h(n)}}}function lu(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class cu extends J{constructor(e){super(),Y(this,e,lu,ou,a,{lang:0})}}function uu(e,t,n){const i=e.slice();return i[1]=t[n],i}function du(e){let t,n,i,r=(void 0!==me.paragraphs[e[1]][e[0]]?me.paragraphs[e[1]][e[0]]:me.paragraphs[e[1]].eng)+"";return{c(){t=f("p"),n=new M,i=g(),n.a=i},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=(void 0!==me.paragraphs[e[1]][e[0]]?me.paragraphs[e[1]][e[0]]:me.paragraphs[e[1]].eng)+"")&&n.p(r)},d(e){e&&h(t)}}}function hu(t){let n,i,r,a,s=(void 0!==me.title[t[0]]?me.title[t[0]]:me.title.eng)+"",o=Object.keys(me.paragraphs),l=[];for(let e=0;e<o.length;e+=1)l[e]=du(uu(t,o,e));return{c(){n=f("section"),i=f("h1"),r=m(s),a=g();for(let e=0;e<l.length;e+=1)l[e].c();x(i,"class","title")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,a);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(e,[t]){if(1&t&&s!==(s=(void 0!==me.title[e[0]]?me.title[e[0]]:me.title.eng)+"")&&_(r,s),1&t){let i;for(o=Object.keys(me.paragraphs),i=0;i<o.length;i+=1){const r=uu(e,o,i);l[i]?l[i].p(r,t):(l[i]=du(r),l[i].c(),l[i].m(n,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=o.length}},i:e,o:e,d(e){e&&h(n),p(l,e)}}}function pu(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class fu extends J{constructor(e){super(),Y(this,e,pu,hu,a,{lang:0})}}function mu(e,t,n){const i=e.slice();return i[1]=t[n],i}function gu(e,t,n){const i=e.slice();return i[1]=t[n],i}function vu(e){let t,n=(void 0!==ge.paragraphs_1[e[1]][e[0]]?ge.paragraphs_1[e[1]][e[0]]:ge.paragraphs_1[e[1]].eng)+"";return{c(){t=f("p")},m(e,i){d(e,t,i),t.innerHTML=n},p(e,i){1&i&&n!==(n=(void 0!==ge.paragraphs_1[e[1]][e[0]]?ge.paragraphs_1[e[1]][e[0]]:ge.paragraphs_1[e[1]].eng)+"")&&(t.innerHTML=n)},d(e){e&&h(t)}}}function yu(e){let t,n,i,r=(void 0!==ge.paragraphs_2[e[1]][e[0]]?ge.paragraphs_2[e[1]][e[0]]:ge.paragraphs_2[e[1]].eng)+"";return{c(){t=f("p"),n=new M,i=g(),n.a=i},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=(void 0!==ge.paragraphs_2[e[1]][e[0]]?ge.paragraphs_2[e[1]][e[0]]:ge.paragraphs_2[e[1]].eng)+"")&&n.p(r)},d(e){e&&h(t)}}}function xu(t){let n,i,r,a,s,o,c,v,y,b,w,M,S=(void 0!==ge.title[t[0]]?ge.title[t[0]]:ge.title.eng)+"",T=(void 0!==ge.subtitle[t[0]]?ge.subtitle[t[0]]:ge.subtitle.eng)+"",E=Object.keys(ge.paragraphs_1),A=[];for(let e=0;e<E.length;e+=1)A[e]=vu(gu(t,E,e));let L=Object.keys(ge.paragraphs_2),C=[];for(let e=0;e<L.length;e+=1)C[e]=yu(mu(t,L,e));return{c(){n=f("section"),i=f("h1"),r=m(S),a=g();for(let e=0;e<A.length;e+=1)A[e].c();s=g(),o=f("div"),c=f("img"),y=g(),b=f("h1"),w=m(T),M=g();for(let e=0;e<C.length;e+=1)C[e].c();x(i,"class","title"),x(c,"alt","information venn diagram"),l(c.src,v="/assets/explanatives/misinformation_girls.png")||x(c,"src","/assets/explanatives/misinformation_girls.png"),x(c,"class","svelte-p84mbu"),x(o,"class","svelte-p84mbu"),x(b,"class","subtitle")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,a);for(let e=0;e<A.length;e+=1)A[e].m(n,null);u(n,s),u(n,o),u(o,c),u(n,y),u(n,b),u(b,w),u(n,M);for(let e=0;e<C.length;e+=1)C[e].m(n,null)},p(e,[t]){if(1&t&&S!==(S=(void 0!==ge.title[e[0]]?ge.title[e[0]]:ge.title.eng)+"")&&_(r,S),1&t){let i;for(E=Object.keys(ge.paragraphs_1),i=0;i<E.length;i+=1){const r=gu(e,E,i);A[i]?A[i].p(r,t):(A[i]=vu(r),A[i].c(),A[i].m(n,s))}for(;i<A.length;i+=1)A[i].d(1);A.length=E.length}if(1&t&&T!==(T=(void 0!==ge.subtitle[e[0]]?ge.subtitle[e[0]]:ge.subtitle.eng)+"")&&_(w,T),1&t){let i;for(L=Object.keys(ge.paragraphs_2),i=0;i<L.length;i+=1){const r=mu(e,L,i);C[i]?C[i].p(r,t):(C[i]=yu(r),C[i].c(),C[i].m(n,null))}for(;i<C.length;i+=1)C[i].d(1);C.length=L.length}},i:e,o:e,d(e){e&&h(n),p(A,e),p(C,e)}}}function _u(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class bu extends J{constructor(e){super(),Y(this,e,_u,xu,a,{lang:0})}}function wu(e,t,n){const i=e.slice();return i[1]=t[n],i}function Mu(e){let t,n,i,r,a,s,o,c,p,v,y,b=(void 0!==e[1].title[e[0]]?e[1].title[e[0]]:e[1].title.eng)+"",w=(void 0!==e[1].description[e[0]]?e[1].description[e[0]]:e[1].description.eng)+"";return{c(){t=f("div"),n=f("img"),a=g(),s=f("h1"),o=m(b),c=g(),p=f("p"),v=m(w),y=g(),x(n,"alt",i=e[1].src.split(".").pop()),l(n.src,r="/assets/images/"+e[1].src)||x(n,"src",r),x(n,"class","svelte-17ddbqk"),x(s,"class","svelte-17ddbqk"),x(p,"class","svelte-17ddbqk"),x(t,"class","information-disorder svelte-17ddbqk")},m(e,i){d(e,t,i),u(t,n),u(t,a),u(t,s),u(s,o),u(t,c),u(t,p),u(p,v),u(t,y)},p(e,t){1&t&&b!==(b=(void 0!==e[1].title[e[0]]?e[1].title[e[0]]:e[1].title.eng)+"")&&_(o,b),1&t&&w!==(w=(void 0!==e[1].description[e[0]]?e[1].description[e[0]]:e[1].description.eng)+"")&&_(v,w)},d(e){e&&h(t)}}}function Su(t){let n,i=be,r=[];for(let e=0;e<i.length;e+=1)r[e]=Mu(wu(t,i,e));return{c(){n=f("div");for(let e=0;e<r.length;e+=1)r[e].c();x(n,"id","information-disorder-container"),x(n,"class","container svelte-17ddbqk")},m(e,t){d(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(1&t){let a;for(i=be,a=0;a<i.length;a+=1){const s=wu(e,i,a);r[a]?r[a].p(s,t):(r[a]=Mu(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:e,o:e,d(e){e&&h(n),p(r,e)}}}function Tu(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class Eu extends J{constructor(e){super(),Y(this,e,Tu,Su,a,{lang:0})}}function Au(e,t,n){const i=e.slice();return i[1]=t[n],i}function Lu(e,t,n){const i=e.slice();return i[4]=t[n],i}function Cu(e){let t,n,i=e[4]+"";return{c(){t=f("p"),n=m(i),x(t,"class","svelte-fvu1ed")},m(e,i){d(e,t,i),u(t,n)},p(e,t){1&t&&i!==(i=e[4]+"")&&_(n,i)},d(e){e&&h(t)}}}function Ru(e){let t,n,i,r,a,s,o,c,v,y=(void 0!==e[1].title[e[0]]?e[1].title[e[0]]:e[1].title.eng)+"",b=void 0!==e[1].description[e[0]]?e[1].description[e[0]]:e[1].description.eng,w=[];for(let t=0;t<b.length;t+=1)w[t]=Cu(Lu(e,b,t));return{c(){t=f("div"),n=f("img"),a=g(),s=f("h1"),o=m(y),c=g();for(let e=0;e<w.length;e+=1)w[e].c();v=g(),x(n,"alt",i=e[1].src.split(".").pop()),l(n.src,r="/assets/images/"+e[1].src)||x(n,"src",r),x(n,"class","svelte-fvu1ed"),x(s,"class","svelte-fvu1ed"),x(t,"class","political-network svelte-fvu1ed")},m(e,i){d(e,t,i),u(t,n),u(t,a),u(t,s),u(s,o),u(t,c);for(let e=0;e<w.length;e+=1)w[e].m(t,null);u(t,v)},p(e,n){if(1&n&&y!==(y=(void 0!==e[1].title[e[0]]?e[1].title[e[0]]:e[1].title.eng)+"")&&_(o,y),1&n){let i;for(b=void 0!==e[1].description[e[0]]?e[1].description[e[0]]:e[1].description.eng,i=0;i<b.length;i+=1){const r=Lu(e,b,i);w[i]?w[i].p(r,n):(w[i]=Cu(r),w[i].c(),w[i].m(t,v))}for(;i<w.length;i+=1)w[i].d(1);w.length=b.length}},d(e){e&&h(t),p(w,e)}}}function Pu(t){let n,i=we,r=[];for(let e=0;e<i.length;e+=1)r[e]=Ru(Au(t,i,e));return{c(){n=f("div");for(let e=0;e<r.length;e+=1)r[e].c();x(n,"id","political-network-container"),x(n,"class","container svelte-fvu1ed")},m(e,t){d(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(1&t){let a;for(i=we,a=0;a<i.length;a+=1){const s=Au(e,i,a);r[a]?r[a].p(s,t):(r[a]=Ru(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:e,o:e,d(e){e&&h(n),p(r,e)}}}function Du(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class Iu extends J{constructor(e){super(),Y(this,e,Du,Pu,a,{lang:0})}}function Nu(t){let n;return{c(){n=f("div"),n.innerHTML='<div id="lexicon-vertical-center" class="svelte-1qlvteu"><div id="lexiconcanvas"></div></div>',x(n,"id","lexicon-container"),x(n,"class","svelte-1qlvteu")},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function ku(e,t,n){let{posts:i}=t,r=-1;return T((()=>{const e=document.getElementById("lexiconcanvas");!function t(){r=(r+1)%i.length,e.innerHTML=i[r],e.style.lineHeight="1.2em",e.style.fontSize="0.9em",e.className="fade-in",setTimeout((()=>{e.className="fade-out"}),3e3),setTimeout((()=>{t()}),4e3)}()})),e.$$set=e=>{"posts"in e&&n(0,i=e.posts)},[i]}class zu extends J{constructor(e){super(),Y(this,e,ku,Nu,a,{posts:0})}}function Ou(t){let n,i,r,a,s,o,c,p,m,v,y,_,b,M,S,T,E,A,L,C,R,P,D,I,N,k,z;return{c(){n=f("div"),i=f("div"),r=f("div"),a=f("img"),o=g(),c=f("img"),m=g(),v=f("img"),_=g(),b=f("img"),S=g(),T=f("img"),A=g(),L=f("img"),R=g(),P=f("img"),I=g(),N=f("canvas"),k=g(),z=f("canvas"),x(a,"id","post-facebook"),x(a,"alt","facebook"),l(a.src,s="/assets/images/facebook.png")||x(a,"src","/assets/images/facebook.png"),x(c,"id","post-twitter"),x(c,"alt","twitter"),l(c.src,p="/assets/images/twitter.png")||x(c,"src","/assets/images/twitter.png"),x(v,"id","post-telegram"),x(v,"alt","telegram"),l(v.src,y="/assets/images/telegram.png")||x(v,"src","/assets/images/telegram.png"),x(b,"id","post-youtube"),x(b,"alt","youtube"),l(b.src,M="/assets/images/youtube.png")||x(b,"src","/assets/images/youtube.png"),x(T,"id","approve"),x(T,"alt","approve"),l(T.src,E="/assets/images/approve.png")||x(T,"src","/assets/images/approve.png"),x(L,"id","reject"),x(L,"alt","reject"),l(L.src,C="/assets/images/reject.png")||x(L,"src","/assets/images/reject.png"),x(P,"id","annotator"),x(P,"alt","annotator"),l(P.src,D="/assets/images/annotator.png")||x(P,"src","/assets/images/annotator.png"),w(r,"display","none"),w(N,"position","fixed"),x(N,"id","contentannotationcanvas"),x(N,"class","svelte-5hp6ox"),x(z,"id","contentannotationcanvas_check"),x(z,"class","svelte-5hp6ox"),x(i,"id","annotation-vertical-center"),x(i,"class","svelte-5hp6ox"),x(n,"id","annotation-container"),x(n,"class","svelte-5hp6ox")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(r,a),u(r,o),u(r,c),u(r,m),u(r,v),u(r,_),u(r,b),u(r,S),u(r,T),u(r,A),u(r,L),u(r,R),u(r,P),u(i,I),u(i,N),u(i,k),u(i,z)},p:e,i:e,o:e,d(e){e&&h(n)}}}const Fu=400,Uu=440,Bu=70;function Hu(e){return Math.floor(Math.random()*e)}function Vu(e){return T((()=>{const e=document.getElementById("contentannotationcanvas"),t=e.getContext("2d"),n=document.getElementById("contentannotationcanvas_check"),i=n.getContext("2d");e.width=Fu,e.height=Uu,n.width=Fu,n.height=Uu,t.globalAlpha=.9,i.globalAlpha=.9;const r=document.getElementById("post-youtube"),a=document.getElementById("post-facebook"),s=document.getElementById("post-telegram"),o=document.getElementById("post-twitter"),l=document.getElementById("annotator"),c=document.getElementById("approve"),u=document.getElementById("reject"),d=[r,a,s,o];function h(e,t){i.clearRect(0,0,Fu,Uu),t?i.drawImage(c,267,p,Bu,Bu):i.drawImage(u,267,p,Bu,Bu),i.globalCompositeOperation="source-in",i.fillStyle=e,i.fillRect(0,0,Fu,Uu),i.globalCompositeOperation="source-over"}let p=0,f=0,m=d[Hu(d.length)],g=!1;setInterval((()=>{var e,n;Math.abs(140-(p+Bu+32))<4?(f+=1,f>100?(f=0,p=-100,g=!1,m=d[Hu(d.length)]):f>50&&!g&&(1===Hu(2)?h("#e44e4e",!1):h("#009900",!0),g=!0)):(p+=2,e=m,n=p,t.clearRect(0,0,Fu,Uu),i.clearRect(0,0,Fu,Uu),t.drawImage(e,165,n,Bu,Bu),t.drawImage(l,50,140),t.globalCompositeOperation="source-in",t.fillStyle="#000",t.fillRect(0,0,Fu,Uu),t.globalCompositeOperation="source-over")}),20)})),[]}class Gu extends J{constructor(e){super(),Y(this,e,Vu,Ou,a,{})}}function Wu(t){let n,i,r,a,s,o,c,p,m,v,y,_,b,w,M,S;return{c(){n=f("div"),i=f("div"),r=f("img"),s=g(),o=f("div"),c=f("img"),m=g(),v=f("div"),y=f("img"),b=g(),w=f("div"),M=f("img"),x(r,"alt","institutions"),l(r.src,a="/assets/images/twitter.png")||x(r,"src","/assets/images/twitter.png"),x(r,"class","svelte-4awkx0"),x(i,"class","data-collection svelte-4awkx0"),x(c,"alt","politics"),l(c.src,p="/assets/images/facebook.png")||x(c,"src","/assets/images/facebook.png"),x(c,"class","svelte-4awkx0"),x(o,"class","data-collection svelte-4awkx0"),x(y,"alt","society"),l(y.src,_="/assets/images/youtube.png")||x(y,"src","/assets/images/youtube.png"),x(y,"class","svelte-4awkx0"),x(v,"class","data-collection svelte-4awkx0"),x(M,"alt","society"),l(M.src,S="/assets/images/telegram.png")||x(M,"src","/assets/images/telegram.png"),x(M,"class","svelte-4awkx0"),x(w,"class","data-collection svelte-4awkx0"),x(n,"id","data-collection-container"),x(n,"class","container svelte-4awkx0")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,s),u(n,o),u(o,c),u(n,m),u(n,v),u(v,y),u(n,b),u(n,w),u(w,M)},p:e,i:e,o:e,d(e){e&&h(n)}}}class qu extends J{constructor(e){super(),Y(this,e,null,Wu,a,{})}}function ju(e){let t,n,i,r,a,s,o,l,c,p,v,y,b,w,S,T,E,L,C,R,P,D,N,k,z,O,F,U,B,H,X,Y,J,Z,K,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ye,xe,_e,be,we,Me,Se,Te,Ee,Ae,Le,Ce,Re,Pe,De,Ie,Ne,ke,ze,Oe,Fe,Ue,Be,He,Ve,Ge,We,qe,je,$e,Xe,Ye,Je,Ze,Ke,Qe,et,tt,nt=(void 0!==ve.title[e[0]]?ve.title[e[0]]:ve.title.eng)+"",it=(void 0!==ve[1][e[0]]?ve[1][e[0]]:ve[1].eng)+"",rt=(void 0!==ve[2][e[0]]?ve[2][e[0]]:ve[2].eng)+"",at=(void 0!==ve[3][e[0]]?ve[3][e[0]]:ve[3].eng)+"",st=(void 0!==ve.subtitle_1[e[0]]?ve.subtitle_1[e[0]]:ve.subtitle_1.eng)+"",ot=(void 0!==ve[4][e[0]]?ve[4][e[0]]:ve[4].eng)+"",lt=(void 0!==ve[5][e[0]]?ve[5][e[0]]:ve[5].eng)+"",ct=(void 0!==ve.subtitle_2[e[0]]?ve.subtitle_2[e[0]]:ve.subtitle_2.eng)+"",ut=(void 0!==ve[6][e[0]]?ve[6][e[0]]:ve[6].eng)+"",dt=(void 0!==ve[7][e[0]]?ve[7][e[0]]:ve[7].eng)+"",ht=(void 0!==ve[8][e[0]]?ve[8][e[0]]:ve[8].eng)+"",pt=(void 0!==ve[9][e[0]]?ve[9][e[0]]:ve[9].eng)+"",ft=(void 0!==ve[10][e[0]]?ve[10][e[0]]:ve[10].eng)+"",mt=(void 0!==ve.subsubtitle_1[e[0]]?ve.subsubtitle_1[e[0]]:ve.subsubtitle_1.eng)+"",gt=(void 0!==ve[11][e[0]]?ve[11][e[0]]:ve[11].eng)+"",vt=(void 0!==ve.subsubtitle_2[e[0]]?ve.subsubtitle_2[e[0]]:ve.subsubtitle_2.eng)+"",yt=(void 0!==ve[12][e[0]]?ve[12][e[0]]:ve[12].eng)+"",xt=(void 0!==ve.subsubtitle_3[e[0]]?ve.subsubtitle_3[e[0]]:ve.subsubtitle_3.eng)+"",_t=(void 0!==ve[13][e[0]]?ve[13][e[0]]:ve[13].eng)+"",bt=(void 0!==ve[14][e[0]]?ve[14][e[0]]:ve[14].eng)+"",wt=(void 0!==ve.subsubtitle_4[e[0]]?ve.subsubtitle_4[e[0]]:ve.subsubtitle_4.eng)+"",Mt=(void 0!==ve[15][e[0]]?ve[15][e[0]]:ve[15].eng)+"",St=(void 0!==ve.subsubtitle_5[e[0]]?ve.subsubtitle_5[e[0]]:ve.subsubtitle_5.eng)+"",Tt=(void 0!==ve[16][e[0]]?ve[16][e[0]]:ve[16].eng)+"",Et=(void 0!==ve[17][e[0]]?ve[17][e[0]]:ve[17].eng)+"",At=(void 0!==ve[18][e[0]]?ve[18][e[0]]:ve[18].eng)+"",Lt=(void 0!==ve[19][e[0]]?ve[19][e[0]]:ve[19].eng)+"",Ct=(void 0!==ve.subsubtitle_6[e[0]]?ve.subsubtitle_6[e[0]]:ve.subsubtitle_6.eng)+"",Rt=(void 0!==ve[20][e[0]]?ve[20][e[0]]:ve[20].eng)+"",Pt=(void 0!==ve[21][e[0]]?ve[21][e[0]]:ve[21].eng)+"",Dt=(void 0!==ve[22][e[0]]?ve[22][e[0]]:ve[22].eng)+"",It=(void 0!==ve.subtitle_3[e[0]]?ve.subtitle_3[e[0]]:ve.subtitle_3.eng)+"",Nt=(void 0!==ve[23][e[0]]?ve[23][e[0]]:ve[23].eng)+"",kt=(void 0!==ve[24][e[0]]?ve[24][e[0]]:ve[24].eng)+"";function zt(t){e[3](t)}let Ot={};function Ft(t){e[4](t)}void 0!==e[0]&&(Ot.lang=e[0]),Q=new Eu({props:Ot}),A.push((()=>W(Q,"lang",zt)));let Ut={};return void 0!==e[0]&&(Ut.lang=e[0]),he=new Iu({props:Ut}),A.push((()=>W(he,"lang",Ft))),Me=new zu({props:{posts:e[1]}}),ze=new qu({}),$e=new Gu({}),{c(){t=f("section"),n=f("h1"),i=m(nt),r=g(),a=new M,s=g(),o=new M,l=g(),c=new M,p=g(),v=f("h1"),y=m(st),b=g(),w=new M,S=g(),T=new M,E=g(),L=f("h1"),C=m(ct),R=g(),P=new M,D=g(),N=new M,k=g(),z=new M,O=g(),F=new M,U=g(),B=new M,H=g(),X=f("h1"),Y=m(mt),J=g(),Z=new M,K=g(),q(Q.$$.fragment),te=g(),ne=f("h1"),ie=m(vt),re=g(),ae=new M,se=g(),oe=f("h1"),le=m(xt),ce=g(),ue=new M,de=g(),q(he.$$.fragment),fe=g(),me=new M,ge=g(),ye=f("h1"),xe=m(wt),_e=g(),be=new M,we=g(),q(Me.$$.fragment),Se=g(),Te=f("h1"),Ee=m(St),Ae=g(),Le=new M,Ce=g(),Re=new M,Pe=g(),De=new M,Ie=g(),Ne=new M,ke=g(),q(ze.$$.fragment),Oe=g(),Fe=f("h1"),Ue=m(Ct),Be=g(),He=new M,Ve=g(),Ge=new M,We=g(),qe=new M,je=g(),q($e.$$.fragment),Xe=g(),Ye=f("h1"),Je=m(It),Ze=g(),Ke=new M,Qe=g(),et=new M,x(n,"class","title"),a.a=s,o.a=l,c.a=p,x(v,"class","subtitle"),w.a=S,T.a=E,x(L,"class","subtitle"),P.a=D,N.a=k,z.a=O,F.a=U,B.a=H,x(X,"class","subtitle"),Z.a=K,x(ne,"class","subtitle"),ae.a=se,x(oe,"class","subtitle"),ue.a=de,me.a=ge,x(ye,"class","subtitle"),be.a=we,x(Te,"class","subtitle"),Le.a=Ce,Re.a=Pe,De.a=Ie,Ne.a=ke,x(Fe,"class","subtitle"),He.a=Ve,Ge.a=We,qe.a=je,x(Ye,"class","subtitle"),Ke.a=Qe,et.a=null,x(t,"id",e[2])},m(e,h){d(e,t,h),u(t,n),u(n,i),u(t,r),a.m(it,t),u(t,s),o.m(rt,t),u(t,l),c.m(at,t),u(t,p),u(t,v),u(v,y),u(t,b),w.m(ot,t),u(t,S),T.m(lt,t),u(t,E),u(t,L),u(L,C),u(t,R),P.m(ut,t),u(t,D),N.m(dt,t),u(t,k),z.m(ht,t),u(t,O),F.m(pt,t),u(t,U),B.m(ft,t),u(t,H),u(t,X),u(X,Y),u(t,J),Z.m(gt,t),u(t,K),j(Q,t,null),u(t,te),u(t,ne),u(ne,ie),u(t,re),ae.m(yt,t),u(t,se),u(t,oe),u(oe,le),u(t,ce),ue.m(_t,t),u(t,de),j(he,t,null),u(t,fe),me.m(bt,t),u(t,ge),u(t,ye),u(ye,xe),u(t,_e),be.m(Mt,t),u(t,we),j(Me,t,null),u(t,Se),u(t,Te),u(Te,Ee),u(t,Ae),Le.m(Tt,t),u(t,Ce),Re.m(Et,t),u(t,Pe),De.m(At,t),u(t,Ie),Ne.m(Lt,t),u(t,ke),j(ze,t,null),u(t,Oe),u(t,Fe),u(Fe,Ue),u(t,Be),He.m(Rt,t),u(t,Ve),Ge.m(Pt,t),u(t,We),qe.m(Dt,t),u(t,je),j($e,t,null),u(t,Xe),u(t,Ye),u(Ye,Je),u(t,Ze),Ke.m(Nt,t),u(t,Qe),et.m(kt,t),tt=!0},p(e,[t]){(!tt||1&t)&&nt!==(nt=(void 0!==ve.title[e[0]]?ve.title[e[0]]:ve.title.eng)+"")&&_(i,nt),(!tt||1&t)&&it!==(it=(void 0!==ve[1][e[0]]?ve[1][e[0]]:ve[1].eng)+"")&&a.p(it),(!tt||1&t)&&rt!==(rt=(void 0!==ve[2][e[0]]?ve[2][e[0]]:ve[2].eng)+"")&&o.p(rt),(!tt||1&t)&&at!==(at=(void 0!==ve[3][e[0]]?ve[3][e[0]]:ve[3].eng)+"")&&c.p(at),(!tt||1&t)&&st!==(st=(void 0!==ve.subtitle_1[e[0]]?ve.subtitle_1[e[0]]:ve.subtitle_1.eng)+"")&&_(y,st),(!tt||1&t)&&ot!==(ot=(void 0!==ve[4][e[0]]?ve[4][e[0]]:ve[4].eng)+"")&&w.p(ot),(!tt||1&t)&&lt!==(lt=(void 0!==ve[5][e[0]]?ve[5][e[0]]:ve[5].eng)+"")&&T.p(lt),(!tt||1&t)&&ct!==(ct=(void 0!==ve.subtitle_2[e[0]]?ve.subtitle_2[e[0]]:ve.subtitle_2.eng)+"")&&_(C,ct),(!tt||1&t)&&ut!==(ut=(void 0!==ve[6][e[0]]?ve[6][e[0]]:ve[6].eng)+"")&&P.p(ut),(!tt||1&t)&&dt!==(dt=(void 0!==ve[7][e[0]]?ve[7][e[0]]:ve[7].eng)+"")&&N.p(dt),(!tt||1&t)&&ht!==(ht=(void 0!==ve[8][e[0]]?ve[8][e[0]]:ve[8].eng)+"")&&z.p(ht),(!tt||1&t)&&pt!==(pt=(void 0!==ve[9][e[0]]?ve[9][e[0]]:ve[9].eng)+"")&&F.p(pt),(!tt||1&t)&&ft!==(ft=(void 0!==ve[10][e[0]]?ve[10][e[0]]:ve[10].eng)+"")&&B.p(ft),(!tt||1&t)&&mt!==(mt=(void 0!==ve.subsubtitle_1[e[0]]?ve.subsubtitle_1[e[0]]:ve.subsubtitle_1.eng)+"")&&_(Y,mt),(!tt||1&t)&&gt!==(gt=(void 0!==ve[11][e[0]]?ve[11][e[0]]:ve[11].eng)+"")&&Z.p(gt);const n={};!ee&&1&t&&(ee=!0,n.lang=e[0],I((()=>ee=!1))),Q.$set(n),(!tt||1&t)&&vt!==(vt=(void 0!==ve.subsubtitle_2[e[0]]?ve.subsubtitle_2[e[0]]:ve.subsubtitle_2.eng)+"")&&_(ie,vt),(!tt||1&t)&&yt!==(yt=(void 0!==ve[12][e[0]]?ve[12][e[0]]:ve[12].eng)+"")&&ae.p(yt),(!tt||1&t)&&xt!==(xt=(void 0!==ve.subsubtitle_3[e[0]]?ve.subsubtitle_3[e[0]]:ve.subsubtitle_3.eng)+"")&&_(le,xt),(!tt||1&t)&&_t!==(_t=(void 0!==ve[13][e[0]]?ve[13][e[0]]:ve[13].eng)+"")&&ue.p(_t);const r={};!pe&&1&t&&(pe=!0,r.lang=e[0],I((()=>pe=!1))),he.$set(r),(!tt||1&t)&&bt!==(bt=(void 0!==ve[14][e[0]]?ve[14][e[0]]:ve[14].eng)+"")&&me.p(bt),(!tt||1&t)&&wt!==(wt=(void 0!==ve.subsubtitle_4[e[0]]?ve.subsubtitle_4[e[0]]:ve.subsubtitle_4.eng)+"")&&_(xe,wt),(!tt||1&t)&&Mt!==(Mt=(void 0!==ve[15][e[0]]?ve[15][e[0]]:ve[15].eng)+"")&&be.p(Mt);const s={};2&t&&(s.posts=e[1]),Me.$set(s),(!tt||1&t)&&St!==(St=(void 0!==ve.subsubtitle_5[e[0]]?ve.subsubtitle_5[e[0]]:ve.subsubtitle_5.eng)+"")&&_(Ee,St),(!tt||1&t)&&Tt!==(Tt=(void 0!==ve[16][e[0]]?ve[16][e[0]]:ve[16].eng)+"")&&Le.p(Tt),(!tt||1&t)&&Et!==(Et=(void 0!==ve[17][e[0]]?ve[17][e[0]]:ve[17].eng)+"")&&Re.p(Et),(!tt||1&t)&&At!==(At=(void 0!==ve[18][e[0]]?ve[18][e[0]]:ve[18].eng)+"")&&De.p(At),(!tt||1&t)&&Lt!==(Lt=(void 0!==ve[19][e[0]]?ve[19][e[0]]:ve[19].eng)+"")&&Ne.p(Lt),(!tt||1&t)&&Ct!==(Ct=(void 0!==ve.subsubtitle_6[e[0]]?ve.subsubtitle_6[e[0]]:ve.subsubtitle_6.eng)+"")&&_(Ue,Ct),(!tt||1&t)&&Rt!==(Rt=(void 0!==ve[20][e[0]]?ve[20][e[0]]:ve[20].eng)+"")&&He.p(Rt),(!tt||1&t)&&Pt!==(Pt=(void 0!==ve[21][e[0]]?ve[21][e[0]]:ve[21].eng)+"")&&Ge.p(Pt),(!tt||1&t)&&Dt!==(Dt=(void 0!==ve[22][e[0]]?ve[22][e[0]]:ve[22].eng)+"")&&qe.p(Dt),(!tt||1&t)&&It!==(It=(void 0!==ve.subtitle_3[e[0]]?ve.subtitle_3[e[0]]:ve.subtitle_3.eng)+"")&&_(Je,It),(!tt||1&t)&&Nt!==(Nt=(void 0!==ve[23][e[0]]?ve[23][e[0]]:ve[23].eng)+"")&&Ke.p(Nt),(!tt||1&t)&&kt!==(kt=(void 0!==ve[24][e[0]]?ve[24][e[0]]:ve[24].eng)+"")&&et.p(kt)},i(e){tt||(V(Q.$$.fragment,e),V(he.$$.fragment,e),V(Me.$$.fragment,e),V(ze.$$.fragment,e),V($e.$$.fragment,e),tt=!0)},o(e){G(Q.$$.fragment,e),G(he.$$.fragment,e),G(Me.$$.fragment,e),G(ze.$$.fragment,e),G($e.$$.fragment,e),tt=!1},d(e){e&&h(t),$(Q),$(he),$(Me),$(ze),$($e)}}}function $u(e,t,n){let{lang:i}=t,{posts:r}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang),"posts"in e&&n(1,r=e.posts)},[i,r,"methods",function(e){i=e,n(0,i)},function(e){i=e,n(0,i)}]}class Xu extends J{constructor(e){super(),Y(this,e,$u,ju,a,{lang:0,posts:1,id:2})}get id(){return this.$$.ctx[2]}}function Yu(e,t,n){const i=e.slice();return i[1]=t[n],i}function Ju(e,t,n){const i=e.slice();return i[1]=t[n],i}function Zu(e,t,n){const i=e.slice();return i[1]=t[n],i}function Ku(e){let t,n=(void 0!==xe.paragraphs_1[e[1]][e[0]]?xe.paragraphs_1[e[1]][e[0]]:xe.paragraphs_1[e[1]].eng)+"";return{c(){t=f("p")},m(e,i){d(e,t,i),t.innerHTML=n},p(e,i){1&i&&n!==(n=(void 0!==xe.paragraphs_1[e[1]][e[0]]?xe.paragraphs_1[e[1]][e[0]]:xe.paragraphs_1[e[1]].eng)+"")&&(t.innerHTML=n)},d(e){e&&h(t)}}}function Qu(e){let t,n,i,r=(void 0!==xe.enumerations[e[1]][e[0]]?xe.enumerations[e[1]][e[0]]:xe.enumerations[e[1]].eng)+"";return{c(){t=f("li"),n=new M,i=g(),n.a=i},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=(void 0!==xe.enumerations[e[1]][e[0]]?xe.enumerations[e[1]][e[0]]:xe.enumerations[e[1]].eng)+"")&&n.p(r)},d(e){e&&h(t)}}}function ed(e){let t,n,i,r=(void 0!==xe.paragraphs_2[e[1]][e[0]]?xe.paragraphs_2[e[1]][e[0]]:xe.paragraphs_2[e[1]].eng)+"";return{c(){t=f("p"),n=new M,i=g(),n.a=i},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=(void 0!==xe.paragraphs_2[e[1]][e[0]]?xe.paragraphs_2[e[1]][e[0]]:xe.paragraphs_2[e[1]].eng)+"")&&n.p(r)},d(e){e&&h(t)}}}function td(t){let n,i,r,a,s,o,l,c=(void 0!==xe.title[t[0]]?xe.title[t[0]]:xe.title.eng)+"",v=Object.keys(xe.paragraphs_1),y=[];for(let e=0;e<v.length;e+=1)y[e]=Ku(Zu(t,v,e));let b=Object.keys(xe.enumerations),w=[];for(let e=0;e<b.length;e+=1)w[e]=Qu(Ju(t,b,e));let M=Object.keys(xe.paragraphs_2),S=[];for(let e=0;e<M.length;e+=1)S[e]=ed(Yu(t,M,e));return{c(){n=f("section"),i=f("h1"),r=m(c),a=g();for(let e=0;e<y.length;e+=1)y[e].c();s=g(),o=f("ol");for(let e=0;e<w.length;e+=1)w[e].c();l=g();for(let e=0;e<S.length;e+=1)S[e].c();x(i,"class","title")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,a);for(let e=0;e<y.length;e+=1)y[e].m(n,null);u(n,s),u(n,o);for(let e=0;e<w.length;e+=1)w[e].m(o,null);u(n,l);for(let e=0;e<S.length;e+=1)S[e].m(n,null)},p(e,[t]){if(1&t&&c!==(c=(void 0!==xe.title[e[0]]?xe.title[e[0]]:xe.title.eng)+"")&&_(r,c),1&t){let i;for(v=Object.keys(xe.paragraphs_1),i=0;i<v.length;i+=1){const r=Zu(e,v,i);y[i]?y[i].p(r,t):(y[i]=Ku(r),y[i].c(),y[i].m(n,s))}for(;i<y.length;i+=1)y[i].d(1);y.length=v.length}if(1&t){let n;for(b=Object.keys(xe.enumerations),n=0;n<b.length;n+=1){const i=Ju(e,b,n);w[n]?w[n].p(i,t):(w[n]=Qu(i),w[n].c(),w[n].m(o,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}if(1&t){let i;for(M=Object.keys(xe.paragraphs_2),i=0;i<M.length;i+=1){const r=Yu(e,M,i);S[i]?S[i].p(r,t):(S[i]=ed(r),S[i].c(),S[i].m(n,null))}for(;i<S.length;i+=1)S[i].d(1);S.length=M.length}},i:e,o:e,d(e){e&&h(n),p(y,e),p(w,e),p(S,e)}}}function nd(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class id extends J{constructor(e){super(),Y(this,e,nd,td,a,{lang:0})}}function rd(e,t,n){const i=e.slice();return i[1]=t[n],i}function ad(e){let t,n,i,r=(void 0!==_e.paragraphs[e[1]][e[0]]?_e.paragraphs[e[1]][e[0]]:_e.paragraphs[e[1]].eng)+"";return{c(){t=f("p"),n=new M,i=g(),n.a=i},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=(void 0!==_e.paragraphs[e[1]][e[0]]?_e.paragraphs[e[1]][e[0]]:_e.paragraphs[e[1]].eng)+"")&&n.p(r)},d(e){e&&h(t)}}}function sd(t){let n,i,r,a,s=(void 0!==_e.title[t[0]]?_e.title[t[0]]:_e.title.eng)+"",o=Object.keys(_e.paragraphs),l=[];for(let e=0;e<o.length;e+=1)l[e]=ad(rd(t,o,e));return{c(){n=f("section"),i=f("h1"),r=m(s),a=g();for(let e=0;e<l.length;e+=1)l[e].c();x(i,"class","title")},m(e,t){d(e,n,t),u(n,i),u(i,r),u(n,a);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(e,[t]){if(1&t&&s!==(s=(void 0!==_e.title[e[0]]?_e.title[e[0]]:_e.title.eng)+"")&&_(r,s),1&t){let i;for(o=Object.keys(_e.paragraphs),i=0;i<o.length;i+=1){const r=rd(e,o,i);l[i]?l[i].p(r,t):(l[i]=ad(r),l[i].c(),l[i].m(n,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=o.length}},i:e,o:e,d(e){e&&h(n),p(l,e)}}}function od(e,t,n){let{lang:i}=t;return e.$$set=e=>{"lang"in e&&n(0,i=e.lang)},[i]}class ld extends J{constructor(e){super(),Y(this,e,od,sd,a,{lang:0})}}function cd(e){if(isNaN(e))return NaN;for(var t=String(+e).split(""),n=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"],i="",r=3;r--;)i=(n[+t.pop()+10*r]||"")+i;return Array(+t.join("")+1).join("M")+i}function ud(e){return function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}(e).toLowerCase().trim()}function dd(t){let n,r,a,s,o,c,p,m;return{c(){n=f("div"),r=f("input"),a=g(),s=f("button"),o=f("img"),x(r,"title","search-input"),x(r,"type","text"),x(r,"placeholder",t[2]),x(r,"class","svelte-107h92u"),x(o,"alt","Search"),l(o.src,c="/assets/images/search.svg")||x(o,"src","/assets/images/search.svg"),x(o,"class","svelte-107h92u"),s.disabled=t[0],x(s,"title","Search"),x(s,"class","svelte-107h92u"),x(n,"id","search-bar"),w(n,"margin","auto"),x(n,"class","svelte-107h92u")},m(e,i){d(e,n,i),u(n,r),b(r,t[1]),u(n,a),u(n,s),u(s,o),p||(m=[y(r,"input",t[7]),y(s,"click",t[3])],p=!0)},p(e,[t]){4&t&&x(r,"placeholder",e[2]),2&t&&r.value!==e[1]&&b(r,e[1]),1&t&&(s.disabled=e[0])},i:e,o:e,d(e){e&&h(n),p=!1,i(m)}}}function hd(e,t,n){let i,r,{disable:a=!1}=t,{onchange:s}=t,{onsubmit:o}=t,{placeholders:l}=t;let c="Search",u=-1,d=0;function h(){if(!Array.isArray(l)||0===l.length)return;d=0,u=(u+1)%l.length;const e=l[u],t=Math.floor(2e3/(1*e.length)),i=()=>{d>e.length||(n(2,c=e.substring(0,d++)),setTimeout((()=>{i()}),t))};i()}return setInterval((()=>{h()}),3500),h(),e.$$set=e=>{"disable"in e&&n(0,a=e.disable),"onchange"in e&&n(4,s=e.onchange),"onsubmit"in e&&n(5,o=e.onsubmit),"placeholders"in e&&n(6,l=e.placeholders)},e.$$.update=()=>{2&e.$$.dirty&&null!=i&&(r=ud(i.trim().replaceAll("&nbsp;"," ")),a||s(r))},[a,i,c,function(){a||o(r)},s,o,l,function(){i=this.value,n(1,i)}]}class pd extends J{constructor(e){super(),Y(this,e,hd,dd,a,{disable:0,onchange:4,onsubmit:5,placeholders:6})}}function fd(e,t,n){const i=e.slice();return i[12]=t[n],i[14]=n,i}function md(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function gd(e,t,n){const i=e.slice();return i[18]=t[n],i}function vd(e){let t,n,i,r=e[1],a=[];for(let t=0;t<r.length;t+=1)a[t]=yd(gd(e,r,t));return{c(){t=f("div"),n=f("table"),i=f("tr");for(let e=0;e<a.length;e+=1)a[e].c();x(i,"class","svelte-1e6ozt9"),x(n,"class","svelte-1e6ozt9"),x(t,"class","table-headers svelte-1e6ozt9"),x(t,"id",e[4])},m(e,r){d(e,t,r),u(t,n),u(n,i);for(let e=0;e<a.length;e+=1)a[e].m(i,null)},p(e,t){if(2&t){let n;for(r=e[1],n=0;n<r.length;n+=1){const s=gd(e,r,n);a[n]?a[n].p(s,t):(a[n]=yd(s),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},d(e){e&&h(t),p(a,e)}}}function yd(e){let t,n,i=e[18]+"";return{c(){t=f("th"),n=m(i),x(t,"class","header svelte-1e6ozt9")},m(e,i){d(e,t,i),u(t,n)},p(e,t){2&t&&i!==(i=e[18]+"")&&_(n,i)},d(e){e&&h(t)}}}function xd(e){let t,n,i,r,a,s,o,m,v,_=e[2],b=[];for(let t=0;t<_.length;t+=1)b[t]=Md(fd(e,_,t));return{c(){t=f("div"),n=f("table");for(let e=0;e<b.length;e+=1)b[e].c();r=g(),a=f("div"),s=f("img"),x(n,"class",i=c(e[0]?"disabled":"enabled")+" svelte-1e6ozt9"),x(t,"class","table-values svelte-1e6ozt9"),x(t,"id",e[3]),x(s,"alt","download"),l(s.src,o="/assets/images/download.png")||x(s,"src","/assets/images/download.png"),x(s,"width","30"),x(s,"height","30"),x(s,"class","svelte-1e6ozt9"),x(a,"class","download svelte-1e6ozt9")},m(i,o){d(i,t,o),u(t,n);for(let e=0;e<b.length;e+=1)b[e].m(n,null);d(i,r,o),d(i,a,o),u(a,s),m||(v=y(s,"click",e[9]),m=!0)},p(e,t){if(4&t){let i;for(_=e[2],i=0;i<_.length;i+=1){const r=fd(e,_,i);b[i]?b[i].p(r,t):(b[i]=Md(r),b[i].c(),b[i].m(n,null))}for(;i<b.length;i+=1)b[i].d(1);b.length=_.length}1&t&&i!==(i=c(e[0]?"disabled":"enabled")+" svelte-1e6ozt9")&&x(n,"class",i)},d(e){e&&h(t),p(b,e),e&&h(r),e&&h(a),m=!1,v()}}}function _d(e){let t,n=e[15]+"";return{c(){t=m(n)},m(e,n){d(e,t,n)},p(e,i){4&i&&n!==(n=e[15]+"")&&_(t,n)},d(e){e&&h(t)}}}function bd(e){let t,n,i,r=e[15]+"";return{c(){t=f("a"),n=m(r),x(t,"href",i=e[15]),x(t,"target","_blank"),x(t,"class","svelte-1e6ozt9")},m(e,i){d(e,t,i),u(t,n)},p(e,a){4&a&&r!==(r=e[15]+"")&&_(n,r),4&a&&i!==(i=e[15])&&x(t,"href",i)},d(e){e&&h(t)}}}function wd(e){let t,n;function i(e,t){return 4&t&&(n=null),null==n&&(n=!!(e[15].length>4&&"http"===e[15].substring(0,4))),n?bd:_d}let r=i(e,-1),a=r(e);return{c(){t=f("th"),a.c(),x(t,"class","value svelte-1e6ozt9"),x(t,"data-row_id",e[14]),x(t,"data-col_id",e[17])},m(e,n){d(e,t,n),a.m(t,null)},p(e,n){r===(r=i(e,n))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(t,null)))},d(e){e&&h(t),a.d()}}}function Md(e){let t,n,i=e[12],r=[];for(let t=0;t<i.length;t+=1)r[t]=wd(md(e,i,t));return{c(){t=f("tr");for(let e=0;e<r.length;e+=1)r[e].c();n=g(),x(t,"class","svelte-1e6ozt9")},m(e,i){d(e,t,i);for(let e=0;e<r.length;e+=1)r[e].m(t,null);u(t,n)},p(e,a){if(4&a){let s;for(i=e[12],s=0;s<i.length;s+=1){const o=md(e,i,s);r[s]?r[s].p(o,a):(r[s]=wd(o),r[s].c(),r[s].m(t,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},d(e){e&&h(t),p(r,e)}}}function Sd(t){let n,i,r,a,s=null!==t[1]&&vd(t),o=null!==t[2]&&xd(t);return{c(){n=f("br"),i=g(),s&&s.c(),r=g(),o&&o.c(),a=v(),x(n,"class","svelte-1e6ozt9")},m(e,t){d(e,n,t),d(e,i,t),s&&s.m(e,t),d(e,r,t),o&&o.m(e,t),d(e,a,t)},p(e,[t]){null!==e[1]?s?s.p(e,t):(s=vd(e),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),null!==e[2]?o?o.p(e,t):(o=xd(e),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&h(n),e&&h(i),s&&s.d(e),e&&h(r),o&&o.d(e),e&&h(a)}}}function Td(e,t,n){let{data:i}=t,{cell_func:r}=t,{table_id:a=`mtable-${Math.floor(1e4*Math.random())}`}=t,{disable:s=!1}=t;const o=`${a}-values`,l=`${a}-headers`;let c=null,u=null;function d(){const e="cai_"+function(e){let t=new Date,n=String((t.getSeconds()+e)%60);2!==n.length&&(n="0"+n);let i=Math.floor((t.getSeconds()+e)/60),r=String((t.getMinutes()+i)%60);2!==r.length&&(r="0"+r);let a=Math.floor((t.getMinutes()+i)/60),s=String((t.getHours()+a)%24);2!==s.length&&(s="0"+s);let o=Math.floor((t.getHours()+a)/24),l=String(t.getDate()+o);2!==l.length&&(l="0"+l);let c=String(t.getMonth()+1);return 2!==c.length&&(c="0"+c),String(t.getFullYear())+"-"+c+"-"+l+"_"+s+":"+r+":"+n}(0)+".csv",t=i.map((e=>e.map((e=>`"${e}"`)).join(","))).join("\n"),n=new Blob([t],{type:"text/csv"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,e);else{const t=window.document.createElement("a");t.href=window.URL.createObjectURL(n),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}return e.$$set=e=>{"data"in e&&n(6,i=e.data),"cell_func"in e&&n(7,r=e.cell_func),"table_id"in e&&n(8,a=e.table_id),"disable"in e&&n(0,s=e.disable)},e.$$.update=()=>{64&e.$$.dirty&&function(e){if(!Array.isArray(e))return!1;if(e.length<1)return console.error("invalid data for table - array of length < 1"),!1;if(!Array.isArray(e[0]))return console.error("invalid data for table - first element not an array"),!1;if(0===e[0].length)return console.error("invalid data for table - first element of length 0"),!1;let t=e[0].length;for(let n=1;n<e.length;n++){if(!Array.isArray(e[n]))return console.error(`invalid data for table - ${n}th element not an array`),!1;if(e[n].length!==t)return console.error(`invalid data for table - ${n}th element not of same length`),!1}return!0}(i)&&(n(2,u=i.filter(((e,t)=>0!==t))),n(1,c=i[0]),setTimeout((()=>{!function(){const e=document.getElementById(o);if(null===e)return;const t=document.getElementById(l);if(null===t)return;let n=e.querySelectorAll("tr")[0];if(void 0===n)return;let i=n.querySelectorAll("th"),r=0,a=Array.from(i,(e=>{const t=1*e.getBoundingClientRect().width;return r+=t,t}));a=a.map((e=>Math.round(100*e/r))),r=a.reduce(((e,t)=>e+t),0),100!==r&&(a[0]=100-r+a[0]),i=t.querySelectorAll("tr")[0].querySelectorAll("th");for(let e=0;e<i.length;e++)i[e].style.width=`${a[e]}%`;let s=e.querySelectorAll("tr");for(let e=0;e<s.length;e++){i=s[e].querySelectorAll("th");for(let e=0;e<i.length;e++)i[e].style.width=`${a[e]}%`}}(),function(){const e=document.getElementById(o).getElementsByTagName("th");for(let t of e){const e=t.innerText,{row_id:n,col_id:i}=t.dataset;"function"==typeof r&&r(t,e,n,i)}}()}),100))},[s,c,u,o,l,d,i,r,a,()=>{d()}]}class Ed extends J{constructor(e){super(),Y(this,e,Td,Sd,a,{data:6,cell_func:7,table_id:8,disable:0})}}function Ad(e){let t,n;return{c(){t=f("p"),n=m(e[4]),x(t,"class","svelte-1aye3t0")},m(e,i){d(e,t,i),u(t,n)},p(e,t){16&t&&_(n,e[4])},d(e){e&&h(t)}}}function Ld(e){let t,n;return{c(){t=f("p"),n=m(e[4]),w(t,"color","red"),x(t,"class","svelte-1aye3t0")},m(e,i){d(e,t,i),u(t,n)},p(e,t){16&t&&_(n,e[4])},d(e){e&&h(t)}}}function Cd(e){let t,n,i,r,a,s,o,l,c,u,p,m,v,y;function _(t){e[9](t)}let b={onchange:e[5],onsubmit:e[6],placeholders:e[0]};function w(t){e[10](t)}function M(t){e[11](t)}void 0!==e[1]&&(b.disable=e[1]),i=new pd({props:b}),A.push((()=>W(i,"disable",_)));let S={};function T(e,t){return e[3].length-1>=Rd?Ld:Ad}void 0!==e[2]&&(S.disable=e[2]),void 0!==e[3]&&(S.data=e[3]),l=new Ed({props:S}),A.push((()=>W(l,"disable",w))),A.push((()=>W(l,"data",M)));let E=T(e),L=E(e);return{c(){t=f("br"),n=g(),q(i.$$.fragment),a=g(),s=f("div"),o=g(),q(l.$$.fragment),p=g(),L.c(),m=g(),v=f("br"),x(s,"class","separator svelte-1aye3t0")},m(e,r){d(e,t,r),d(e,n,r),j(i,e,r),d(e,a,r),d(e,s,r),d(e,o,r),j(l,e,r),d(e,p,r),L.m(e,r),d(e,m,r),d(e,v,r),y=!0},p(e,[t]){const n={};1&t&&(n.placeholders=e[0]),!r&&2&t&&(r=!0,n.disable=e[1],I((()=>r=!1))),i.$set(n);const a={};!c&&4&t&&(c=!0,a.disable=e[2],I((()=>c=!1))),!u&&8&t&&(u=!0,a.data=e[3],I((()=>u=!1))),l.$set(a),E===(E=T(e))&&L?L.p(e,t):(L.d(1),L=E(e),L&&(L.c(),L.m(m.parentNode,m)))},i(e){y||(V(i.$$.fragment,e),V(l.$$.fragment,e),y=!0)},o(e){G(i.$$.fragment,e),G(l.$$.fragment,e),y=!1},d(e){e&&h(t),e&&h(n),$(i,e),e&&h(a),e&&h(s),e&&h(o),$(l,e),e&&h(p),L.d(e),e&&h(m),e&&h(v)}}}const Rd=3e3;function Pd(e,t,n){let i,{word_mapping:r}=t,{documents:a}=t,{placeholders:s}=t,o=!1,l=!1,c="",u=[];const d=["Source","Keyword","Published On","Link"];let h={};Object.values(r).forEach((e=>{h[e]=[]})),a.forEach(((e,t)=>{e.wv.forEach((e=>{h[e].push(t)}))})),Object.keys(h).forEach((e=>{h[e]=[...new Set(h[e])]}));let p={};function f(e){if(null==e||0===e.length)return[];let t=e.split(" ").map((e=>r[ud(e)]));if(t=t.filter((e=>void 0!==e)),t=[...new Set(t)],0===t.length)return[];let n=t.map((e=>h[e]));return n=n.reduce(((e,t)=>e.filter((e=>t.includes(e))))),n.map((e=>{const n=a[e],i=t.map((e=>p[e.toString()])).join(";");return[n.source_name,i,n.t,n.l]}))}return Object.keys(r).forEach((e=>{p[r[e]]=e})),u.unshift(d),i=u,e.$$set=e=>{"word_mapping"in e&&n(7,r=e.word_mapping),"documents"in e&&n(8,a=e.documents),"placeholders"in e&&n(0,s=e.placeholders)},[s,o,l,i,c,function(e){n(2,l=!0),u=f(e).splice(0,20),u.unshift(d),n(4,c=""),n(3,i=u)},function(e){n(1,o=!0),setTimeout((()=>{u=f(e).splice(0,Rd),u.unshift(d),n(4,c=`${u.length-1===Rd?"max ":""}${u.length-1} ${u.length-1>1?"results":"result"}`),n(3,i=u),n(1,o=!1),n(2,l=!1)}),50)},r,a,function(e){o=e,n(1,o)},function(e){l=e,n(2,l)},function(e){i=e,n(3,i)}]}class Dd extends J{constructor(e){super(),Y(this,e,Pd,Cd,a,{word_mapping:7,documents:8,placeholders:0})}}function Id(e,t,n){const i=e.slice();return i[2]=t[n],i}function Nd(t){let n,i,r,a,s,o,c,p,v,y,_,b,w,S=t[2].name+"",T=t[2].description+"",E=t[2].html+"";return{c(){n=f("div"),i=f("img"),s=g(),o=f("h1"),c=m(S),p=g(),v=f("p"),y=m(T),_=g(),b=new M,w=g(),x(i,"alt",r=t[2].name),l(i.src,a=t[2].src)||x(i,"src",a),x(i,"class","svelte-1u4k67e"),x(o,"class","svelte-1u4k67e"),x(v,"class","svelte-1u4k67e"),b.a=w,x(n,"class","portraits svelte-1u4k67e")},m(e,t){d(e,n,t),u(n,i),u(n,s),u(n,o),u(o,c),u(n,p),u(n,v),u(v,y),u(n,_),b.m(E,n),u(n,w)},p:e,d(e){e&&h(n)}}}function kd(t){let n,i=t[0],r=[];for(let e=0;e<i.length;e+=1)r[e]=Nd(Id(t,i,e));return{c(){n=f("div");for(let e=0;e<r.length;e+=1)r[e].c();x(n,"class","container svelte-1u4k67e")},m(e,t){d(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(1&t){let a;for(i=e[0],a=0;a<i.length;a+=1){const s=Id(e,i,a);r[a]?r[a].p(s,t):(r[a]=Nd(s),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:e,o:e,d(e){e&&h(n),p(r,e)}}}function zd(e,t,n){let{data:i}=t;const r=i.map((e=>{const t=`<div style="display: flex; justify-content: center;">${Object.keys(e.endpoint).sort().map((t=>{return`\n                <a target="_blank" href="${e.endpoint[t].url}"" style="margin: 8px; width: 25%">\n                    <img src="/assets/images/${t}.png" width=16 height=16>\n                    <p style="font-size:12px;margin:0px;padding:0px">\n                        ${n=e.endpoint[t].followers,n>=1e9?(n/1e9).toFixed(1).replace(/\.0$/,"")+"G":n>=1e6?(n/1e6).toFixed(1).replace(/\.0$/,"")+"M":n>=1e3?(n/1e3).toFixed(1).replace(/\.0$/,"")+"K":n}\n                    </p>\n                </a>\n            `;var n})).join("")}</div>`;return{name:e.name,description:e.description,endpoint:e.endpoint,src:`/assets/portraits/${e.name.replaceAll(" ","_")}.jpg`,html:t}}));return e.$$set=e=>{"data"in e&&n(1,i=e.data)},[r,i]}class Od extends J{constructor(e){super(),Y(this,e,zd,kd,a,{data:1})}}function Fd(e,t,n){const i=e.slice();return i[1]=t[n],i}function Ud(e){let t,n,i,r=e[1]+"";return{c(){t=f("li"),n=new M,i=g(),n.a=i,x(t,"class","svelte-hm9cao")},m(e,a){d(e,t,a),n.m(r,t),u(t,i)},p(e,t){1&t&&r!==(r=e[1]+"")&&n.p(r)},d(e){e&&h(t)}}}function Bd(t){let n,i,r=t[0],a=[];for(let e=0;e<r.length;e+=1)a[e]=Ud(Fd(t,r,e));return{c(){n=f("div"),i=f("ol");for(let e=0;e<a.length;e+=1)a[e].c();x(i,"type","i"),x(i,"class","svelte-hm9cao"),x(n,"class","content svelte-hm9cao")},m(e,t){d(e,n,t),u(n,i);for(let e=0;e<a.length;e+=1)a[e].m(i,null)},p(e,[t]){if(1&t){let n;for(r=e[0],n=0;n<r.length;n+=1){const s=Fd(e,r,n);a[n]?a[n].p(s,t):(a[n]=Ud(s),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},i:e,o:e,d(e){e&&h(n),p(a,e)}}}function Hd(e,t,n){let{elements:i}=t;return e.$$set=e=>{"elements"in e&&n(0,i=e.elements)},[i]}class Vd extends J{constructor(e){super(),Y(this,e,Hd,Bd,a,{elements:0})}}function Gd(t){let n,r,a,s,o,c,p,v,b,w,M;return{c(){n=f("div"),r=f("img"),s=g(),o=f("h1"),c=m(t[0]),p=g(),v=f("img"),x(r,"alt","previous"),l(r.src,a="/assets/images/previous.png")||x(r,"src","/assets/images/previous.png"),x(r,"class","svelte-quhphy"),x(o,"class","svelte-quhphy"),x(v,"alt","next"),l(v.src,b="/assets/images/next.png")||x(v,"src","/assets/images/next.png"),x(v,"class","svelte-quhphy"),x(n,"class","buttons svelte-quhphy")},m(e,i){d(e,n,i),u(n,r),u(n,s),u(n,o),u(o,c),u(n,p),u(n,v),w||(M=[y(r,"click",t[6]),y(v,"click",t[7])],w=!0)},p(e,[t]){1&t&&_(c,e[0])},i:e,o:e,d(e){e&&h(n),w=!1,i(M)}}}function Wd(e,t,n){let{options:i}=t,{previous_callback:r}=t,{next_callback:a}=t,s=-1,o="";function l(){s-1<0||(s-=1,n(0,o=i[s].value),r(i[s].key))}function c(){s+1>=i.length||(s+=1,n(0,o=i[s].value),a(i[s].key))}T((()=>{[...new Set(i)].length!==i.length&&console.error("duplicates in slider options"),c()}));return e.$$set=e=>{"options"in e&&n(3,i=e.options),"previous_callback"in e&&n(4,r=e.previous_callback),"next_callback"in e&&n(5,a=e.next_callback)},[o,l,c,i,r,a,()=>{l()},()=>{c()}]}class qd extends J{constructor(e){super(),Y(this,e,Wd,Gd,a,{options:3,previous_callback:4,next_callback:5})}}function jd(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $d(e){let t=e,n=e,i=e;function r(e,t,r=0,a=e.length){if(r<a){if(0!==n(t,t))return a;do{const n=r+a>>>1;i(e[n],t)<0?r=n+1:a=n}while(r<a)}return r}return 2!==e.length&&(t=(t,n)=>e(t)-n,n=jd,i=(t,n)=>jd(e(t),n)),{left:r,center:function(e,n,i=0,a=e.length){const s=r(e,n,i,a-1);return s>i&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,r=0,a=e.length){if(r<a){if(0!==n(t,t))return a;do{const n=r+a>>>1;i(e[n],t)<=0?r=n+1:a=n}while(r<a)}return r}}}const Xd=$d(jd).right;$d((function(e){return null===e?NaN:+e})).center;var Yd=Xd,Jd=Math.sqrt(50),Zd=Math.sqrt(10),Kd=Math.sqrt(2);function Qd(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=Jd?10:a>=Zd?5:a>=Kd?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=Jd?10:a>=Zd?5:a>=Kd?2:1)}function eh(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=Jd?r*=10:a>=Zd?r*=5:a>=Kd&&(r*=2),t<e?-r:r}function th(e){return e}var nh=1e-6;function ih(e){return"translate("+e+",0)"}function rh(e){return"translate(0,"+e+")"}function ah(e){return t=>+e(t)}function sh(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function oh(){return!this.__axis}function lh(e,t){var n=[],i=null,r=null,a=6,s=6,o=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",d=1===e||3===e?ih:rh;function h(h){var p=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,f=null==r?t.tickFormat?t.tickFormat.apply(t,n):th:r,m=Math.max(a,0)+o,g=t.range(),v=+g[0]+l,y=+g[g.length-1]+l,x=(t.bandwidth?sh:ah)(t.copy(),l),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(p,t).order(),M=w.exit(),S=w.enter().append("g").attr("class","tick"),T=w.select("line"),E=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),E=E.merge(S.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),w=w.transition(h),T=T.transition(h),E=E.transition(h),M=M.transition(h).attr("opacity",nh).attr("transform",(function(e){return isFinite(e=x(e))?d(e+l):this.getAttribute("transform")})),S.attr("opacity",nh).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:x(e))+l)}))),M.remove(),b.attr("d",4===e||2===e?s?"M"+c*s+","+v+"H"+l+"V"+y+"H"+c*s:"M"+l+","+v+"V"+y:s?"M"+v+","+c*s+"V"+l+"H"+y+"V"+c*s:"M"+v+","+l+"H"+y),w.attr("opacity",1).attr("transform",(function(e){return d(x(e)+l)})),T.attr(u+"2",c*a),E.attr(u,c*m).text(f),_.filter(oh).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),_.each((function(){this.__axis=x}))}return h.scale=function(e){return arguments.length?(t=e,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),h):n.slice()},h.tickValues=function(e){return arguments.length?(i=null==e?null:Array.from(e),h):i&&i.slice()},h.tickFormat=function(e){return arguments.length?(r=e,h):r},h.tickSize=function(e){return arguments.length?(a=s=+e,h):a},h.tickSizeInner=function(e){return arguments.length?(a=+e,h):a},h.tickSizeOuter=function(e){return arguments.length?(s=+e,h):s},h.tickPadding=function(e){return arguments.length?(o=+e,h):o},h.offset=function(e){return arguments.length?(l=+e,h):l},h}function ch(e){return lh(3,e)}var uh={value:()=>{}};function dh(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new hh(i)}function hh(e){this._=e}function ph(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function fh(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function mh(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=uh,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}hh.prototype=dh.prototype={constructor:hh,on:function(e,t){var n,i=this._,r=ph(e+"",i),a=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=r[a]).type)i[n]=mh(i[n],e.name,t);else if(null==t)for(n in i)i[n]=mh(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=r[a]).type)&&(n=fh(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(i=this._[e]).length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};var gh="http://www.w3.org/1999/xhtml",vh={svg:"http://www.w3.org/2000/svg",xhtml:gh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yh(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),vh.hasOwnProperty(t)?{space:vh[t],local:e}:e}function xh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gh&&t.documentElement.namespaceURI===gh?t.createElement(e):t.createElementNS(n,e)}}function _h(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bh(e){var t=yh(e);return(t.local?_h:xh)(t)}function wh(){}function Mh(e){return null==e?wh:function(){return this.querySelector(e)}}function Sh(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Th(){return[]}function Eh(e){return null==e?Th:function(){return this.querySelectorAll(e)}}function Ah(e){return function(){return this.matches(e)}}function Lh(e){return function(t){return t.matches(e)}}var Ch=Array.prototype.find;function Rh(){return this.firstElementChild}var Ph=Array.prototype.filter;function Dh(){return Array.from(this.children)}function Ih(e){return new Array(e.length)}function Nh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function kh(e){return function(){return e}}function zh(e,t,n,i,r,a){for(var s,o=0,l=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],i[o]=s):n[o]=new Nh(e,a[o]);for(;o<l;++o)(s=t[o])&&(r[o]=s)}function Oh(e,t,n,i,r,a,s){var o,l,c,u=new Map,d=t.length,h=a.length,p=new Array(d);for(o=0;o<d;++o)(l=t[o])&&(p[o]=c=s.call(l,l.__data__,o,t)+"",u.has(c)?r[o]=l:u.set(c,l));for(o=0;o<h;++o)c=s.call(e,a[o],o,a)+"",(l=u.get(c))?(i[o]=l,l.__data__=a[o],u.delete(c)):n[o]=new Nh(e,a[o]);for(o=0;o<d;++o)(l=t[o])&&u.get(p[o])===l&&(r[o]=l)}function Fh(e){return e.__data__}function Uh(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Bh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hh(e){return function(){this.removeAttribute(e)}}function Vh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gh(e,t){return function(){this.setAttribute(e,t)}}function Wh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qh(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function jh(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $h(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xh(e){return function(){this.style.removeProperty(e)}}function Yh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Jh(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Zh(e,t){return e.style.getPropertyValue(t)||$h(e).getComputedStyle(e,null).getPropertyValue(t)}function Kh(e){return function(){delete this[e]}}function Qh(e,t){return function(){this[e]=t}}function ep(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function tp(e){return e.trim().split(/^|\s+/)}function np(e){return e.classList||new ip(e)}function ip(e){this._node=e,this._names=tp(e.getAttribute("class")||"")}function rp(e,t){for(var n=np(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function ap(e,t){for(var n=np(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function sp(e){return function(){rp(this,e)}}function op(e){return function(){ap(this,e)}}function lp(e,t){return function(){(t.apply(this,arguments)?rp:ap)(this,e)}}function cp(){this.textContent=""}function up(e){return function(){this.textContent=e}}function dp(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function hp(){this.innerHTML=""}function pp(e){return function(){this.innerHTML=e}}function fp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function mp(){this.nextSibling&&this.parentNode.appendChild(this)}function gp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vp(){return null}function yp(){var e=this.parentNode;e&&e.removeChild(this)}function xp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _p(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bp(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function wp(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,a=t.length;i<a;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Mp(e,t,n){return function(){var i,r=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),void(i.value=t);this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Sp(e,t,n){var i=$h(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Tp(e,t){return function(){return Sp(this,e,t)}}function Ep(e,t){return function(){return Sp(this,e,t.apply(this,arguments))}}Nh.prototype={constructor:Nh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},ip.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ap=[null];function Lp(e,t){this._groups=e,this._parents=t}function Cp(){return new Lp([[document.documentElement]],Ap)}function Rp(e){return"string"==typeof e?new Lp([[document.querySelector(e)]],[document.documentElement]):new Lp([[e]],Ap)}function Pp(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}Lp.prototype=Cp.prototype={constructor:Lp,select:function(e){"function"!=typeof e&&(e=Mh(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s,o=t[r],l=o.length,c=i[r]=new Array(l),u=0;u<l;++u)(a=o[u])&&(s=e.call(a,a.__data__,u,o))&&("__data__"in a&&(s.__data__=a.__data__),c[u]=s);return new Lp(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return Sh(e.apply(this,arguments))}}(e):Eh(e);for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var s,o=t[a],l=o.length,c=0;c<l;++c)(s=o[c])&&(i.push(e.call(s,s.__data__,c,o)),r.push(s));return new Lp(i,r)},selectChild:function(e){return this.select(null==e?Rh:function(e){return function(){return Ch.call(this.children,e)}}("function"==typeof e?e:Lh(e)))},selectChildren:function(e){return this.selectAll(null==e?Dh:function(e){return function(){return Ph.call(this.children,e)}}("function"==typeof e?e:Lh(e)))},filter:function(e){"function"!=typeof e&&(e=Ah(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s=t[r],o=s.length,l=i[r]=[],c=0;c<o;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new Lp(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Fh);var n=t?Oh:zh,i=this._parents,r=this._groups;"function"!=typeof e&&(e=kh(e));for(var a=r.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var u=i[c],d=r[c],h=d.length,p=Uh(e.call(u,u&&u.__data__,c,i)),f=p.length,m=o[c]=new Array(f),g=s[c]=new Array(f),v=l[c]=new Array(h);n(u,d,m,g,v,p,t);for(var y,x,_=0,b=0;_<f;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(x=g[b])&&++b<f;);y._next=x||null}}return(s=new Lp(s,i))._enter=o,s._exit=l,s},enter:function(){return new Lp(this._enter||this._groups.map(Ih),this._parents)},exit:function(){return new Lp(this._exit||this._groups.map(Ih),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,a=i.length,s=Math.min(r,a),o=new Array(r),l=0;l<s;++l)for(var c,u=n[l],d=i[l],h=u.length,p=o[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<r;++l)o[l]=n[l];return new Lp(o,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],a=r.length-1,s=r[a];--a>=0;)(i=r[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Bh);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var s,o=n[a],l=o.length,c=r[a]=new Array(l),u=0;u<l;++u)(s=o[u])&&(c[u]=s);c.sort(t)}return new Lp(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var s=i[r];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,a=t[n],s=0,o=a.length;s<o;++s)(r=a[s])&&e.call(r,r.__data__,s,a);return this},attr:function(e,t){var n=yh(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?Vh:Hh:"function"==typeof t?n.local?jh:qh:n.local?Wh:Gh)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Xh:"function"==typeof t?Jh:Yh)(e,t,null==n?"":n)):Zh(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Kh:"function"==typeof t?ep:Qh)(e,t)):this.node()[e]},classed:function(e,t){var n=tp(e+"");if(arguments.length<2){for(var i=np(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?lp:t?sp:op)(n,t))},text:function(e){return arguments.length?this.each(null==e?cp:("function"==typeof e?dp:up)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?hp:("function"==typeof e?fp:pp)(e)):this.node().innerHTML},raise:function(){return this.each(mp)},lower:function(){return this.each(gp)},append:function(e){var t="function"==typeof e?e:bh(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:bh(e),i=null==t?vp:"function"==typeof t?t:Mh(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(yp)},clone:function(e){return this.select(e?_p:xp)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,a=bp(e+""),s=a.length;if(!(arguments.length<2)){for(o=t?Mp:wp,i=0;i<s;++i)this.each(o(a[i],t,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(i=0,l=o[c];i<s;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ep:Tp)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],a=0,s=r.length;a<s;++a)(i=r[a])&&(yield i)}};const Dp={capture:!0,passive:!1};function Ip(e){e.preventDefault(),e.stopImmediatePropagation()}function Np(e){var t=e.document.documentElement,n=Rp(e).on("dragstart.drag",Ip,Dp);"onselectstart"in t?n.on("selectstart.drag",Ip,Dp):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function kp(e,t){var n=e.document.documentElement,i=Rp(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ip,Dp),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function zp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Op(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Fp(){}var Up=.7,Bp=1/Up,Hp="\\s*([+-]?\\d+)\\s*",Vp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wp=/^#([0-9a-f]{3,8})$/,qp=new RegExp("^rgb\\("+[Hp,Hp,Hp]+"\\)$"),jp=new RegExp("^rgb\\("+[Gp,Gp,Gp]+"\\)$"),$p=new RegExp("^rgba\\("+[Hp,Hp,Hp,Vp]+"\\)$"),Xp=new RegExp("^rgba\\("+[Gp,Gp,Gp,Vp]+"\\)$"),Yp=new RegExp("^hsl\\("+[Vp,Gp,Gp]+"\\)$"),Jp=new RegExp("^hsla\\("+[Vp,Gp,Gp,Vp]+"\\)$"),Zp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Kp(){return this.rgb().formatHex()}function Qp(){return this.rgb().formatRgb()}function ef(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tf(t):3===n?new sf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?nf(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?nf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qp.exec(e))?new sf(t[1],t[2],t[3],1):(t=jp.exec(e))?new sf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$p.exec(e))?nf(t[1],t[2],t[3],t[4]):(t=Xp.exec(e))?nf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Yp.exec(e))?uf(t[1],t[2]/100,t[3]/100,1):(t=Jp.exec(e))?uf(t[1],t[2]/100,t[3]/100,t[4]):Zp.hasOwnProperty(e)?tf(Zp[e]):"transparent"===e?new sf(NaN,NaN,NaN,0):null}function tf(e){return new sf(e>>16&255,e>>8&255,255&e,1)}function nf(e,t,n,i){return i<=0&&(e=t=n=NaN),new sf(e,t,n,i)}function rf(e){return e instanceof Fp||(e=ef(e)),e?new sf((e=e.rgb()).r,e.g,e.b,e.opacity):new sf}function af(e,t,n,i){return 1===arguments.length?rf(e):new sf(e,t,n,null==i?1:i)}function sf(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function of(){return"#"+cf(this.r)+cf(this.g)+cf(this.b)}function lf(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function cf(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function uf(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hf(e,t,n,i)}function df(e){if(e instanceof hf)return new hf(e.h,e.s,e.l,e.opacity);if(e instanceof Fp||(e=ef(e)),!e)return new hf;if(e instanceof hf)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(s=t===a?(n-i)/o+6*(n<i):n===a?(i-t)/o+2:(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new hf(s,o,l,e.opacity)}function hf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function pf(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}zp(Fp,ef,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Kp,formatHex:Kp,formatHsl:function(){return df(this).formatHsl()},formatRgb:Qp,toString:Qp}),zp(sf,af,Op(Fp,{brighter:function(e){return e=null==e?Bp:Math.pow(Bp,e),new sf(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Up:Math.pow(Up,e),new sf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:of,formatHex:of,formatRgb:lf,toString:lf})),zp(hf,(function(e,t,n,i){return 1===arguments.length?df(e):new hf(e,t,n,null==i?1:i)}),Op(Fp,{brighter:function(e){return e=null==e?Bp:Math.pow(Bp,e),new hf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Up:Math.pow(Up,e),new hf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new sf(pf(e>=240?e-240:e+120,r,i),pf(e,r,i),pf(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var ff=e=>()=>e;function mf(e){return 1==(e=+e)?gf:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):ff(isNaN(t)?n:t)}}function gf(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ff(isNaN(e)?t:e)}var vf=function e(t){var n=mf(t);function i(e,t){var i=n((e=af(e)).r,(t=af(t)).r),r=n(e.g,t.g),a=n(e.b,t.b),s=gf(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function yf(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(a){for(n=0;n<i;++n)r[n]=e[n]*(1-a)+t[n]*a;return r}}function xf(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,a=new Array(r),s=new Array(i);for(n=0;n<r;++n)a[n]=Ef(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<r;++n)s[n]=a[n](e);return s}}function _f(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function bf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wf(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Ef(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var Mf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sf=new RegExp(Mf.source,"g");function Tf(e,t){var n,i,r,a=Mf.lastIndex=Sf.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=Mf.exec(e))&&(i=Sf.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),o[s]?o[s]+=r:o[++s]=r),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:bf(n,i)})),a=Sf.lastIndex;return a<t.length&&(r=t.slice(a),o[s]?o[s]+=r:o[++s]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function Ef(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?ff(t):("number"===r?bf:"string"===r?(n=ef(t))?(t=n,vf):Tf:t instanceof ef?vf:t instanceof Date?_f:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?xf:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?wf:bf:yf))(e,t)}function Af(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Lf,Cf=180/Math.PI,Rf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pf(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Cf,skewX:Math.atan(l)*Cf,scaleX:s,scaleY:o}}function Df(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(a,s){var o=[],l=[];return a=e(a),s=e(s),function(e,i,r,a,s,o){if(e!==r||i!==a){var l=s.push("translate(",null,t,null,n);o.push({i:l-4,x:bf(e,r)},{i:l-2,x:bf(i,a)})}else(r||a)&&s.push("translate("+r+t+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,o,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:bf(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(a.rotate,s.rotate,o,l),function(e,t,n,a){e!==t?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:bf(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(a.skewX,s.skewX,o,l),function(e,t,n,i,a,s){if(e!==n||t!==i){var o=a.push(r(a)+"scale(",null,",",null,")");s.push({i:o-4,x:bf(e,n)},{i:o-2,x:bf(t,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,o,l),a=s=null,function(e){for(var t,n=-1,i=l.length;++n<i;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var If=Df((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Rf:Pf(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Nf=Df((function(e){return null==e?Rf:(Lf||(Lf=document.createElementNS("http://www.w3.org/2000/svg","g")),Lf.setAttribute("transform",e),(e=Lf.transform.baseVal.consolidate())?Pf((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Rf)}),", ",")",")");function kf(e){return((e=Math.exp(e))+1/e)/2}var zf,Of,Ff=function e(t,n,i){function r(e,r){var a,s,o=e[0],l=e[1],c=e[2],u=r[0],d=r[1],h=r[2],p=u-o,f=d-l,m=p*p+f*f;if(m<1e-12)s=Math.log(h/c)/t,a=function(e){return[o+e*p,l+e*f,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),v=(h*h-c*c+i*m)/(2*c*n*g),y=(h*h-c*c-i*m)/(2*h*n*g),x=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);s=(_-x)/t,a=function(e){var i,r=e*s,a=kf(x),u=c/(n*g)*(a*(i=t*r+x,((i=Math.exp(2*i))-1)/(i+1))-function(e){return((e=Math.exp(e))-1/e)/2}(x));return[o+u*p,l+u*f,c*a/kf(t*r+x)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return r.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},r}(Math.SQRT2,2,4),Uf=0,Bf=0,Hf=0,Vf=0,Gf=0,Wf=0,qf="object"==typeof performance&&performance.now?performance:Date,jf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $f(){return Gf||(jf(Xf),Gf=qf.now()+Wf)}function Xf(){Gf=0}function Yf(){this._call=this._time=this._next=null}function Jf(e,t,n){var i=new Yf;return i.restart(e,t,n),i}function Zf(){Gf=(Vf=qf.now())+Wf,Uf=Bf=0;try{!function(){$f(),++Uf;for(var e,t=zf;t;)(e=Gf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Uf}()}finally{Uf=0,function(){var e,t,n=zf,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zf=t);Of=e,Qf(i)}(),Gf=0}}function Kf(){var e=qf.now(),t=e-Vf;t>1e3&&(Wf-=t,Vf=e)}function Qf(e){Uf||(Bf&&(Bf=clearTimeout(Bf)),e-Gf>24?(e<1/0&&(Bf=setTimeout(Zf,e-qf.now()-Wf)),Hf&&(Hf=clearInterval(Hf))):(Hf||(Vf=qf.now(),Hf=setInterval(Kf,1e3)),Uf=1,jf(Zf)))}function em(e,t,n){var i=new Yf;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}Yf.prototype=Jf.prototype={constructor:Yf,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?$f():+n)+(null==t?0:+t),this._next||Of===this||(Of?Of._next=this:zf=this,Of=this),this._call=e,this._time=n,Qf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qf())}};var tm=dh("start","end","cancel","interrupt"),nm=[];function im(e,t,n,i,r,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function a(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(a){var c,u,d,h;if(1!==n.state)return l();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return em(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(em((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(a))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function o(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,s=i.length;++a<s;)i[a].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Jf(a,0,n.time)}(e,n,{name:t,index:i,group:r,on:tm,tween:nm,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function rm(e,t){var n=sm(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function am(e,t){var n=sm(e,t);if(n.state>3)throw new Error("too late; already running");return n}function sm(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function om(e,t){var n,i,r,a=e.__transition,s=!0;if(a){for(r in t=null==t?null:t+"",a)(n=a[r]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[r]):s=!1;s&&delete e.__transition}}function lm(e,t){var n,i;return function(){var r=am(this,e),a=r.tween;if(a!==n)for(var s=0,o=(i=n=a).length;s<o;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function cm(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=am(this,e),s=a.tween;if(s!==i){r=(i=s).slice();for(var o={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=o;break}l===c&&r.push(o)}a.tween=r}}function um(e,t,n){var i=e._id;return e.each((function(){var e=am(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return sm(e,i).value[t]}}function dm(e,t){var n;return("number"==typeof t?bf:t instanceof ef?vf:(n=ef(t))?(t=n,vf):Tf)(e,t)}function hm(e){return function(){this.removeAttribute(e)}}function pm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fm(e,t,n){var i,r,a=n+"";return function(){var s=this.getAttribute(e);return s===a?null:s===i?r:r=t(i=s,n)}}function mm(e,t,n){var i,r,a=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===i?r:r=t(i=s,n)}}function gm(e,t,n){var i,r,a;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(o=l+"")?null:s===i&&o===r?a:(r=o,a=t(i=s,l));this.removeAttribute(e)}}function vm(e,t,n){var i,r,a;return function(){var s,o,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:s===i&&o===r?a:(r=o,a=t(i=s,l));this.removeAttributeNS(e.space,e.local)}}function ym(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xm(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _m(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&xm(e,r)),n}return r._value=t,r}function bm(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&ym(e,r)),n}return r._value=t,r}function wm(e,t){return function(){rm(this,e).delay=+t.apply(this,arguments)}}function Mm(e,t){return t=+t,function(){rm(this,e).delay=t}}function Sm(e,t){return function(){am(this,e).duration=+t.apply(this,arguments)}}function Tm(e,t){return t=+t,function(){am(this,e).duration=t}}function Em(e,t){if("function"!=typeof t)throw new Error;return function(){am(this,e).ease=t}}function Am(e,t,n){var i,r,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?rm:am;return function(){var s=a(this,e),o=s.on;o!==i&&(r=(i=o).copy()).on(t,n),s.on=r}}var Lm=Cp.prototype.constructor;function Cm(e){return function(){this.style.removeProperty(e)}}function Rm(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Pm(e,t,n){var i,r;function a(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&Rm(e,a,n)),i}return a._value=t,a}function Dm(e){return function(t){this.textContent=e.call(this,t)}}function Im(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Dm(i)),t}return i._value=e,i}var Nm=0;function km(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function zm(){return++Nm}var Om=Cp.prototype;km.prototype={constructor:km,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Mh(e));for(var i=this._groups,r=i.length,a=new Array(r),s=0;s<r;++s)for(var o,l,c=i[s],u=c.length,d=a[s]=new Array(u),h=0;h<u;++h)(o=c[h])&&(l=e.call(o,o.__data__,h,c))&&("__data__"in o&&(l.__data__=o.__data__),d[h]=l,im(d[h],t,n,h,d,sm(o,n)));return new km(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Eh(e));for(var i=this._groups,r=i.length,a=[],s=[],o=0;o<r;++o)for(var l,c=i[o],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=e.call(l,l.__data__,d,c),f=sm(l,n),m=0,g=p.length;m<g;++m)(h=p[m])&&im(h,t,n,m,p,f);a.push(p),s.push(l)}return new km(a,s,t,n)},selectChild:Om.selectChild,selectChildren:Om.selectChildren,filter:function(e){"function"!=typeof e&&(e=Ah(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,s=t[r],o=s.length,l=i[r]=[],c=0;c<o;++c)(a=s[c])&&e.call(a,a.__data__,c,s)&&l.push(a);return new km(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var l,c=t[o],u=n[o],d=c.length,h=s[o]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;o<i;++o)s[o]=t[o];return new km(s,this._parents,this._name,this._id)},selection:function(){return new Lm(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=zm(),i=this._groups,r=i.length,a=0;a<r;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)if(s=o[c]){var u=sm(s,t);im(s,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new km(i,this._parents,e,n)},call:Om.call,nodes:Om.nodes,node:Om.node,size:Om.size,empty:Om.empty,each:Om.each,on:function(e,t){var n=this._id;return arguments.length<2?sm(this.node(),n).on.on(e):this.each(Am(n,e,t))},attr:function(e,t){var n=yh(e),i="transform"===n?Nf:dm;return this.attrTween(e,"function"==typeof t?(n.local?vm:gm)(n,i,um(this,"attr."+e,t)):null==t?(n.local?pm:hm)(n):(n.local?mm:fm)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=yh(e);return this.tween(n,(i.local?_m:bm)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?If:dm;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var a=Zh(this,e),s=(this.style.removeProperty(e),Zh(this,e));return a===s?null:a===n&&s===i?r:r=t(n=a,i=s)}}(e,i)).on("end.style."+e,Cm(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,a;return function(){var s=Zh(this,e),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=Zh(this,e)),s===l?null:s===i&&l===r?a:(r=l,a=t(i=s,o))}}(e,i,um(this,"style."+e,t))).each(function(e,t){var n,i,r,a,s="style."+t,o="end."+s;return function(){var l=am(this,e),c=l.on,u=null==l.value[s]?a||(a=Cm(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(o,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,a=n+"";return function(){var s=Zh(this,e);return s===a?null:s===i?r:r=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,Pm(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(um(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Im(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=sm(this.node(),n).tween,a=0,s=r.length;a<s;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((null==t?lm:cm)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?wm:Mm)(t,e)):sm(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Sm:Tm)(t,e)):sm(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Em(t,e)):sm(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;am(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(a,s){var o={value:s},l={value:function(){0==--r&&a()}};n.each((function(){var n=am(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),n.on=t})),0===r&&a()}))},[Symbol.iterator]:Om[Symbol.iterator]};var Fm={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Um(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Bm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Hm(e){return(e=Bm(Math.abs(e)))?e[1]:NaN}Cp.prototype.interrupt=function(e){return this.each((function(){om(this,e)}))},Cp.prototype.transition=function(e){var t,n;e instanceof km?(t=e._id,e=e._name):(t=zm(),(n=Fm).time=$f(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)(s=o[c])&&im(s,e,t,c,o,n||Um(s,t));return new km(i,this._parents,e,t)};var Vm,Gm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wm(e){if(!(t=Gm.exec(e)))throw new Error("invalid format: "+e);var t;return new qm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function qm(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function jm(e,t){var n=Bm(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Wm.prototype=qm.prototype,qm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var $m={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jm(100*e,t),r:jm,s:function(e,t){var n=Bm(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Vm=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Bm(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Xm(e){return e}var Ym,Jm,Zm,Km=Array.prototype.map,Qm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eg(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Xm:(t=Km.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,a=[],s=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Xm:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Km.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Wm(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):$m[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===h?r:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?a:/[%p]/.test(y)?l:"",b=$m[y],w=/[defgprs%]/.test(y);function M(e){var r,a,l,h=x,M=_;if("c"===y)M=b(e)+M,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:b(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:c:"-"===d||"("===d?"":d)+h,M=("s"===y?Qm[8+Vm/3]:"")+M+(S&&"("===d?")":""),w)for(r=-1,a=e.length;++r<a;)if(48>(l=e.charCodeAt(r))||l>57){M=(46===l?s+e.slice(r+1):e.slice(r))+M,e=e.slice(0,r);break}}m&&!p&&(e=i(e,1/0));var T=h.length+e.length+M.length,E=T<f?new Array(f-T+1).join(t):"";switch(m&&p&&(e=i(E+e,E.length?f-M.length:1/0),E=""),n){case"<":e=h+e+M+E;break;case"=":e=h+E+e+M;break;case"^":e=E.slice(0,T=E.length>>1)+h+e+M+E.slice(T);break;default:e=E+h+e+M}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:d,formatPrefix:function(e,t){var n=d(((e=Wm(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Hm(t)/3))),r=Math.pow(10,-i),a=Qm[8+i/3];return function(e){return n(r*e)+a}}}}function tg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ng(e){return+e}Ym=eg({thousands:",",grouping:[3],currency:["$",""]}),Jm=Ym.format,Zm=Ym.formatPrefix;var ig=[0,1];function rg(e){return e}function ag(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function sg(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=ag(r,i),a=n(s,a)):(i=ag(i,r),a=n(a,s)),function(e){return a(i(e))}}function og(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=ag(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=Yd(e,t,1,i)-1;return a[n](r[n](t))}}function lg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cg(){var e,t,n,i,r,a,s=ig,o=ig,l=Ef,c=rg;function u(){var e,t,n,l=Math.min(s.length,o.length);return c!==rg&&(e=s[0],t=s[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?og:sg,r=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(s.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=i(o,s.map(e),bf)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,ng),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=Af,u()},d.clamp=function(e){return arguments.length?(c=!!e||rg,u()):c!==rg},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function ug(){return cg()(rg,rg)}function dg(e,t,n,i){var r,a=eh(e,t,n);switch((i=Wm(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hm(t)/3)))-Hm(Math.abs(e)))}(a,s))||(i.precision=r),Zm(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hm(t)-Hm(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-Hm(Math.abs(e)))}(a))||(i.precision=r-2*("%"===i.type))}return Jm(i)}function hg(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,r,a,s,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(s=Qd(e,t,n))||!isFinite(s))return[];if(s>0){let n=Math.round(e/s),i=Math.round(t/s);for(n*s<e&&++n,i*s>t&&--i,a=new Array(r=i-n+1);++o<r;)a[o]=(n+o)*s}else{s=-s;let n=Math.round(e*s),i=Math.round(t*s);for(n/s<e&&++n,i/s>t&&--i,a=new Array(r=i-n+1);++o<r;)a[o]=(n+o)/s}return i&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return dg(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,a=t(),s=0,o=a.length-1,l=a[s],c=a[o],u=10;for(c<l&&(r=l,l=c,c=r,r=s,s=o,o=r);u-- >0;){if((r=Qd(l,c,n))===i)return a[s]=l,a[o]=c,t(a);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function pg(){var e=ug();return e.copy=function(){return lg(e,pg())},tg.apply(e,arguments),hg(e)}function fg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mg(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gg(e){return e<0?-e*e:e*e}function vg(e){var t=e(rg,rg),n=1;function i(){return 1===n?e(rg,rg):.5===n?e(mg,gg):e(fg(n),fg(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,i()):n},hg(t)}function yg(){var e=vg(cg());return e.copy=function(){return lg(e,yg()).exponent(e.exponent())},tg.apply(e,arguments),e}var xg=new Date,_g=new Date;function bg(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=function(t){return e(t=new Date(+t)),t},r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,a){var s,o=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return o;do{o.push(s=new Date(+n)),t(n,a),e(n)}while(s<n&&n<i);return o},r.filter=function(n){return bg((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(r.count=function(t,i){return xg.setTime(+t),_g.setTime(+i),e(xg),e(_g),Math.floor(n(xg,_g))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}var wg=bg((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));wg.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?bg((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):wg:null};var Mg=wg;const Sg=1e3,Tg=6e4,Eg=36e5,Ag=864e5,Lg=6048e5,Cg=2592e6,Rg=31536e6;var Pg=bg((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Sg)}),(function(e,t){return(t-e)/Sg}),(function(e){return e.getUTCSeconds()})),Dg=Pg,Ig=bg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sg)}),(function(e,t){e.setTime(+e+t*Tg)}),(function(e,t){return(t-e)/Tg}),(function(e){return e.getMinutes()})),Ng=Ig,kg=bg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sg-e.getMinutes()*Tg)}),(function(e,t){e.setTime(+e+t*Eg)}),(function(e,t){return(t-e)/Eg}),(function(e){return e.getHours()})),zg=kg,Og=bg((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tg)/Ag),(e=>e.getDate()-1)),Fg=Og;function Ug(e){return bg((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tg)/Lg}))}var Bg=Ug(0),Hg=Ug(1);Ug(2),Ug(3);var Vg=Ug(4);Ug(5),Ug(6);var Gg=bg((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),Wg=Gg,qg=bg((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));qg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?bg((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var jg=qg,$g=bg((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Tg)}),(function(e,t){return(t-e)/Tg}),(function(e){return e.getUTCMinutes()})),Xg=$g,Yg=bg((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Eg)}),(function(e,t){return(t-e)/Eg}),(function(e){return e.getUTCHours()})),Jg=Yg,Zg=bg((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Ag}),(function(e){return e.getUTCDate()-1})),Kg=Zg;function Qg(e){return bg((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Lg}))}var ev=Qg(0),tv=Qg(1);Qg(2),Qg(3);var nv=Qg(4);Qg(5),Qg(6);var iv=bg((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),rv=iv,av=bg((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));av.every=function(e){return isFinite(e=Math.floor(e))&&e>0?bg((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var sv=av;function ov(e,t,n,i,r,a){const s=[[Dg,1,Sg],[Dg,5,5e3],[Dg,15,15e3],[Dg,30,3e4],[a,1,Tg],[a,5,3e5],[a,15,9e5],[a,30,18e5],[r,1,Eg],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,Ag],[i,2,1728e5],[n,1,Lg],[t,1,Cg],[t,3,7776e6],[e,1,Rg]];function o(t,n,i){const r=Math.abs(n-t)/i,a=$d((([,,e])=>e)).right(s,r);if(a===s.length)return e.every(eh(t/Rg,n/Rg,i));if(0===a)return Mg.every(Math.max(eh(t,n,i),1));const[o,l]=s[r/s[a-1][2]<s[a][2]/r?a-1:a];return o.every(l)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:o(e,t,n),a=r?r.range(e,+t+1):[];return i?a.reverse():a},o]}ov(sv,rv,ev,Kg,Jg,Xg);const[lv,cv]=ov(jg,Wg,Bg,Fg,zg,Ng);function uv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var pv,fv,mv={"-":"",_:" ",0:"0"},gv=/^\s*\d+/,vv=/^%/,yv=/[\\^$*+?|[\]().{}]/g;function xv(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function _v(e){return e.replace(yv,"\\$&")}function bv(e){return new RegExp("^(?:"+e.map(_v).join("|")+")","i")}function wv(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Mv(e,t,n){var i=gv.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Sv(e,t,n){var i=gv.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Tv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Ev(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Av(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Lv(e,t,n){var i=gv.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Cv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Rv(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Pv(e,t,n){var i=gv.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Dv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Iv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Nv(e,t,n){var i=gv.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function kv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function zv(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Ov(e,t,n){var i=gv.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Fv(e,t,n){var i=gv.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Uv(e,t,n){var i=gv.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Bv(e,t,n){var i=vv.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Hv(e,t,n){var i=gv.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Vv(e,t,n){var i=gv.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Gv(e,t){return xv(e.getDate(),t,2)}function Wv(e,t){return xv(e.getHours(),t,2)}function qv(e,t){return xv(e.getHours()%12||12,t,2)}function jv(e,t){return xv(1+Fg.count(jg(e),e),t,3)}function $v(e,t){return xv(e.getMilliseconds(),t,3)}function Xv(e,t){return $v(e,t)+"000"}function Yv(e,t){return xv(e.getMonth()+1,t,2)}function Jv(e,t){return xv(e.getMinutes(),t,2)}function Zv(e,t){return xv(e.getSeconds(),t,2)}function Kv(e){var t=e.getDay();return 0===t?7:t}function Qv(e,t){return xv(Bg.count(jg(e)-1,e),t,2)}function ey(e){var t=e.getDay();return t>=4||0===t?Vg(e):Vg.ceil(e)}function ty(e,t){return e=ey(e),xv(Vg.count(jg(e),e)+(4===jg(e).getDay()),t,2)}function ny(e){return e.getDay()}function iy(e,t){return xv(Hg.count(jg(e)-1,e),t,2)}function ry(e,t){return xv(e.getFullYear()%100,t,2)}function ay(e,t){return xv((e=ey(e)).getFullYear()%100,t,2)}function sy(e,t){return xv(e.getFullYear()%1e4,t,4)}function oy(e,t){var n=e.getDay();return xv((e=n>=4||0===n?Vg(e):Vg.ceil(e)).getFullYear()%1e4,t,4)}function ly(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xv(t/60|0,"0",2)+xv(t%60,"0",2)}function cy(e,t){return xv(e.getUTCDate(),t,2)}function uy(e,t){return xv(e.getUTCHours(),t,2)}function dy(e,t){return xv(e.getUTCHours()%12||12,t,2)}function hy(e,t){return xv(1+Kg.count(sv(e),e),t,3)}function py(e,t){return xv(e.getUTCMilliseconds(),t,3)}function fy(e,t){return py(e,t)+"000"}function my(e,t){return xv(e.getUTCMonth()+1,t,2)}function gy(e,t){return xv(e.getUTCMinutes(),t,2)}function vy(e,t){return xv(e.getUTCSeconds(),t,2)}function yy(e){var t=e.getUTCDay();return 0===t?7:t}function xy(e,t){return xv(ev.count(sv(e)-1,e),t,2)}function _y(e){var t=e.getUTCDay();return t>=4||0===t?nv(e):nv.ceil(e)}function by(e,t){return e=_y(e),xv(nv.count(sv(e),e)+(4===sv(e).getUTCDay()),t,2)}function wy(e){return e.getUTCDay()}function My(e,t){return xv(tv.count(sv(e)-1,e),t,2)}function Sy(e,t){return xv(e.getUTCFullYear()%100,t,2)}function Ty(e,t){return xv((e=_y(e)).getUTCFullYear()%100,t,2)}function Ey(e,t){return xv(e.getUTCFullYear()%1e4,t,4)}function Ay(e,t){var n=e.getUTCDay();return xv((e=n>=4||0===n?nv(e):nv.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ly(){return"+0000"}function Cy(){return"%"}function Ry(e){return+e}function Py(e){return Math.floor(+e/1e3)}function Dy(e){return new Date(e)}function Iy(e){return e instanceof Date?+e:+new Date(+e)}function Ny(e,t,n,i,r,a,s,o,l,c){var u=ug(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),_=c("%Y");function b(e){return(l(e)<e?p:o(e)<e?f:s(e)<e?m:a(e)<e?g:i(e)<e?r(e)<e?v:y:n(e)<e?x:_)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,Iy)):h().map(Dy)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?b:c(t)},u.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(function(e,t){var n,i=0,r=(e=e.slice()).length-1,a=e[i],s=e[r];return s<a&&(n=i,i=r,r=n,n=a,a=s,s=n),e[i]=t.floor(a),e[r]=t.ceil(s),e}(n,e)):u},u.copy=function(){return lg(u,Ny(e,t,n,i,r,a,s,o,l,c))},u}!function(e){pv=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=bv(r),u=wv(r),d=bv(a),h=wv(a),p=bv(s),f=wv(s),m=bv(o),g=wv(o),v=bv(l),y=wv(l),x={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Gv,e:Gv,f:Xv,g:ay,G:oy,H:Wv,I:qv,j:jv,L:$v,m:Yv,M:Jv,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ry,s:Py,S:Zv,u:Kv,U:Qv,V:ty,w:ny,W:iy,x:null,X:null,y:ry,Y:sy,Z:ly,"%":Cy},_={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:cy,e:cy,f:fy,g:Ty,G:Ay,H:uy,I:dy,j:hy,L:py,m:my,M:gy,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ry,s:Py,S:vy,u:yy,U:xy,V:by,w:wy,W:My,x:null,X:null,y:Sy,Y:Ey,Z:Ly,"%":Cy},b={a:function(e,t,n){var i=p.exec(t.slice(n));return i?(e.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=d.exec(t.slice(n));return i?(e.w=h.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=v.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return S(e,t,n,i)},d:Iv,e:Iv,f:Uv,g:Cv,G:Lv,H:kv,I:kv,j:Nv,L:Fv,m:Dv,M:zv,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:Pv,Q:Hv,s:Vv,S:Ov,u:Sv,U:Tv,V:Ev,w:Mv,W:Av,x:function(e,t,i){return S(e,n,t,i)},X:function(e,t,n){return S(e,i,t,n)},y:Cv,Y:Lv,Z:Rv,"%":Bv};function w(e,t){return function(n){var i,r,a,s=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(r=mv[i=e.charAt(++o)])?i=e.charAt(++o):r="e"===i?" ":"0",(a=t[i])&&(i=a(n,r)),s.push(i),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function M(e,t){return function(n){var i,r,a=hv(1900,void 0,1);if(S(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=dv(hv(a.y,0,1))).getUTCDay(),i=r>4||0===r?tv.ceil(i):tv(i),i=Kg.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=uv(hv(a.y,0,1))).getDay(),i=r>4||0===r?Hg.ceil(i):Hg(i),i=Fg.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?dv(hv(a.y,0,1)).getUTCDay():uv(hv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,dv(a)):uv(a)}}function S(e,t,n,i){for(var r,a,s=0,o=t.length,l=n.length;s<o;){if(i>=l)return-1;if(37===(r=t.charCodeAt(s++))){if(r=t.charAt(s++),!(a=b[r in mv?t.charAt(s++):r])||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=w(n,x),x.X=w(i,x),x.c=w(t,x),_.x=w(n,_),_.X=w(i,_),_.c=w(t,_),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=M(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=M(e+="",!0);return t.toString=function(){return e},t}}}(e),fv=pv.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ky=e=>()=>e;function zy(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Oy(e,t,n){this.k=e,this.x=t,this.y=n}Oy.prototype={constructor:Oy,scale:function(e){return 1===e?this:new Oy(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Oy(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fy=new Oy(1,0,0);function Uy(e){e.stopImmediatePropagation()}function By(e){e.preventDefault(),e.stopImmediatePropagation()}function Hy(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Vy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Gy(){return this.__zoom||Fy}function Wy(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qy(){return navigator.maxTouchPoints||"ontouchstart"in this}function jy(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}ne();const $y=ne()?320:600,Xy=128,Yy=8,Jy=64,Zy=8,Ky="#eee",Qy="#222",ex="Roboto-Mono";function tx(e){return e.includes("facebook")?"facebook":e.includes("t.me")?"telegram":e.includes("twitter")?"twitter":e.includes("youtube")?"youtube":null}function nx(e){const t=tx(e.url);let n={name:"",count:0};return"twitter"===t?(n.name="shares",n.count=e.engagement.shares):"facebook"===t?(n.name="reactions",n.count=e.engagement.reactions):["youtube","telegram"].includes(t)&&(n.name="views",n.count=e.engagement.views),n}function ix(e,t,n){const[i,r]=function(e,t=30,n="published_at"){const i=e.map((e=>new Date(e[n])));return[Math.min(...i)-24*t*60*60*1e3,Math.max(...i)+24*t*60*60*1e3]}(e,2),a=function(){return tg.apply(Ny(lv,cv,jg,Wg,Bg,Fg,zg,Ng,Dg,fv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().rangeRound([0,n-1]).domain([i,r]),s=[...new Set(e.map((e=>e.source_name)))],o=[...new Set(t.map((e=>e.name)))].filter((e=>s.includes(e)));let l=new Set;t.map((e=>Object.keys(e.endpoint))).forEach((e=>e.forEach((e=>l.add(e))))),l=[...l];const c={},u={};o.forEach(((e,t)=>{c[e]=t,u[t]=e}));const d=[...Array(o.length)].map((e=>Array(n).fill([])));e.forEach((e=>{const t=e.source_name,n=new Date(e.published_at),i=c[t];if(void 0===i)return;const r=a(n);d[i][r]=d[i][r].concat([e])}));let h={};l.forEach((t=>{e.filter((e=>tx(e.url)===t)).forEach((e=>{const n=nx(e),i=h[t];(void 0===i||+n.count>i)&&(h[t]=+n.count)}))})),d.forEach(((e,t)=>{Math.max(...e.map((e=>e.length)))}));let p={};return l.forEach((e=>{p[e]=yg().domain([0,h[e]])})),{matrix:d,source_mapping:c,time_scale:a,color_scales:p}}function rx(e){const t=e.toLowerCase().split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].substring(1);return t.join(" ")}function ax(e,t,n,i,r,a,s){Object.keys(i).forEach((e=>{i[e]=i[e].range([Ky,"#444","#222"])}));const o=1*e[0].length,l=1*Object.keys(t).length,c=1*$y/o,u=800/l,d=Math.floor(Math.min(c,u))-2,h=(d+2)*o,p=(d+2)*l,f=d,{matrix_df:m,sources_df:g}=function(e,t,n,i,r){const a=[],s={};Object.keys(t).forEach((e=>{const n=+t[e];s[n]=e;const o=n*(i+2);a.push({row_id:n,y:o+r-2,text:rx(e)})}));const o=[];return e.forEach(((e,t)=>{e.forEach(((e,r)=>{const a=s[t];let l=Ky,c=0;e.length>0&&e.forEach((e=>{const t=nx(e).count;t>c&&(c=t,l=n[tx(e.url)](t))})),o.push({row_id:t,source_name:a,x:r*(i+2),y:t*(i+2),width:i,height:i,fill:l,value:e.length,data:e})}))})),{matrix_df:o,sources_df:a}}(e,t,i,d,f),v=r.append("svg").attr("width",$y+128+Zy+Yy).attr("height",800+Xy+Jy),y=v.append("g").attr("transform","translate("+Zy+","+Xy+")"),x=v.append("g").attr("transform","translate("+Zy+","+Xy+")"),_=v.append("g").attr("transform","translate("+(Zy+h+8)+","+Xy+")"),b=v.append("g").attr("transform","translate("+Zy+","+(Xy+p)+")");y.selectAll("rect").data(m).enter().append("rect").attr("x",(e=>e.x)).attr("y",(e=>e.y)).attr("width",(e=>e.width)).attr("height",(e=>e.height)).attr("fill",(e=>e.fill)).attr("stroke",(e=>e.fill)).attr("stroke-width","0").attr("cursor",(e=>e.value>0?"pointer":"default")).on("mouseover",(function(e,t){0!=+t.value&&(a.style("display","inline"),a.html((()=>function(e){return`\n        <h2>${e.source_name}</h2>\n        <p><b>${e.data.length} ${e.data.length>1?"posts":"post"}</b></p>\n        ${e.data.map((e=>{const t=tx(e.url),n=nx(e);return`<p>${e.published_at}: ${t}, ${n.name}: ${(+n.count).toLocaleString()}</p>`})).join("")}\n    `}(t))),Rp(this).attr("stroke-width",3))})).on("mousemove",(e=>{a.style("left",`${e.pageX+16}px`).style("top",`${e.pageY+16}px`)})).on("mouseout",(function(){a.style("display","none"),Rp(this).attr("stroke-width",0)})).on("click",((e,t)=>{if(ne())return;const n=t.data.map((e=>e.url));0!==n.length&&Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((e=>{if(e)for(let e=0;e<n.length;e++)window.open(n[e],"_blank")}))})),_.selectAll("text").data(g).enter().append("text").attr("font-size",`${d}px`).attr("font-family",ex).style("fill",Qy).attr("x","0px").attr("y",(e=>`${e.y}px`)).text((e=>e.text));const w=function(e){let t=0;return e.selectAll("text").each((function(e){const n=this.getBoundingClientRect().width;n>t&&(t=n)})),t}(_),M=h+8+w;v.attr("width",`${M+Zy+Yy}px`),v.attr("height",`${p+Jy+Xy}px`),v.append("g").attr("transform","translate("+(Zy+M/2)+",8)");const S=n.copy();if(S.range([0,h-2]),function(e,t,n){const i=fv("%y/%m"),r=ne()?ch(t).tickFormat(i).ticks(5):ch(t).tickFormat(i);e.attr("class","axis").call(r).style("font-size",n)}(b,S,d),Array.isArray(s)&&s.length>0){const e=s.filter((e=>{const t=S(new Date(e.date));return t>0&&t<h-2}));x.selectAll("rect").data(e).enter().append("rect").attr("x",(e=>`${S(new Date(e.date))}px`)).attr("y","0px").attr("width","1px").attr("height",`${p}px`).attr("fill",Qy).attr("opacity",0),x.selectAll("text").data(e).enter().append("text").attr("font-size",`${d}px`).attr("letter-spacing","0.3").attr("fill",Qy).attr("font-family",ex).attr("x","0px").attr("y","0px").attr("transform",((e,t)=>{const n=2===t?-2:-6;return`translate(${S(new Date(e.date))-2}, ${n}), rotate(-20)`})).text((e=>e.title)).attr("opacity",0)}return{svg:x}}function sx(t){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",t[0]),x(i,"class","svelte-1thrdwa"),x(a,"id",t[1]),x(a,"class","tooltip svelte-1thrdwa"),x(n,"class","container svelte-1thrdwa")},m(e,t){d(e,n,t),u(n,i),u(n,r),u(n,a)},p:e,i:e,o:e,d(e){e&&h(n)}}}function ox(e,t,n){let{lang:i}=t,{data:r}=t,{sources:a}=t,{events:s}=t;const o=Math.round(1e3*Math.random()),l=`heatmap-${o}`,c=`heatmaptooltip-${o}`;return T((async()=>{if(!Array.isArray(r))return;const{matrix:e,source_mapping:t,time_scale:n,color_scales:i}=ix(r,a,60),o=document.querySelector("main"),u=Rp(`#${l}`),d=Rp(`#${c}`),h=window.screen.height,{svg:p}=ax(e,t,n,i,u,d,s);let f=!1;o.addEventListener("scroll",(()=>{const{top:e,bottom:t}=p.node().getBoundingClientRect();e>-(t-e)/2&&e<2*h/3?f||(f=!0,function(e){e.selectAll("rect").transition().duration(1e3).attr("opacity",1).delay(((e,t)=>100*t)),e.selectAll("text").transition().duration(1e3).attr("opacity",1).delay(((e,t)=>100*t))}(p)):(f=!1,function(e){e.selectAll("rect").attr("opacity",0),e.selectAll("text").attr("opacity",0)}(p))}))})),e.$$set=e=>{"lang"in e&&n(2,i=e.lang),"data"in e&&n(3,r=e.data),"sources"in e&&n(4,a=e.sources),"events"in e&&n(5,s=e.events)},[l,c,i,r,a,s]}class lx extends J{constructor(e){super(),Y(this,e,ox,sx,a,{lang:2,data:3,sources:4,events:5})}}const cx=32,ux=8,dx=24,hx=8,px=ne()?320:540,fx=20;function mx(t){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",t[0]),x(a,"id",t[1]),x(a,"class","tooltip"),x(n,"class","container svelte-16x6i8h")},m(e,t){d(e,n,t),u(n,i),u(n,r),u(n,a)},p:e,i:e,o:e,d(e){e&&h(n)}}}function gx(e,t,n){let{lang:i}=t,{data:r}=t,{title:a}=t,{max_interactions:s}=t;const o=`dotmatrixplot-${Math.round(1e4*Math.random())}`,l=`dotmatrixtooltip-${Math.round(1e4*Math.random())}`;return T((()=>{const e=Rp(`#${o}`),t=Rp(`#${l}`),n=document.querySelector("main"),i=window.screen.height,{svg:c}=function(e,t,n,i,r){const a=Math.floor(e.length*fx/px)*fx+fx,s=t.append("svg").attr("width",px+hx+ux).attr("height",a+cx+dx);e.sort(((e,t)=>+t.interactions.count-e.interactions.count));const o=pg().domain([0,Math.round(1e3*Math.ceil(i/1e3))]).range(["#ccc","#333"]),l=s.append("g").attr("transform","translate("+hx+","+cx+")");return s.append("g").attr("transform","translate("+hx+",0)").append("text").attr("x","0px").attr("y","20px").attr("text-anchor","start").attr("fill","#222").text(r),l.selectAll("rect").data(e).enter().append("rect").attr("x","0px").attr("y","0px").attr("width","17px").attr("height","17px").attr("fill",(e=>o(e.interactions.count))).attr("stroke-width","0px").attr("stroke",(e=>o(e.interactions.count))).attr("cursor","pointer").on("mouseover",(function(e,t){0!=+t.value&&(n.style("display","inline"),n.html((()=>function(e){return`\n    <h2>${e.source_name}</h2>\n    <p>Platform: ${e.source_type}</p>\n    <p>${e.interactions.name}: ${(+e.interactions.count).toLocaleString()}</p>\n    `}(t))),Rp(this).attr("stroke-width","4px"))})).on("mousemove",(e=>{n.style("left",`${e.pageX+16}px`).style("top",`${e.pageY+16}px`)})).on("mouseout",(function(){n.style("display","none"),Rp(this).attr("stroke-width","0px")})).on("click",((e,t)=>{ne()||window.open(t.url,"_blank")})),{svg:l}}(r,e,t,s,a);let u=!1;n.addEventListener("scroll",(()=>{const{top:e,bottom:t}=c.node().getBoundingClientRect();e>-(t-e)/2&&e<i?u||(u=!0,c.selectAll("rect").transition().duration(1e3).attr("x",((e,t)=>t*fx%px+"px")).attr("y",((e,t)=>Math.floor(t*fx/px)*fx+"px"))):(u=!1,function(e){e.selectAll("rect").attr("x","0px").attr("y","0px")}(c))}))})),e.$$set=e=>{"lang"in e&&n(2,i=e.lang),"data"in e&&n(3,r=e.data),"title"in e&&n(4,a=e.title),"max_interactions"in e&&n(5,s=e.max_interactions)},[o,l,i,r,a,s]}class vx extends J{constructor(e){super(),Y(this,e,gx,mx,a,{lang:2,data:3,title:4,max_interactions:5})}}function yx(e){const t={};return e.forEach(((e,n)=>{t[n]=e.reduce(((e,t)=>e+t),0)})),function(e){let t=0;return Object.keys(e).forEach((n=>{e[n]>t&&(t=e[n])})),Object.keys(e).forEach((n=>{e[n]=e[n]/(1*t)})),e}(t)}class xx{constructor(e,t){this.nodes=e,this.vertices=t,this.lexicon=this.compute_ranked_lexicon(e),this._nodes=null,this._vertices=null,this._lexicon=null,this.keys=[...new Set(this.nodes.map((e=>e.key)))],this.compute_centrality(this.nodes,this.vertices)}deepcopy(){this._nodes=JSON.parse(JSON.stringify(this.nodes)),this._vertices=JSON.parse(JSON.stringify(this.vertices)),this._lexicon=JSON.parse(JSON.stringify(this.lexicon)),this.nodes=JSON.parse(JSON.stringify(this.nodes)),this.vertices=JSON.parse(JSON.stringify(this.vertices)),this.lexicon=JSON.parse(JSON.stringify(this.lexicon))}compute_normalized_adjacency_matrix(e){const t=[],n=this.nodes.length;for(let e=0;e<n;e++)t.push(new Array(n).fill(0));return e.forEach((e=>{const n=+e.node_1_id,i=+e.node_2_id,r=e.weight;t[n][i]+=r,t[i][n]+=r})),t}compute_centrality(e,t){const n=yx(this.compute_normalized_adjacency_matrix(t));e.forEach(((t,i)=>{e[i].centrality=n[+t.id]}))}compute_ranked_lexicon(e){let t=[].concat.apply([],e.map((e=>[].concat.apply([],e.posts.map((e=>e.lexicon_match))))));const n={};return t.forEach((e=>{n[e]=0})),t.forEach((e=>{n[e]+=1})),t=[...new Set(t)],t.sort(((e,t)=>n[t]-n[e])),t}}const _x=ne()?320:500,bx=ne()?320:500,wx=8,Mx=8,Sx=8,Tx=8,Ex=.7,Ax=.3,Lx=.7,Cx=.3;function Rx(e,t,n,i){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))}function Px(e,t,n,i,r){return e-n<0||e+n>i||t-n<0||t+n>r}function Dx(){const e=Math.random()*Math.PI/2;let t=.1*Math.cos(e)*(180/Math.PI),n=.1*Math.sin(e)*(180/Math.PI);const i=Math.random();return i<.25?(t=-t,n=-n):i<.5?n=-n:i<.75&&(t=-t),[n,t]}function Ix(e){return[e.map((e=>+e[0])).reduce(((e,t)=>e+t),0),e.map((e=>+e[1])).reduce(((e,t)=>e+t),0)]}function Nx(e){return new Promise((t=>{setTimeout((()=>{t(2)}),e)}))}ne();class kx{constructor(e){this.nodes=null,this.links=null,this.callback=e}load_data(e,t){this.nodes=e,this.links=t}get_link(e,t){for(let n=0;n<this.links.length;n++)if(this.links[n].node_1_id===e&&this.links[n].node_2_id===t||this.links[n].node_1_id===t&&this.links[n].node_2_id===e)return this.links[n];return null}get_link_weight(e){return null===e?0:e.weight}compute_force(e,t){const n=this.get_link(e.id,t.id),i=e.cx,r=e.cy,a=e.radius,s=t.cx,o=t.cy,l=t.radius,c=s-i,u=o-r,d=1*Rx(i,r,s,o),h=this.get_link_weight(n),p=null===n?.5*Math.sqrt(d):h*Math.sqrt(d),f=(a+l+16)/(1*d);return[c/d*(.03*p-12*f),u/d*(.03*p-12*f)]}async run(e,t=100){let n=0,i=1/0;for(;;){if(i<.1){console.log(`stopped optimizer due to displacement goal (step count : ${n})`);break}if(n>e){console.log("stopped optimizer due to step ceiling");break}n+=1,i=0;const r={};for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],n=[];for(let e=0;e<this.nodes.length;e++){const i=this.nodes[e];if(i.id===t.id)continue;const r=this.compute_force(t,i);null!==r&&n.push(r)}const i=Ix(n),a=[1*i[0],1*i[1]];r[t.id]=a}this.nodes.forEach((e=>{const t=r[e.id];e.cx+=t[0],e.cy+=t[1],i+=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))})),n%t==0&&(this.callback(this.nodes),await Nx(0))}this.callback(this.nodes)}}class zx{constructor(e,t,n,i){this.callback=null==i?()=>{}:i,this.graph=e,this.physics=new kx((e=>{this.update_positions(e)})),this.canvas=t,this.tooltip=n,this.g_graph=null,this.g_words=null,this.max_circle_radius=100,this.font_size=null,this.init()}async init(){const e=this;this.canvas.selectAll("*").remove();const t=this.canvas.append("svg").attr("width",_x+Tx+Mx).attr("height",bx+wx+Sx).style("border","1px solid #ccc").style("background-color","white");this.font_size=(bx+wx+Sx)/(this.graph.lexicon.length+1),this.font_size>12&&(this.font_size=12),this.g_graph=t.append("g"),this.g_words=t.append("g").attr("class","lexicon").attr("transform","translate(8, 4)");const n=function(){var e,t,n,i=Hy,r=Vy,a=jy,s=Wy,o=qy,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Ff,h=dh("start","zoom","end"),p=500,f=0,m=10;function g(e){e.property("__zoom",Gy).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",E).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Oy(t,e.x,e.y)}function y(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new Oy(e.k,i,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,i){e.on("start.zoom",(function(){b(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(i).end()})).tween("zoom",(function(){var e=this,a=arguments,s=b(e,a).event(i),o=r.apply(e,a),l=null==n?x(o):"function"==typeof n?n.apply(e,a):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,a):t,p=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=c/t[2];e=new Oy(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function M(e,...t){if(i.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,o=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,s.apply(this,arguments)))),u=Pp(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(r.k===o)return;n.mouse=[u,r.invert(u)],om(this),n.start()}By(e),n.wheel=setTimeout(d,150),n.zoom("mouse",a(y(v(r,o),n.mouse[0],n.mouse[1]),n.extent,c))}function d(){n.wheel=null,n.end()}}function S(e,...t){if(!n&&i.apply(this,arguments)){var r=e.currentTarget,s=b(this,t,!0).event(e),o=Rp(e.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",p,!0),l=Pp(e,r),u=e.clientX,d=e.clientY;Np(e.view),Uy(e),s.mouse=[l,this.__zoom.invert(l)],om(this),s.start()}function h(e){if(By(e),!s.moved){var t=e.clientX-u,n=e.clientY-d;s.moved=t*t+n*n>f}s.event(e).zoom("mouse",a(y(s.that.__zoom,s.mouse[0]=Pp(e,r),s.mouse[1]),s.extent,c))}function p(e){o.on("mousemove.zoom mouseup.zoom",null),kp(e.view,s.moved),By(e),s.event(e).end()}}function T(e,...t){if(i.apply(this,arguments)){var n=this.__zoom,s=Pp(e.changedTouches?e.changedTouches[0]:e,this),o=n.invert(s),l=n.k*(e.shiftKey?.5:2),d=a(y(v(n,l),s,o),r.apply(this,t),c);By(e),u>0?Rp(this).transition().duration(u).call(_,d,s,e):Rp(this).call(g.transform,d,s,e)}}function E(n,...r){if(i.apply(this,arguments)){var a,s,o,l,c=n.touches,u=c.length,d=b(this,r,n.changedTouches.length===u).event(n);for(Uy(n),s=0;s<u;++s)l=[l=Pp(o=c[s],this),this.__zoom.invert(l),o.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),p)),om(this),d.start())}}function A(e,...t){if(this.__zooming){var n,i,r,s,o=b(this,t).event(e),l=e.changedTouches,u=l.length;for(By(e),n=0;n<u;++n)r=Pp(i=l[n],this),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=r);if(i=o.that.__zoom,o.touch1){var d=o.touch0[0],h=o.touch0[1],p=o.touch1[0],f=o.touch1[1],m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m,g=(g=f[0]-h[0])*g+(g=f[1]-h[1])*g;i=v(i,Math.sqrt(m/g)),r=[(d[0]+p[0])/2,(d[1]+p[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],s=o.touch0[1]}o.zoom("touch",a(y(i,r,s),o.extent,c))}}function L(e,...i){if(this.__zooming){var r,a,s=b(this,i).event(e),o=e.changedTouches,l=o.length;for(Uy(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),r=0;r<l;++r)a=o[r],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=Pp(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<m)){var c=Rp(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,i){var r=e.selection?e.selection():e;r.property("__zoom",Gy),e!==r?_(e,t,n,i):r.interrupt().each((function(){b(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,i){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,i)},g.scaleTo=function(e,t,n,i){g.transform(e,(function(){var e=r.apply(this,arguments),i=this.__zoom,s=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,o=i.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return a(y(v(i,l),s,o),e,c)}),n,i)},g.translateBy=function(e,t,n,i){g.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,i)},g.translateTo=function(e,t,n,i,s){g.transform(e,(function(){var e=r.apply(this,arguments),s=this.__zoom,o=null==i?x(e):"function"==typeof i?i.apply(this,arguments):i;return a(Fy.translate(o[0],o[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),i,s)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Rp(this.that).datum();h.call(e,this.that,new zy(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:ky(+e),g):s},g.filter=function(e){return arguments.length?(i="function"==typeof e?e:ky(!!e),g):i},g.touchable=function(e){return arguments.length?(o="function"==typeof e?e:ky(!!e),g):o},g.extent=function(e){return arguments.length?(r="function"==typeof e?e:ky([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):r},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}().scaleExtent([.05,1]).on("zoom",(function(t){e.g_graph.attr("transform",`translate(${t.transform.x},${t.transform.y}), scale(${t.transform.k})`)}));t.call(n).call(n.transform,Fy.translate(_x/2,bx/2).scale(.1));let i=!0;for(;i||this.are_there_nodes_outside_canvas();)i=!1,this.max_circle_radius-=3,this.map_nodes();const r=Math.max(...this.graph.vertices.map((e=>e.weight)));this.scale_links_width=pg().domain([1,r]).range([8,30]),this.init_draw(),await this.run_physics(!0),this.graph.deepcopy(),this.callback()}async run_physics(e=!1){e?(this.physics.load_data(this.graph.nodes,this.graph.vertices),await this.physics.run(6e3,10)):(this.physics.load_data(this.graph._nodes,this.graph._vertices),await this.physics.run(1e3,20))}are_there_nodes_outside_canvas(){for(let e=0;e<this.graph.nodes.length;e++){if(Px(this.graph.nodes[e].cx,this.graph.nodes[e].cy,this.graph.nodes[e].radius,_x,bx))return!0}return!1}does_node_overlap_with_others(e,t,n,i){for(let o=0;o<this.graph.nodes.length;o++){const l=this.graph.nodes[o].id,c=this.graph.nodes[o].cx,u=this.graph.nodes[o].cy,d=this.graph.nodes[o].radius;if(l!==e&&(r=i,a=d,s=16,Rx(t,n,c,u)<r+a+s))return!0}var r,a,s;return!1}map_nodes(){const e=function(){return yg.apply(null,arguments).exponent(.5)}().domain([0,1]).range([0,this.max_circle_radius]);this.graph.nodes.forEach((t=>{t.radius=e(t.weight),t.cx=_x/2,t.cy=bx/2})),this.graph.nodes.forEach(((e,t)=>{if(0===t)return;const n=e.id,i=e.radius;let r=1/0,a=1/0,s=1/0;for(let e=0;e<10;e++){let e=_x/2,t=bx/2;const[o,l]=Dx();for(;this.does_node_overlap_with_others(n,e,t,i);)e+=o,t+=l;const c=Rx(e,t,_x/2,bx/2);c<s&&(s=c,r=e,a=t)}this.graph.nodes[t].cx=r,this.graph.nodes[t].cy=a}))}compute_link_coordinates(e,t){const n=e.cx,i=e.cy,r=e.radius,a=t.cx,s=t.cy,o=t.radius,l=Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2)),c=r/(1*l),u=(l-o)/(1*l);return{x1_t:(1-c)*n+c*a,y1_t:(1-c)*i+c*s,x2_t:(1-u)*n+u*a,y2_t:(1-u)*i+u*s}}get_nodes_linked_to_this_node(e){let t=[];return this.graph.vertices.filter((t=>t.node_1_id===e||t.node_2_id===e)).forEach((n=>{t.push(n.node_1_id===e?n.node_2_id:n.node_1_id)})),t=[...new Set(t)],t}get_max_text_width(e){let t=0;return e.selectAll("text").each((function(e){const n=this.getBoundingClientRect().width;n>t&&(t=n)})),t}init_draw(){const e=this.graph.vertices,t=this.graph.nodes,n=this.graph.lexicon,i={};t.forEach((e=>{i[e.id]={cx:e.cx,cy:e.cy,radius:e.radius}})),this.g_graph.selectAll("line").data(e).enter().append("line").attr("x1",(e=>{const{x1_t:t}=this.compute_link_coordinates(i[e.node_1_id],i[e.node_2_id]);return t})).attr("y1",(e=>{const{y1_t:t}=this.compute_link_coordinates(i[e.node_1_id],i[e.node_2_id]);return t})).attr("x2",(e=>{const{x2_t:t}=this.compute_link_coordinates(i[e.node_1_id],i[e.node_2_id]);return t})).attr("y2",(e=>{const{y2_t:t}=this.compute_link_coordinates(i[e.node_1_id],i[e.node_2_id]);return t})).attr("opacity",Ax).attr("stroke","#3d5c94").attr("stroke-width",(e=>`${this.scale_links_width(e.weight)}px`)).on("mouseover",((e,t)=>{const n=t.node_1_id,i=t.node_2_id,r=[n,i];this.tooltip.style("display","inline"),this.tooltip.html((()=>t.tooltip)),this.g_graph.selectAll("circle").attr("opacity",(e=>r.includes(e.id)?Ex:.3)),this.g_graph.selectAll("line").attr("opacity",(e=>n===e.node_1_id&&i===e.node_2_id?Ax:0)),this.g_words.selectAll("text").attr("opacity",(e=>t.lexicon_match.includes(e)?Lx:Cx))})).on("mousemove",(e=>{this.tooltip.style("left",`${e.pageX+16}px`).style("top",`${e.pageY+16}px`)})).on("mouseout",(()=>{this.tooltip.style("display","none"),this.g_graph.selectAll("circle").attr("opacity",Ex),this.g_graph.selectAll("line").attr("opacity",Ax),this.g_words.selectAll("text").attr("opacity",Lx)})).on("click",((e,t)=>{if(ne())return;const{urls:n}=t;Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((e=>{if(e)for(let e=0;e<n.length;e++)window.open(n[e],"_blank")}))})),this.g_graph.selectAll("circle").data(t).enter().append("circle").attr("opacity",Ex).attr("r",(e=>e.radius)).attr("cx",(e=>e.cx)).attr("cy",(e=>e.cy)).attr("fill","#3d5b94").on("mouseover",((e,t)=>{const n=t.id;this.tooltip.style("display","inline"),this.tooltip.html((()=>t.tooltip));const i=[].concat.apply([],t.posts.map((e=>e.lexicon_match))),r=this.get_nodes_linked_to_this_node(n);this.g_graph.selectAll("circle").attr("opacity",(e=>n===e.id||r.includes(e.id)?Ex:.3)),this.g_graph.selectAll("line").attr("opacity",(e=>[e.node_1_id,e.node_2_id].includes(n)?Ax:0)),this.g_words.selectAll("text").attr("opacity",(e=>i.includes(e)?Lx:Cx))})).on("mousemove",(e=>{this.tooltip.style("left",`${e.pageX+16}px`).style("top",`${e.pageY+16}px`)})).on("mouseout",(()=>{this.tooltip.style("display","none"),this.g_graph.selectAll("circle").attr("opacity",Ex),this.g_graph.selectAll("line").attr("opacity",Ax),this.g_words.selectAll("text").attr("opacity",Lx)})).on("click",((e,t)=>{if(ne())return;const n=t.posts.map((e=>e.url));Zc({title:"Open URLs",text:`Pressing ok will open ${n.length} ${n.length>1?"posts":"post"} as new tabs`}).then((e=>{if(e)for(let e=0;e<n.length;e++)window.open(n[e],"_blank")}))})),this.g_graph.selectAll("text").data(t).enter().append("text").attr("font-size","96px").style("text-transform","capitalize").attr("text-anchor","middle").attr("x",(e=>e.cx)).attr("y",(e=>e.cy-e.radius-32)).text((e=>e.key)),this.g_words.selectAll("text").data(n).enter().append("text").attr("cursor","pointer").attr("opacity",Lx).attr("font-size",`${this.font_size}px`).attr("y",((e,t)=>(t+1)*this.font_size+"px")).text((e=>e)).on("mouseover",((e,t)=>{this.g_words.selectAll("text").attr("opacity",(e=>t===e?Lx:Cx)),this.g_graph.selectAll("circle").attr("opacity",(e=>[].concat.apply([],e.posts.map((e=>e.lexicon_match))).includes(t)?Ex:.3)),this.g_graph.selectAll("text").attr("opacity",(e=>[].concat.apply([],e.posts.map((e=>e.lexicon_match))).includes(t)?Lx:Cx)),this.g_graph.selectAll("line").attr("opacity",(e=>e.lexicon_match.includes(t)?Ax:0))})).on("mouseout",(()=>{this.g_graph.selectAll("circle").attr("opacity",Ex),this.g_graph.selectAll("text").attr("opacity",Lx),this.g_graph.selectAll("line").attr("opacity",Ax),this.g_words.selectAll("text").attr("opacity",Lx)}))}update_positions(e){const t={};this.graph.nodes.forEach((e=>{t[e.id]={cx:e.cx,cy:e.cy,radius:e.radius}})),e.forEach((e=>{t[e.id]={cx:e.cx,cy:e.cy,radius:e.radius}})),this.g_graph.selectAll("line").attr("x1",(e=>{const{x1_t:n}=this.compute_link_coordinates(t[e.node_1_id],t[e.node_2_id]);return n})).attr("y1",(e=>{const{y1_t:n}=this.compute_link_coordinates(t[e.node_1_id],t[e.node_2_id]);return n})).attr("x2",(e=>{const{x2_t:n}=this.compute_link_coordinates(t[e.node_1_id],t[e.node_2_id]);return n})).attr("y2",(e=>{const{y2_t:n}=this.compute_link_coordinates(t[e.node_1_id],t[e.node_2_id]);return n})),this.g_graph.selectAll("circle").attr("r",(e=>t[e.id].radius)).attr("cx",(e=>t[e.id].cx)).attr("cy",(e=>t[e.id].cy)),this.g_graph.selectAll("text").attr("x",(e=>t[e.id].cx)).attr("y",(e=>t[e.id].cy-t[e.id].radius-32))}}class Ox{constructor(e,t,n,i,r){this.canvas=n,this.tooltip=i,this.callback=r,this.dataLoader=new xx(e,t),this.render=new zx(this.dataLoader,this.canvas,this.tooltip,this.callback)}update(e,t){this.dataLoader=new xx(e,t),this.render=new zx(this.dataLoader,this.canvas,this.tooltip,this.callback)}async run_physics(){await this.render.run_physics()}}function Fx(t){let n,i,r,a;return{c(){n=f("div"),i=f("div"),r=g(),a=f("div"),x(i,"id",t[0]),x(i,"class","svelte-l0vhww"),x(a,"id",t[1]),x(a,"class","tooltip svelte-l0vhww"),x(n,"class","container svelte-l0vhww")},m(e,t){d(e,n,t),u(n,i),u(n,r),u(n,a)},p:e,i:e,o:e,d(e){e&&h(n)}}}function Ux(e,t,n){let{lang:i}=t,{nodes:r}=t,{vertices:a}=t;const s=Math.round(1e3*Math.random()),o=`network-${s}`,l=`networktooltip-${s}`;let c,u,d=null;return T((async()=>{n(6,c=Rp(`#${o}`)),n(7,u=Rp(`#${l}`))})),e.$$set=e=>{"lang"in e&&n(2,i=e.lang),"nodes"in e&&n(3,r=e.nodes),"vertices"in e&&n(4,a=e.vertices)},e.$$.update=()=>{248&e.$$.dirty&&a&&(null===d?n(5,d=new Ox(r,a,c,u)):d.update(r,a))},[o,l,i,r,a,d,c,u]}class Bx extends J{constructor(e){super(),Y(this,e,Ux,Fx,a,{lang:2,nodes:3,vertices:4})}}function Hx(e){return Math.max(...Object.keys(e.endpoint).map((t=>e.endpoint[t].followers)))}function Vx(e){return e.map((e=>{const{url:t,source_name:n,categories:i}=e,r=function(e){return e.includes("facebook")?"facebook":e.includes("t.me")?"telegram":e.includes("twitter")?"twitter":e.includes("youtube")?"youtube":null}(t);return{interactions:nx(e),url:t,source_name:n,source_type:r,categories:i}}))}function Gx(e,t,n,i){const r=function(e,t){const n=[...new Set(t.map((e=>e.name)))],i=Hx(t.sort(((e,t)=>Hx(t)-Hx(e)))[0]),r=n.map((n=>{const r=e.filter((e=>e.source_name===n)),a=Hx(t.filter((e=>e.name===n))[0]),s=r.map((e=>({categories:e.categories,published_at:e.published_at,url:e.url,lexicon_match:e.lexicon_match})));return s.sort(((e,t)=>new Date(e.published_at)-new Date(t.published_at))),{key:n,weight:a/(1*i),posts:s}}));r.sort(((e,t)=>t.weight-e.weight));const a=r.filter((e=>e.posts.length>0));return a.forEach(((e,t)=>{e.id=t})),a}(e,n),a=function(e,t){const n=[];for(let t=0;t<e.length;t++)for(let i=t+1;i<e.length;i++)n.push({node_id_1:t,node_id_2:i});let i=[];return n.forEach((n=>{const r=n.node_id_1,a=n.node_id_2,s=e.filter((e=>e.id===r))[0],o=e.filter((e=>e.id===a))[0],l=[...new Set([].concat.apply([],s.posts.map((e=>e.categories))))],c=[...new Set([].concat.apply([],o.posts.map((e=>e.categories))))],u=l.filter((e=>c.includes(e)));if(0===u.length)return;let d=!1;for(let e=0;e<s.posts.length&&!d;e++)for(let n=0;n<o.posts.length&&!d;n++){const i=new Date(s.posts[e].published_at),r=new Date(o.posts[n].published_at);Math.abs(i-r)/864e5<t&&(d=!0)}d&&i.push({node_1_id:r,node_2_id:a,intersection:u,weight:u.length})})),i}(r,i);let s={};r.forEach((e=>{s[e.id]=e}));let o={};return t.forEach((e=>{o[e.key]=e})),r.forEach((e=>{e.tooltip=`\n            <h2>${e.key}</h2>\n            ${e.posts.map((e=>`<p>${e.published_at}</p>`)).join("")}\n        `})),a.forEach((e=>{const t=s[e.node_1_id],n=s[e.node_2_id],r=t.posts.map(((e,n)=>(e.id=`1-${n}`,e.source=t.key,e))),a=n.posts.map(((e,t)=>(e.id=`2-${t}`,e.source=n.key,e)));let o=[],l=[];for(let e=0;e<r.length;e++)for(let t=0;t<a.length;t++){const n=r[e],s=a[t],c=new Date(n.published_at),u=new Date(s.published_at);Math.abs(c-u)/864e5<i&&(l.includes(n.id)||(l.push(n.id),o.push(n)),l.includes(s.id)||(l.push(s.id),o.push(s)))}o.sort(((e,t)=>new Date(e.published_at)-new Date(t.published_at))),e.urls=o.map((e=>e.url));const c=new Set([].concat.apply([],t.posts.map((e=>e.lexicon_match)))),u=new Set([].concat.apply([],n.posts.map((e=>e.lexicon_match))));e.lexicon_match=[...new Set([...c].filter((e=>u.has(e))))],e.tooltip=`\n            <h2>${t.key} - ${n.key}</h2>\n            ${o.map((e=>`<p>${e.published_at}: ${e.source}</p>`)).join("")}\n        `})),[r,a]}function Wx(e,t,n){const i=e.slice();return i[38]=t[n],i[40]=n,i}function qx(e){let t,n;return t=new vx({props:{data:e[16].filter((function(...t){return e[29](e[38],...t)})),title:`${cd(e[40]+1)}. ${e[38].name_count}`,max_interactions:Math.max(...e[16].map(Xx))}}),{c(){q(t.$$.fragment)},m(e,i){j(t,e,i),n=!0},p(t,n){e=t},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function jx(e){let t,n,i,r,a,s,o,l,c,v,y,b,w,S,T,E,L,C,R,P,D,N,k,z,O,F,U,X,Y,J,Z,K,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,xe,_e,be,we,Me,Se,Te,Ee,Ae,Le,Ce,Re,Pe,De,Ie,Ne,ke,ze,Oe,Fe,Ue,Be,He,Ve,Ge,We,qe,je,$e,Xe,Ye,Je,Ze,Ke,Qe,et,tt,nt=(void 0!==e[4].title[e[0]]?e[4].title[e[0]]:e[4].title.eng)+"",it=(void 0!==e[4].partners[e[0]]?e[4].partners[e[0]]:e[4].partners.eng)+"",rt=(void 0!==ye.subtitle_1[e[0]]?ye.subtitle_1[e[0]]:ye.subtitle_1.eng)+"",at=(void 0!==e[20](e[13])[e[0]]?e[20](e[13])[e[0]]:e[20](e[13]).eng)+"",st=(void 0!==ye.subtitle_2[e[0]]?ye.subtitle_2[e[0]]:ye.subtitle_2.eng)+"",ot=(void 0!==e[21](e[5].length.toLocaleString())[e[0]]?e[21](e[5].length.toLocaleString())[e[0]]:e[21](e[5].length.toLocaleString()).eng)+"",lt=(void 0!==ye.searchbar_1[e[0]]?ye.searchbar_1[e[0]]:ye.searchbar_1.eng)+"",ct=(void 0!==ye.searchbar_2[e[0]]?ye.searchbar_2[e[0]]:ye.searchbar_2.eng)+"",ut=(void 0!==ye.subtitle_3[e[0]]?ye.subtitle_3[e[0]]:ye.subtitle_3.eng)+"",dt=(void 0!==ye.subsubtitle_1[e[0]]?ye.subsubtitle_1[e[0]]:ye.subsubtitle_1.eng)+"",ht=(void 0!==e[22](e[6].length)[e[0]]?e[22](e[6].length)[e[0]]:e[22](e[6].length).eng)+"",pt=(void 0!==ye.subsubtitle_2[e[0]]?ye.subsubtitle_2[e[0]]:ye.subsubtitle_2.eng)+"",ft=(void 0!==e[26](e[8].length)[e[0]]?e[26](e[8].length)[e[0]]:e[26](e[8].length).eng)+"",mt=(void 0!==ye.subsubtitle_3[e[0]]?ye.subsubtitle_3[e[0]]:ye.subsubtitle_3.eng)+"",gt=(void 0!==ye.engagement_1[e[0]]?ye.engagement_1[e[0]]:ye.engagement_1.eng)+"",vt=(void 0!==ye.subtitle_4[e[0]]?ye.subtitle_4[e[0]]:ye.subtitle_4.eng)+"",yt=(void 0!==e[27](e[15].length,e[14].length)[e[0]]?e[27](e[15].length,e[14].length)[e[0]]:e[27](e[15].length,e[14].length).eng)+"",xt=(void 0!==ye.subsubtitle_4[e[0]]?ye.subsubtitle_4[e[0]]:ye.subsubtitle_4.eng)+"",_t=(void 0!==e[24](e[14].length.toLocaleString())[e[0]]?e[24](e[14].length.toLocaleString())[e[0]]:e[24](e[14].length.toLocaleString()).eng)+"",bt=(void 0!==ye.subsubtitle_5[e[0]]?ye.subsubtitle_5[e[0]]:ye.subsubtitle_5.eng)+"",wt=(void 0!==e[23](e[9].length)[e[0]]?e[23](e[9].length)[e[0]]:e[23](e[9].length).eng)+"",Mt=(void 0!==ye.subsubtitle_6[e[0]]?ye.subsubtitle_6[e[0]]:ye.subsubtitle_6.eng)+"",St=(void 0!==ye.engagement_2[e[0]]?ye.engagement_2[e[0]]:ye.engagement_2.eng)+"",Tt=(void 0!==ye.subsubtitle_7[e[0]]?ye.subsubtitle_7[e[0]]:ye.subsubtitle_7.eng)+"",Et=(void 0!==ye.coordination[e[0]]?ye.coordination[e[0]]:ye.coordination.eng)+"",At=(void 0!==e[25][e[0]]?e[25][e[0]]:e[25].eng)+"";b=new Ed({props:{data:e[12]}}),k=new Dd({props:{placeholders:e[1].examples.queries,documents:e[5],word_mapping:e[7]}}),Q=new Ed({props:{data:e[10]}}),se=new Ed({props:{data:e[11]}}),pe=new Ed({props:{data:e[19]}}),be=new lx({props:{data:e[15],sources:e[14],events:e[8]}}),Le=new Od({props:{data:e[14]}}),ke=new Vd({props:{elements:e[9].map($x)}});let Lt=e[9],Ct=[];for(let t=0;t<Lt.length;t+=1)Ct[t]=qx(Wx(e,Lt,t));const Rt=e=>G(Ct[e],1,1,(()=>{Ct[e]=null}));function Pt(t){e[32](t)}function Dt(t){e[33](t)}Je=new qd({props:{previous_callback:e[30],next_callback:e[31],options:e[18]}});let It={};return void 0!==e[2]&&(It.nodes=e[2]),void 0!==e[3]&&(It.vertices=e[3]),Ke=new Bx({props:It}),A.push((()=>W(Ke,"nodes",Pt))),A.push((()=>W(Ke,"vertices",Dt))),{c(){t=f("section"),n=f("h1"),i=m(nt),r=g(),a=new M,s=g(),o=f("h1"),l=m(rt),c=g(),v=new M,y=g(),q(b.$$.fragment),w=g(),S=f("h1"),T=m(st),E=g(),L=new M,C=g(),R=new M,P=g(),D=new M,N=g(),q(k.$$.fragment),z=g(),O=f("h1"),F=m(ut),U=g(),X=f("h1"),Y=m(dt),J=g(),Z=new M,K=g(),q(Q.$$.fragment),ee=g(),te=f("h1"),ne=m(pt),ie=g(),re=new M,ae=g(),q(se.$$.fragment),oe=g(),le=f("h1"),ce=m(mt),ue=g(),de=new M,he=g(),q(pe.$$.fragment),fe=g(),me=f("h1"),ge=m(vt),ve=g(),xe=new M,_e=g(),q(be.$$.fragment),we=g(),Me=f("h1"),Se=m(xt),Te=g(),Ee=new M,Ae=g(),q(Le.$$.fragment),Ce=g(),Re=f("h1"),Pe=m(bt),De=g(),Ie=new M,Ne=g(),q(ke.$$.fragment),ze=g(),Oe=f("h1"),Fe=m(Mt),Ue=g(),Be=new M,He=g();for(let e=0;e<Ct.length;e+=1)Ct[e].c();Ve=g(),Ge=f("h1"),We=m(Tt),qe=g(),je=new M,$e=g(),Xe=new M,Ye=g(),q(Je.$$.fragment),Ze=g(),q(Ke.$$.fragment),x(n,"class","title"),a.a=s,x(o,"class","subtitle"),v.a=y,x(S,"class","subtitle"),L.a=C,R.a=P,D.a=N,x(O,"class","subtitle"),x(X,"class","subsubtitle"),Z.a=K,x(te,"class","subsubtitle"),re.a=ae,x(le,"class","subsubtitle"),de.a=he,x(me,"class","subtitle"),xe.a=_e,x(Me,"class","subsubtitle"),Ee.a=Ae,x(Re,"class","subsubtitle"),Ie.a=Ne,x(Oe,"class","subsubtitle"),Be.a=He,x(Ge,"class","subsubtitle"),je.a=$e,Xe.a=Ye},m(e,h){d(e,t,h),u(t,n),u(n,i),u(t,r),a.m(it,t),u(t,s),u(t,o),u(o,l),u(t,c),v.m(at,t),u(t,y),j(b,t,null),u(t,w),u(t,S),u(S,T),u(t,E),L.m(ot,t),u(t,C),R.m(lt,t),u(t,P),D.m(ct,t),u(t,N),j(k,t,null),u(t,z),u(t,O),u(O,F),u(t,U),u(t,X),u(X,Y),u(t,J),Z.m(ht,t),u(t,K),j(Q,t,null),u(t,ee),u(t,te),u(te,ne),u(t,ie),re.m(ft,t),u(t,ae),j(se,t,null),u(t,oe),u(t,le),u(le,ce),u(t,ue),de.m(gt,t),u(t,he),j(pe,t,null),u(t,fe),u(t,me),u(me,ge),u(t,ve),xe.m(yt,t),u(t,_e),j(be,t,null),u(t,we),u(t,Me),u(Me,Se),u(t,Te),Ee.m(_t,t),u(t,Ae),j(Le,t,null),u(t,Ce),u(t,Re),u(Re,Pe),u(t,De),Ie.m(wt,t),u(t,Ne),j(ke,t,null),u(t,ze),u(t,Oe),u(Oe,Fe),u(t,Ue),Be.m(St,t),u(t,He);for(let e=0;e<Ct.length;e+=1)Ct[e].m(t,null);u(t,Ve),u(t,Ge),u(Ge,We),u(t,qe),je.m(Et,t),u(t,$e),Xe.m(At,t),u(t,Ye),j(Je,t,null),u(t,Ze),j(Ke,t,null),tt=!0},p(e,n){(!tt||1&n[0])&&nt!==(nt=(void 0!==e[4].title[e[0]]?e[4].title[e[0]]:e[4].title.eng)+"")&&_(i,nt),(!tt||1&n[0])&&it!==(it=(void 0!==e[4].partners[e[0]]?e[4].partners[e[0]]:e[4].partners.eng)+"")&&a.p(it),(!tt||1&n[0])&&rt!==(rt=(void 0!==ye.subtitle_1[e[0]]?ye.subtitle_1[e[0]]:ye.subtitle_1.eng)+"")&&_(l,rt),(!tt||1&n[0])&&at!==(at=(void 0!==e[20](e[13])[e[0]]?e[20](e[13])[e[0]]:e[20](e[13]).eng)+"")&&v.p(at),(!tt||1&n[0])&&st!==(st=(void 0!==ye.subtitle_2[e[0]]?ye.subtitle_2[e[0]]:ye.subtitle_2.eng)+"")&&_(T,st),(!tt||1&n[0])&&ot!==(ot=(void 0!==e[21](e[5].length.toLocaleString())[e[0]]?e[21](e[5].length.toLocaleString())[e[0]]:e[21](e[5].length.toLocaleString()).eng)+"")&&L.p(ot),(!tt||1&n[0])&&lt!==(lt=(void 0!==ye.searchbar_1[e[0]]?ye.searchbar_1[e[0]]:ye.searchbar_1.eng)+"")&&R.p(lt),(!tt||1&n[0])&&ct!==(ct=(void 0!==ye.searchbar_2[e[0]]?ye.searchbar_2[e[0]]:ye.searchbar_2.eng)+"")&&D.p(ct);const r={};if(2&n[0]&&(r.placeholders=e[1].examples.queries),k.$set(r),(!tt||1&n[0])&&ut!==(ut=(void 0!==ye.subtitle_3[e[0]]?ye.subtitle_3[e[0]]:ye.subtitle_3.eng)+"")&&_(F,ut),(!tt||1&n[0])&&dt!==(dt=(void 0!==ye.subsubtitle_1[e[0]]?ye.subsubtitle_1[e[0]]:ye.subsubtitle_1.eng)+"")&&_(Y,dt),(!tt||1&n[0])&&ht!==(ht=(void 0!==e[22](e[6].length)[e[0]]?e[22](e[6].length)[e[0]]:e[22](e[6].length).eng)+"")&&Z.p(ht),(!tt||1&n[0])&&pt!==(pt=(void 0!==ye.subsubtitle_2[e[0]]?ye.subsubtitle_2[e[0]]:ye.subsubtitle_2.eng)+"")&&_(ne,pt),(!tt||1&n[0])&&ft!==(ft=(void 0!==e[26](e[8].length)[e[0]]?e[26](e[8].length)[e[0]]:e[26](e[8].length).eng)+"")&&re.p(ft),(!tt||1&n[0])&&mt!==(mt=(void 0!==ye.subsubtitle_3[e[0]]?ye.subsubtitle_3[e[0]]:ye.subsubtitle_3.eng)+"")&&_(ce,mt),(!tt||1&n[0])&&gt!==(gt=(void 0!==ye.engagement_1[e[0]]?ye.engagement_1[e[0]]:ye.engagement_1.eng)+"")&&de.p(gt),(!tt||1&n[0])&&vt!==(vt=(void 0!==ye.subtitle_4[e[0]]?ye.subtitle_4[e[0]]:ye.subtitle_4.eng)+"")&&_(ge,vt),(!tt||1&n[0])&&yt!==(yt=(void 0!==e[27](e[15].length,e[14].length)[e[0]]?e[27](e[15].length,e[14].length)[e[0]]:e[27](e[15].length,e[14].length).eng)+"")&&xe.p(yt),(!tt||1&n[0])&&xt!==(xt=(void 0!==ye.subsubtitle_4[e[0]]?ye.subsubtitle_4[e[0]]:ye.subsubtitle_4.eng)+"")&&_(Se,xt),(!tt||1&n[0])&&_t!==(_t=(void 0!==e[24](e[14].length.toLocaleString())[e[0]]?e[24](e[14].length.toLocaleString())[e[0]]:e[24](e[14].length.toLocaleString()).eng)+"")&&Ee.p(_t),(!tt||1&n[0])&&bt!==(bt=(void 0!==ye.subsubtitle_5[e[0]]?ye.subsubtitle_5[e[0]]:ye.subsubtitle_5.eng)+"")&&_(Pe,bt),(!tt||1&n[0])&&wt!==(wt=(void 0!==e[23](e[9].length)[e[0]]?e[23](e[9].length)[e[0]]:e[23](e[9].length).eng)+"")&&Ie.p(wt),(!tt||1&n[0])&&Mt!==(Mt=(void 0!==ye.subsubtitle_6[e[0]]?ye.subsubtitle_6[e[0]]:ye.subsubtitle_6.eng)+"")&&_(Fe,Mt),(!tt||1&n[0])&&St!==(St=(void 0!==ye.engagement_2[e[0]]?ye.engagement_2[e[0]]:ye.engagement_2.eng)+"")&&Be.p(St),66048&n[0]){let i;for(Lt=e[9],i=0;i<Lt.length;i+=1){const r=Wx(e,Lt,i);Ct[i]?(Ct[i].p(r,n),V(Ct[i],1)):(Ct[i]=qx(r),Ct[i].c(),V(Ct[i],1),Ct[i].m(t,Ve))}for(B(),i=Lt.length;i<Ct.length;i+=1)Rt(i);H()}(!tt||1&n[0])&&Tt!==(Tt=(void 0!==ye.subsubtitle_7[e[0]]?ye.subsubtitle_7[e[0]]:ye.subsubtitle_7.eng)+"")&&_(We,Tt),(!tt||1&n[0])&&Et!==(Et=(void 0!==ye.coordination[e[0]]?ye.coordination[e[0]]:ye.coordination.eng)+"")&&je.p(Et),(!tt||1&n[0])&&At!==(At=(void 0!==e[25][e[0]]?e[25][e[0]]:e[25].eng)+"")&&Xe.p(At);const s={};!Qe&&4&n[0]&&(Qe=!0,s.nodes=e[2],I((()=>Qe=!1))),!et&&8&n[0]&&(et=!0,s.vertices=e[3],I((()=>et=!1))),Ke.$set(s)},i(e){if(!tt){V(b.$$.fragment,e),V(k.$$.fragment,e),V(Q.$$.fragment,e),V(se.$$.fragment,e),V(pe.$$.fragment,e),V(be.$$.fragment,e),V(Le.$$.fragment,e),V(ke.$$.fragment,e);for(let e=0;e<Lt.length;e+=1)V(Ct[e]);V(Je.$$.fragment,e),V(Ke.$$.fragment,e),tt=!0}},o(e){G(b.$$.fragment,e),G(k.$$.fragment,e),G(Q.$$.fragment,e),G(se.$$.fragment,e),G(pe.$$.fragment,e),G(be.$$.fragment,e),G(Le.$$.fragment,e),G(ke.$$.fragment,e),Ct=Ct.filter(Boolean);for(let e=0;e<Ct.length;e+=1)G(Ct[e]);G(Je.$$.fragment,e),G(Ke.$$.fragment,e),tt=!1},d(e){e&&h(t),$(b),$(k),$(Q),$(se),$(pe),$(be),$(Le),$(ke),p(Ct,e),$(Je),$(Ke)}}}const $x=e=>e.description,Xx=e=>e.interactions.count;function Yx(e,t,n){let{lang:i}=t,{dataset:r}=t,{params:a}=t;const s=ye.brazil,{sources:o,posts:l,submissions:c,lexicon:u,dictionary:d,events:h,categories:p,lexicon_table:f,events_table:m,political_network_table:g,nbr_of_accounts:v,min_date:y,max_date:x,belligerents:_,submissions_of_interest:b}=r,w=Vx(b);let M,S;function T(e){const t=c.filter((t=>t.categories.includes(e)));n(2,[M,S]=Gx(t,p,o,15),M,n(3,S))}const E=p.map((e=>({key:e.key,value:e.name_count})));return e.$$set=e=>{"lang"in e&&n(0,i=e.lang),"dataset"in e&&n(28,r=e.dataset),"params"in e&&n(1,a=e.params)},[i,a,M,S,s,l,u,d,h,p,f,m,g,v,_,b,w,T,E,[["Type","Minimum Value"],["Views","30000"],["Reactions","800"],["Comments","150"],["Shares","50"]],e=>({eng:`<p>The participants identified ${e} Telegram, Facebook, Twitter and Youtube accounts as being part of the political network.</p>`,por:`<p>Os participantes identificaram ${e} contas pertencentes à rede política nas plataformas Telegram, Facebook, Twitter e Youtube.</p>`,ara:`<p>حدّد المشاركون ${e} حساباً على تيليغرام، فايسبوك، تويتر، ويوتيوب كحسابات تشكّل جزءاً من شبكة سياسية.</p>`}),e=>({eng:`<p>Data collection returned a total of ${e} posts between ${y} and ${x}.</p>`,por:`<p>No total, foram coletadas ${e} postagens entre ${y} e ${x}.</p>`,ara:`<p>نتج عن جمع البيانات ${e} ${x}تدوينة بين كانون ${y} و .</p>`}),e=>({eng:`<p>Participants came up with a list of ${e} words prone to be used in disinformation. Only posts containing at least one of these keywords were kept.</p>`,por:`<p>Os participantes desenvolveram uma lista com ${e} palavras associadas a práticas de desinformação.</p>`,ara:`<p>اقترح المشاركون قائمةً من ${e} كلمة اعتبروا أنها ميالة لأن تُستخدم ضمن المعلومات المضللة. </p>`}),e=>({eng:`<p> We reviewed all the posts of interest and categorized them into ${e} narratives.</p>`,por:`<p>Todas as postagens de interesse foram revisadas e classificadas em ${e} narrativas.</p>`,ara:`<p>راجعنا كافة التدوينات ذات الاهتمام وصنّفناها ضمن ${e} سرديات. </p>`}),e=>({eng:`<p>Here is a short description of the ${e} state-affiliated accounts that published disinformation.</p>`,por:`<p>Abaixo, uma breve descrição de todas as ${e} contas associadas ao Estado que publicaram desinformação.</p>`,ara:`<p>في ما يلي وصف وجيز عن ${e} حساباً تابعاً للدولة نشر معلومات مضللة.</p>`}),()=>({eng:"<p>If there is a link between two belligerents it means they published a message containing the same keyword within a 15 days interval.</p>",por:"<p>Cada vínculo entre dois “beligerantes” é um sinal de que ambos publicaram uma mensagem contendo a mesma palavra-chave num intervalo de 15 dias.</p>",ara:"<p>إذا كان هناك خط يربط بين خصمين، فهذا يعني أنهما نشرا رسالةً تتضمّن الكلمة الرئيسية نفسها خلال فترة 15 يوماً. </p>"}),e=>({eng:`<p>The shock timeline developed by the participants is composed of ${e} key events. We only considered social media posts published during the 21 days following each event.</p>`,por:`<p>A linha do tempo de choque desenvolvida pelos participantes é composta por ${e} eventos principais. Consideramos apenas postagens de mídia social publicadas durante os 21 dias seguintes a cada evento.</p>`,ara:`<p>يتكون الجدول الزمني للصدمة الذي وضعه المشاركون من ${e} أحداث رئيسية. نظرنا فقط في منشورات وسائل التواصل الاجتماعي المنشورة خلال 21 يومًا بعد كل حدث.</p>`}),(e,t)=>({eng:`<p>Using automated lexical, temporal and engagement filters, in combination with human reviews we uncovered a total of ${e} posts containing disinformation from ${t} belligerents.</p>`,por:`<p>Usando filtros automatizados lexicais, temporais e de engajamento, em combinação com análises humanas, descobrimos um total de ${e} postagens contendo desinformação de ${t} beligerantes.</p>`,ara:`<p>باستخدام عوامل التصفية التلقائية المعجمية والزمانية والمشاركة ، بالإضافة إلى المراجعات البشرية ، اكتشفنا ما مجموعه ${e} منشورات تحتوي على معلومات مضللة من ${t} متحاربين.</p>`}),r,(e,t)=>t.categories.includes(e.key),e=>T(e),e=>T(e),function(e){M=e,n(2,M)},function(e){S=e,n(3,S)}]}class Jx extends J{constructor(e){super(),Y(this,e,Yx,jx,a,{lang:0,dataset:28,params:1},null,[-1,-1])}}function Zx(e,t,n){const i=e.slice();return i[38]=t[n],i[40]=n,i}function Kx(e){let t,n;return t=new vx({props:{data:e[16].filter((function(...t){return e[29](e[38],...t)})),title:`${cd(e[40]+1)}. ${e[38].name_count}`,max_interactions:Math.max(...e[16].map(t_))}}),{c(){q(t.$$.fragment)},m(e,i){j(t,e,i),n=!0},p(t,n){e=t},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function Qx(e){let t,n,i,r,a,s,o,l,c,v,y,b,w,S,T,E,L,C,R,P,D,N,k,z,O,F,U,X,Y,J,Z,K,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,xe,_e,be,we,Me,Se,Te,Ee,Ae,Le,Ce,Re,Pe,De,Ie,Ne,ke,ze,Oe,Fe,Ue,Be,He,Ve,Ge,We,qe,je,$e,Xe,Ye,Je,Ze,Ke,Qe,et,tt,nt=(void 0!==e[4].title[e[0]]?e[4].title[e[0]]:e[4].title.eng)+"",it=(void 0!==e[4].partners[e[0]]?e[4].partners[e[0]]:e[4].partners.eng)+"",rt=(void 0!==ye.subtitle_1[e[0]]?ye.subtitle_1[e[0]]:ye.subtitle_1.eng)+"",at=(void 0!==e[20](e[13])[e[0]]?e[20](e[13])[e[0]]:e[20](e[13]).eng)+"",st=(void 0!==ye.subtitle_2[e[0]]?ye.subtitle_2[e[0]]:ye.subtitle_2.eng)+"",ot=(void 0!==e[21](e[5].length.toLocaleString())[e[0]]?e[21](e[5].length.toLocaleString())[e[0]]:e[21](e[5].length.toLocaleString()).eng)+"",lt=(void 0!==ye.searchbar_1[e[0]]?ye.searchbar_1[e[0]]:ye.searchbar_1.eng)+"",ct=(void 0!==ye.searchbar_2[e[0]]?ye.searchbar_2[e[0]]:ye.searchbar_2.eng)+"",ut=(void 0!==ye.subtitle_3[e[0]]?ye.subtitle_3[e[0]]:ye.subtitle_3.eng)+"",dt=(void 0!==ye.subsubtitle_1[e[0]]?ye.subsubtitle_1[e[0]]:ye.subsubtitle_1.eng)+"",ht=(void 0!==e[22](e[6].length)[e[0]]?e[22](e[6].length)[e[0]]:e[22](e[6].length).eng)+"",pt=(void 0!==ye.subsubtitle_2[e[0]]?ye.subsubtitle_2[e[0]]:ye.subsubtitle_2.eng)+"",ft=(void 0!==e[26](e[8].length)[e[0]]?e[26](e[8].length)[e[0]]:e[26](e[8].length).eng)+"",mt=(void 0!==ye.subsubtitle_3[e[0]]?ye.subsubtitle_3[e[0]]:ye.subsubtitle_3.eng)+"",gt=(void 0!==ye.engagement_1[e[0]]?ye.engagement_1[e[0]]:ye.engagement_1.eng)+"",vt=(void 0!==ye.subtitle_4[e[0]]?ye.subtitle_4[e[0]]:ye.subtitle_4.eng)+"",yt=(void 0!==e[27](e[15].length,e[14].length)[e[0]]?e[27](e[15].length,e[14].length)[e[0]]:e[27](e[15].length,e[14].length).eng)+"",xt=(void 0!==ye.subsubtitle_4[e[0]]?ye.subsubtitle_4[e[0]]:ye.subsubtitle_4.eng)+"",_t=(void 0!==e[24](e[14].length.toLocaleString())[e[0]]?e[24](e[14].length.toLocaleString())[e[0]]:e[24](e[14].length.toLocaleString()).eng)+"",bt=(void 0!==ye.subsubtitle_5[e[0]]?ye.subsubtitle_5[e[0]]:ye.subsubtitle_5.eng)+"",wt=(void 0!==e[23](e[9].length)[e[0]]?e[23](e[9].length)[e[0]]:e[23](e[9].length).eng)+"",Mt=(void 0!==ye.subsubtitle_6[e[0]]?ye.subsubtitle_6[e[0]]:ye.subsubtitle_6.eng)+"",St=(void 0!==ye.engagement_2[e[0]]?ye.engagement_2[e[0]]:ye.engagement_2.eng)+"",Tt=(void 0!==ye.subsubtitle_7[e[0]]?ye.subsubtitle_7[e[0]]:ye.subsubtitle_7.eng)+"",Et=(void 0!==ye.coordination[e[0]]?ye.coordination[e[0]]:ye.coordination.eng)+"",At=(void 0!==e[25][e[0]]?e[25][e[0]]:e[25].eng)+"";b=new Ed({props:{data:e[12]}}),k=new Dd({props:{placeholders:e[1].examples.queries,documents:e[5],word_mapping:e[7]}}),Q=new Ed({props:{data:e[10]}}),se=new Ed({props:{data:e[11]}}),pe=new Ed({props:{data:e[19]}}),be=new lx({props:{data:e[15],sources:e[14],events:e[8]}}),Le=new Od({props:{data:e[14]}}),ke=new Vd({props:{elements:e[9].map(e_)}});let Lt=e[9],Ct=[];for(let t=0;t<Lt.length;t+=1)Ct[t]=Kx(Zx(e,Lt,t));const Rt=e=>G(Ct[e],1,1,(()=>{Ct[e]=null}));function Pt(t){e[32](t)}function Dt(t){e[33](t)}Je=new qd({props:{previous_callback:e[30],next_callback:e[31],options:e[18]}});let It={};return void 0!==e[2]&&(It.nodes=e[2]),void 0!==e[3]&&(It.vertices=e[3]),Ke=new Bx({props:It}),A.push((()=>W(Ke,"nodes",Pt))),A.push((()=>W(Ke,"vertices",Dt))),{c(){t=f("section"),n=f("h1"),i=m(nt),r=g(),a=new M,s=g(),o=f("h1"),l=m(rt),c=g(),v=new M,y=g(),q(b.$$.fragment),w=g(),S=f("h1"),T=m(st),E=g(),L=new M,C=g(),R=new M,P=g(),D=new M,N=g(),q(k.$$.fragment),z=g(),O=f("h1"),F=m(ut),U=g(),X=f("h1"),Y=m(dt),J=g(),Z=new M,K=g(),q(Q.$$.fragment),ee=g(),te=f("h1"),ne=m(pt),ie=g(),re=new M,ae=g(),q(se.$$.fragment),oe=g(),le=f("h1"),ce=m(mt),ue=g(),de=new M,he=g(),q(pe.$$.fragment),fe=g(),me=f("h1"),ge=m(vt),ve=g(),xe=new M,_e=g(),q(be.$$.fragment),we=g(),Me=f("h1"),Se=m(xt),Te=g(),Ee=new M,Ae=g(),q(Le.$$.fragment),Ce=g(),Re=f("h1"),Pe=m(bt),De=g(),Ie=new M,Ne=g(),q(ke.$$.fragment),ze=g(),Oe=f("h1"),Fe=m(Mt),Ue=g(),Be=new M,He=g();for(let e=0;e<Ct.length;e+=1)Ct[e].c();Ve=g(),Ge=f("h1"),We=m(Tt),qe=g(),je=new M,$e=g(),Xe=new M,Ye=g(),q(Je.$$.fragment),Ze=g(),q(Ke.$$.fragment),x(n,"class","title"),a.a=s,x(o,"class","subtitle"),v.a=y,x(S,"class","subtitle"),L.a=C,R.a=P,D.a=N,x(O,"class","subtitle"),x(X,"class","subsubtitle"),Z.a=K,x(te,"class","subsubtitle"),re.a=ae,x(le,"class","subsubtitle"),de.a=he,x(me,"class","subtitle"),xe.a=_e,x(Me,"class","subsubtitle"),Ee.a=Ae,x(Re,"class","subsubtitle"),Ie.a=Ne,x(Oe,"class","subsubtitle"),Be.a=He,x(Ge,"class","subsubtitle"),je.a=$e,Xe.a=Ye},m(e,h){d(e,t,h),u(t,n),u(n,i),u(t,r),a.m(it,t),u(t,s),u(t,o),u(o,l),u(t,c),v.m(at,t),u(t,y),j(b,t,null),u(t,w),u(t,S),u(S,T),u(t,E),L.m(ot,t),u(t,C),R.m(lt,t),u(t,P),D.m(ct,t),u(t,N),j(k,t,null),u(t,z),u(t,O),u(O,F),u(t,U),u(t,X),u(X,Y),u(t,J),Z.m(ht,t),u(t,K),j(Q,t,null),u(t,ee),u(t,te),u(te,ne),u(t,ie),re.m(ft,t),u(t,ae),j(se,t,null),u(t,oe),u(t,le),u(le,ce),u(t,ue),de.m(gt,t),u(t,he),j(pe,t,null),u(t,fe),u(t,me),u(me,ge),u(t,ve),xe.m(yt,t),u(t,_e),j(be,t,null),u(t,we),u(t,Me),u(Me,Se),u(t,Te),Ee.m(_t,t),u(t,Ae),j(Le,t,null),u(t,Ce),u(t,Re),u(Re,Pe),u(t,De),Ie.m(wt,t),u(t,Ne),j(ke,t,null),u(t,ze),u(t,Oe),u(Oe,Fe),u(t,Ue),Be.m(St,t),u(t,He);for(let e=0;e<Ct.length;e+=1)Ct[e].m(t,null);u(t,Ve),u(t,Ge),u(Ge,We),u(t,qe),je.m(Et,t),u(t,$e),Xe.m(At,t),u(t,Ye),j(Je,t,null),u(t,Ze),j(Ke,t,null),tt=!0},p(e,n){(!tt||1&n[0])&&nt!==(nt=(void 0!==e[4].title[e[0]]?e[4].title[e[0]]:e[4].title.eng)+"")&&_(i,nt),(!tt||1&n[0])&&it!==(it=(void 0!==e[4].partners[e[0]]?e[4].partners[e[0]]:e[4].partners.eng)+"")&&a.p(it),(!tt||1&n[0])&&rt!==(rt=(void 0!==ye.subtitle_1[e[0]]?ye.subtitle_1[e[0]]:ye.subtitle_1.eng)+"")&&_(l,rt),(!tt||1&n[0])&&at!==(at=(void 0!==e[20](e[13])[e[0]]?e[20](e[13])[e[0]]:e[20](e[13]).eng)+"")&&v.p(at),(!tt||1&n[0])&&st!==(st=(void 0!==ye.subtitle_2[e[0]]?ye.subtitle_2[e[0]]:ye.subtitle_2.eng)+"")&&_(T,st),(!tt||1&n[0])&&ot!==(ot=(void 0!==e[21](e[5].length.toLocaleString())[e[0]]?e[21](e[5].length.toLocaleString())[e[0]]:e[21](e[5].length.toLocaleString()).eng)+"")&&L.p(ot),(!tt||1&n[0])&&lt!==(lt=(void 0!==ye.searchbar_1[e[0]]?ye.searchbar_1[e[0]]:ye.searchbar_1.eng)+"")&&R.p(lt),(!tt||1&n[0])&&ct!==(ct=(void 0!==ye.searchbar_2[e[0]]?ye.searchbar_2[e[0]]:ye.searchbar_2.eng)+"")&&D.p(ct);const r={};if(2&n[0]&&(r.placeholders=e[1].examples.queries),k.$set(r),(!tt||1&n[0])&&ut!==(ut=(void 0!==ye.subtitle_3[e[0]]?ye.subtitle_3[e[0]]:ye.subtitle_3.eng)+"")&&_(F,ut),(!tt||1&n[0])&&dt!==(dt=(void 0!==ye.subsubtitle_1[e[0]]?ye.subsubtitle_1[e[0]]:ye.subsubtitle_1.eng)+"")&&_(Y,dt),(!tt||1&n[0])&&ht!==(ht=(void 0!==e[22](e[6].length)[e[0]]?e[22](e[6].length)[e[0]]:e[22](e[6].length).eng)+"")&&Z.p(ht),(!tt||1&n[0])&&pt!==(pt=(void 0!==ye.subsubtitle_2[e[0]]?ye.subsubtitle_2[e[0]]:ye.subsubtitle_2.eng)+"")&&_(ne,pt),(!tt||1&n[0])&&ft!==(ft=(void 0!==e[26](e[8].length)[e[0]]?e[26](e[8].length)[e[0]]:e[26](e[8].length).eng)+"")&&re.p(ft),(!tt||1&n[0])&&mt!==(mt=(void 0!==ye.subsubtitle_3[e[0]]?ye.subsubtitle_3[e[0]]:ye.subsubtitle_3.eng)+"")&&_(ce,mt),(!tt||1&n[0])&&gt!==(gt=(void 0!==ye.engagement_1[e[0]]?ye.engagement_1[e[0]]:ye.engagement_1.eng)+"")&&de.p(gt),(!tt||1&n[0])&&vt!==(vt=(void 0!==ye.subtitle_4[e[0]]?ye.subtitle_4[e[0]]:ye.subtitle_4.eng)+"")&&_(ge,vt),(!tt||1&n[0])&&yt!==(yt=(void 0!==e[27](e[15].length,e[14].length)[e[0]]?e[27](e[15].length,e[14].length)[e[0]]:e[27](e[15].length,e[14].length).eng)+"")&&xe.p(yt),(!tt||1&n[0])&&xt!==(xt=(void 0!==ye.subsubtitle_4[e[0]]?ye.subsubtitle_4[e[0]]:ye.subsubtitle_4.eng)+"")&&_(Se,xt),(!tt||1&n[0])&&_t!==(_t=(void 0!==e[24](e[14].length.toLocaleString())[e[0]]?e[24](e[14].length.toLocaleString())[e[0]]:e[24](e[14].length.toLocaleString()).eng)+"")&&Ee.p(_t),(!tt||1&n[0])&&bt!==(bt=(void 0!==ye.subsubtitle_5[e[0]]?ye.subsubtitle_5[e[0]]:ye.subsubtitle_5.eng)+"")&&_(Pe,bt),(!tt||1&n[0])&&wt!==(wt=(void 0!==e[23](e[9].length)[e[0]]?e[23](e[9].length)[e[0]]:e[23](e[9].length).eng)+"")&&Ie.p(wt),(!tt||1&n[0])&&Mt!==(Mt=(void 0!==ye.subsubtitle_6[e[0]]?ye.subsubtitle_6[e[0]]:ye.subsubtitle_6.eng)+"")&&_(Fe,Mt),(!tt||1&n[0])&&St!==(St=(void 0!==ye.engagement_2[e[0]]?ye.engagement_2[e[0]]:ye.engagement_2.eng)+"")&&Be.p(St),66048&n[0]){let i;for(Lt=e[9],i=0;i<Lt.length;i+=1){const r=Zx(e,Lt,i);Ct[i]?(Ct[i].p(r,n),V(Ct[i],1)):(Ct[i]=Kx(r),Ct[i].c(),V(Ct[i],1),Ct[i].m(t,Ve))}for(B(),i=Lt.length;i<Ct.length;i+=1)Rt(i);H()}(!tt||1&n[0])&&Tt!==(Tt=(void 0!==ye.subsubtitle_7[e[0]]?ye.subsubtitle_7[e[0]]:ye.subsubtitle_7.eng)+"")&&_(We,Tt),(!tt||1&n[0])&&Et!==(Et=(void 0!==ye.coordination[e[0]]?ye.coordination[e[0]]:ye.coordination.eng)+"")&&je.p(Et),(!tt||1&n[0])&&At!==(At=(void 0!==e[25][e[0]]?e[25][e[0]]:e[25].eng)+"")&&Xe.p(At);const s={};!Qe&&4&n[0]&&(Qe=!0,s.nodes=e[2],I((()=>Qe=!1))),!et&&8&n[0]&&(et=!0,s.vertices=e[3],I((()=>et=!1))),Ke.$set(s)},i(e){if(!tt){V(b.$$.fragment,e),V(k.$$.fragment,e),V(Q.$$.fragment,e),V(se.$$.fragment,e),V(pe.$$.fragment,e),V(be.$$.fragment,e),V(Le.$$.fragment,e),V(ke.$$.fragment,e);for(let e=0;e<Lt.length;e+=1)V(Ct[e]);V(Je.$$.fragment,e),V(Ke.$$.fragment,e),tt=!0}},o(e){G(b.$$.fragment,e),G(k.$$.fragment,e),G(Q.$$.fragment,e),G(se.$$.fragment,e),G(pe.$$.fragment,e),G(be.$$.fragment,e),G(Le.$$.fragment,e),G(ke.$$.fragment,e),Ct=Ct.filter(Boolean);for(let e=0;e<Ct.length;e+=1)G(Ct[e]);G(Je.$$.fragment,e),G(Ke.$$.fragment,e),tt=!1},d(e){e&&h(t),$(b),$(k),$(Q),$(se),$(pe),$(be),$(Le),$(ke),p(Ct,e),$(Je),$(Ke)}}}const e_=e=>e.description,t_=e=>e.interactions.count;function n_(e,t,n){let{lang:i}=t,{dataset:r}=t,{params:a}=t;const s=ye.lebanon,{sources:o,posts:l,submissions:c,lexicon:u,dictionary:d,events:h,categories:p,lexicon_table:f,events_table:m,political_network_table:g,nbr_of_accounts:v,min_date:y,max_date:x,belligerents:_,submissions_of_interest:b}=r,w=Vx(b);let M,S;function T(e){const t=c.filter((t=>t.categories.includes(e)));n(2,[M,S]=Gx(t,p,o,15),M,n(3,S))}const E=p.map((e=>({key:e.key,value:e.name_count})));return e.$$set=e=>{"lang"in e&&n(0,i=e.lang),"dataset"in e&&n(28,r=e.dataset),"params"in e&&n(1,a=e.params)},[i,a,M,S,s,l,u,d,h,p,f,m,g,v,_,b,w,T,E,[["Type","Minimum Value"],["Views","500"],["Reactions","200"],["Comments","200"],["Shares","100"]],e=>({eng:`<p>The participants identified ${e} Telegram, Facebook, Twitter and Youtube accounts as being part of the political network.</p>`,por:`<p>Os participantes identificaram ${e} contas pertencentes à rede política nas plataformas Telegram, Facebook, Twitter e Youtube.</p>`,ara:`<p>حدّد المشاركون ${e} حساباً على تيليغرام، فايسبوك، تويتر، ويوتيوب كحسابات تشكّل جزءاً من شبكة سياسية.</p>`}),e=>({eng:`<p>Data collection returned a total of ${e} posts between ${y} and ${x}.</p>`,por:`<p>No total, foram coletadas ${e} postagens entre ${y} e ${x}.</p>`,ara:`<p>نتج عن جمع البيانات ${e} ${x}تدوينة بين كانون ${y} و .</p>`}),e=>({eng:`<p>Participants came up with a list of ${e} words prone to be used in disinformation. Only posts containing at least one of these keywords were kept.</p>`,por:`<p>Os participantes desenvolveram uma lista com ${e} palavras associadas a práticas de desinformação.</p>`,ara:`<p>اقترح المشاركون قائمةً من ${e} كلمة اعتبروا أنها ميالة لأن تُستخدم ضمن المعلومات المضللة. </p>`}),e=>({eng:`<p> We reviewed all the posts of interest and categorized them into ${e} narratives.</p>`,por:`<p>Todas as postagens de interesse foram revisadas e classificadas em ${e} narrativas.</p>`,ara:`<p>راجعنا كافة التدوينات ذات الاهتمام وصنّفناها ضمن ${e} سرديات. </p>`}),e=>({eng:`<p>Here is a short description of the ${e} state-affiliated accounts that published disinformation.</p>`,por:`<p>Abaixo, uma breve descrição de todas as ${e} contas associadas ao Estado que publicaram desinformação.</p>`,ara:`<p>في ما يلي وصف وجيز عن ${e} حساباً تابعاً للدولة نشر معلومات مضللة.</p>`}),()=>({eng:"<p>If there is a link between two belligerents it means they published a message containing the same keyword within a 15 days interval.</p>",por:"<p>Cada vínculo entre dois “beligerantes” é um sinal de que ambos publicaram uma mensagem contendo a mesma palavra-chave num intervalo de 15 dias.</p>",ara:"<p>إذا كان هناك خط يربط بين خصمين، فهذا يعني أنهما نشرا رسالةً تتضمّن الكلمة الرئيسية نفسها خلال فترة 15 يوماً. </p>"}),e=>({eng:`<p>The shock timeline developed by the participants is composed of ${e} key events. We only considered social media posts published during the 21 days following each event.</p>`,por:`<p>A linha do tempo de choque desenvolvida pelos participantes é composta por ${e} eventos principais. Consideramos apenas postagens de mídia social publicadas durante os 21 dias seguintes a cada evento.</p>`,ara:`<p>يتكون الجدول الزمني للصدمة الذي وضعه المشاركون من ${e} أحداث رئيسية. نظرنا فقط في منشورات وسائل التواصل الاجتماعي المنشورة خلال 21 يومًا بعد كل حدث.</p>`}),(e,t)=>({eng:`<p>Using automated lexical, temporal and engagement filters, in combination with human reviews we uncovered a total of ${e} posts containing disinformation from ${t} belligerents.</p>`,por:`<p>Usando filtros automatizados lexicais, temporais e de engajamento, em combinação com análises humanas, descobrimos um total de ${e} postagens contendo desinformação de ${t} beligerantes.</p>`,ara:`<p>باستخدام عوامل التصفية التلقائية المعجمية والزمانية والمشاركة ، بالإضافة إلى المراجعات البشرية ، اكتشفنا ما مجموعه ${e} منشورات تحتوي على معلومات مضللة من ${t} متحاربين.</p>`}),r,(e,t)=>t.categories.includes(e.key),e=>T(e),e=>T(e),function(e){M=e,n(2,M)},function(e){S=e,n(3,S)}]}class i_ extends J{constructor(e){super(),Y(this,e,n_,Qx,a,{lang:0,dataset:28,params:1},null,[-1,-1])}}function r_(e){let t,n,i,r,a,s,o,l,c,u,p,m,v,y,_,b,w,M;i=new Xu({props:{posts:e[6],lang:e[0]}});const S=[s_,a_],T=[];function E(e,t){return e[2]?0:1}a=E(e),s=T[a]=S[a](e);const A=[l_,o_],L=[];function C(e,t){return e[3]?0:1}return l=C(e),c=L[l]=A[l](e),v=new id({props:{lang:e[0]}}),w=new ld({props:{lang:e[0]}}),{c(){t=f("div"),n=g(),q(i.$$.fragment),r=g(),s.c(),o=g(),c.c(),u=g(),p=f("div"),m=g(),q(v.$$.fragment),y=g(),_=f("div"),b=g(),q(w.$$.fragment),x(t,"class","separator"),x(p,"class","separator"),x(_,"class","separator")},m(e,s){d(e,t,s),d(e,n,s),j(i,e,s),d(e,r,s),T[a].m(e,s),d(e,o,s),L[l].m(e,s),d(e,u,s),d(e,p,s),d(e,m,s),j(v,e,s),d(e,y,s),d(e,_,s),d(e,b,s),j(w,e,s),M=!0},p(e,t){const n={};64&t&&(n.posts=e[6]),1&t&&(n.lang=e[0]),i.$set(n);let r=a;a=E(e),a===r?T[a].p(e,t):(B(),G(T[r],1,1,(()=>{T[r]=null})),H(),s=T[a],s?s.p(e,t):(s=T[a]=S[a](e),s.c()),V(s,1),s.m(o.parentNode,o));let d=l;l=C(e),l===d?L[l].p(e,t):(B(),G(L[d],1,1,(()=>{L[d]=null})),H(),c=L[l],c?c.p(e,t):(c=L[l]=A[l](e),c.c()),V(c,1),c.m(u.parentNode,u));const h={};1&t&&(h.lang=e[0]),v.$set(h);const p={};1&t&&(p.lang=e[0]),w.$set(p)},i(e){M||(V(i.$$.fragment,e),V(s),V(c),V(v.$$.fragment,e),V(w.$$.fragment,e),M=!0)},o(e){G(i.$$.fragment,e),G(s),G(c),G(v.$$.fragment,e),G(w.$$.fragment,e),M=!1},d(e){e&&h(t),e&&h(n),$(i,e),e&&h(r),T[a].d(e),e&&h(o),L[l].d(e),e&&h(u),e&&h(p),e&&h(m),$(v,e),e&&h(y),e&&h(_),e&&h(b),$(w,e)}}}function a_(t){let n,i;return n=new su({}),{c(){q(n.$$.fragment)},m(e,t){j(n,e,t),i=!0},p:e,i(e){i||(V(n.$$.fragment,e),i=!0)},o(e){G(n.$$.fragment,e),i=!1},d(e){$(n,e)}}}function s_(e){let t,n,i,r;return i=new Jx({props:{lang:e[0],params:e[4],dataset:e[7]}}),{c(){t=f("div"),n=g(),q(i.$$.fragment),x(t,"class","separator")},m(e,a){d(e,t,a),d(e,n,a),j(i,e,a),r=!0},p(e,t){const n={};1&t&&(n.lang=e[0]),16&t&&(n.params=e[4]),128&t&&(n.dataset=e[7]),i.$set(n)},i(e){r||(V(i.$$.fragment,e),r=!0)},o(e){G(i.$$.fragment,e),r=!1},d(e){e&&h(t),e&&h(n),$(i,e)}}}function o_(t){let n,i;return n=new su({}),{c(){q(n.$$.fragment)},m(e,t){j(n,e,t),i=!0},p:e,i(e){i||(V(n.$$.fragment,e),i=!0)},o(e){G(n.$$.fragment,e),i=!1},d(e){$(n,e)}}}function l_(e){let t,n,i,r;return i=new i_({props:{lang:e[0],params:e[5],dataset:e[8]}}),{c(){t=f("div"),n=g(),q(i.$$.fragment),x(t,"class","separator")},m(e,a){d(e,t,a),d(e,n,a),j(i,e,a),r=!0},p(e,t){const n={};1&t&&(n.lang=e[0]),32&t&&(n.params=e[5]),256&t&&(n.dataset=e[8]),i.$set(n)},i(e){r||(V(i.$$.fragment,e),r=!0)},o(e){G(i.$$.fragment,e),r=!1},d(e){e&&h(t),e&&h(n),$(i,e)}}}function c_(e){let t,n,i,r,a,s,o,l,c,p,m,v,y;function _(t){e[10](t)}n=new cu({props:{lang:e[0]}});let b={};void 0!==e[0]&&(b.lang=e[0]),s=new fu({props:b}),A.push((()=>W(s,"lang",_))),m=new bu({props:{lang:e[0]}});let w=e[1]&&r_(e);return{c(){t=f("main"),q(n.$$.fragment),i=g(),r=f("div"),a=g(),q(s.$$.fragment),l=g(),c=f("div"),p=g(),q(m.$$.fragment),v=g(),w&&w.c(),x(r,"class","separator"),x(c,"class","separator"),x(t,"class","svelte-vo2gtc")},m(e,o){d(e,t,o),j(n,t,null),u(t,i),u(t,r),u(t,a),j(s,t,null),u(t,l),u(t,c),u(t,p),j(m,t,null),u(t,v),w&&w.m(t,null),y=!0},p(e,[i]){const r={};1&i&&(r.lang=e[0]),n.$set(r);const a={};!o&&1&i&&(o=!0,a.lang=e[0],I((()=>o=!1))),s.$set(a);const l={};1&i&&(l.lang=e[0]),m.$set(l),e[1]?w?(w.p(e,i),2&i&&V(w,1)):(w=r_(e),w.c(),V(w,1),w.m(t,null)):w&&(B(),G(w,1,1,(()=>{w=null})),H())},i(e){y||(V(n.$$.fragment,e),V(s.$$.fragment,e),V(m.$$.fragment,e),V(w),y=!0)},o(e){G(n.$$.fragment,e),G(s.$$.fragment,e),G(m.$$.fragment,e),G(w),y=!1},d(e){e&&h(t),$(n),$(s),$(m),w&&w.d()}}}function u_(e,t,n){let i,r,a,s,{lang:o}=t,{isMobile:l}=t,c=!1,u=!1,d=!1,h=null;return T((async()=>{n(4,i=await iu("brazil")),n(5,r=await iu("lebanon")),n(6,h=ru(i.examples.lexicon,r.examples.lexicon)),n(1,c=!0);const[e,t,l]=await eu("brazil"),[p,f,m]=await tu("brazil"),g={sources:e,posts_zipped:await nu("brazil"),submissions:p,lexicon:t,events:l,categories:m,dictionary:f,OF_INTEREST:te,MIN_NBR_OF_PUBLICATION_OF_INTEREST:1,lang:o};var v=new Worker("assets/scripts/task_preproc.js",{type:"module"});v.addEventListener("message",(function(e){n(7,a=e.data),n(2,u=!0)}),!1),v.postMessage(g);const[y,x,_]=await eu("lebanon"),[b,w,M]=await tu("lebanon"),S={sources:y,posts_zipped:await nu("lebanon"),submissions:b,lexicon:x,events:_,categories:M,dictionary:w,OF_INTEREST:te,MIN_NBR_OF_PUBLICATION_OF_INTEREST:1,lang:o};var T=new Worker("assets/scripts/task_preproc.js",{type:"module"});T.addEventListener("message",(function(e){n(8,s=e.data),n(3,d=!0)}),!1),T.postMessage(S)})),e.$$set=e=>{"lang"in e&&n(0,o=e.lang),"isMobile"in e&&n(9,l=e.isMobile)},[o,c,u,d,i,r,h,a,s,l,function(e){o=e,n(0,o)}]}class d_ extends J{constructor(e){super(),Y(this,e,u_,c_,a,{lang:0,isMobile:9})}}function h_(t){let n,i;return n=new Ce({props:{lang:t[1]}}),{c(){q(n.$$.fragment)},m(e,t){j(n,e,t),i=!0},p:e,i(e){i||(V(n.$$.fragment,e),i=!0)},o(e){G(n.$$.fragment,e),i=!1},d(e){$(n,e)}}}function p_(e){let t,n,i,r,a,s,o,l,c,u;i=new he({props:{isMobile:e[2],lang:e[1]}}),a=new Xc({}),o=new d_({props:{isMobile:e[2],lang:e[1]}});let p=e[0]&&h_(e);return{c(){t=f("title"),t.textContent=`${K}`,n=g(),q(i.$$.fragment),r=g(),q(a.$$.fragment),s=g(),q(o.$$.fragment),l=g(),p&&p.c(),c=v()},m(e,h){d(e,t,h),d(e,n,h),j(i,e,h),d(e,r,h),j(a,e,h),d(e,s,h),j(o,e,h),d(e,l,h),p&&p.m(e,h),d(e,c,h),u=!0},p(e,[t]){e[0]?p?(p.p(e,t),1&t&&V(p,1)):(p=h_(e),p.c(),V(p,1),p.m(c.parentNode,c)):p&&(B(),G(p,1,1,(()=>{p=null})),H())},i(e){u||(V(i.$$.fragment,e),V(a.$$.fragment,e),V(o.$$.fragment,e),V(p),u=!0)},o(e){G(i.$$.fragment,e),G(a.$$.fragment,e),G(o.$$.fragment,e),G(p),u=!1},d(e){e&&h(t),e&&h(n),$(i,e),e&&h(r),$(a,e),e&&h(s),$(o,e),e&&h(l),p&&p.d(e),e&&h(c)}}}function f_(e,t,n){const i=function(){const e={};let t=window.location.href.split("?");return 2!==t.length||(t=t[1],t=t.split("&"),t.forEach((t=>{if(!t.includes("="))return;const n=t.split("=");2===n.length&&(e[n[0]]=n[1])}))),e}().lang||"eng",r=ne();let a=0,s=0,o=!1;return T((()=>{s=window.innerHeight,setTimeout((()=>{const e=document.querySelector("main");e.addEventListener("scroll",(function(t){a=e.scrollTop,n(0,o=a>.1*s);const i=document.getElementsByClassName("tooltip");for(let e of i)e.style.display="none"}))}),200)})),[o,i,r]}return new class extends J{constructor(e){super(),Y(this,e,f_,p_,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
